// threejs.org/license
'use strict';var THREE={REVISION:"79"};"function"===typeof define&&define.amd?define("three",THREE):"undefined"!==typeof exports&&"undefined"!==typeof module&&(module.exports=THREE);void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});
void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b}}();
Object.assign(THREE,{MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2},CullFaceNone:0,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,BasicShadowMap:0,PCFShadowMap:1,PCFSoftShadowMap:2,FrontSide:0,BackSide:1,DoubleSide:2,FlatShading:1,SmoothShading:2,NoColors:0,FaceColors:1,VertexColors:2,NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5,AddEquation:100,SubtractEquation:101,ReverseSubtractEquation:102,MinEquation:103,
MaxEquation:104,ZeroFactor:200,OneFactor:201,SrcColorFactor:202,OneMinusSrcColorFactor:203,SrcAlphaFactor:204,OneMinusSrcAlphaFactor:205,DstAlphaFactor:206,OneMinusDstAlphaFactor:207,DstColorFactor:208,OneMinusDstColorFactor:209,SrcAlphaSaturateFactor:210,NeverDepth:0,AlwaysDepth:1,LessDepth:2,LessEqualDepth:3,EqualDepth:4,GreaterEqualDepth:5,GreaterDepth:6,NotEqualDepth:7,MultiplyOperation:0,MixOperation:1,AddOperation:2,NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,Uncharted2ToneMapping:3,
CineonToneMapping:4,UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307,RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002,NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008,UnsignedByteType:1009,
ByteType:1010,ShortType:1011,UnsignedShortType:1012,IntType:1013,UnsignedIntType:1014,FloatType:1015,HalfFloatType:1025,UnsignedShort4444Type:1016,UnsignedShort5551Type:1017,UnsignedShort565Type:1018,AlphaFormat:1019,RGBFormat:1020,RGBAFormat:1021,LuminanceFormat:1022,LuminanceAlphaFormat:1023,RGBEFormat:THREE.RGBAFormat,DepthFormat:1026,RGB_S3TC_DXT1_Format:2001,RGBA_S3TC_DXT1_Format:2002,RGBA_S3TC_DXT3_Format:2003,RGBA_S3TC_DXT5_Format:2004,RGB_PVRTC_4BPPV1_Format:2100,RGB_PVRTC_2BPPV1_Format:2101,
RGBA_PVRTC_4BPPV1_Format:2102,RGBA_PVRTC_2BPPV1_Format:2103,RGB_ETC1_Format:2151,LoopOnce:2200,LoopRepeat:2201,LoopPingPong:2202,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,ZeroCurvatureEnding:2400,ZeroSlopeEnding:2401,WrapAroundEnding:2402,TrianglesDrawMode:0,TriangleStripDrawMode:1,TriangleFanDrawMode:2,LinearEncoding:3E3,sRGBEncoding:3001,GammaEncoding:3007,RGBEEncoding:3002,LogLuvEncoding:3003,RGBM7Encoding:3004,RGBM16Encoding:3005,RGBDEncoding:3006,BasicDepthPacking:3200,
RGBADepthPacking:3201});THREE.Color=function(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&(d-=1);return d<1/6?a+6*(c-a)*
d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=THREE.Math.euclideanModulo(b,1);c=THREE.Math.clamp(c,0,1);d=THREE.Math.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=
/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){var d=
parseFloat(c[1])/360,e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&
(c=THREE.ColorKeywords[a],void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);var c=0<b?1/b:1;this.r=Math.pow(a.r,c);this.g=Math.pow(a.g,c);this.b=Math.pow(a.b,
c);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=
(f+e)/2;if(f===e)f=g=0;else{var k=e-f,f=.5>=h?k/(e+f):k/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case c:g=(d-b)/k+2;break;case d:g=(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=
a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===
this.b},fromArray:function(a,b){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},
copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),g=Math.sin(a._y/2),h=Math.sin(a._z/2),k=a.order;"XYZ"===k?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"YXZ"===
k?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):"ZXY"===k?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"ZYX"===k?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):"YZX"===k?(this._x=f*d*e+c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e-f*g*h):"XZY"===k&&(this._x=f*d*e-c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e+f*g*h);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6],b=b[10],l=c+f+b;0<l?(c=.5/Math.sqrt(l+1),this._w=.25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=
.25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,h=b._y,k=b._z,l=b._w;this._x=c*l+f*g+d*k-e*h;this._y=d*l+f*h+e*g-c*k;this._z=e*l+f*k+c*h-d*g;this._w=f*l-c*g-d*h-e*k;this.onChangeCallback();
return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;var h=Math.sqrt(1-g*g);if(.001>Math.abs(h))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var k=Math.atan2(h,g),g=Math.sin((1-b)*k)/h,h=Math.sin(b*
k)/h;this._w=f*g+this._w*h;this._x=c*g+this._x*h;this._y=d*g+this._y*h;this._z=e*g+this._z*h;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=
a;return this},onChangeCallback:function(){}};
Object.assign(THREE.Quaternion,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],k=c[d+1],l=c[d+2];c=c[d+3];d=e[f+0];var m=e[f+1],p=e[f+2];e=e[f+3];if(c!==e||h!==d||k!==m||l!==p){f=1-g;var n=h*d+k*m+l*p+c*e,q=0<=n?1:-1,r=1-n*n;r>Number.EPSILON&&(r=Math.sqrt(r),n=Math.atan2(r,n*q),f=Math.sin(f*n)/r,g=Math.sin(g*n)/r);q*=g;h=h*f+d*q;k=k*f+m*q;l=l*f+p*q;c=c*f+e*q;f===1-g&&(g=1/Math.sqrt(h*h+k*k+l*l+c*c),h*=g,k*=g,l*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=l;
a[b+3]=c}});THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},
addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,
this.y*=a):this.y=this.x=0;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a,b;return function(c,d){void 0===
a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);
this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},
distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},
fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];return this},rotateAround:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=this.x-a.x,f=this.y-a.y;this.x=e*c-f*d+a.x;this.y=e*d+f*c+a.y;return this}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;
case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,
b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},
multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&
console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},
applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=
a.w;var h=a*b+f*d-g*c,k=a*c+g*b-e*d,l=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*-e+k*-g-l*-f;this.y=k*a+b*-f+l*-e-h*-g;this.z=l*a+b*-g+h*-f-k*-e;return this},project:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),
transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=
Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=
Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=
-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=
(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;this.x=d*h-e*g;this.y=e*f-c*h;
this.z=c*g-d*f;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(THREE.Math.clamp(a,
-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},
setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){if("number"===typeof a){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var c=a;a=b;b=c}return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);
this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];return this}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+
a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);
this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=
a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):this.w=this.z=this.y=this.x=0;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=
a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var f=a[8],g=a[1],h=a[5],k=a[9];c=a[2];b=a[6];var l=a[10];if(.01>Math.abs(d-g)&&.01>Math.abs(f-c)&&.01>
Math.abs(k-b)){if(.1>Math.abs(d+g)&&.1>Math.abs(f+c)&&.1>Math.abs(k+b)&&.1>Math.abs(e+h+l-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;h=(h+1)/2;l=(l+1)/2;d=(d+g)/4;f=(f+c)/4;k=(k+b)/4;e>h&&e>l?.01>e?(b=0,d=c=.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):h>l?.01>h?(b=.707106781,c=0,d=.707106781):(c=Math.sqrt(h),b=d/c,d=k/c):.01>l?(c=b=.707106781,d=0):(d=Math.sqrt(l),b=f/d,c=k/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-k)*(b-k)+(f-c)*(f-c)+(g-d)*(g-d));.001>Math.abs(a)&&(a=1);this.x=(b-k)/
a;this.y=(f-c)/a;this.z=(g-d)/a;this.w=Math.acos((e+h+l-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));
this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=
Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*
a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-
this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+
c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=a.array[b+3];return this}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,
this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=THREE.Math.clamp,e=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],k=e[5],l=e[9],m=e[2],p=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-l,e),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(p,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?
(this._y=Math.atan2(g,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-m,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-m,e),this._z=Math.atan2(-f,k)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._x=Math.atan2(p,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,k))):"YZX"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-l,k),this._y=Math.atan2(-m,a)):(this._x=
0,this._y=Math.atan2(g,e))):"XZY"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(p,k),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-l,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,
b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;
a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},
at:function(a,b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);
return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&
a.max.equals(this.max)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.length;h<k;h+=3){var l=a[h],m=a[h+1],p=a[h+2];l<b&&(b=l);m<c&&(c=m);p<d&&(d=p);l>e&&(e=l);m>f&&(f=m);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g)},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=
new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(b){var e=b.geometry;if(void 0!==e)if(e instanceof THREE.Geometry)for(var e=e.vertices,f=0,g=e.length;f<g;f++)a.copy(e[f]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a);else if(e instanceof THREE.BufferGeometry&&(g=e.attributes.position,
void 0!==g)){var h;g instanceof THREE.InterleavedBufferAttribute?(e=g.data.array,f=g.offset,h=g.data.stride):(e=g.array,f=0,h=3);for(g=e.length;f<g;f+=h)a.fromArray(e,f),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)}});return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<
this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||
a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||
a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){var b,c;0<a.normal.x?(b=a.normal.x*this.min.x,c=a.normal.x*this.max.x):(b=a.normal.x*this.max.x,c=a.normal.x*this.min.x);0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,
c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=
this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){if(this.isEmpty())return this;a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);
a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);
return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,f,g,h,k){var l=this.elements;l[0]=a;l[1]=d;l[2]=g;l[3]=b;l[4]=e;l[5]=h;l[6]=c;l[7]=f;l[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);
return this},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix3(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(a.x,a.y,a.z);return b}}(),
multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],a=a[8];return b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*h},getInverse:function(a,b){a instanceof THREE.Matrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var c=a.elements,d=this.elements,e=c[0],f=c[1],g=c[2],h=c[3],k=c[4],l=c[5],m=c[6],p=c[7],
c=c[8],n=c*k-l*p,q=l*m-c*h,r=p*h-k*m,s=e*n+f*q+g*r;if(0===s){if(b)throw Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return this.identity()}s=1/s;d[0]=n*s;d[1]=(g*p-c*f)*s;d[2]=(l*f-g*k)*s;d[3]=q*s;d[4]=(c*e-g*m)*s;d[5]=(g*h-l*e)*s;d[6]=r*s;d[7]=(f*m-p*e)*s;d[8]=(k*e-f*h)*s;return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=
b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");return this.toArray(a,b)},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(a,b){void 0===
a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}};THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,g,h,k,l,m,p,n,q,r,s){var v=this.elements;v[0]=a;v[4]=b;v[8]=c;v[12]=d;v[1]=e;v[5]=f;v[9]=g;v[13]=h;v[2]=k;v[6]=l;v[10]=m;v[14]=p;v[3]=n;v[7]=q;v[11]=r;v[15]=s;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(a){this.elements.set(a.elements);return this},copyPosition:function(a){var b=this.elements;a=a.elements;
b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,
2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){a=f*h;var k=f*e,l=c*h,m=c*e;b[0]=g*h;b[4]=
-g*e;b[8]=d;b[1]=k+l*d;b[5]=a-m*d;b[9]=-c*g;b[2]=m-a*d;b[6]=l+k*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,k=g*e,l=d*h,m=d*e,b[0]=a+m*c,b[4]=l*c-k,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=k*c-l,b[6]=m+a*c,b[10]=f*g):"ZXY"===a.order?(a=g*h,k=g*e,l=d*h,m=d*e,b[0]=a-m*c,b[4]=-f*e,b[8]=l+k*c,b[1]=k+l*c,b[5]=f*h,b[9]=m-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,k=f*e,l=c*h,m=c*e,b[0]=g*h,b[4]=l*d-k,b[8]=a*d+m,b[1]=g*e,b[5]=m*d+a,b[9]=k*d-l,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,k=f*
d,l=c*g,m=c*d,b[0]=g*h,b[4]=m-a*e,b[8]=l*e+k,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=k*e+l,b[10]=a-m*e):"XZY"===a.order&&(a=f*g,k=f*d,l=c*g,m=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+m,b[5]=f*h,b[9]=k*e-l,b[2]=l*e-k,b[6]=c*h,b[10]=m*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,k=e+e;a=c*g;var l=c*h,c=c*k,m=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(m+e);b[4]=l-f;b[8]=c+h;b[1]=l+
f;b[5]=1-(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+m);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,b,c;return function(d,e,f){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3);var g=this.elements;c.subVectors(d,e).normalize();0===c.lengthSq()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.lengthSq()&&(c.z+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;
g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],k=c[12],l=c[1],m=c[5],p=c[9],n=c[13],q=c[2],r=c[6],s=c[10],v=c[14],t=c[3],u=c[7],D=c[11],c=c[15],
w=d[0],I=d[4],z=d[8],y=d[12],A=d[1],G=d[5],B=d[9],F=d[13],J=d[2],P=d[6],K=d[10],H=d[14],M=d[3],O=d[7],N=d[11],d=d[15];e[0]=f*w+g*A+h*J+k*M;e[4]=f*I+g*G+h*P+k*O;e[8]=f*z+g*B+h*K+k*N;e[12]=f*y+g*F+h*H+k*d;e[1]=l*w+m*A+p*J+n*M;e[5]=l*I+m*G+p*P+n*O;e[9]=l*z+m*B+p*K+n*N;e[13]=l*y+m*F+p*H+n*d;e[2]=q*w+r*A+s*J+v*M;e[6]=q*I+r*G+s*P+v*O;e[10]=q*z+r*B+s*K+v*N;e[14]=q*y+r*F+s*H+v*d;e[3]=t*w+u*A+D*J+c*M;e[7]=t*I+u*G+D*P+c*O;e[11]=t*z+u*B+D*K+c*N;e[15]=t*y+u*F+D*H+c*d;return this},multiplyToArray:function(a,b,
c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&
(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix4(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(a.x,a.y,a.z);return b}}(),determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=
a[5],h=a[9],k=a[13],l=a[2],m=a[6],p=a[10],n=a[14];return a[3]*(+e*h*m-d*k*m-e*g*p+c*k*p+d*g*n-c*h*n)+a[7]*(+b*h*n-b*k*p+e*f*p-d*f*n+d*k*l-e*h*l)+a[11]*(+b*k*m-b*g*n-e*f*m+c*f*n+e*g*l-c*k*l)+a[15]*(-d*g*l-b*h*m+b*g*p+d*f*m-c*f*p+c*h*l)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");
return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new THREE.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return a.setFromMatrixColumn(this,3)}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[1],g=d[2],h=d[3],k=d[4],l=d[5],m=d[6],p=d[7],n=d[8],q=d[9],r=d[10],s=d[11],v=d[12],
t=d[13],u=d[14],d=d[15],D=q*u*p-t*r*p+t*m*s-l*u*s-q*m*d+l*r*d,w=v*r*p-n*u*p-v*m*s+k*u*s+n*m*d-k*r*d,I=n*t*p-v*q*p+v*l*s-k*t*s-n*l*d+k*q*d,z=v*q*m-n*t*m-v*l*r+k*t*r+n*l*u-k*q*u,y=e*D+f*w+g*I+h*z;if(0===y){if(b)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return this.identity()}y=1/y;c[0]=D*y;c[1]=(t*r*h-q*u*h-t*g*s+f*u*s+q*g*d-f*r*d)*y;c[2]=(l*u*h-t*m*h+t*g*p-f*u*p-l*g*d+f*m*d)*y;c[3]=
(q*m*h-l*r*h-q*g*p+f*r*p+l*g*s-f*m*s)*y;c[4]=w*y;c[5]=(n*u*h-v*r*h+v*g*s-e*u*s-n*g*d+e*r*d)*y;c[6]=(v*m*h-k*u*h-v*g*p+e*u*p+k*g*d-e*m*d)*y;c[7]=(k*r*h-n*m*h+n*g*p-e*r*p-k*g*s+e*m*s)*y;c[8]=I*y;c[9]=(v*q*h-n*t*h-v*f*s+e*t*s+n*f*d-e*q*d)*y;c[10]=(k*t*h-v*l*h+v*f*p-e*t*p-k*f*d+e*l*d)*y;c[11]=(n*l*h-k*q*h-n*f*p+e*q*p+k*f*s-e*l*s)*y;c[12]=z*y;c[13]=(n*t*g-v*q*g+v*f*r-e*t*r-n*f*u+e*q*u)*y;c[14]=(v*l*g-k*t*g-v*f*m+e*t*m+k*f*u-e*l*u)*y;c[15]=(k*q*g-n*l*g+n*f*m-e*q*m-k*f*r+e*l*r)*y;return this},scale:function(a){var b=
this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);
return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,k=e*f,l=e*g;this.set(k*f+c,k*g-d*h,k*h+d*g,0,k*g+d*h,l*g+c,l*h-d*f,0,k*h-d*g,l*h+d*f,e*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,
0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a,b;return function(c,d,e){void 0===a&&(a=new THREE.Vector3,b=new THREE.Matrix4);var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);c=1/g;var f=1/h,l=1/k;b.elements[0]*=c;b.elements[1]*=c;
b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=l;b.elements[9]*=l;b.elements[10]*=l;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=k;return this}}(),makeFrustum:function(a,b,c,d,e,f){var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(d-c);g[9]=(d+c)/(d-c);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREE.Math.DEG2RAD*a*.5);var e=
-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),k=1/(c-d),l=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*l;g[14]=-((f+e)*l);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a){this.elements.set(a);return this},toArray:function(a,b){void 0===a&&(a=[]);
void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,
a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);
return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),l=c.dot(this.direction),m=-c.dot(b),p=c.lengthSq(),n=Math.abs(1-k*k),q;0<n?(d=k*m-l,e=k*l-m,q=h*n,0<=d?e>=-q?e<=q?(h=1/n,d*=h,e*=h,k=d*(d+k*e+2*l)+e*(k*d+e+2*m)+p):(e=h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*
m)+p):(e=-h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*m)+p):e<=-q?(d=Math.max(0,-(-k*h+l)),e=0<d?-h:Math.min(Math.max(-h,-m),h),k=-d*d+e*(e+2*m)+p):e<=q?(d=0,e=Math.min(Math.max(-h,-m),h),k=e*(e+2*m)+p):(d=Math.max(0,-(k*h+l)),e=0<d?h:Math.min(Math.max(-h,-m),h),k=-d*d+e*(e+2*m)+p)):(e=0<k?-h:h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*m)+p);f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return k}}(),intersectSphere:function(){var a=new THREE.Vector3;return function(b,
c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d,f=b.radius*b.radius;if(e>f)return null;f=Math.sqrt(f-e);e=d-f;d+=f;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=
this.distanceToPlane(a);return null===c?null:this.at(c,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c,d,e,f,g;d=1/this.direction.x;f=1/this.direction.y;g=1/this.direction.z;var h=this.origin;0<=d?(c=(a.min.x-h.x)*d,d*=a.max.x-h.x):(c=(a.max.x-h.x)*d,d*=a.min.x-h.x);0<=f?(e=(a.min.y-h.y)*f,f*=a.max.y-h.y):(e=(a.max.y-h.y)*f,f*=a.min.y-h.y);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==
d)d=f;0<=g?(e=(a.min.z-h.z)*g,g*=a.max.z-h.z):(e=(a.max.z-h.z)*g,g*=a.min.z-h.z);if(c>g||e>d)return null;if(e>c||c!==c)c=e;if(g<d||d!==d)d=g;return 0>d?null:this.at(0<=c?c:d,b)},intersectsBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,g,h,k){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);
if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}};
THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,f=0,g=b.length;f<g;f++)e=Math.max(e,d.distanceToSquared(b[f]));this.radius=Math.sqrt(e);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},
empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-a.constant)<=this.radius},clampPoint:function(a,b){var c=
this.center.distanceToSquared(a),d=b||new THREE.Vector3;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&
a.radius===this.radius}};THREE.Frustum=function(a,b,c,d,e,f){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==f?f:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],l=c[7],m=c[8],p=c[9],n=c[10],q=c[11],r=c[12],s=c[13],v=c[14],
c=c[15];b[0].setComponents(f-a,l-g,q-m,c-r).normalize();b[1].setComponents(f+a,l+g,q+m,c+r).normalize();b[2].setComponents(f+d,l+h,q+p,c+s).normalize();b[3].setComponents(f-d,l-h,q-p,c-s).normalize();b[4].setComponents(f-e,l-k,q-n,c-v).normalize();b[5].setComponents(f+e,l+k,q+n,c+v).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),
intersectsSprite:function(){var a=new THREE.Sphere;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?
c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>g&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,
b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),f=this.normal.dot(e);if(0===f){if(0===this.distanceToPoint(b.start))return d.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0:d.copy(e).multiplyScalar(f).add(b.start)}}(),intersectsLine:function(a){var b=
this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Matrix3;return function(c,d){var e=this.coplanarPoint(a).applyMatrix4(c),f=d||b.getNormalMatrix(c),f=this.normal.applyMatrix3(f).normalize();
this.constant=-e.dot(f);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}};THREE.Spherical=function(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this};
THREE.Spherical.prototype={constructor:THREE.Spherical,set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius.copy(a.radius);this.phi.copy(a.phi);this.theta.copy(a.theta);return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=
Math.acos(THREE.Math.clamp(a.y/this.radius,-1,1)));return this}};
THREE.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]="-":14===e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,
d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");return Math.random()},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*
(.5-Math.random())},degToRad:function(a){return a*THREE.Math.DEG2RAD},radToDeg:function(a){return a*THREE.Math.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};
THREE.Spline=function(a){function b(a,b,c,d,e,f,g){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,f,g,h,k,l,m,p,n;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;f=Math.floor(e);g=e-f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>this.points.length-2?this.points.length-1:f+1;c[3]=f>this.points.length-3?this.points.length-1:f+
2;l=this.points[c[0]];m=this.points[c[1]];p=this.points[c[2]];n=this.points[c[3]];h=g*g;k=g*h;d.x=b(l.x,m.x,p.x,n.x,g,h,k);d.y=b(l.y,m.y,p.y,n.y,g,h,k);d.z=b(l.z,m.z,p.z,n.z,g,h,k);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,c,d,e=b=b=0,f=new THREE.Vector3,g=new THREE.Vector3,h=[],k=0;h[0]=0;a||(a=100);c=this.points.length*a;f.copy(this.points[0]);for(a=1;a<c;a++)b=
a/c,d=this.getPoint(b),g.copy(d),k+=g.distanceTo(f),f.copy(d),b*=this.points.length-1,b=Math.floor(b),b!==e&&(h[b]=k,e=b);h[h.length]=k;return{chunks:h,total:k}};this.reparametrizeByArcLength=function(a){var b,c,d,e,f,g,h=[],k=new THREE.Vector3,l=this.getLength();h.push(k.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=l.chunks[b]-l.chunks[b-1];g=Math.ceil(a*c/l.total);e=(b-1)/(this.points.length-1);f=b/(this.points.length-1);for(c=1;c<g-1;c++)d=e+1/g*c*(f-e),d=this.getPoint(d),
h.push(k.copy(d).clone());h.push(k.copy(this.points[b]).clone())}this.points=h}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var k=b.dot(b);g=b.dot(c);var l=d*k-e*e;h=h||new THREE.Vector3;if(0===l)return h.set(-2,-1,-1);l=1/l;k=(k*f-e*g)*l;d=(d*g-e*f)*l;return h.set(1-k-d,d,k)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,
this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},
closestPointToPoint:function(){var a,b,c,d;return function(e,f){void 0===a&&(a=new THREE.Plane,b=[new THREE.Line3,new THREE.Line3,new THREE.Line3],c=new THREE.Vector3,d=new THREE.Vector3);var g=f||new THREE.Vector3,h=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))g.copy(c);else{b[0].set(this.a,this.b);b[1].set(this.b,this.c);b[2].set(this.c,this.a);for(var k=0;k<b.length;k++){b[k].closestPointToPoint(c,!0,d);var l=c.distanceToSquared(d);l<
h&&(h=l,g.copy(d))}}return g}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}};THREE.Interpolant=function(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c};
THREE.Interpolant.prototype={constructor:THREE.Interpolant,evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=
c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=
c[a+e];return b},interpolate_:function(a,b,c,d){throw Error("call to abstract method");},intervalChanged_:function(a,b,c){}};Object.assign(THREE.Interpolant.prototype,{beforeStart_:THREE.Interpolant.prototype.copySampleValue_,afterEnd_:THREE.Interpolant.prototype.copySampleValue_});THREE.CubicInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0};
THREE.CubicInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.CubicInterpolant,DefaultSettings_:{endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case THREE.ZeroSlopeEnding:e=a;g=2*b-c;break;case THREE.WrapAroundEnding:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case THREE.ZeroSlopeEnding:f=
a;h=2*c-b;break;case THREE.WrapAroundEnding:f=1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g,k=this._offsetPrev,l=this._offsetNext,m=this._weightPrev,p=this._weightNext,n=(c-b)/(d-b);c=n*n;d=c*n;b=-m*d+2*m*c-m*n;m=(1+m)*d+(-1.5-2*m)*c+(-.5+m)*n+1;n=(-1-p)*d+(1.5+p)*c+.5*n;p=p*d-p*
c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+m*f[h+c]+n*f[a+c]+p*f[l+c];return e}});THREE.DiscreteInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d)};THREE.DiscreteInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.DiscreteInterpolant,interpolate_:function(a,b,c,d){return this.copySampleValue_(a-1)}});THREE.LinearInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d)};
THREE.LinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.LinearInterpolant,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+d]*c+f[a+d]*b;return e}});THREE.QuaternionLinearInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d)};
THREE.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.QuaternionLinearInterpolant,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)THREE.Quaternion.slerpFlat(e,0,f,a-g,f,a,b);return e}});THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=(performance||Date).now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=(performance||Date).now(),a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
Object.assign(THREE.EventDispatcher.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==
this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],d=0,e=b.length,d=0;d<e;d++)c[d]=b[d];for(d=0;d<e;d++)c[d].call(this,a)}}}});THREE.Layers=function(){this.mask=1};THREE.Layers.prototype={constructor:THREE.Layers,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!==(this.mask&a.mask)}};
(function(a){function b(a,b){return a.distance-b.distance}function c(a,b,f,g){if(!1!==a.visible&&(a.raycast(b,f),!0===g)){a=a.children;g=0;for(var h=a.length;g<h;g++)c(a[g],b,f,!0)}}a.Raycaster=function(b,c,f,g){this.ray=new a.Ray(b,c);this.near=f||0;this.far=g||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})};
a.Raycaster.prototype={constructor:a.Raycaster,linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(b,c){c instanceof a.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(b.x,b.y,.5).unproject(c).sub(this.ray.origin).normalize()):c instanceof a.OrthographicCamera?(this.ray.origin.set(b.x,b.y,(c.near+c.far)/(c.near-c.far)).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},
intersectObject:function(a,e){var f=[];c(a,this,f,e);f.sort(b);return f},intersectObjects:function(a,e){var f=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),f;for(var g=0,h=a.length;g<h;g++)c(a[g],this,f,e);f.sort(b);return f}}})(THREE);
THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var a=new THREE.Vector3,b=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,
value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new THREE.Matrix4},normalMatrix:{value:new THREE.Matrix3}});this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new THREE.Layers;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};
THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);THREE.Object3D.DefaultMatrixAutoUpdate=!0;
Object.assign(THREE.Object3D.prototype,THREE.EventDispatcher.prototype,{applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=
new THREE.Quaternion;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);
this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),
lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a instanceof THREE.Object3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",
a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1))},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,
b);if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new THREE.Vector3;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){c=c||new THREE.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Euler;this.getWorldQuaternion(a);return b.setFromQuaternion(a,
this.rotation.order,!1)}}(),getWorldScale:function(){var a=new THREE.Vector3,b=new THREE.Quaternion;return function(c){c=c||new THREE.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Vector3;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==
this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,
this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a||""===a,d={};c&&(a={geometries:{},materials:{},textures:{},images:{}},d.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var e={};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);"{}"!==JSON.stringify(this.userData)&&
(e.userData=this.userData);!0===this.castShadow&&(e.castShadow=!0);!0===this.receiveShadow&&(e.receiveShadow=!0);!1===this.visible&&(e.visible=!1);e.matrix=this.matrix.toArray();void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),e.geometry=this.geometry.uuid);void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),e.material=this.material.uuid);if(0<this.children.length){e.children=
[];for(var f=0;f<this.children.length;f++)e.children.push(this.children[f].toJSON(a).object)}if(c){var c=b(a.geometries),f=b(a.materials),g=b(a.textures);a=b(a.images);0<c.length&&(d.geometries=c);0<f.length&&(d.materials=f);0<g.length&&(d.textures=g);0<a.length&&(d.images=a)}d.object=e;return d},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);
this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(var c=0;c<a.children.length;c++)this.add(a.children[c].clone());return this}});THREE.Object3DIdCount=0;
THREE.Face3=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=Array.isArray(d)?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}};
THREE.BufferAttribute=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.array=a;this.itemSize=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0;this.normalized=!0===c};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);
return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),f=new THREE.Color);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];b[c++]=f.a;b[c++]=f.b;b[c++]=f.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",
d),f=new THREE.Vector2);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),f=new THREE.Vector3);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),f=new THREE.Vector4);
b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*
this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},clone:function(){return(new this.constructor).copy(this)}};
THREE.Int8Attribute=function(a,b){return new THREE.BufferAttribute(new Int8Array(a),b)};THREE.Uint8Attribute=function(a,b){return new THREE.BufferAttribute(new Uint8Array(a),b)};THREE.Uint8ClampedAttribute=function(a,b){return new THREE.BufferAttribute(new Uint8ClampedArray(a),b)};THREE.Int16Attribute=function(a,b){return new THREE.BufferAttribute(new Int16Array(a),b)};THREE.Uint16Attribute=function(a,b){return new THREE.BufferAttribute(new Uint16Array(a),b)};
THREE.Int32Attribute=function(a,b){return new THREE.BufferAttribute(new Int32Array(a),b)};THREE.Uint32Attribute=function(a,b){return new THREE.BufferAttribute(new Uint32Array(a),b)};THREE.Float32Attribute=function(a,b){return new THREE.BufferAttribute(new Float32Array(a),b)};THREE.Float64Attribute=function(a,b){return new THREE.BufferAttribute(new Float64Array(a),b)};
THREE.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new THREE.BufferAttribute(a,b)).setDynamic(!0)};THREE.InstancedBufferAttribute=function(a,b,c){THREE.BufferAttribute.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype);THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute;
THREE.InstancedBufferAttribute.prototype.copy=function(a){THREE.BufferAttribute.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};THREE.InterleavedBuffer=function(a,b){this.uuid=THREE.Math.generateUUID();this.array=a;this.stride=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};
THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,
b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)}};THREE.InstancedInterleavedBuffer=function(a,b,c){THREE.InterleavedBuffer.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype);THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer;
THREE.InstancedInterleavedBuffer.prototype.copy=function(a){THREE.InterleavedBuffer.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};THREE.InterleavedBufferAttribute=function(a,b,c,d){this.uuid=THREE.Math.generateUUID();this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d};
THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.data.count},get array(){return this.data.array},setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+
this.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+
1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}};
THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=
this.elementsNeedUpdate=!1};
Object.assign(THREE.Geometry.prototype,THREE.EventDispatcher.prototype,{applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();
this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,
c,d){void 0===a&&(a=new THREE.Matrix4);a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new THREE.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0!==g?[m[a].clone(),m[b].clone(),m[d].clone()]:[],q=void 0!==h?[c.colors[a].clone(),
c.colors[b].clone(),c.colors[d].clone()]:[];e=new THREE.Face3(a,b,d,f,q,e);c.faces.push(e);void 0!==k&&c.faceVertexUvs[0].push([p[a].clone(),p[b].clone(),p[d].clone()]);void 0!==l&&c.faceVertexUvs[1].push([n[a].clone(),n[b].clone(),n[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,g=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,k=void 0!==e.uv?e.uv.array:void 0,l=void 0!==e.uv2?e.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=
[]);for(var m=[],p=[],n=[],q=e=0;e<f.length;e+=3,q+=2)c.vertices.push(new THREE.Vector3(f[e],f[e+1],f[e+2])),void 0!==g&&m.push(new THREE.Vector3(g[e],g[e+1],g[e+2])),void 0!==h&&c.colors.push(new THREE.Color(h[e],h[e+1],h[e+2])),void 0!==k&&p.push(new THREE.Vector2(k[q],k[q+1])),void 0!==l&&n.push(new THREE.Vector2(l[q],l[q+1]));if(void 0!==d)if(f=a.groups,0<f.length)for(e=0;e<f.length;e++)for(var r=f[e],s=r.start,v=r.count,q=s,s=s+v;q<s;q+=3)b(d[q],d[q+1],d[q+2],r.materialIndex);else for(e=0;e<
d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/
b,c=new THREE.Matrix4;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b,c,d;d=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<
c;b++)d[b]=new THREE.Vector3;if(a){var e,f,g,h=new THREE.Vector3,k=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=this.vertices[c.a],f=this.vertices[c.b],g=this.vertices[c.c],h.subVectors(g,f),k.subVectors(e,f),h.cross(k),d[c.a].add(h),d[c.b].add(h),d[c.c].add(h)}else for(a=0,b=this.faces.length;a<b;a++)c=this.faces[a],d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)d[b].normalize();a=0;for(b=this.faces.length;a<b;a++)c=
this.faces[a],e=c.vertexNormals,3===e.length?(e[0].copy(d[c.a]),e[1].copy(d[c.b]),e[2].copy(d[c.c])):(e[0]=d[c.a].clone(),e[1]=d[c.b].clone(),e[2]=d[c.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;a<
b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var f=new THREE.Geometry;f.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var g=this.morphNormals[a].vertexNormals,h,k;c=0;for(d=this.faces.length;c<d;c++)h=new THREE.Vector3,k={a:new THREE.Vector3,
b:new THREE.Vector3,c:new THREE.Vector3},e.push(h),g.push(k)}g=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(e.normal),k.a.copy(e.vertexNormals[0]),k.b.copy(e.vertexNormals[1]),k.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},
computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(!1===a instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
a);else{var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,k=a.faces,l=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=(new THREE.Matrix3).getNormalMatrix(b));for(var m=0,p=g.length;m<p;m++){var n=g[m].clone();void 0!==b&&n.applyMatrix4(b);f.push(n)}m=0;for(p=k.length;m<p;m++){var g=k[m],q,r=g.vertexNormals,s=g.vertexColors,n=new THREE.Face3(g.a+e,g.b+e,g.c+e);n.normal.copy(g.normal);void 0!==d&&n.normal.applyMatrix3(d).normalize();b=0;for(f=r.length;b<
f;b++)q=r[b].clone(),void 0!==d&&q.applyMatrix3(d).normalize(),n.vertexNormals.push(q);n.color.copy(g.color);b=0;for(f=s.length;b<f;b++)q=s[b],n.vertexColors.push(q.clone());n.materialIndex=g.materialIndex+c;h.push(n)}m=0;for(p=a.length;m<p;m++)if(c=a[m],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(c[b].clone());l.push(d)}}},mergeMesh:function(a){!1===a instanceof THREE.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a):(a.matrixAutoUpdate&&a.updateMatrix(),
this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a={},b=[],c=[],d,e=Math.pow(10,4),f,g;f=0;for(g=this.vertices.length;f<g;f++)d=this.vertices[f],d=Math.round(d.x*e)+"_"+Math.round(d.y*e)+"_"+Math.round(d.z*e),void 0===a[d]?(a[d]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[d]];a=[];f=0;for(g=this.faces.length;f<g;f++)for(e=this.faces[f],e.a=c[e.a],e.b=c[e.b],e.c=c[e.c],e=[e.a,e.b,e.c],d=0;3>d;d++)if(e[d]===e[(d+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(e=a[f],this.faces.splice(e,
1),c=0,g=this.faceVertexUvs.length;c<g;c++)this.faceVertexUvs[c].splice(e,1);f=this.vertices.length-b.length;this.vertices=b;return f},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=
g)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==l[b])return l[b];l[b]=k.length/3;k.push(a.x,a.y,a.z);return l[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==p[b])return p[b];p[b]=m.length;m.push(a.getHex());return p[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==q[b])return q[b];q[b]=n.length/2;n.push(a.x,a.y);return q[b]}var e={metadata:{version:4.4,type:"Geometry",
generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var f=this.parameters,g;for(g in f)void 0!==f[g]&&(e[g]=f[g]);return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}var h=[],k=[],l={},m=[],p={},n=[],q={};for(g=0;g<this.faces.length;g++){var r=this.faces[g],s=void 0!==this.faceVertexUvs[0][g],v=0<r.normal.length(),t=0<r.vertexNormals.length,u=1!==r.color.r||1!==r.color.g||1!==r.color.b,
D=0<r.vertexColors.length,w=0,w=a(w,0,0),w=a(w,1,!0),w=a(w,2,!1),w=a(w,3,s),w=a(w,4,v),w=a(w,5,t),w=a(w,6,u),w=a(w,7,D);h.push(w);h.push(r.a,r.b,r.c);h.push(r.materialIndex);s&&(s=this.faceVertexUvs[0][g],h.push(d(s[0]),d(s[1]),d(s[2])));v&&h.push(b(r.normal));t&&(v=r.vertexNormals,h.push(b(v[0]),b(v[1]),b(v[2])));u&&h.push(c(r.color));D&&(r=r.vertexColors,h.push(c(r[0]),c(r[1]),c(r[2])))}e.data={};e.data.vertices=f;e.data.normals=k;0<m.length&&(e.data.colors=m);0<n.length&&(e.data.uvs=[n]);e.data.faces=
h;return e},clone:function(){return(new THREE.Geometry).copy(this)},copy:function(a){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var b=a.vertices,c=0,d=b.length;c<d;c++)this.vertices.push(b[c].clone());b=a.faces;c=0;for(d=b.length;c<d;c++)this.faces.push(b[c].clone());c=0;for(d=a.faceVertexUvs.length;c<d;c++){b=a.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var e=0,f=b.length;e<f;e++){for(var g=b[e],h=[],k=0,l=g.length;k<l;k++)h.push(g[k].clone());
this.faceVertexUvs[c].push(h)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});THREE.GeometryIdCount=0;
THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};
Object.assign(THREE.DirectGeometry.prototype,THREE.EventDispatcher.prototype,{computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(a){var b,
c=[],d;a=a.faces;for(var e=0;e<a.length;e++){var f=a[e];f.materialIndex!==d&&(d=f.materialIndex,void 0!==b&&(b.count=3*e-b.start,c.push(b)),b={start:3*e,materialIndex:d})}void 0!==b&&(b.count=3*e-b.start,c.push(b));this.groups=c},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length,k;if(0<h){k=[];for(var l=0;l<h;l++)k[l]=[];this.morphTargets.position=k}var m=a.morphNormals,p=m.length,n;if(0<p){n=[];for(l=0;l<
p;l++)n[l]=[];this.morphTargets.normal=n}for(var q=a.skinIndices,r=a.skinWeights,s=q.length===c.length,v=r.length===c.length,l=0;l<b.length;l++){var t=b[l];this.vertices.push(c[t.a],c[t.b],c[t.c]);var u=t.vertexNormals;3===u.length?this.normals.push(u[0],u[1],u[2]):(u=t.normal,this.normals.push(u,u,u));u=t.vertexColors;3===u.length?this.colors.push(u[0],u[1],u[2]):(u=t.color,this.colors.push(u,u,u));!0===e&&(u=d[0][l],void 0!==u?this.uvs.push(u[0],u[1],u[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",
l),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));!0===f&&(u=d[1][l],void 0!==u?this.uvs2.push(u[0],u[1],u[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));for(u=0;u<h;u++){var D=g[u].vertices;k[u].push(D[t.a],D[t.b],D[t.c])}for(u=0;u<p;u++)D=m[u].vertexNormals[l],n[u].push(D.a,D.b,D.c);s&&this.skinIndices.push(q[t.a],q[t.b],q[t.c]);v&&this.skinWeights.push(r[t.a],r[t.b],
r[t.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}};
Object.assign(THREE.BufferGeometry.prototype,THREE.EventDispatcher.prototype,{getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,b,c){if(!1===b instanceof THREE.BufferAttribute&&!1===b instanceof THREE.InterleavedBufferAttribute)console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new THREE.BufferAttribute(b,c));else if("index"===a)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
this.setIndex(b);else return this.attributes[a]=b,this},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;
void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;
return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new THREE.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),
center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a instanceof THREE.Points||a instanceof THREE.Line){a=new THREE.Float32Attribute(3*b.vertices.length,3);var c=new THREE.Float32Attribute(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&
(a=new THREE.Float32Attribute(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a instanceof THREE.Mesh&&b instanceof THREE.Geometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a instanceof THREE.Mesh){var c=b.__directGeometry;if(void 0===c||!0===b.elementsNeedUpdate)return this.fromGeometry(b);
c.verticesNeedUpdate=b.verticesNeedUpdate||b.elementsNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate||b.elementsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate||b.elementsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate||b.elementsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate||b.elementsNeedUpdate;b.elementsNeedUpdate=!1;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==
c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,
void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new THREE.DirectGeometry).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.vertices));
0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute("color",(new THREE.BufferAttribute(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",
(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<a.vertices.length?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new THREE.BufferAttribute(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=[],d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=d[e],h=new THREE.Float32Attribute(3*g.length,3);b.push(h.copyVector3sArray(g))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new THREE.Float32Attribute(4*
a.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new THREE.Float32Attribute(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;
void 0!==a?this.boundingBox.setFromArray(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position;
if(c){var c=c.array,d=this.boundingSphere.center;a.setFromArray(c);a.center(d);for(var e=0,f=0,g=c.length;f<g;f+=3)b.fromArray(c,f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;
if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(d.length),3));else for(var e=b.normal.array,f=0,g=e.length;f<g;f++)e[f]=0;var e=b.normal.array,h,k,l,m=new THREE.Vector3,p=new THREE.Vector3,n=new THREE.Vector3,q=new THREE.Vector3,r=new THREE.Vector3;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var s=0,v=c.length;s<v;++s)for(f=c[s],g=f.start,h=f.count,f=g,g+=h;f<g;f+=3)h=3*a[f+0],k=3*a[f+1],l=3*a[f+2],m.fromArray(d,
h),p.fromArray(d,k),n.fromArray(d,l),q.subVectors(n,p),r.subVectors(m,p),q.cross(r),e[h]+=q.x,e[h+1]+=q.y,e[h+2]+=q.z,e[k]+=q.x,e[k+1]+=q.y,e[k+2]+=q.z,e[l]+=q.x,e[l+1]+=q.y,e[l+2]+=q.z}else for(f=0,g=d.length;f<g;f+=9)m.fromArray(d,f),p.fromArray(d,f+3),n.fromArray(d,f+6),q.subVectors(n,p),r.subVectors(m,p),q.cross(r),e[f]=q.x,e[f+1]=q.y,e[f+2]=q.z,e[f+3]=q.x,e[f+4]=q.y,e[f+5]=q.z,e[f+6]=q.x,e[f+7]=q.y,e[f+8]=q.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,b){if(!1===a instanceof
THREE.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);else{void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,f=a.attributes[d],g=f.array,h=0,f=f.itemSize*b;h<g.length;h++,f++)e[f]=g[h];return this}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},toNonIndexed:function(){if(null===
this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new THREE.BufferGeometry,b=this.index.array,c=this.attributes,d;for(d in c){for(var e=c[d],f=e.array,e=e.itemSize,g=new f.constructor(b.length*e),h=0,k=0,l=0,m=b.length;l<m;l++)for(var h=b[l]*e,p=0;p<e;p++)g[k++]=f[h++];a.addAttribute(d,new THREE.BufferAttribute(g,e))}return a},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=
this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters,c;for(c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;null!==d&&(b=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:b});d=this.attributes;for(c in d){var e=d[c],b=Array.prototype.slice.call(e.array);a.data.attributes[c]={itemSize:e.itemSize,type:e.array.constructor.name,array:b,normalized:e.normalized}}c=this.groups;
0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(a.data.boundingSphere={center:c.center.toArray(),radius:c.radius});return a},clone:function(){return(new THREE.BufferGeometry).copy(this)},copy:function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes,c;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
THREE.BufferGeometry.MaxIndex=65535;THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0};THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry;THREE.InstancedBufferGeometry.prototype.addGroup=function(a,b,c){this.groups.push({start:a,count:b,instances:c})};
THREE.InstancedBufferGeometry.prototype.copy=function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes,c;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.instances)}return this};THREE.Uniform=function(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a;this.dynamic=!1};
THREE.Uniform.prototype={constructor:THREE.Uniform,onUpdate:function(a){this.dynamic=!0;this.onUpdateCallback=a;return this}};THREE.AnimationAction=function(){throw Error("THREE.AnimationAction: Use mixer.clipAction for construction.");};
THREE.AnimationAction._new=function(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=THREE.LoopRepeat;this._loopCount=
-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0};
THREE.AnimationAction._new.prototype={constructor:THREE.AnimationAction._new,play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},
startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,
e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/
a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,b,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function(){var a=this._timeScaleInterpolant;null!==a&&
(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,b,c,d){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;for(var e=this._propertyBindings,f=0,g=b.length;f!==
g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}},_updateWeight:function(a){var b=0;if(this.enabled){var b=this.weight,c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){var b=this.timeScale,c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:
this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(d===THREE.LoopOnce)a:{if(-1===e&&(this.loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{d=d===THREE.LoopPingPong;-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,
d)):this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c),b=b-c*f,e=e+Math.abs(f),g=this.repetitions-e;0>g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?c:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(0===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,
b,c){var d=this._interpolantSettings;c?(d.endingStart=THREE.ZeroSlopeEnding,d.endingEnd=THREE.ZeroSlopeEnding):(d.endingStart=a?this.zeroSlopeAtStart?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:THREE.WrapAroundEnding,d.endingEnd=b?this.zeroSlopeAtEnd?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:THREE.WrapAroundEnding)},_scheduleFading:function(a,b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;
f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}};THREE.AnimationClip=function(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=THREE.Math.generateUUID();0>this.duration&&this.resetDuration();this.trim();this.optimize()};
THREE.AnimationClip.prototype={constructor:THREE.AnimationClip,resetDuration:function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b)var d=this.tracks[b],a=Math.max(a,d.times[d.times.length-1]);this.duration=a},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}};
Object.assign(THREE.AnimationClip,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(THREE.KeyframeTrack.parse(c[e]).scale(d));return new THREE.AnimationClip(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(THREE.KeyframeTrack.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,b,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],k=[];h.push((g+e-1)%
e,g,(g+1)%e);k.push(0,1,0);var l=THREE.AnimationUtils.getKeyframeOrder(h),h=THREE.AnimationUtils.sortedArray(h,1,l),k=THREE.AnimationUtils.sortedArray(k,1,l);d||0!==h[0]||(h.push(e),k.push(k[0]));f.push((new THREE.NumberKeyframeTrack(".morphTargetInfluences["+b[g].name+"]",h,k)).scale(1/c))}return new THREE.AnimationClip(a,-1,f)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(var d=0;d<c.length;d++)if(c[d].name===b)return c[d];return null},
CreateClipsFromMorphTargetSequences:function(a,b,c){for(var d={},e=/^([\w-]*?)([\d]+)$/,f=0,g=a.length;f<g;f++){var h=a[f],k=h.name.match(e);if(k&&1<k.length){var l=k[1];(k=d[l])||(d[l]=k=[]);k.push(h)}}a=[];for(l in d)a.push(THREE.AnimationClip.CreateFromMorphTargetSequence(l,d[l],b,c));return a},parseAnimation:function(a,b,c){if(!a)return console.error("  no animation in JSONLoader data"),null;c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];THREE.AnimationUtils.flattenJSON(c,f,g,d);0!==f.length&&
e.push(new a(b,f,g))}};var d=[],e=a.name||"default",f=a.length||-1,g=a.fps||30;a=a.hierarchy||[];for(var h=0;h<a.length;h++){var k=a[h].keys;if(k&&0!==k.length)if(k[0].morphTargets){for(var f={},l=0;l<k.length;l++)if(k[l].morphTargets)for(var m=0;m<k[l].morphTargets.length;m++)f[k[l].morphTargets[m]]=-1;for(var p in f){for(var n=[],q=[],m=0;m!==k[l].morphTargets.length;++m){var r=k[l];n.push(r.time);q.push(r.morphTarget===p?1:0)}d.push(new THREE.NumberKeyframeTrack(".morphTargetInfluence["+p+"]",
n,q))}f=f.length*(g||1)}else l=".bones["+b[h].name+"]",c(THREE.VectorKeyframeTrack,l+".position",k,"pos",d),c(THREE.QuaternionKeyframeTrack,l+".quaternion",k,"rot",d),c(THREE.VectorKeyframeTrack,l+".scale",k,"scl",d)}return 0===d.length?null:new THREE.AnimationClip(e,f,d)}});THREE.AnimationMixer=function(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1};
Object.assign(THREE.AnimationMixer.prototype,THREE.EventDispatcher.prototype,{clipAction:function(a,b){var c=b||this._root,d=c.uuid,e="string"===typeof a?THREE.AnimationClip.findByName(c,a):a,c=null!==e?e.uuid:a,f=this._actionsByClip[c],g=null;if(void 0!==f){g=f.actionByRoot[d];if(void 0!==g)return g;g=f.knownActions[0];null===e&&(e=g._clip)}if(null===e)return null;e=new THREE.AnimationMixer._Action(this,e,b);this._bindAction(e,g);this._addInactiveAction(e,c,d);return e},existingAction:function(a,
b){var c=b||this._root,d=c.uuid,c="string"===typeof a?THREE.AnimationClip.findByName(c,a):a,c=this._actionsByClip[c?c.uuid:a];return void 0!==c?c.actionByRoot[d]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=
a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g){var h=b[g];h.enabled&&h._update(d,a,e,f)}a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,e=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);var h=g._cacheIndex,k=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;k._cacheIndex=
h;b[h]=k;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip,c;for(c in b){var d=b[c].actionByRoot[a];void 0!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}c=this._bindingsByRootAndName[a];if(void 0!==c)for(var e in c)a=c[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){var c=this.existingAction(a,b);null!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}});
THREE.AnimationMixer._Action=THREE.AnimationAction._new;
Object.assign(THREE.AnimationMixer.prototype,{_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings,g=a._interpolants,h=c.uuid,k=this._bindingsByRootAndName,l=k[h];void 0===l&&(l={},k[h]=l);for(k=0;k!==e;++k){var m=d[k],p=m.name,n=l[p];if(void 0===n){n=f[k];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,h,p));continue}n=new THREE.PropertyMixer(THREE.PropertyBinding.create(c,p,b&&b._propertyBindings[k].binding.parsedPath),
m.ValueTypeName,m.getValueSize());++n.referenceCount;this._addInactiveBinding(n,h,p)}f[k]=n;g[k].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},
_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},
get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=
f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var c=a._clip.uuid,d=this._actionsByClip,e=d[c],f=e.knownActions,g=f[f.length-1],h=a._byClipCacheIndex;g._byClipCacheIndex=h;f[h]=g;f.pop();a._byClipCacheIndex=null;delete e.actionByRoot[(b._localRoot||this._root).uuid];0===f.length&&delete d[c];this._removeInactiveBindingsForAction(a)},
_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,
e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,c=c.path,e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;g._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f)break a;delete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=
this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new THREE.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,
e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1)});
THREE.AnimationObjectGroup=function(a){this.uuid=THREE.Math.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var c=0,d=arguments.length;c!==d;++c)b[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}};
THREE.AnimationObjectGroup.prototype={constructor:THREE.AnimationObjectGroup,add:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,f=this._paths,g=this._parsedPaths,h=this._bindings,k=h.length,l=0,m=arguments.length;l!==m;++l){var p=arguments[l],n=p.uuid,q=e[n];if(void 0===q){q=c++;e[n]=q;b.push(p);for(var n=0,r=k;n!==r;++n)h[n].push(new THREE.PropertyBinding(p,f[n],g[n]))}else if(q<d){var s=b[q],v=--d,r=b[v];e[r.uuid]=q;b[q]=r;e[n]=v;b[v]=p;n=0;for(r=k;n!==
r;++n){var t=h[n],u=t[q];t[q]=t[v];void 0===u&&(u=new THREE.PropertyBinding(p,f[n],g[n]));t[v]=u}}else b[q]!==s&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=d},remove:function(a){for(var b=this._objects,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var k=arguments[g],l=k.uuid,m=d[l];if(void 0!==m&&m>=c){var p=c++,n=b[p];d[n.uuid]=
m;b[m]=n;d[l]=p;b[p]=k;k=0;for(l=f;k!==l;++k){var n=e[k],q=n[m];n[m]=n[p];n[p]=q}}}this.nCachedObjects_=c},uncache:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,f=this._bindings,g=f.length,h=0,k=arguments.length;h!==k;++h){var l=arguments[h].uuid,m=e[l];if(void 0!==m)if(delete e[l],m<d){var l=--d,p=b[l],n=--c,q=b[n];e[p.uuid]=m;b[m]=p;e[q.uuid]=l;b[l]=q;b.pop();p=0;for(q=g;p!==q;++p){var r=f[p],s=r[n];r[m]=r[l];r[l]=s;r.pop()}}else for(n=--c,q=b[n],e[q.uuid]=
m,b[m]=q,b.pop(),p=0,q=g;p!==q;++p)r=f[p],r[m]=r[n],r.pop()}this.nCachedObjects_=d},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_,l=Array(h.length),d=e.length;c[a]=d;f.push(a);g.push(b);e.push(l);c=k;for(d=h.length;c!==d;++c)l[c]=new THREE.PropertyBinding(h[c],a,b);return l},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=
this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}};
THREE.AnimationUtils={arraySlice:function(a,b,c){return THREE.AnimationUtils.isTypedArray(a)?new a.constructor(a.subarray(b,c)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function(a,
b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,k=0;k!==b;++k)e[g++]=a[h+k];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];while(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),
c.push(g)),f=a[e++];while(void 0!==f)}}}};THREE.KeyframeTrack=function(a,b,c,d){if(void 0===a)throw Error("track name is undefined");if(void 0===b||0===b.length)throw Error("no keyframes in track named "+a);this.name=a;this.times=THREE.AnimationUtils.convertArray(b,this.TimeBufferType);this.values=THREE.AnimationUtils.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);this.validate();this.optimize()};
THREE.KeyframeTrack.prototype={constructor:THREE.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(a){return new THREE.DiscreteInterpolant(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new THREE.LinearInterpolant(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new THREE.CubicInterpolant(this.times,
this.values,this.getValueSize(),a)},setInterpolation:function(a){var b;switch(a){case THREE.InterpolateDiscrete:b=this.InterpolantFactoryMethodDiscrete;break;case THREE.InterpolateLinear:b=this.InterpolantFactoryMethodLinear;break;case THREE.InterpolateSmooth:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);
else throw Error(b);console.warn(b)}else this.createInterpolant=b},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return THREE.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return THREE.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return THREE.InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},
scale:function(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),d=this.getValueSize(),this.times=THREE.AnimationUtils.arraySlice(c,e,f),this.values=THREE.AnimationUtils.arraySlice(this.values,e*d,f*d);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("invalid value size in track",
this),a=!1);var c=this.times,b=this.values,d=c.length;0===d&&(console.error("track is empty",this),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if("number"===typeof g&&isNaN(g)){console.error("time is not a valid number",this,f,g);a=!1;break}if(null!==e&&e>g){console.error("out of order keys",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&THREE.AnimationUtils.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error("value is not a valid number",this,f,d);a=!1;break}return a},optimize:function(){for(var a=
this.times,b=this.values,c=this.getValueSize(),d=1,e=1,f=a.length-1;e<=f;++e){var g=!1,h=a[e];if(h!==a[e+1]&&(1!==e||h!==h[0]))for(var k=e*c,l=k-c,m=k+c,h=0;h!==c;++h){var p=b[k+h];if(p!==b[l+h]||p!==b[m+h]){g=!0;break}}if(g){if(e!==d)for(a[d]=a[e],g=e*c,k=d*c,h=0;h!==c;++h)b[k+h]=b[g+h];++d}}d!==a.length&&(this.times=THREE.AnimationUtils.arraySlice(a,0,d),this.values=THREE.AnimationUtils.arraySlice(b,0,d*c));return this}};
Object.assign(THREE.KeyframeTrack,{parse:function(a){if(void 0===a.type)throw Error("track type undefined, can not parse");var b=THREE.KeyframeTrack._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];THREE.AnimationUtils.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{var b={name:a.name,times:THREE.AnimationUtils.convertArray(a.times,
Array),values:THREE.AnimationUtils.convertArray(a.values,Array)},c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return THREE.NumberKeyframeTrack;case "vector":case "vector2":case "vector3":case "vector4":return THREE.VectorKeyframeTrack;case "color":return THREE.ColorKeyframeTrack;case "quaternion":return THREE.QuaternionKeyframeTrack;
case "bool":case "boolean":return THREE.BooleanKeyframeTrack;case "string":return THREE.StringKeyframeTrack}throw Error("Unsupported typeName: "+a);}});THREE.PropertyBinding=function(a,b,c){this.path=b;this.parsedPath=c||THREE.PropertyBinding.parseTrackName(b);this.node=THREE.PropertyBinding.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a};
THREE.PropertyBinding.prototype={constructor:THREE.PropertyBinding,getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=THREE.PropertyBinding.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case "materials":if(!a.material){console.error("  can not bind to material as node does not have a material",
this);return}if(!a.material.materials){console.error("  can not bind to material.materials as node.material does not have a materials array",this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("  can not bind to bones as node does not have a skeleton",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error("  can not bind to objectName of node, undefined",this);return}a=a[c]}if(void 0!==f){if(void 0===
a[f]){console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error("  trying to update property for track: "+b.nodeName+"."+d+" but it wasn't found.",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===
d){if(!a.geometry){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);return}if(!a.geometry.morphTargets){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?
(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):void 0!==f.length?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}};
Object.assign(THREE.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:THREE.PropertyBinding.prototype.getValue,_setValue_unbound:THREE.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=
c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.node[this.propertyName]=a[b]},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,
d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,
b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]]});THREE.PropertyBinding.Composite=function(a,b,c){c=c||THREE.PropertyBinding.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)};
THREE.PropertyBinding.Composite.prototype={constructor:THREE.PropertyBinding.Composite,getValue:function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,
c=a.length;b!==c;++b)a[b].unbind()}};THREE.PropertyBinding.create=function(a,b,c){return a instanceof THREE.AnimationObjectGroup?new THREE.PropertyBinding.Composite(a,b,c):new THREE.PropertyBinding(a,b,c)};
THREE.PropertyBinding.parseTrackName=function(a){var b=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,c=b.exec(a);if(!c)throw Error("cannot parse trackName at all: "+a);c.index===b.lastIndex&&b.lastIndex++;b={nodeName:c[3],objectName:c[5],objectIndex:c[7],propertyName:c[9],propertyIndex:c[11]};if(null===b.propertyName||0===b.propertyName.length)throw Error("can not parse propertyName from trackName: "+a);return b};
THREE.PropertyBinding.findNode=function(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=function(a){for(var c=0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}(a.skeleton);if(c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var g=a[c];if(g.name===b||g.uuid===b||(g=d(g.children)))return g}return null};if(c=d(a.children))return c}return null};
THREE.PropertyMixer=function(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0};
THREE.PropertyMixer.prototype={constructor:THREE.PropertyMixer,accumulate:function(a,b){var c=this.buffer,d=this.valueSize,e=a*d+d,f=this.cumulativeWeight;if(0===f){for(f=0;f!==d;++f)c[e+f]=c[f];f=b}else f+=b,this._mixBufferRegion(c,e,0,b/f,d);this.cumulativeWeight=f},apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);
break}},saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d,e){THREE.Quaternion.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}};
THREE.BooleanKeyframeTrack=function(a,b,c){THREE.KeyframeTrack.call(this,a,b,c)};THREE.BooleanKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:THREE.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});THREE.ColorKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.ColorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.ColorKeyframeTrack,ValueTypeName:"color"});THREE.NumberKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};THREE.NumberKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.NumberKeyframeTrack,ValueTypeName:"number"});THREE.QuaternionKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodLinear:function(a){return new THREE.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});THREE.StringKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.StringKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:THREE.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});THREE.VectorKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.VectorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.VectorKeyframeTrack,ValueTypeName:"vector"});
THREE.Audio=function(a){THREE.Object3D.call(this);this.type="Audio";this.context=a.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]};
THREE.Audio.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Audio,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this},setBuffer:function(a){this.source.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else{var a=this.context.createBufferSource();a.buffer=this.source.buffer;a.loop=this.source.loop;a.onended=this.source.onended;a.start(0,this.startTime);a.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=a;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.source.stop(),this.startTime=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-
1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.playbackRate=a,!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(a){!1===this.hasPlaybackControl?console.warn("THREE.Audio: this Audio has no playback control."):this.source.loop=a},getVolume:function(){return this.gain.gain.value},
setVolume:function(a){this.gain.gain.value=a;return this}});THREE.AudioAnalyser=function(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)};
Object.assign(THREE.AudioAnalyser.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length}});Object.defineProperty(THREE,"AudioContext",{get:function(){var a;return function(){void 0===a&&(a=new (window.AudioContext||window.webkitAudioContext));return a}}()});
THREE.PositionalAudio=function(a){THREE.Audio.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)};
THREE.PositionalAudio.prototype=Object.assign(Object.create(THREE.Audio.prototype),{constructor:THREE.PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=
a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new THREE.Vector3;return function(b){THREE.Object3D.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});
THREE.AudioListener=function(){THREE.Object3D.call(this);this.type="AudioListener";this.context=THREE.AudioContext;this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null};
THREE.AudioListener.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):
this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new THREE.Vector3,b=new THREE.Quaternion,c=new THREE.Vector3,d=new THREE.Vector3;return function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var f=this.up;this.matrixWorld.decompose(a,
b,c);d.set(0,0,-1).applyQuaternion(b);e.setPosition(a.x,a.y,a.z);e.setOrientation(d.x,d.y,d.z,f.x,f.y,f.z)}}()});THREE.Camera=function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.constructor=THREE.Camera;
THREE.Camera.prototype.getWorldDirection=function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Vector3;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}();THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(){return(new this.constructor).copy(this)};
THREE.Camera.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this};
THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);this.type="CubeCamera";var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,1);f.lookAt(new THREE.Vector3(0,1,0));this.add(f);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new THREE.Vector3(0,-1,0));
this.add(g);var h=new THREE.PerspectiveCamera(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new THREE.Vector3(0,0,1));this.add(h);var k=new THREE.PerspectiveCamera(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,-1));this.add(k);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,n=c.texture.generateMipmaps;c.texture.generateMipmaps=
!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=n;c.activeCubeFace=5;a.render(b,k,c);a.setRenderTarget(null)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CubeCamera.prototype.constructor=THREE.CubeCamera;
THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};
THREE.OrthographicCamera.prototype=Object.assign(Object.create(THREE.Camera.prototype),{constructor:THREE.OrthographicCamera,copy:function(a){THREE.Camera.prototype.copy.call(this,a);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,f){this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:f};this.updateProjectionMatrix()},
clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a,c=c+a,a=d+b,b=d-b;if(null!==this.view)var c=this.zoom/(this.view.width/this.view.fullWidth),b=this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height,e=e+this.view.offsetX/c*f,
c=e+this.view.width/c*f,a=a-this.view.offsetY/b*d,b=a-this.view.height/b*d;this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});
THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype=Object.assign(Object.create(THREE.Camera.prototype),{constructor:THREE.PerspectiveCamera,copy:function(a){THREE.Camera.prototype.copy.call(this,a);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*THREE.Math.RAD2DEG*Math.atan(a);
this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*THREE.Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*THREE.Math.RAD2DEG*Math.atan(Math.tan(.5*THREE.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b;this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,
width:e,height:f};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*THREE.Math.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==f)var g=f.fullWidth,h=f.fullHeight,e=e+f.offsetX*d/g,b=b-f.offsetY*c/h,d=f.width/g*d,c=f.height/h*c;f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makeFrustum(e,e+d,b-c,b,a,this.far)},toJSON:function(a){a=
THREE.Object3D.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});
THREE.StereoCamera=function(){this.type="StereoCamera";this.aspect=1;this.cameraL=new THREE.PerspectiveCamera;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new THREE.PerspectiveCamera;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1};
Object.assign(THREE.StereoCamera.prototype,{update:function(){var a,b,c,d,e,f=new THREE.Matrix4,g=new THREE.Matrix4;return function(h){if(a!==h.focus||b!==h.fov||c!==h.aspect*this.aspect||d!==h.near||e!==h.far){a=h.focus;b=h.fov;c=h.aspect*this.aspect;d=h.near;e=h.far;var k=h.projectionMatrix.clone(),l=.032*d/a,m=d*Math.tan(THREE.Math.DEG2RAD*b*.5),p,n;g.elements[12]=-.032;f.elements[12]=.032;p=-m*c+l;n=m*c+l;k.elements[0]=2*d/(n-p);k.elements[8]=(n+p)/(n-p);this.cameraL.projectionMatrix.copy(k);
p=-m*c-l;n=m*c-l;k.elements[0]=2*d/(n-p);k.elements[8]=(n+p)/(n-p);this.cameraR.projectionMatrix.copy(k)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(g);this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(f)}}()});THREE.Light=function(a,b){THREE.Object3D.call(this);this.type="Light";this.color=new THREE.Color(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0};
THREE.Light.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Light,copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==
this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);return a}});THREE.LightShadow=function(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new THREE.Vector2(512,512);this.map=null;this.matrix=new THREE.Matrix4};Object.assign(THREE.LightShadow.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)}});
THREE.AmbientLight=function(a,b){THREE.Light.call(this,a,b);this.type="AmbientLight";this.castShadow=void 0};THREE.AmbientLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.AmbientLight});THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a,b);this.type="DirectionalLight";this.position.copy(THREE.Object3D.DefaultUp);this.updateMatrix();this.target=new THREE.Object3D;this.shadow=new THREE.DirectionalLightShadow};
THREE.DirectionalLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.DirectionalLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});THREE.DirectionalLightShadow=function(a){THREE.LightShadow.call(this,new THREE.OrthographicCamera(-5,5,5,-5,.5,500))};THREE.DirectionalLightShadow.prototype=Object.assign(Object.create(THREE.LightShadow.prototype),{constructor:THREE.DirectionalLightShadow});
THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a,c);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(THREE.Object3D.DefaultUp);this.updateMatrix();this.groundColor=new THREE.Color(b)};THREE.HemisphereLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.HemisphereLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});
THREE.PointLight=function(a,b,c,d){THREE.Light.call(this,a,b);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(90,1,.5,500))};
THREE.PointLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.PointLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});
THREE.SpotLight=function(a,b,c,d,e,f){THREE.Light.call(this,a,b);this.type="SpotLight";this.position.copy(THREE.Object3D.DefaultUp);this.updateMatrix();this.target=new THREE.Object3D;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new THREE.SpotLightShadow};
THREE.SpotLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.SpotLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});THREE.SpotLightShadow=function(){THREE.LightShadow.call(this,new THREE.PerspectiveCamera(50,1,.5,500))};
THREE.SpotLightShadow.prototype=Object.assign(Object.create(THREE.LightShadow.prototype),{constructor:THREE.SpotLightShadow,update:function(a){var b=2*THREE.Math.RAD2DEG*a.angle,c=this.mapSize.width/this.mapSize.height;a=a.distance||500;var d=this.camera;if(b!==d.fov||c!==d.aspect||a!==d.far)d.fov=b,d.aspect=c,d.far=a,d.updateProjectionMatrix()}});THREE.AudioLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.AudioLoader.prototype,{load:function(a,b,c,d){var e=new THREE.XHRLoader(this.manager);e.setResponseType("arraybuffer");e.load(a,function(a){THREE.AudioContext.decodeAudioData(a,function(a){b(a)})},c,d)}});THREE.Cache={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
THREE.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a,b,c;return function(d,e,f){function g(a,c,d,g,k){a=e+a;var l=THREE.Loader.Handlers.get(a);null!==l?a=l.load(a):(b.setCrossOrigin(f),a=b.load(a));void 0!==c&&(a.repeat.fromArray(c),1!==c[0]&&(a.wrapS=
THREE.RepeatWrapping),1!==c[1]&&(a.wrapT=THREE.RepeatWrapping));void 0!==d&&a.offset.fromArray(d);void 0!==g&&("repeat"===g[0]&&(a.wrapS=THREE.RepeatWrapping),"mirror"===g[0]&&(a.wrapS=THREE.MirroredRepeatWrapping),"repeat"===g[1]&&(a.wrapT=THREE.RepeatWrapping),"mirror"===g[1]&&(a.wrapT=THREE.MirroredRepeatWrapping));void 0!==k&&(a.anisotropy=k);c=THREE.Math.generateUUID();h[c]=a;return c}void 0===a&&(a=new THREE.Color);void 0===b&&(b=new THREE.TextureLoader);void 0===c&&(c=new THREE.MaterialLoader);
var h={},k={uuid:THREE.Math.generateUUID(),type:"MeshLambertMaterial"},l;for(l in d){var m=d[l];switch(l){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;case "DbgName":k.name=m;break;case "blending":k.blending=THREE[m];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case "colorDiffuse":k.color=a.fromArray(m).getHex();break;case "colorSpecular":k.specular=a.fromArray(m).getHex();break;case "colorEmissive":k.emissive=
a.fromArray(m).getHex();break;case "specularCoef":k.shininess=m;break;case "shading":"basic"===m.toLowerCase()&&(k.type="MeshBasicMaterial");"phong"===m.toLowerCase()&&(k.type="MeshPhongMaterial");"standard"===m.toLowerCase()&&(k.type="MeshStandardMaterial");break;case "mapDiffuse":k.map=g(m,d.mapDiffuseRepeat,d.mapDiffuseOffset,d.mapDiffuseWrap,d.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;case "mapEmissive":k.emissiveMap=
g(m,d.mapEmissiveRepeat,d.mapEmissiveOffset,d.mapEmissiveWrap,d.mapEmissiveAnisotropy);break;case "mapEmissiveRepeat":case "mapEmissiveOffset":case "mapEmissiveWrap":case "mapEmissiveAnisotropy":break;case "mapLight":k.lightMap=g(m,d.mapLightRepeat,d.mapLightOffset,d.mapLightWrap,d.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":k.aoMap=g(m,d.mapAORepeat,d.mapAOOffset,d.mapAOWrap,d.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;
case "mapBump":k.bumpMap=g(m,d.mapBumpRepeat,d.mapBumpOffset,d.mapBumpWrap,d.mapBumpAnisotropy);break;case "mapBumpScale":k.bumpScale=m;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":k.normalMap=g(m,d.mapNormalRepeat,d.mapNormalOffset,d.mapNormalWrap,d.mapNormalAnisotropy);break;case "mapNormalFactor":k.normalScale=[m,m];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":k.specularMap=
g(m,d.mapSpecularRepeat,d.mapSpecularOffset,d.mapSpecularWrap,d.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;case "mapMetalness":k.metalnessMap=g(m,d.mapMetalnessRepeat,d.mapMetalnessOffset,d.mapMetalnessWrap,d.mapMetalnessAnisotropy);break;case "mapMetalnessRepeat":case "mapMetalnessOffset":case "mapMetalnessWrap":case "mapMetalnessAnisotropy":break;case "mapRoughness":k.roughnessMap=g(m,d.mapRoughnessRepeat,
d.mapRoughnessOffset,d.mapRoughnessWrap,d.mapRoughnessAnisotropy);break;case "mapRoughnessRepeat":case "mapRoughnessOffset":case "mapRoughnessWrap":case "mapRoughnessAnisotropy":break;case "mapAlpha":k.alphaMap=g(m,d.mapAlphaRepeat,d.mapAlphaOffset,d.mapAlphaWrap,d.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":k.side=THREE.BackSide;break;case "doubleSided":k.side=THREE.DoubleSide;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");
k.opacity=m;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":k[l]=m;break;case "vertexColors":!0===m&&(k.vertexColors=THREE.VertexColors);"face"===m&&(k.vertexColors=THREE.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,m)}}"MeshBasicMaterial"===k.type&&delete k.emissive;"MeshPhongMaterial"!==k.type&&delete k.specular;1>k.opacity&&(k.transparent=!0);c.setTextures(h);
return c.parse(k)}}()};THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};THREE.XHRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.XHRLoader.prototype,{load:function(a,b,c,d){void 0!==this.path&&(a=this.path+a);var e=this,f=THREE.Cache.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;var g=new XMLHttpRequest;g.overrideMimeType("text/plain");g.open("GET",a,!0);g.addEventListener("load",function(c){var f=c.target.response;THREE.Cache.add(a,f);200===this.status?(b&&b(f),e.manager.itemEnd(a)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),
b&&b(f),e.manager.itemEnd(a)):(d&&d(c),e.manager.itemError(a))},!1);void 0!==c&&g.addEventListener("progress",function(a){c(a)},!1);g.addEventListener("error",function(b){d&&d(b);e.manager.itemError(a)},!1);void 0!==this.responseType&&(g.responseType=this.responseType);void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials);g.send(null);e.manager.itemStart(a);return g},setPath:function(a){this.path=a;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=
a;return this}});THREE.FontLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};Object.assign(THREE.FontLoader.prototype,{load:function(a,b,c,d){var e=this;(new THREE.XHRLoader(this.manager)).load(a,function(a){var c;try{c=JSON.parse(a)}catch(d){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function(a){return new THREE.Font(a)}});
THREE.ImageLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.ImageLoader.prototype,{load:function(a,b,c,d){var e=this,f=document.createElementNS("http://www.w3.org/1999/xhtml","img");f.onload=function(){URL.revokeObjectURL(f.src);b&&b(f);e.manager.itemEnd(a)};if(0===a.indexOf("data:"))f.src=a;else{var g=new THREE.XHRLoader;g.setPath(this.path);g.setResponseType("blob");g.load(a,function(a){f.src=URL.createObjectURL(a)},c,d)}e.manager.itemStart(a);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=
a;return this}});THREE.JSONLoader=function(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.withCredentials=!1};
Object.assign(THREE.JSONLoader.prototype,{load:function(a,b,c,d){var e=this,f=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(a),g=new THREE.XHRLoader(this.manager);g.setWithCredentials(this.withCredentials);g.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d)){if("object"===d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===
d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.");return}}c=e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1;(function(b){var d,g,h,k,l,m,p,n,q,r,s,v,t,u=a.faces;m=a.vertices;var D=a.normals,w=a.colors,I=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&I++;for(d=0;d<I;d++)c.faceVertexUvs[d]=[]}k=0;for(l=m.length;k<
l;)d=new THREE.Vector3,d.x=m[k++]*b,d.y=m[k++]*b,d.z=m[k++]*b,c.vertices.push(d);k=0;for(l=u.length;k<l;)if(b=u[k++],q=b&1,h=b&2,d=b&8,p=b&16,r=b&32,m=b&64,b&=128,q){q=new THREE.Face3;q.a=u[k];q.b=u[k+1];q.c=u[k+3];s=new THREE.Face3;s.a=u[k+1];s.b=u[k+2];s.c=u[k+3];k+=4;h&&(h=u[k++],q.materialIndex=h,s.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<I;d++)for(v=a.uvs[d],c.faceVertexUvs[d][h]=[],c.faceVertexUvs[d][h+1]=[],g=0;4>g;g++)n=u[k++],t=v[2*n],n=v[2*n+1],t=new THREE.Vector2(t,n),2!==g&&c.faceVertexUvs[d][h].push(t),
0!==g&&c.faceVertexUvs[d][h+1].push(t);p&&(p=3*u[k++],q.normal.set(D[p++],D[p++],D[p]),s.normal.copy(q.normal));if(r)for(d=0;4>d;d++)p=3*u[k++],r=new THREE.Vector3(D[p++],D[p++],D[p]),2!==d&&q.vertexNormals.push(r),0!==d&&s.vertexNormals.push(r);m&&(m=u[k++],m=w[m],q.color.setHex(m),s.color.setHex(m));if(b)for(d=0;4>d;d++)m=u[k++],m=w[m],2!==d&&q.vertexColors.push(new THREE.Color(m)),0!==d&&s.vertexColors.push(new THREE.Color(m));c.faces.push(q);c.faces.push(s)}else{q=new THREE.Face3;q.a=u[k++];q.b=
u[k++];q.c=u[k++];h&&(h=u[k++],q.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<I;d++)for(v=a.uvs[d],c.faceVertexUvs[d][h]=[],g=0;3>g;g++)n=u[k++],t=v[2*n],n=v[2*n+1],t=new THREE.Vector2(t,n),c.faceVertexUvs[d][h].push(t);p&&(p=3*u[k++],q.normal.set(D[p++],D[p++],D[p]));if(r)for(d=0;3>d;d++)p=3*u[k++],r=new THREE.Vector3(D[p++],D[p++],D[p]),q.vertexNormals.push(r);m&&(m=u[k++],q.color.setHex(w[m]));if(b)for(d=0;3>d;d++)m=u[k++],q.vertexColors.push(new THREE.Color(w[m]));c.faces.push(q)}})(d);(function(){var b=
void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,g=a.skinWeights.length;d<g;d+=b)c.skinWeights.push(new THREE.Vector4(a.skinWeights[d],1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:0));if(a.skinIndices)for(d=0,g=a.skinIndices.length;d<g;d+=b)c.skinIndices.push(new THREE.Vector4(a.skinIndices[d],1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0));c.bones=a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==
c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.")})();(function(b){if(void 0!==a.morphTargets)for(var d=0,g=a.morphTargets.length;d<g;d++){c.morphTargets[d]={};c.morphTargets[d].name=a.morphTargets[d].name;c.morphTargets[d].vertices=[];for(var h=c.morphTargets[d].vertices,k=a.morphTargets[d].vertices,l=0,m=k.length;l<
m;l+=3){var p=new THREE.Vector3;p.x=k[l]*b;p.y=k[l+1]*b;p.z=k[l+2]*b;h.push(p)}}if(void 0!==a.morphColors&&0<a.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),b=c.faces,h=a.morphColors[0].colors,d=0,g=b.length;d<g;d++)b[d].color.fromArray(h,3*d)})(d);(function(){var b=[],d=[];void 0!==a.animation&&d.push(a.animation);void 0!==a.animations&&(a.animations.length?d=d.concat(a.animations):d.push(a.animations));for(var g=0;g<d.length;g++){var h=
THREE.AnimationClip.parseAnimation(d[g],c.bones);h&&b.push(h)}c.morphTargets&&(d=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(c.morphTargets,10),b=b.concat(d));0<b.length&&(c.animations=b)})();c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};d=THREE.Loader.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:d}}});
THREE.LoadingManager=function(a,b,c){var d=this,e=!1,f=0,g=0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)}};THREE.DefaultLoadingManager=new THREE.LoadingManager;
THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.BufferGeometryLoader.prototype,{load:function(a,b,c,d){var e=this;(new THREE.XHRLoader(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new THREE.BufferGeometry,c=a.data.index,d={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void 0!==c&&(c=new d[c.type](c.array),b.setIndex(new THREE.BufferAttribute(c,
1)));var e=a.data.attributes,f;for(f in e){var g=e[f],c=new d[g.type](g.array);b.addAttribute(f,new THREE.BufferAttribute(c,g.itemSize,g.normalized))}d=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==d)for(f=0,c=d.length;f!==c;++f)e=d[f],b.addGroup(e.start,e.count,e.materialIndex);a=a.data.boundingSphere;void 0!==a&&(d=new THREE.Vector3,void 0!==a.center&&d.fromArray(a.center),b.boundingSphere=new THREE.Sphere(d,a.radius));return b}});
THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.textures={}};
Object.assign(THREE.MaterialLoader.prototype,{load:function(a,b,c,d){var e=this;(new THREE.XHRLoader(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setTextures:function(a){this.textures=a},getTexture:function(a){var b=this.textures;void 0===b[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a);return b[a]},parse:function(a){var b=new THREE[a.type];void 0!==a.uuid&&(b.uuid=a.uuid);void 0!==a.name&&(b.name=a.name);void 0!==a.color&&b.color.setHex(a.color);void 0!==a.roughness&&
(b.roughness=a.roughness);void 0!==a.metalness&&(b.metalness=a.metalness);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&(b.shininess=a.shininess);void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.shading&&(b.shading=a.shading);void 0!==a.blending&&
(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.alphaTest&&(b.alphaTest=a.alphaTest);void 0!==a.depthTest&&(b.depthTest=a.depthTest);void 0!==a.depthWrite&&(b.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(b.colorWrite=a.colorWrite);void 0!==a.wireframe&&(b.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(b.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.size&&(b.size=a.size);
void 0!==a.sizeAttenuation&&(b.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(b.map=this.getTexture(a.map));void 0!==a.alphaMap&&(b.alphaMap=this.getTexture(a.alphaMap),b.transparent=!0);void 0!==a.bumpMap&&(b.bumpMap=this.getTexture(a.bumpMap));void 0!==a.bumpScale&&(b.bumpScale=a.bumpScale);void 0!==a.normalMap&&(b.normalMap=this.getTexture(a.normalMap));if(void 0!==a.normalScale){var c=a.normalScale;!1===Array.isArray(c)&&(c=[c,c]);b.normalScale=(new THREE.Vector2).fromArray(c)}void 0!==a.displacementMap&&
(b.displacementMap=this.getTexture(a.displacementMap));void 0!==a.displacementScale&&(b.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(b.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(b.roughnessMap=this.getTexture(a.roughnessMap));void 0!==a.metalnessMap&&(b.metalnessMap=this.getTexture(a.metalnessMap));void 0!==a.emissiveMap&&(b.emissiveMap=this.getTexture(a.emissiveMap));void 0!==a.emissiveIntensity&&(b.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&
(b.specularMap=this.getTexture(a.specularMap));void 0!==a.envMap&&(b.envMap=this.getTexture(a.envMap),b.combine=THREE.MultiplyOperation);void 0!==a.reflectivity&&(b.reflectivity=a.reflectivity);void 0!==a.lightMap&&(b.lightMap=this.getTexture(a.lightMap));void 0!==a.lightMapIntensity&&(b.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(b.aoMap=this.getTexture(a.aoMap));void 0!==a.aoMapIntensity&&(b.aoMapIntensity=a.aoMapIntensity);if(void 0!==a.materials)for(var c=0,d=a.materials.length;c<
d;c++)b.materials.push(this.parse(a.materials[c]));return b}});THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.texturePath=""};
Object.assign(THREE.ObjectLoader.prototype,{load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this;(new THREE.XHRLoader(e.manager)).load(a,function(a){e.parse(JSON.parse(a),b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseGeometries(a.geometries),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,
d),e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,e=0,f=a.length;e<f;e++){var g,h=a[e];switch(h.type){case "PlaneGeometry":case "PlaneBufferGeometry":g=new THREE[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":g=
new THREE[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":g=new THREE[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":g=new THREE[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":g=new THREE[h.type](h.radius,h.height,h.radialSegments,
h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":g=new THREE[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "DodecahedronGeometry":case "IcosahedronGeometry":case "OctahedronGeometry":case "TetrahedronGeometry":g=new THREE[h.type](h.radius,h.detail);break;case "RingGeometry":case "RingBufferGeometry":g=new THREE[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,
h.thetaStart,h.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":g=new THREE[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":g=new THREE[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case "LatheGeometry":case "LatheBufferGeometry":g=new THREE[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case "BufferGeometry":g=d.parse(h);break;case "Geometry":g=c.parse(h.data,this.texturePath).geometry;
break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+h.type+'"');continue}g.uuid=h.uuid;void 0!==h.name&&(g.name=h.name);b[h.uuid]=g}return b},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new THREE.MaterialLoader;d.setTextures(b);for(var e=0,f=a.length;e<f;e++){var g=d.parse(a[e]);c[g.uuid]=g}}return c},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=THREE.AnimationClip.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);
return g.load(a,function(){d.manager.itemEnd(a)})}var d=this,e={};if(void 0!==a&&0<a.length){var f=new THREE.LoadingManager(b),g=new THREE.ImageLoader(f);g.setCrossOrigin(this.crossOrigin);for(var f=0,h=a.length;f<h;f++){var k=a[f],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(k.url)?k.url:d.texturePath+k.url;e[k.uuid]=c(l)}}return e},parseTextures:function(a,b){function c(a){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a);return THREE[a]}
var d={};if(void 0!==a)for(var e=0,f=a.length;e<f;e++){var g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No "image" specified for',g.uuid);void 0===b[g.image]&&console.warn("THREE.ObjectLoader: Undefined image",g.image);var h=new THREE.Texture(b[g.image]);h.needsUpdate=!0;h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0]),
h.wrapT=c(g.wrap[1]));void 0!==g.minFilter&&(h.minFilter=c(g.minFilter));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter));void 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);d[g.uuid]=h}return d},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){function e(a){void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return c[a]}function f(a){if(void 0!==a)return void 0===d[a]&&console.warn("THREE.ObjectLoader: Undefined material",
a),d[a]}var g;switch(b.type){case "Scene":g=new THREE.Scene;break;case "PerspectiveCamera":g=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,b.far);void 0!==b.focus&&(g.focus=b.focus);void 0!==b.zoom&&(g.zoom=b.zoom);void 0!==b.filmGauge&&(g.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(g.filmOffset=b.filmOffset);void 0!==b.view&&(g.view=Object.assign({},b.view));break;case "OrthographicCamera":g=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":g=
new THREE.AmbientLight(b.color,b.intensity);break;case "DirectionalLight":g=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":g=new THREE.PointLight(b.color,b.intensity,b.distance,b.decay);break;case "SpotLight":g=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case "HemisphereLight":g=new THREE.HemisphereLight(b.color,b.groundColor,b.intensity);break;case "Mesh":g=e(b.geometry);var h=f(b.material);g=g.bones&&0<g.bones.length?new THREE.SkinnedMesh(g,
h):new THREE.Mesh(g,h);break;case "LOD":g=new THREE.LOD;break;case "Line":g=new THREE.Line(e(b.geometry),f(b.material),b.mode);break;case "PointCloud":case "Points":g=new THREE.Points(e(b.geometry),f(b.material));break;case "Sprite":g=new THREE.Sprite(f(b.material));break;case "Group":g=new THREE.Group;break;default:g=new THREE.Object3D}g.uuid=b.uuid;void 0!==b.name&&(g.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(g.position,g.quaternion,g.scale)):(void 0!==b.position&&g.position.fromArray(b.position),
void 0!==b.rotation&&g.rotation.fromArray(b.rotation),void 0!==b.scale&&g.scale.fromArray(b.scale));void 0!==b.castShadow&&(g.castShadow=b.castShadow);void 0!==b.receiveShadow&&(g.receiveShadow=b.receiveShadow);void 0!==b.visible&&(g.visible=b.visible);void 0!==b.userData&&(g.userData=b.userData);if(void 0!==b.children)for(var k in b.children)g.add(this.parseObject(b.children[k],c,d));if("LOD"===b.type)for(b=b.levels,h=0;h<b.length;h++){var l=b[h];k=g.getObjectByProperty("uuid",l.object);void 0!==
k&&g.addLevel(k,l.distance)}return g}}()});THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.TextureLoader.prototype,{load:function(a,b,c,d){var e=new THREE.Texture,f=new THREE.ImageLoader(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,function(c){var d=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data\:image\/jpeg/);e.format=d?THREE.RGBFormat:THREE.RGBAFormat;e.image=c;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});
THREE.CubeTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.CubeTextureLoader.prototype,{load:function(a,b,c,d){function e(c){g.load(a[c],function(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new THREE.CubeTexture,g=new THREE.ImageLoader(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);var h=0;for(c=0;c<a.length;++c)e(c);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});
THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};
Object.assign(THREE.BinaryTextureLoader.prototype,{load:function(a,b,c,d){var e=this,f=new THREE.DataTexture,g=new THREE.XHRLoader(this.manager);g.setResponseType("arraybuffer");g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:THREE.ClampToEdgeWrapping,f.wrapT=void 0!==a.wrapT?a.wrapT:THREE.ClampToEdgeWrapping,f.magFilter=void 0!==a.magFilter?a.magFilter:THREE.LinearFilter,
f.minFilter=void 0!==a.minFilter?a.minFilter:THREE.LinearMipMapLinearFilter,f.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=THREE.LinearFilter),f.needsUpdate=!0,b&&b(f,a)},c,d);return f}});THREE.CompressedTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};
Object.assign(THREE.CompressedTextureLoader.prototype,{load:function(a,b,c,d){function e(e){k.load(a[e],function(a){a=f._parser(a,!0);g[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};l+=1;6===l&&(1===a.mipmapCount&&(h.minFilter=THREE.LinearFilter),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)}var f=this,g=[],h=new THREE.CompressedTexture;h.image=g;var k=new THREE.XHRLoader(this.manager);k.setPath(this.path);k.setResponseType("arraybuffer");if(Array.isArray(a))for(var l=0,
m=0,p=a.length;m<p;++m)e(m);else k.load(a,function(a){a=f._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){g[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}else h.image.width=a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&(h.minFilter=THREE.LinearFilter);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d);return h},setPath:function(a){this.path=
a;return this}});
THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=THREE.NormalBlending;this.side=THREE.FrontSide;this.shading=THREE.SmoothShading;this.vertexColors=THREE.NoColors;this.opacity=1;this.transparent=!1;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=
this.blendSrcAlpha=null;this.depthFunc=THREE.LessEqualDepth;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.premultipliedAlpha=!1;this.overdraw=0;this._needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else{var d=this[b];void 0===d?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):
this[b]="overdraw"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color instanceof THREE.Color&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);
this.emissive instanceof THREE.Color&&(d.emissive=this.emissive.getHex());this.specular instanceof THREE.Color&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);this.map instanceof THREE.Texture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap instanceof THREE.Texture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap instanceof THREE.Texture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap instanceof THREE.Texture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,
d.bumpScale=this.bumpScale);this.normalMap instanceof THREE.Texture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap instanceof THREE.Texture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap instanceof THREE.Texture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap instanceof THREE.Texture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);
this.emissiveMap instanceof THREE.Texture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap instanceof THREE.Texture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap instanceof THREE.Texture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);this.blending!==THREE.NormalBlending&&(d.blending=this.blending);this.shading!==THREE.SmoothShading&&
(d.shading=this.shading);this.side!==THREE.FrontSide&&(d.side=this.side);this.vertexColors!==THREE.NoColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);c&&(c=b(a.textures),
a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.shading=a.shading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;
this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.clipShadows=a.clipShadows;a=a.clippingPlanes;var b=null;if(null!==
a)for(var c=a.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};Object.assign(THREE.Material.prototype,THREE.EventDispatcher.prototype);THREE.MaterialIdCount=0;
THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.type="LineBasicMaterial";this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial;
THREE.LineBasicMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.type="LineDashedMaterial";this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.lights=!1;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial;THREE.LineDashedMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.type="MeshBasicMaterial";this.color=new THREE.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;
THREE.MeshBasicMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.type="MeshDepthMaterial";this.depthPacking=THREE.BasicDepthPacking;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;THREE.MeshDepthMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.type="MeshLambertMaterial";this.color=new THREE.Color(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;
THREE.MeshLambertMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=
a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=this.lights=this.fog=!1;this.setValues(a)};
THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;THREE.MeshNormalMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.type="MeshPhongMaterial";this.color=new THREE.Color(16777215);this.specular=new THREE.Color(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=
0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;
THREE.MeshPhongMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);
this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;
this.morphNormals=a.morphNormals;return this};
THREE.MeshStandardMaterial=function(a){THREE.Material.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new THREE.Color(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=
1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshStandardMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshStandardMaterial.prototype.constructor=THREE.MeshStandardMaterial;
THREE.MeshStandardMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=
a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};THREE.MeshPhysicalMaterial=function(a){THREE.MeshStandardMaterial.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)};THREE.MeshPhysicalMaterial.prototype=Object.create(THREE.MeshStandardMaterial.prototype);THREE.MeshPhysicalMaterial.prototype.constructor=THREE.MeshPhysicalMaterial;
THREE.MeshPhysicalMaterial.prototype.copy=function(a){THREE.MeshStandardMaterial.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};THREE.MultiMaterial=function(a){this.uuid=THREE.Math.generateUUID();this.type="MultiMaterial";this.materials=a instanceof Array?a:[];this.visible=!0};
THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(a){for(var b={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},c=this.materials,d=0,e=c.length;d<e;d++){var f=c[d].toJSON(a);delete f.metadata;b.materials.push(f)}b.visible=this.visible;return b},clone:function(){for(var a=new this.constructor,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return a}};
THREE.PointsMaterial=function(a){THREE.Material.call(this);this.type="PointsMaterial";this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(a)};THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial;
THREE.PointsMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,
drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial;
THREE.ShaderMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=THREE.UniformsUtils.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};
THREE.ShaderMaterial.prototype.toJSON=function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a);this.type="RawShaderMaterial"};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial;
THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.type="SpriteMaterial";this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial;THREE.SpriteMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};
THREE.ShadowMaterial=function(){THREE.ShaderMaterial.call(this,{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.lights,{opacity:{value:1}}]),vertexShader:THREE.ShaderChunk.shadow_vert,fragmentShader:THREE.ShaderChunk.shadow_frag});this.transparent=this.lights=!0;Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})};THREE.ShadowMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);
THREE.ShadowMaterial.prototype.constructor=THREE.ShadowMaterial;
THREE.Texture=function(a,b,c,d,e,f,g,h,k,l){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==a?a:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter;
this.anisotropy=void 0!==k?k:1;this.format=void 0!==g?g:THREE.RGBAFormat;this.type=void 0!==h?h:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==l?l:THREE.LinearEncoding;this.version=0;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=
a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};
if(void 0!==this.image){var c=this.image;void 0===c.uuid&&(c.uuid=THREE.Math.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,f=c.uuid,g;void 0!==c.toDataURL?g=c:(g=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),g.width=c.width,g.height=c.height,g.getContext("2d").drawImage(c,0,0,c.width,c.height));g=2048<g.width||2048<g.height?g.toDataURL("image/jpeg",.6):g.toDataURL("image/png");d[e]={uuid:f,url:g}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:"dispose"})},
transformUv:function(a){if(this.mapping===THREE.UVMapping){a.multiply(this.repeat);a.add(this.offset);if(0>a.x||1<a.x)switch(this.wrapS){case THREE.RepeatWrapping:a.x-=Math.floor(a.x);break;case THREE.ClampToEdgeWrapping:a.x=0>a.x?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.x)%2)?a.x=Math.ceil(a.x)-a.x:a.x-=Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case THREE.RepeatWrapping:a.y-=Math.floor(a.y);break;case THREE.ClampToEdgeWrapping:a.y=0>a.y?0:1;break;case THREE.MirroredRepeatWrapping:1===
Math.abs(Math.floor(a.y)%2)?a.y=Math.ceil(a.y)-a.y:a.y-=Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}};Object.assign(THREE.Texture.prototype,THREE.EventDispatcher.prototype);THREE.TextureIdCount=0;
THREE.DepthTexture=function(a,b,c,d,e,f,g,h,k){THREE.Texture.call(this,null,d,e,f,g,h,THREE.DepthFormat,c,k);this.image={width:a,height:b};this.type=void 0!==c?c:THREE.UnsignedShortType;this.magFilter=void 0!==g?g:THREE.NearestFilter;this.minFilter=void 0!==h?h:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DepthTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DepthTexture.prototype.constructor=THREE.DepthTexture;
THREE.CanvasTexture=function(a,b,c,d,e,f,g,h,k){THREE.Texture.call(this,a,b,c,d,e,f,g,h,k);this.needsUpdate=!0};THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture;THREE.CubeTexture=function(a,b,c,d,e,f,g,h,k,l){a=void 0!==a?a:[];b=void 0!==b?b:THREE.CubeReflectionMapping;THREE.Texture.call(this,a,b,c,d,e,f,g,h,k,l);this.flipY=!1};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CubeTexture.prototype.constructor=THREE.CubeTexture;Object.defineProperty(THREE.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});THREE.CompressedTexture=function(a,b,c,d,e,f,g,h,k,l,m,p){THREE.Texture.call(this,null,f,g,h,k,l,d,e,m,p);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture;
THREE.DataTexture=function(a,b,c,d,e,f,g,h,k,l,m,p){THREE.Texture.call(this,null,f,g,h,k,l,d,e,m,p);this.image={data:a,width:b,height:c};this.magFilter=void 0!==k?k:THREE.NearestFilter;this.minFilter=void 0!==l?l:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.constructor=THREE.DataTexture;
THREE.VideoTexture=function(a,b,c,d,e,f,g,h,k){function l(){requestAnimationFrame(l);a.readyState>=a.HAVE_CURRENT_DATA&&(m.needsUpdate=!0)}THREE.Texture.call(this,a,b,c,d,e,f,g,h,k);this.generateMipmaps=!1;var m=this;l()};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.VideoTexture.prototype.constructor=THREE.VideoTexture;THREE.Group=function(){THREE.Object3D.call(this);this.type="Group"};THREE.Group.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Group});
THREE.Points=function(a,b){THREE.Object3D.call(this);this.type="Points";this.geometry=void 0!==a?a:new THREE.BufferGeometry;this.material=void 0!==b?b:new THREE.PointsMaterial({color:16777215*Math.random()})};
THREE.Points.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Points,raycast:function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);if(f<m){var h=b.closestPointToPoint(a);h.applyMatrix4(k);var l=d.ray.origin.distanceTo(h);l<d.near||l>d.far||e.push({distance:l,distanceToRay:Math.sqrt(f),point:h.clone(),index:c,face:null,object:g})}}var g=this,h=this.geometry,k=this.matrixWorld,l=d.params.Points.threshold;
null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);var l=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=l*l,l=new THREE.Vector3;if(h instanceof THREE.BufferGeometry){var p=h.index,h=h.attributes.position.array;if(null!==p)for(var n=p.array,p=0,q=n.length;p<q;p++){var r=n[p];l.fromArray(h,3*r);f(l,r)}else for(p=0,n=h.length/3;p<n;p++)l.fromArray(h,3*p),f(l,p)}else for(l=h.vertices,
p=0,n=l.length;p<n;p++)f(l[p],p)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.Line=function(a,b,c){if(1===c)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.LineSegments(a,b);THREE.Object3D.call(this);this.type="Line";this.geometry=void 0!==a?a:new THREE.BufferGeometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()})};
THREE.Line.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Line,raycast:function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){var f=d.linePrecision,f=f*f,g=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var k=new THREE.Vector3,l=new THREE.Vector3,h=new THREE.Vector3,m=
new THREE.Vector3,p=this instanceof THREE.LineSegments?2:1;if(g instanceof THREE.BufferGeometry){var n=g.index,q=g.attributes.position.array;if(null!==n)for(var n=n.array,g=0,r=n.length-1;g<r;g+=p){var s=n[g+1];k.fromArray(q,3*n[g]);l.fromArray(q,3*s);s=b.distanceSqToSegment(k,l,m,h);s>f||(m.applyMatrix4(this.matrixWorld),s=d.ray.origin.distanceTo(m),s<d.near||s>d.far||e.push({distance:s,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(g=0,r=
q.length/3-1;g<r;g+=p)k.fromArray(q,3*g),l.fromArray(q,3*g+3),s=b.distanceSqToSegment(k,l,m,h),s>f||(m.applyMatrix4(this.matrixWorld),s=d.ray.origin.distanceTo(m),s<d.near||s>d.far||e.push({distance:s,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(g instanceof THREE.Geometry)for(k=g.vertices,l=k.length,g=0;g<l-1;g+=p)s=b.distanceSqToSegment(k[g],k[g+1],m,h),s>f||(m.applyMatrix4(this.matrixWorld),s=d.ray.origin.distanceTo(m),s<d.near||s>d.far||
e.push({distance:s,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.LineSegments=function(a,b){THREE.Line.call(this,a,b);this.type="LineSegments"};THREE.LineSegments.prototype=Object.assign(Object.create(THREE.Line.prototype),{constructor:THREE.LineSegments});
THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new THREE.BufferGeometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.drawMode=THREE.TrianglesDrawMode;this.updateMorphTargets()};
THREE.Mesh.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Mesh,setDrawMode:function(a){this.drawMode=a},copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.drawMode=a.drawMode;return this},updateMorphTargets:function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),
this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}},getMorphTargetIndexByName:function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0},raycast:function(){function a(a,b,c,d,e,g,f){THREE.Triangle.barycoordFromPoint(a,b,c,d,s);e.multiplyScalar(s.x);g.multiplyScalar(s.y);f.multiplyScalar(s.z);e.add(g).add(f);return e.clone()}function b(a,b,c,
d,e,g,f){var h=a.material;if(null===(h.side===THREE.BackSide?c.intersectTriangle(g,e,d,!0,f):c.intersectTriangle(d,e,g,h.side!==THREE.DoubleSide,f)))return null;t.copy(f);t.applyMatrix4(a.matrixWorld);c=b.ray.origin.distanceTo(t);return c<b.near||c>b.far?null:{distance:c,point:t.clone(),object:a}}function c(c,d,e,f,l,p,m,s){g.fromArray(f,3*p);h.fromArray(f,3*m);k.fromArray(f,3*s);if(c=b(c,d,e,g,h,k,v))l&&(n.fromArray(l,2*p),q.fromArray(l,2*m),r.fromArray(l,2*s),c.uv=a(v,g,h,k,n,q,r)),c.face=new THREE.Face3(p,
m,s,THREE.Triangle.normal(g,h,k)),c.faceIndex=p;return c}var d=new THREE.Matrix4,e=new THREE.Ray,f=new THREE.Sphere,g=new THREE.Vector3,h=new THREE.Vector3,k=new THREE.Vector3,l=new THREE.Vector3,m=new THREE.Vector3,p=new THREE.Vector3,n=new THREE.Vector2,q=new THREE.Vector2,r=new THREE.Vector2,s=new THREE.Vector3,v=new THREE.Vector3,t=new THREE.Vector3;return function(u,s){var w=this.geometry,t=this.material,z=this.matrixWorld;if(void 0!==t&&(null===w.boundingSphere&&w.computeBoundingSphere(),f.copy(w.boundingSphere),
f.applyMatrix4(z),!1!==u.ray.intersectsSphere(f)&&(d.getInverse(z),e.copy(u.ray).applyMatrix4(d),null===w.boundingBox||!1!==e.intersectsBox(w.boundingBox)))){var y,A;if(w instanceof THREE.BufferGeometry){var G,B,t=w.index,z=w.attributes,w=z.position.array;void 0!==z.uv&&(y=z.uv.array);if(null!==t)for(var z=t.array,F=0,J=z.length;F<J;F+=3){if(t=z[F],G=z[F+1],B=z[F+2],A=c(this,u,e,w,y,t,G,B))A.faceIndex=Math.floor(F/3),s.push(A)}else for(F=0,J=w.length;F<J;F+=9)if(t=F/3,G=t+1,B=t+2,A=c(this,u,e,w,y,
t,G,B))A.index=t,s.push(A)}else if(w instanceof THREE.Geometry){var P,K,z=t instanceof THREE.MultiMaterial,F=!0===z?t.materials:null,J=w.vertices;G=w.faces;B=w.faceVertexUvs[0];0<B.length&&(y=B);for(var H=0,M=G.length;H<M;H++){var O=G[H];A=!0===z?F[O.materialIndex]:t;if(void 0!==A){B=J[O.a];P=J[O.b];K=J[O.c];if(!0===A.morphTargets){A=w.morphTargets;var N=this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);k.set(0,0,0);for(var Q=0,C=A.length;Q<C;Q++){var L=N[Q];if(0!==L){var E=A[Q].vertices;g.addScaledVector(l.subVectors(E[O.a],
B),L);h.addScaledVector(m.subVectors(E[O.b],P),L);k.addScaledVector(p.subVectors(E[O.c],K),L)}}g.add(B);h.add(P);k.add(K);B=g;P=h;K=k}if(A=b(this,u,e,B,P,K,v))y&&(N=y[H],n.copy(N[0]),q.copy(N[1]),r.copy(N[2]),A.uv=a(v,B,P,K,n,q,r)),A.face=O,A.faceIndex=H,s.push(A)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.Bone=function(a){THREE.Object3D.call(this);this.type="Bone";this.skin=a};
THREE.Bone.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Bone,copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.skin=a.skin;return this}});
THREE.Skeleton=function(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(a=Math.sqrt(4*this.bones.length),a=THREE.Math.nextPowerOfTwo(Math.ceil(a)),this.boneTextureHeight=this.boneTextureWidth=a=Math.max(a,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType)):
this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new THREE.Matrix4)};
Object.assign(THREE.Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new THREE.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent instanceof THREE.Bone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):
a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=new THREE.Matrix4;return function(){for(var b=0,c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.toArray(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)}});
THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e=0,f=this.geometry.bones.length;e<f;++e)d=this.geometry.bones[e],b=new THREE.Bone(this),a.push(b),b.name=d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void 0!==d.scl&&b.scale.fromArray(d.scl);e=0;for(f=this.geometry.bones.length;e<f;++e)d=
this.geometry.bones[e],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[e]):this.add(a[e])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(a,void 0,c),this.matrixWorld)};
THREE.SkinnedMesh.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.SkinnedMesh,bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a],c=
1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry instanceof THREE.BufferGeometry)for(var b=new THREE.Vector4,d=this.geometry.attributes.skinWeight,a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.lengthManhattan(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)},updateMatrixWorld:function(a){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):
"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture)).copy(this)}});THREE.LOD=function(){THREE.Object3D.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})};
THREE.LOD.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.LOD,copy:function(a){THREE.Object3D.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<
d&&!(a<b[c].distance);c++);return b[c-1].object},raycast:function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++)if(c>=
d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<f;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});THREE.Sprite=function(a){THREE.Object3D.call(this);this.type="Sprite";this.material=void 0!==a?a:new THREE.SpriteMaterial};
THREE.Sprite.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Sprite,raycast:function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.distanceSqToPoint(a);d>this.scale.x*this.scale.y/4||c.push({distance:Math.sqrt(d),point:this.position,face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});
THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};
THREE.LensFlare.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.LensFlare,copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);
c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:f,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-c.rotation)}});
THREE.Scene=function(){THREE.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;
THREE.Scene.prototype.copy=function(a,b){THREE.Object3D.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};
THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={};THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";
THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n";THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";
THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";THREE.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n";THREE.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n";THREE.ShaderChunk.bsdfs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";
THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";
THREE.ShaderChunk.clipping_planes_fragment="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n";THREE.ShaderChunk.clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";
THREE.ShaderChunk.clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";THREE.ShaderChunk.clipping_planes_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";
THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif";THREE.ShaderChunk.common="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n";
THREE.ShaderChunk.cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";
THREE.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n";THREE.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";THREE.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";
THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n";THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";THREE.ShaderChunk.encodings_pars_fragment="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n";
THREE.ShaderChunk.encodings_fragment="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";
THREE.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";
THREE.ShaderChunk.envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";THREE.ShaderChunk.envmap_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";
THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif";THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";
THREE.ShaderChunk.lights_lambert_vertex="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";
THREE.ShaderChunk.lights_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";
THREE.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";THREE.ShaderChunk.lights_phong_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";
THREE.ShaderChunk.lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n";
THREE.ShaderChunk.lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n";
THREE.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n";
THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif";THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";
THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n";THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n";
THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n";THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n";THREE.ShaderChunk.metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n";
THREE.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";
THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";
THREE.ShaderChunk.normal_flip="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n";THREE.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";
THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";
THREE.ShaderChunk.packing="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";
THREE.ShaderChunk.premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n";THREE.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n";THREE.ShaderChunk.roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n";
THREE.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";
THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";
THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";
THREE.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";
THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";
THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n";THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";THREE.ShaderChunk.tonemapping_fragment="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n";
THREE.ShaderChunk.tonemapping_pars_fragment="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";
THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";
THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n";THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n";
THREE.UniformsUtils={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e instanceof THREE.Color||e instanceof THREE.Vector2||e instanceof THREE.Vector3||e instanceof THREE.Vector4||e instanceof THREE.Matrix3||e instanceof THREE.Matrix4||e instanceof THREE.Texture?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}};
THREE.UniformsLib={common:{diffuse:{value:new THREE.Color(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new THREE.Vector4(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},
normalScale:{value:new THREE.Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new THREE.Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},
directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},
skyColor:{},groundColor:{}}}},points:{diffuse:{value:new THREE.Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new THREE.Vector4(0,0,1,1)}}};THREE.ShaderChunk.cube_frag="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n";
THREE.ShaderChunk.cube_vert="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";THREE.ShaderChunk.depth_frag="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";
THREE.ShaderChunk.depth_vert="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.distanceRGBA_frag="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n";THREE.ShaderChunk.distanceRGBA_vert="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n";
THREE.ShaderChunk.equirect_frag="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n";THREE.ShaderChunk.equirect_vert="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";
THREE.ShaderChunk.linedashed_frag="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.linedashed_vert="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshbasic_vert="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n";
THREE.ShaderChunk.meshlambert_frag="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshlambert_vert="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.meshphong_frag="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshphong_vert="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.meshphysical_frag="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshphysical_vert="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.normal_frag="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n";THREE.ShaderChunk.normal_vert="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.points_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.points_vert="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.shadow_frag="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n";THREE.ShaderChunk.shadow_vert="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog]),vertexShader:THREE.ShaderChunk.meshbasic_vert,fragmentShader:THREE.ShaderChunk.meshbasic_frag},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{value:new THREE.Color(0)}}]),vertexShader:THREE.ShaderChunk.meshlambert_vert,
fragmentShader:THREE.ShaderChunk.meshlambert_frag},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{value:new THREE.Color(0)},specular:{value:new THREE.Color(1118481)},shininess:{value:30}}]),vertexShader:THREE.ShaderChunk.meshphong_vert,fragmentShader:THREE.ShaderChunk.meshphong_frag},
standard:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.roughnessmap,THREE.UniformsLib.metalnessmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{value:new THREE.Color(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:THREE.ShaderChunk.meshphysical_vert,
fragmentShader:THREE.ShaderChunk.meshphysical_frag},points:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.points,THREE.UniformsLib.fog]),vertexShader:THREE.ShaderChunk.points_vert,fragmentShader:THREE.ShaderChunk.points_frag},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:THREE.ShaderChunk.linedashed_vert,fragmentShader:THREE.ShaderChunk.linedashed_frag},depth:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,
THREE.UniformsLib.displacementmap]),vertexShader:THREE.ShaderChunk.depth_vert,fragmentShader:THREE.ShaderChunk.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:THREE.ShaderChunk.normal_vert,fragmentShader:THREE.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:THREE.ShaderChunk.cube_vert,fragmentShader:THREE.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:THREE.ShaderChunk.equirect_vert,
fragmentShader:THREE.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new THREE.Vector3}},vertexShader:THREE.ShaderChunk.distanceRGBA_vert,fragmentShader:THREE.ShaderChunk.distanceRGBA_frag}};THREE.ShaderLib.physical={uniforms:THREE.UniformsUtils.merge([THREE.ShaderLib.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:THREE.ShaderChunk.meshphysical_vert,fragmentShader:THREE.ShaderChunk.meshphysical_frag};
THREE.WebGLRenderer=function(a){function b(a,b,c,d){!0===A&&(a*=d,b*=d,c*=d);R.clearColor(a,b,c,d)}function c(){R.init();R.scissor(X.copy(ua).multiplyScalar(Z));R.viewport(fa.copy(na).multiplyScalar(Z));b(V.r,V.g,V.b,ba)}function d(){T=Q=null;$="";E=-1;R.reset()}function e(a){a.preventDefault();d();c();Y.clear()}function f(a){a=a.target;a.removeEventListener("dispose",f);g(a);Y.delete(a)}function g(a){var b=Y.get(a).program;a.program=void 0;void 0!==b&&oa.releaseProgram(b)}function h(a,b){return Math.abs(b[0])-
Math.abs(a[0])}function k(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.material.program&&b.material.program&&a.material.program!==b.material.program?a.material.program.id-b.material.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function l(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function m(a,b,c,d,e){var g;c.transparent?
(d=P,g=++K):(d=F,g=++J);g=d[g];void 0!==g?(g.id=a.id,g.object=a,g.geometry=b,g.material=c,g.z=W.z,g.group=e):(g={id:a.id,object:a,geometry:b,material:c,z:W.z,group:e},d.push(g))}function p(a){if(!wa.intersectsSphere(a))return!1;var b=da.numPlanes;if(0===b)return!0;var c=N.clippingPlanes,d=a.center;a=-a.radius;var e=0;do if(c[e].distanceToPoint(d)<a)return!1;while(++e!==b);return!0}function n(a,b){if(!1!==a.visible){if(a.layers.test(b.layers))if(a instanceof THREE.Light)B.push(a);else if(a instanceof
THREE.Sprite){var c;(c=!1===a.frustumCulled)||(ka.center.set(0,0,0),ka.radius=.7071067811865476,ka.applyMatrix4(a.matrixWorld),c=!0===p(ka));c&&M.push(a)}else if(a instanceof THREE.LensFlare)O.push(a);else if(a instanceof THREE.ImmediateRenderObject)!0===N.sortObjects&&(W.setFromMatrixPosition(a.matrixWorld),W.applyProjection(qa)),m(a,null,a.material,W.z,null);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)if(a instanceof THREE.SkinnedMesh&&a.skeleton.update(),
(c=!1===a.frustumCulled)||(c=a.geometry,null===c.boundingSphere&&c.computeBoundingSphere(),ka.copy(c.boundingSphere).applyMatrix4(a.matrixWorld),c=!0===p(ka)),c){var d=a.material;if(!0===d.visible)if(!0===N.sortObjects&&(W.setFromMatrixPosition(a.matrixWorld),W.applyProjection(qa)),c=ha.update(a),d instanceof THREE.MultiMaterial)for(var e=c.groups,g=d.materials,d=0,f=e.length;d<f;d++){var h=e[d],k=g[h.materialIndex];!0===k.visible&&m(a,c,k,W.z,h)}else m(a,c,d,W.z,null)}c=a.children;d=0;for(f=c.length;d<
f;d++)n(c[d],b)}}function q(a,b,c,d){for(var e=0,g=a.length;e<g;e++){var f=a[e],h=f.object,k=f.geometry,l=void 0===d?f.material:d,f=f.group;h.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,h.matrixWorld);h.normalMatrix.getNormalMatrix(h.modelViewMatrix);if(h instanceof THREE.ImmediateRenderObject){r(l);var n=s(b,c,l,h);$="";h.render(function(a){N.renderBufferImmediate(a,n,l)})}else N.renderBufferDirect(b,c,k,l,h,f)}}function r(a){a.side!==THREE.DoubleSide?R.enable(x.CULL_FACE):R.disable(x.CULL_FACE);
R.setFlipSided(a.side===THREE.BackSide);!0===a.transparent?R.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha,a.premultipliedAlpha):R.setBlending(THREE.NoBlending);R.setDepthFunc(a.depthFunc);R.setDepthTest(a.depthTest);R.setDepthWrite(a.depthWrite);R.setColorWrite(a.colorWrite);R.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}function s(a,b,c,d){ga=0;var e=Y.get(c);ra&&((va||a!==T)&&da.setState(c.clippingPlanes,
c.clipShadows,a,e,a===T&&c.id===E),void 0!==e.numClippingPlanes&&e.numClippingPlanes!==da.numPlanes&&(c.needsUpdate=!0));void 0===e.program&&(c.needsUpdate=!0);void 0!==e.lightsHash&&e.lightsHash!==S.hash&&(c.needsUpdate=!0);if(c.needsUpdate){a:{var h=Y.get(c),k=oa.getParameters(c,S,b,da.numPlanes,d),l=oa.getProgramCode(c,k),n=h.program,p=!0;if(void 0===n)c.addEventListener("dispose",f);else if(n.code!==l)g(c);else if(void 0!==k.shaderID)break a;else p=!1;p&&(k.shaderID?(n=THREE.ShaderLib[k.shaderID],
h.__webglShader={name:c.type,uniforms:THREE.UniformsUtils.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}):h.__webglShader={name:c.type,uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader},c.__webglShader=h.__webglShader,n=oa.acquireProgram(c,k,l),h.program=n,c.program=n);k=n.getAttributes();if(c.morphTargets)for(l=c.numSupportedMorphTargets=0;l<N.maxMorphTargets;l++)0<=k["morphTarget"+l]&&c.numSupportedMorphTargets++;if(c.morphNormals)for(l=
c.numSupportedMorphNormals=0;l<N.maxMorphNormals;l++)0<=k["morphNormal"+l]&&c.numSupportedMorphNormals++;k=h.__webglShader.uniforms;(c instanceof THREE.ShaderMaterial||c instanceof THREE.RawShaderMaterial)&&!0!==c.clipping||(h.numClippingPlanes=da.numPlanes,k.clippingPlanes=da.uniform);c.lights&&(h.lightsHash=S.hash,k.ambientLightColor.value=S.ambient,k.directionalLights.value=S.directional,k.spotLights.value=S.spot,k.pointLights.value=S.point,k.hemisphereLights.value=S.hemi,k.directionalShadowMap.value=
S.directionalShadowMap,k.directionalShadowMatrix.value=S.directionalShadowMatrix,k.spotShadowMap.value=S.spotShadowMap,k.spotShadowMatrix.value=S.spotShadowMatrix,k.pointShadowMap.value=S.pointShadowMap,k.pointShadowMatrix.value=S.pointShadowMatrix);l=h.program.getUniforms();l=THREE.WebGLUniforms.seqWithValue(l.seq,k);h.uniformsList=l;h.dynamicUniforms=THREE.WebGLUniforms.splitDynamic(l,k)}c.needsUpdate=!1}var m=!1,p=n=!1,h=e.program,l=h.getUniforms(),k=e.__webglShader.uniforms;h.id!==Q&&(x.useProgram(h.program),
Q=h.id,p=n=m=!0);c.id!==E&&(E=c.id,n=!0);if(m||a!==T){l.set(x,a,"projectionMatrix");ca.logarithmicDepthBuffer&&l.setValue(x,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));a!==T&&(T=a,p=n=!0);if(c instanceof THREE.ShaderMaterial||c instanceof THREE.MeshPhongMaterial||c instanceof THREE.MeshStandardMaterial||c.envMap)m=l.map.cameraPosition,void 0!==m&&m.setValue(x,W.setFromMatrixPosition(a.matrixWorld));(c instanceof THREE.MeshPhongMaterial||c instanceof THREE.MeshLambertMaterial||c instanceof THREE.MeshBasicMaterial||
c instanceof THREE.MeshStandardMaterial||c instanceof THREE.ShaderMaterial||c.skinning)&&l.setValue(x,"viewMatrix",a.matrixWorldInverse);l.set(x,N,"toneMappingExposure");l.set(x,N,"toneMappingWhitePoint")}c.skinning&&(l.setOptional(x,d,"bindMatrix"),l.setOptional(x,d,"bindMatrixInverse"),m=d.skeleton)&&(ca.floatVertexTextures&&m.useVertexTexture?(l.set(x,m,"boneTexture"),l.set(x,m,"boneTextureWidth"),l.set(x,m,"boneTextureHeight")):l.setOptional(x,m,"boneMatrices"));if(n){c.lights&&(n=p,k.ambientLightColor.needsUpdate=
n,k.directionalLights.needsUpdate=n,k.pointLights.needsUpdate=n,k.spotLights.needsUpdate=n,k.hemisphereLights.needsUpdate=n);b&&c.fog&&(k.fogColor.value=b.color,b instanceof THREE.Fog?(k.fogNear.value=b.near,k.fogFar.value=b.far):b instanceof THREE.FogExp2&&(k.fogDensity.value=b.density));if(c instanceof THREE.MeshBasicMaterial||c instanceof THREE.MeshLambertMaterial||c instanceof THREE.MeshPhongMaterial||c instanceof THREE.MeshStandardMaterial||c instanceof THREE.MeshDepthMaterial){k.opacity.value=
c.opacity;k.diffuse.value=c.color;c.emissive&&k.emissive.value.copy(c.emissive).multiplyScalar(c.emissiveIntensity);k.map.value=c.map;k.specularMap.value=c.specularMap;k.alphaMap.value=c.alphaMap;c.aoMap&&(k.aoMap.value=c.aoMap,k.aoMapIntensity.value=c.aoMapIntensity);var q;c.map?q=c.map:c.specularMap?q=c.specularMap:c.displacementMap?q=c.displacementMap:c.normalMap?q=c.normalMap:c.bumpMap?q=c.bumpMap:c.roughnessMap?q=c.roughnessMap:c.metalnessMap?q=c.metalnessMap:c.alphaMap?q=c.alphaMap:c.emissiveMap&&
(q=c.emissiveMap);void 0!==q&&(q instanceof THREE.WebGLRenderTarget&&(q=q.texture),b=q.offset,q=q.repeat,k.offsetRepeat.value.set(b.x,b.y,q.x,q.y));k.envMap.value=c.envMap;k.flipEnvMap.value=c.envMap instanceof THREE.CubeTexture?-1:1;k.reflectivity.value=c.reflectivity;k.refractionRatio.value=c.refractionRatio}c instanceof THREE.LineBasicMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity):c instanceof THREE.LineDashedMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity,k.dashSize.value=
c.dashSize,k.totalSize.value=c.dashSize+c.gapSize,k.scale.value=c.scale):c instanceof THREE.PointsMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity,k.size.value=c.size*Z,k.scale.value=.5*u.clientHeight,k.map.value=c.map,null!==c.map&&(q=c.map.offset,c=c.map.repeat,k.offsetRepeat.value.set(q.x,q.y,c.x,c.y))):c instanceof THREE.MeshLambertMaterial?(c.lightMap&&(k.lightMap.value=c.lightMap,k.lightMapIntensity.value=c.lightMapIntensity),c.emissiveMap&&(k.emissiveMap.value=c.emissiveMap)):c instanceof
THREE.MeshPhongMaterial?(k.specular.value=c.specular,k.shininess.value=Math.max(c.shininess,1E-4),c.lightMap&&(k.lightMap.value=c.lightMap,k.lightMapIntensity.value=c.lightMapIntensity),c.emissiveMap&&(k.emissiveMap.value=c.emissiveMap),c.bumpMap&&(k.bumpMap.value=c.bumpMap,k.bumpScale.value=c.bumpScale),c.normalMap&&(k.normalMap.value=c.normalMap,k.normalScale.value.copy(c.normalScale)),c.displacementMap&&(k.displacementMap.value=c.displacementMap,k.displacementScale.value=c.displacementScale,k.displacementBias.value=
c.displacementBias)):c instanceof THREE.MeshPhysicalMaterial?(k.clearCoat.value=c.clearCoat,k.clearCoatRoughness.value=c.clearCoatRoughness,v(k,c)):c instanceof THREE.MeshStandardMaterial?v(k,c):c instanceof THREE.MeshDepthMaterial?c.displacementMap&&(k.displacementMap.value=c.displacementMap,k.displacementScale.value=c.displacementScale,k.displacementBias.value=c.displacementBias):c instanceof THREE.MeshNormalMaterial&&(k.opacity.value=c.opacity);THREE.WebGLUniforms.upload(x,e.uniformsList,k,N)}l.set(x,
d,"modelViewMatrix");l.set(x,d,"normalMatrix");l.setValue(x,"modelMatrix",d.matrixWorld);e=e.dynamicUniforms;null!==e&&(THREE.WebGLUniforms.evalDynamic(e,k,d,a),THREE.WebGLUniforms.upload(x,e,k,N));return h}function v(a,b){a.roughness.value=b.roughness;a.metalness.value=b.metalness;b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap);b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap);b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.emissiveMap&&(a.emissiveMap.value=
b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias);b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)}function t(a){var b;if(a===THREE.RepeatWrapping)return x.REPEAT;if(a===THREE.ClampToEdgeWrapping)return x.CLAMP_TO_EDGE;if(a===
THREE.MirroredRepeatWrapping)return x.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return x.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return x.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return x.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return x.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return x.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return x.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return x.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return x.UNSIGNED_SHORT_4_4_4_4;
if(a===THREE.UnsignedShort5551Type)return x.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return x.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return x.BYTE;if(a===THREE.ShortType)return x.SHORT;if(a===THREE.UnsignedShortType)return x.UNSIGNED_SHORT;if(a===THREE.IntType)return x.INT;if(a===THREE.UnsignedIntType)return x.UNSIGNED_INT;if(a===THREE.FloatType)return x.FLOAT;b=U.get("OES_texture_half_float");if(null!==b&&a===THREE.HalfFloatType)return b.HALF_FLOAT_OES;if(a===THREE.AlphaFormat)return x.ALPHA;
if(a===THREE.RGBFormat)return x.RGB;if(a===THREE.RGBAFormat)return x.RGBA;if(a===THREE.LuminanceFormat)return x.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return x.LUMINANCE_ALPHA;if(a===THREE.DepthFormat)return x.DEPTH_COMPONENT;if(a===THREE.AddEquation)return x.FUNC_ADD;if(a===THREE.SubtractEquation)return x.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return x.FUNC_REVERSE_SUBTRACT;if(a===THREE.ZeroFactor)return x.ZERO;if(a===THREE.OneFactor)return x.ONE;if(a===THREE.SrcColorFactor)return x.SRC_COLOR;
if(a===THREE.OneMinusSrcColorFactor)return x.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return x.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return x.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return x.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return x.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return x.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return x.ONE_MINUS_DST_COLOR;if(a===THREE.SrcAlphaSaturateFactor)return x.SRC_ALPHA_SATURATE;b=U.get("WEBGL_compressed_texture_s3tc");
if(null!==b){if(a===THREE.RGB_S3TC_DXT1_Format)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}b=U.get("WEBGL_compressed_texture_pvrtc");if(null!==b){if(a===THREE.RGB_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===THREE.RGB_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
if(a===THREE.RGBA_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===THREE.RGBA_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=U.get("WEBGL_compressed_texture_etc1");if(null!==b&&a===THREE.RGB_ETC1_Format)return b.COMPRESSED_RGB_ETC1_WEBGL;b=U.get("EXT_blend_minmax");if(null!==b){if(a===THREE.MinEquation)return b.MIN_EXT;if(a===THREE.MaxEquation)return b.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);a=a||{};var u=void 0!==a.canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml",
"canvas"),D=void 0!==a.context?a.context:null,w=void 0!==a.alpha?a.alpha:!1,I=void 0!==a.depth?a.depth:!0,z=void 0!==a.stencil?a.stencil:!0,y=void 0!==a.antialias?a.antialias:!1,A=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,G=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,B=[],F=[],J=-1,P=[],K=-1,H=new Float32Array(8),M=[],O=[];this.domElement=u;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=
[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMapping=THREE.LinearToneMapping;this.toneMappingWhitePoint=this.toneMappingExposure=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var N=this,Q=null,C=null,L=null,E=-1,$="",T=null,X=new THREE.Vector4,ea=null,fa=new THREE.Vector4,ga=0,V=new THREE.Color(0),ba=0,aa=u.width,sa=u.height,Z=1,ua=new THREE.Vector4(0,0,aa,sa),xa=!1,na=new THREE.Vector4(0,0,aa,sa),wa=new THREE.Frustum,
da=new THREE.WebGLClipping,ra=!1,va=!1,ka=new THREE.Sphere,qa=new THREE.Matrix4,W=new THREE.Vector3,S={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},ia={calls:0,vertices:0,faces:0,points:0};this.info={render:ia,memory:{geometries:0,textures:0},programs:null};var x;try{w={alpha:w,depth:I,stencil:z,antialias:y,premultipliedAlpha:A,preserveDrawingBuffer:G};
x=D||u.getContext("webgl",w)||u.getContext("experimental-webgl",w);if(null===x){if(null!==u.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context.";}void 0===x.getShaderPrecisionFormat&&(x.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});u.addEventListener("webglcontextlost",e,!1)}catch(za){console.error("THREE.WebGLRenderer: "+za)}var U=new THREE.WebGLExtensions(x);U.get("WEBGL_depth_texture");U.get("OES_texture_float");
U.get("OES_texture_float_linear");U.get("OES_texture_half_float");U.get("OES_texture_half_float_linear");U.get("OES_standard_derivatives");U.get("ANGLE_instanced_arrays");U.get("OES_element_index_uint")&&(THREE.BufferGeometry.MaxIndex=4294967296);var ca=new THREE.WebGLCapabilities(x,U,a),R=new THREE.WebGLState(x,U,t),Y=new THREE.WebGLProperties,la=new THREE.WebGLTextures(x,U,R,Y,ca,t,this.info),ha=new THREE.WebGLObjects(x,Y,this.info),oa=new THREE.WebGLPrograms(this,ca),ta=new THREE.WebGLLights;this.info.programs=
oa.programs;var Aa=new THREE.WebGLBufferRenderer(x,U,ia),Ba=new THREE.WebGLIndexedBufferRenderer(x,U,ia),Ca=new THREE.OrthographicCamera(-1,1,1,-1,0,1),ma=new THREE.PerspectiveCamera,pa=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),new THREE.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1}));a=THREE.ShaderLib.cube;var ja=new THREE.Mesh(new THREE.BoxBufferGeometry(5,5,5),new THREE.ShaderMaterial({uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,side:THREE.BackSide,
depthTest:!1,depthWrite:!1,fog:!1}));c();this.context=x;this.capabilities=ca;this.extensions=U;this.properties=Y;this.state=R;var ya=new THREE.WebGLShadowMap(this,S,ha,ca);this.shadowMap=ya;var Da=new THREE.SpritePlugin(this,M),Ea=new THREE.LensFlarePlugin(this,O);this.getContext=function(){return x};this.getContextAttributes=function(){return x.getContextAttributes()};this.forceContextLoss=function(){U.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){return ca.getMaxAnisotropy()};
this.getPrecision=function(){return ca.precision};this.getPixelRatio=function(){return Z};this.setPixelRatio=function(a){void 0!==a&&(Z=a,this.setSize(na.z,na.w,!1))};this.getSize=function(){return{width:aa,height:sa}};this.setSize=function(a,b,c){aa=a;sa=b;u.width=a*Z;u.height=b*Z;!1!==c&&(u.style.width=a+"px",u.style.height=b+"px");this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){R.viewport(na.set(a,b,c,d))};this.setScissor=function(a,b,c,d){R.scissor(ua.set(a,b,c,d))};this.setScissorTest=
function(a){R.setScissorTest(xa=a)};this.getClearColor=function(){return V};this.setClearColor=function(a,c){V.set(a);ba=void 0!==c?c:1;b(V.r,V.g,V.b,ba)};this.getClearAlpha=function(){return ba};this.setClearAlpha=function(a){ba=a;b(V.r,V.g,V.b,ba)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=x.COLOR_BUFFER_BIT;if(void 0===b||b)d|=x.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=x.STENCIL_BUFFER_BIT;x.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,
!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.resetGLState=d;this.dispose=function(){P=[];K=-1;F=[];J=-1;u.removeEventListener("webglcontextlost",e,!1)};this.renderBufferImmediate=function(a,b,c){R.initAttributes();var d=Y.get(a);a.hasPositions&&!d.position&&(d.position=x.createBuffer());a.hasNormals&&!d.normal&&(d.normal=x.createBuffer());a.hasUvs&&!d.uv&&(d.uv=x.createBuffer());a.hasColors&&!d.color&&
(d.color=x.createBuffer());b=b.getAttributes();a.hasPositions&&(x.bindBuffer(x.ARRAY_BUFFER,d.position),x.bufferData(x.ARRAY_BUFFER,a.positionArray,x.DYNAMIC_DRAW),R.enableAttribute(b.position),x.vertexAttribPointer(b.position,3,x.FLOAT,!1,0,0));if(a.hasNormals){x.bindBuffer(x.ARRAY_BUFFER,d.normal);if("MeshPhongMaterial"!==c.type&&"MeshStandardMaterial"!==c.type&&"MeshPhysicalMaterial"!==c.type&&c.shading===THREE.FlatShading)for(var e=0,g=3*a.count;e<g;e+=9){var f=a.normalArray,h=(f[e+0]+f[e+3]+
f[e+6])/3,k=(f[e+1]+f[e+4]+f[e+7])/3,l=(f[e+2]+f[e+5]+f[e+8])/3;f[e+0]=h;f[e+1]=k;f[e+2]=l;f[e+3]=h;f[e+4]=k;f[e+5]=l;f[e+6]=h;f[e+7]=k;f[e+8]=l}x.bufferData(x.ARRAY_BUFFER,a.normalArray,x.DYNAMIC_DRAW);R.enableAttribute(b.normal);x.vertexAttribPointer(b.normal,3,x.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(x.bindBuffer(x.ARRAY_BUFFER,d.uv),x.bufferData(x.ARRAY_BUFFER,a.uvArray,x.DYNAMIC_DRAW),R.enableAttribute(b.uv),x.vertexAttribPointer(b.uv,2,x.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&
(x.bindBuffer(x.ARRAY_BUFFER,d.color),x.bufferData(x.ARRAY_BUFFER,a.colorArray,x.DYNAMIC_DRAW),R.enableAttribute(b.color),x.vertexAttribPointer(b.color,3,x.FLOAT,!1,0,0));R.disableUnusedAttributes();x.drawArrays(x.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){r(d);var g=s(a,b,d,e),k=!1;a=c.id+"_"+g.id+"_"+d.wireframe;a!==$&&($=a,k=!0);b=e.morphTargetInfluences;if(void 0!==b){a=[];for(var l=0,k=b.length;l<k;l++){var n=b[l];a.push([n,l])}a.sort(h);8<a.length&&(a.length=
8);for(var m=c.morphAttributes,l=0,k=a.length;l<k;l++)n=a[l],H[l]=n[0],0!==n[0]?(b=n[1],!0===d.morphTargets&&m.position&&c.addAttribute("morphTarget"+l,m.position[b]),!0===d.morphNormals&&m.normal&&c.addAttribute("morphNormal"+l,m.normal[b])):(!0===d.morphTargets&&c.removeAttribute("morphTarget"+l),!0===d.morphNormals&&c.removeAttribute("morphNormal"+l));g.getUniforms().setValue(x,"morphTargetInfluences",H);k=!0}b=c.index;l=c.attributes.position;!0===d.wireframe&&(b=ha.getWireframeAttribute(c));null!==
b?(a=Ba,a.setIndex(b)):a=Aa;if(k){a:{var k=void 0,p;if(c instanceof THREE.InstancedBufferGeometry&&(p=U.get("ANGLE_instanced_arrays"),null===p)){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");break a}void 0===k&&(k=0);R.initAttributes();var n=c.attributes,g=g.getAttributes(),m=d.defaultAttributeValues,q;for(q in g){var u=g[q];if(0<=u){var w=n[q];if(void 0!==w){var t=x.FLOAT,D=w.array,v=
w.normalized;D instanceof Float32Array?t=x.FLOAT:D instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):D instanceof Uint16Array?t=x.UNSIGNED_SHORT:D instanceof Int16Array?t=x.SHORT:D instanceof Uint32Array?t=x.UNSIGNED_INT:D instanceof Int32Array?t=x.INT:D instanceof Int8Array?t=x.BYTE:D instanceof Uint8Array&&(t=x.UNSIGNED_BYTE);var D=w.itemSize,y=ha.getAttributeBuffer(w);if(w instanceof THREE.InterleavedBufferAttribute){var z=w.data,A=z.stride,w=w.offset;z instanceof
THREE.InstancedInterleavedBuffer?(R.enableAttributeAndDivisor(u,z.meshPerAttribute,p),void 0===c.maxInstancedCount&&(c.maxInstancedCount=z.meshPerAttribute*z.count)):R.enableAttribute(u);x.bindBuffer(x.ARRAY_BUFFER,y);x.vertexAttribPointer(u,D,t,v,A*z.array.BYTES_PER_ELEMENT,(k*A+w)*z.array.BYTES_PER_ELEMENT)}else w instanceof THREE.InstancedBufferAttribute?(R.enableAttributeAndDivisor(u,w.meshPerAttribute,p),void 0===c.maxInstancedCount&&(c.maxInstancedCount=w.meshPerAttribute*w.count)):R.enableAttribute(u),
x.bindBuffer(x.ARRAY_BUFFER,y),x.vertexAttribPointer(u,D,t,v,0,k*D*w.array.BYTES_PER_ELEMENT)}else if(void 0!==m&&(t=m[q],void 0!==t))switch(t.length){case 2:x.vertexAttrib2fv(u,t);break;case 3:x.vertexAttrib3fv(u,t);break;case 4:x.vertexAttrib4fv(u,t);break;default:x.vertexAttrib1fv(u,t)}}}R.disableUnusedAttributes()}null!==b&&x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,ha.getAttributeBuffer(b))}p=Infinity;null!==b?p=b.count:void 0!==l&&(p=l.count);q=c.drawRange.start;b=c.drawRange.count;l=null!==f?f.start:
0;k=null!==f?f.count:Infinity;f=Math.max(0,q,l);p=Math.min(0+p,q+b,l+k)-1;p=Math.max(0,p-f+1);if(e instanceof THREE.Mesh)if(!0===d.wireframe)R.setLineWidth(d.wireframeLinewidth*(null===C?Z:1)),a.setMode(x.LINES);else switch(e.drawMode){case THREE.TrianglesDrawMode:a.setMode(x.TRIANGLES);break;case THREE.TriangleStripDrawMode:a.setMode(x.TRIANGLE_STRIP);break;case THREE.TriangleFanDrawMode:a.setMode(x.TRIANGLE_FAN)}else e instanceof THREE.Line?(d=d.linewidth,void 0===d&&(d=1),R.setLineWidth(d*(null===
C?Z:1)),e instanceof THREE.LineSegments?a.setMode(x.LINES):a.setMode(x.LINE_STRIP)):e instanceof THREE.Points&&a.setMode(x.POINTS);c instanceof THREE.InstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,f,p):a.render(f,p)};this.render=function(a,c,d,e){if(!1===c instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var f=a.fog;$="";E=-1;T=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===c.parent&&c.updateMatrixWorld();
c.matrixWorldInverse.getInverse(c.matrixWorld);qa.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse);wa.setFromMatrix(qa);B.length=0;K=J=-1;M.length=0;O.length=0;va=this.localClippingEnabled;ra=da.init(this.clippingPlanes,va,c);n(a,c);F.length=J+1;P.length=K+1;!0===N.sortObjects&&(F.sort(k),P.sort(l));ra&&da.beginShadows();for(var g=B,h=0,p=0,m=g.length;p<m;p++){var u=g[p];u.castShadow&&(S.shadows[h++]=u)}S.shadows.length=h;ya.render(a,c);for(var g=B,r=u=0,s=0,w,t,D,H,v=c.matrixWorldInverse,
y=0,z=0,A=0,L=0,h=0,p=g.length;h<p;h++)if(m=g[h],w=m.color,t=m.intensity,D=m.distance,H=m.shadow&&m.shadow.map?m.shadow.map.texture:null,m instanceof THREE.AmbientLight)u+=w.r*t,r+=w.g*t,s+=w.b*t;else if(m instanceof THREE.DirectionalLight){var C=ta.get(m);C.color.copy(m.color).multiplyScalar(m.intensity);C.direction.setFromMatrixPosition(m.matrixWorld);W.setFromMatrixPosition(m.target.matrixWorld);C.direction.sub(W);C.direction.transformDirection(v);if(C.shadow=m.castShadow)C.shadowBias=m.shadow.bias,
C.shadowRadius=m.shadow.radius,C.shadowMapSize=m.shadow.mapSize;S.directionalShadowMap[y]=H;S.directionalShadowMatrix[y]=m.shadow.matrix;S.directional[y++]=C}else if(m instanceof THREE.SpotLight){C=ta.get(m);C.position.setFromMatrixPosition(m.matrixWorld);C.position.applyMatrix4(v);C.color.copy(w).multiplyScalar(t);C.distance=D;C.direction.setFromMatrixPosition(m.matrixWorld);W.setFromMatrixPosition(m.target.matrixWorld);C.direction.sub(W);C.direction.transformDirection(v);C.coneCos=Math.cos(m.angle);
C.penumbraCos=Math.cos(m.angle*(1-m.penumbra));C.decay=0===m.distance?0:m.decay;if(C.shadow=m.castShadow)C.shadowBias=m.shadow.bias,C.shadowRadius=m.shadow.radius,C.shadowMapSize=m.shadow.mapSize;S.spotShadowMap[A]=H;S.spotShadowMatrix[A]=m.shadow.matrix;S.spot[A++]=C}else if(m instanceof THREE.PointLight){C=ta.get(m);C.position.setFromMatrixPosition(m.matrixWorld);C.position.applyMatrix4(v);C.color.copy(m.color).multiplyScalar(m.intensity);C.distance=m.distance;C.decay=0===m.distance?0:m.decay;if(C.shadow=
m.castShadow)C.shadowBias=m.shadow.bias,C.shadowRadius=m.shadow.radius,C.shadowMapSize=m.shadow.mapSize;S.pointShadowMap[z]=H;void 0===S.pointShadowMatrix[z]&&(S.pointShadowMatrix[z]=new THREE.Matrix4);W.setFromMatrixPosition(m.matrixWorld).negate();S.pointShadowMatrix[z].identity().setPosition(W);S.point[z++]=C}else m instanceof THREE.HemisphereLight&&(C=ta.get(m),C.direction.setFromMatrixPosition(m.matrixWorld),C.direction.transformDirection(v),C.direction.normalize(),C.skyColor.copy(m.color).multiplyScalar(t),
C.groundColor.copy(m.groundColor).multiplyScalar(t),S.hemi[L++]=C);S.ambient[0]=u;S.ambient[1]=r;S.ambient[2]=s;S.directional.length=y;S.spot.length=A;S.point.length=z;S.hemi.length=L;S.hash=y+","+z+","+A+","+L+","+S.shadows.length;ra&&da.endShadows();ia.calls=0;ia.vertices=0;ia.faces=0;ia.points=0;void 0===d&&(d=null);this.setRenderTarget(d);g=a.background;null===g?b(V.r,V.g,V.b,ba):g instanceof THREE.Color&&b(g.r,g.g,g.b,1);(this.autoClear||e)&&this.clear(this.autoClearColor,this.autoClearDepth,
this.autoClearStencil);g instanceof THREE.CubeTexture?(ma.projectionMatrix.copy(c.projectionMatrix),ma.matrixWorld.extractRotation(c.matrixWorld),ma.matrixWorldInverse.getInverse(ma.matrixWorld),ja.material.uniforms.tCube.value=g,ja.modelViewMatrix.multiplyMatrices(ma.matrixWorldInverse,ja.matrixWorld),ha.update(ja),N.renderBufferDirect(ma,null,ja.geometry,ja.material,ja,null)):g instanceof THREE.Texture&&(pa.material.map=g,ha.update(pa),N.renderBufferDirect(Ca,null,pa.geometry,pa.material,pa,null));
a.overrideMaterial?(e=a.overrideMaterial,q(F,c,f,e),q(P,c,f,e)):(R.setBlending(THREE.NoBlending),q(F,c,f),q(P,c,f));Da.render(a,c);Ea.render(a,c,fa);d&&la.updateRenderTargetMipmap(d);R.setDepthTest(!0);R.setDepthWrite(!0);R.setColorWrite(!0)}};this.setFaceCulling=function(a,b){R.setCullFace(a);R.setFlipSided(b===THREE.FrontFaceDirectionCW)};this.allocTextureUnit=function(){var a=ga;a>=ca.maxTextures&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+ca.maxTextures);
ga+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b instanceof THREE.WebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);la.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);la.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=
!1;return function(b,c){b instanceof THREE.WebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b instanceof THREE.CubeTexture||Array.isArray(b.image)&&6===b.image.length?la.setTextureCube(b,c):la.setTextureCubeDynamic(b,c)}}();this.getCurrentRenderTarget=function(){return C};this.setRenderTarget=function(a){(C=a)&&void 0===Y.get(a).__webglFramebuffer&&la.setupRenderTarget(a);
var b=a instanceof THREE.WebGLRenderTargetCube,c;a?(c=Y.get(a),c=b?c.__webglFramebuffer[a.activeCubeFace]:c.__webglFramebuffer,X.copy(a.scissor),ea=a.scissorTest,fa.copy(a.viewport)):(c=null,X.copy(ua).multiplyScalar(Z),ea=xa,fa.copy(na).multiplyScalar(Z));L!==c&&(x.bindFramebuffer(x.FRAMEBUFFER,c),L=c);R.scissor(X);R.setScissorTest(ea);R.viewport(fa);b&&(b=Y.get(a.texture),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,b.__webglTexture,a.activeMipMapLevel))};
this.readRenderTargetPixels=function(a,b,c,d,e,g){if(!1===a instanceof THREE.WebGLRenderTarget)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var f=Y.get(a).__webglFramebuffer;if(f){var h=!1;f!==L&&(x.bindFramebuffer(x.FRAMEBUFFER,f),h=!0);try{var k=a.texture;k.format!==THREE.RGBAFormat&&t(k.format)!==x.getParameter(x.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):
k.type===THREE.UnsignedByteType||t(k.type)===x.getParameter(x.IMPLEMENTATION_COLOR_READ_TYPE)||k.type===THREE.FloatType&&U.get("WEBGL_color_buffer_float")||k.type===THREE.HalfFloatType&&U.get("EXT_color_buffer_half_float")?x.checkFramebufferStatus(x.FRAMEBUFFER)===x.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&x.readPixels(b,c,d,e,t(k.format),t(k.type),g):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{h&&
x.bindFramebuffer(x.FRAMEBUFFER,L)}}}}};
THREE.WebGLRenderTarget=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.width=a;this.height=b;this.scissor=new THREE.Vector4(0,0,a,b);this.scissorTest=!1;this.viewport=new THREE.Vector4(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=THREE.LinearFilter);this.texture=new THREE.Texture(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:
!0;this.depthTexture=null};
Object.assign(THREE.WebGLRenderTarget.prototype,THREE.EventDispatcher.prototype,{setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;
return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeMipMapLevel=this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube;
THREE.WebGLBufferRenderer=function(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,f){a.drawArrays(d,b,f);c.calls++;c.vertices+=f;d===a.TRIANGLES&&(c.faces+=f/3)};this.renderInstances=function(e){var f=b.get("ANGLE_instanced_arrays");if(null===f)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var g=e.attributes.position,h=0,h=g instanceof THREE.InterleavedBufferAttribute?g.data.count:
g.count;f.drawArraysInstancedANGLE(d,0,h,e.maxInstancedCount);c.calls++;c.vertices+=h*e.maxInstancedCount;d===a.TRIANGLES&&(c.faces+=e.maxInstancedCount*h/3)}}};
THREE.WebGLClipping=function(){function a(){l.value!==d&&(l.value=d,l.needsUpdate=0<e);c.numPlanes=e}function b(a,b,d,e){var g=null!==a?a.length:0,f=null;if(0!==g){f=l.value;if(!0!==e||null===f){e=d+4*g;b=b.matrixWorldInverse;k.getNormalMatrix(b);if(null===f||f.length<e)f=new Float32Array(e);for(e=0;e!==g;++e,d+=4)h.copy(a[e]).applyMatrix4(b,k),h.normal.toArray(f,d),f[d+3]=h.constant}l.value=f;l.needsUpdate=!0}c.numPlanes=g;return f}var c=this,d=null,e=0,f=!1,g=!1,h=new THREE.Plane,k=new THREE.Matrix3,
l={value:null,needsUpdate:!1};this.uniform=l;this.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;f=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,k,q,r){if(!f||null===c||0===c.length||g&&!h)g?b(null):a();else{h=g?0:e;var s=4*h,v=q.clippingState||null;l.value=v;v=b(c,k,s,r);for(c=0;c!==s;++c)v[c]=d[c];q.clippingState=v;this.numPlanes+=h}}};
THREE.WebGLIndexedBufferRenderer=function(a,b,c){var d,e,f;this.setMode=function(a){d=a};this.setIndex=function(c){c.array instanceof Uint32Array&&b.get("OES_element_index_uint")?(e=a.UNSIGNED_INT,f=4):(e=a.UNSIGNED_SHORT,f=2)};this.render=function(b,h){a.drawElements(d,h,e,b*f);c.calls++;c.vertices+=h;d===a.TRIANGLES&&(c.faces+=h/3)};this.renderInstances=function(g,h,k){var l=b.get("ANGLE_instanced_arrays");null===l?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
(l.drawElementsInstancedANGLE(d,k,e,h*f,g.maxInstancedCount),c.calls++,c.vertices+=k*g.maxInstancedCount,d===a.TRIANGLES&&(c.faces+=g.maxInstancedCount*k/3))}};
THREE.WebGLExtensions=function(a){var b={};this.get=function(c){if(void 0!==b[c])return b[c];var d;switch(c){case "WEBGL_depth_texture":d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=
a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":d=a.getExtension("WEBGL_compressed_texture_etc1");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");
return b[c]=d}};
THREE.WebGLCapabilities=function(a,b,c){function d(b){if("highp"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}var e;this.getMaxAnisotropy=function(){if(void 0!==e)return e;var c=b.get("EXT_texture_filter_anisotropic");
return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0};this.getMaxPrecision=d;this.precision=void 0!==c.precision?c.precision:"highp";this.logarithmicDepthBuffer=void 0!==c.logarithmicDepthBuffer?c.logarithmicDepthBuffer:!1;this.maxTextures=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);this.maxCubemapSize=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=
a.getParameter(a.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS);this.maxVaryings=a.getParameter(a.MAX_VARYING_VECTORS);this.maxFragmentUniforms=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!b.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;c=d(this.precision);c!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",
c,"instead."),this.precision=c);this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!b.get("EXT_frag_depth"))};
THREE.WebGLGeometries=function(a,b,c){function d(a){var h=a.target;a=f[h.id];null!==a.index&&e(a.index);var k=a.attributes,l;for(l in k)e(k[l]);h.removeEventListener("dispose",d);delete f[h.id];l=b.get(h);l.wireframe&&e(l.wireframe);b.delete(h);h=b.get(a);h.wireframe&&e(h.wireframe);b.delete(a);c.memory.geometries--}function e(c){var d;d=c instanceof THREE.InterleavedBufferAttribute?b.get(c.data).__webglBuffer:b.get(c).__webglBuffer;void 0!==d&&(a.deleteBuffer(d),c instanceof THREE.InterleavedBufferAttribute?
b.delete(c.data):b.delete(c))}var f={};this.get=function(a){var b=a.geometry;if(void 0!==f[b.id])return f[b.id];b.addEventListener("dispose",d);var e;b instanceof THREE.BufferGeometry?e=b:b instanceof THREE.Geometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new THREE.BufferGeometry).setFromObject(a)),e=b._bufferGeometry);f[b.id]=e;c.memory.geometries++;return e}};
THREE.WebGLLights=function(){var a={};this.get=function(b){if(void 0!==a[b.id])return a[b.id];var c;switch(b.type){case "DirectionalLight":c={direction:new THREE.Vector3,color:new THREE.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "SpotLight":c={position:new THREE.Vector3,direction:new THREE.Vector3,color:new THREE.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "PointLight":c=
{position:new THREE.Vector3,color:new THREE.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "HemisphereLight":c={direction:new THREE.Vector3,skyColor:new THREE.Color,groundColor:new THREE.Color}}return a[b.id]=c}};
THREE.WebGLObjects=function(a,b,c){function d(c,d){var e=c instanceof THREE.InterleavedBufferAttribute?c.data:c,f=b.get(e);void 0===f.__webglBuffer?(f.__webglBuffer=a.createBuffer(),a.bindBuffer(d,f.__webglBuffer),a.bufferData(d,e.array,e.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW),f.version=e.version):f.version!==e.version&&(a.bindBuffer(d,f.__webglBuffer),!1===e.dynamic||-1===e.updateRange.count?a.bufferSubData(d,0,e.array):0===e.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
(a.bufferSubData(d,e.updateRange.offset*e.array.BYTES_PER_ELEMENT,e.array.subarray(e.updateRange.offset,e.updateRange.offset+e.updateRange.count)),e.updateRange.count=0),f.version=e.version)}function e(a,b,c){if(b>c){var d=b;b=c;c=d}d=a[b];return void 0===d?(a[b]=[c],!0):-1===d.indexOf(c)?(d.push(c),!0):!1}var f=new THREE.WebGLGeometries(a,b,c);this.getAttributeBuffer=function(a){return a instanceof THREE.InterleavedBufferAttribute?b.get(a.data).__webglBuffer:b.get(a).__webglBuffer};this.getWireframeAttribute=
function(c){var f=b.get(c);if(void 0!==f.wireframe)return f.wireframe;var k=[],l=c.index,m=c.attributes;c=m.position;if(null!==l)for(var m={},l=l.array,p=0,n=l.length;p<n;p+=3){var q=l[p+0],r=l[p+1],s=l[p+2];e(m,q,r)&&k.push(q,r);e(m,r,s)&&k.push(r,s);e(m,s,q)&&k.push(s,q)}else for(l=m.position.array,p=0,n=l.length/3-1;p<n;p+=3)q=p+0,r=p+1,s=p+2,k.push(q,r,r,s,s,q);k=new THREE.BufferAttribute(new (65535<c.count?Uint32Array:Uint16Array)(k),1);d(k,a.ELEMENT_ARRAY_BUFFER);return f.wireframe=k};this.update=
function(b){var c=f.get(b);b.geometry instanceof THREE.Geometry&&c.updateFromObject(b);b=c.index;var e=c.attributes;null!==b&&d(b,a.ELEMENT_ARRAY_BUFFER);for(var l in e)d(e[l],a.ARRAY_BUFFER);b=c.morphAttributes;for(l in b)for(var e=b[l],m=0,p=e.length;m<p;m++)d(e[m],a.ARRAY_BUFFER);return c}};
THREE.WebGLProgram=function(){function a(a){switch(a){case THREE.LinearEncoding:return["Linear","( value )"];case THREE.sRGBEncoding:return["sRGB","( value )"];case THREE.RGBEEncoding:return["RGBE","( value )"];case THREE.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case THREE.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case THREE.RGBDEncoding:return["RGBD","( value, 256.0 )"];case THREE.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+
a);}}function b(b,c){var d=a(c);return"vec4 "+b+"( vec4 value ) { return "+d[0]+"ToLinear"+d[1]+"; }"}function c(b,c){var d=a(c);return"vec4 "+b+"( vec4 value ) { return LinearTo"+d[0]+d[1]+"; }"}function d(a,b){var c;switch(b){case THREE.LinearToneMapping:c="Linear";break;case THREE.ReinhardToneMapping:c="Reinhard";break;case THREE.Uncharted2ToneMapping:c="Uncharted2";break;case THREE.CineonToneMapping:c="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+b);}return"vec3 "+a+
"( vec3 color ) { return "+c+"ToneMapping( color ); }"}function e(a,b,c){a=a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&c.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||b.envMap)&&c.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":
""].filter(g).join("\n")}function f(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push("#define "+c+" "+d)}return b.join("\n")}function g(a){return""!==a}function h(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function k(a){return a.replace(/#include +<([\w\d.]+)>/g,function(a,b){var c=THREE.ShaderChunk[b];if(void 0===c)throw Error("Can not resolve #include <"+
b+">");return k(c)})}function l(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(a,b,c,d){a="";for(b=parseInt(b);b<parseInt(c);b++)a+=d.replace(/\[ i \]/g,"[ "+b+" ]");return a})}var m=0;return function(a,n,q,r){var s=a.context,v=q.extensions,t=q.defines,u=q.__webglShader.vertexShader,D=q.__webglShader.fragmentShader,w="SHADOWMAP_TYPE_BASIC";r.shadowMapType===THREE.PCFShadowMap?w="SHADOWMAP_TYPE_PCF":r.shadowMapType===THREE.PCFSoftShadowMap&&(w="SHADOWMAP_TYPE_PCF_SOFT");
var I="ENVMAP_TYPE_CUBE",z="ENVMAP_MODE_REFLECTION",y="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(q.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:I="ENVMAP_TYPE_CUBE";break;case THREE.CubeUVReflectionMapping:case THREE.CubeUVRefractionMapping:I="ENVMAP_TYPE_CUBE_UV";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:I="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:I="ENVMAP_TYPE_SPHERE"}switch(q.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:z=
"ENVMAP_MODE_REFRACTION"}switch(q.combine){case THREE.MultiplyOperation:y="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:y="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:y="ENVMAP_BLENDING_ADD"}}var A=0<a.gammaFactor?a.gammaFactor:1,v=e(v,r,a.extensions),G=f(t),B=s.createProgram();q instanceof THREE.RawShaderMaterial?(t=[G].filter(g).join("\n"),w=[G].filter(g).join("\n")):(t=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+q.__webglShader.name,
G,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+A,"#define MAX_BONES "+r.maxBones,r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+z:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":
"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+
r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+w:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;",
"attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;",
"\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(g).join("\n"),w=[v,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+q.__webglShader.name,G,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+A,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":
"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+I:"",r.envMap?"#define "+z:"",r.envMap?"#define "+y:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":
"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+w:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":
"",r.envMap&&a.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==THREE.NoToneMapping?"#define TONE_MAPPING":"",r.toneMapping!==THREE.NoToneMapping?THREE.ShaderChunk.tonemapping_pars_fragment:"",r.toneMapping!==THREE.NoToneMapping?d("toneMapping",r.toneMapping):"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?THREE.ShaderChunk.encodings_pars_fragment:"",r.mapEncoding?b("mapTexelToLinear",
r.mapEncoding):"",r.envMapEncoding?b("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?b("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?c("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+q.depthPacking:"","\n"].filter(g).join("\n"));u=k(u,r);u=h(u,r);D=k(D,r);D=h(D,r);!1===q instanceof THREE.ShaderMaterial&&(u=l(u),D=l(D));D=w+D;u=THREE.WebGLShader(s,s.VERTEX_SHADER,t+u);D=THREE.WebGLShader(s,s.FRAGMENT_SHADER,D);s.attachShader(B,
u);s.attachShader(B,D);void 0!==q.index0AttributeName?s.bindAttribLocation(B,0,q.index0AttributeName):!0===r.morphTargets&&s.bindAttribLocation(B,0,"position");s.linkProgram(B);r=s.getProgramInfoLog(B);I=s.getShaderInfoLog(u);z=s.getShaderInfoLog(D);A=y=!0;if(!1===s.getProgramParameter(B,s.LINK_STATUS))y=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(B,s.VALIDATE_STATUS),"gl.getProgramInfoLog",r,I,z);else if(""!==r)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",
r);else if(""===I||""===z)A=!1;A&&(this.diagnostics={runnable:y,material:q,programLog:r,vertexShader:{log:I,prefix:t},fragmentShader:{log:z,prefix:w}});s.deleteShader(u);s.deleteShader(D);var F;this.getUniforms=function(){void 0===F&&(F=new THREE.WebGLUniforms(s,B,a));return F};var J;this.getAttributes=function(){if(void 0===J){for(var a={},b=s.getProgramParameter(B,s.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=s.getActiveAttrib(B,c).name;a[d]=s.getAttribLocation(B,d)}J=a}return J};this.destroy=function(){s.deleteProgram(B);
this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=m++;this.code=n;this.usedTimes=1;this.program=B;this.vertexShader=u;this.fragmentShader=D;return this}}();
THREE.WebGLPrograms=function(a,b){function c(a,b){var c;a?a instanceof THREE.Texture?c=a.encoding:a instanceof THREE.WebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),c=a.texture.encoding):c=THREE.LinearEncoding;c===THREE.LinearEncoding&&b&&(c=THREE.GammaEncoding);return c}var d=[],e={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",
MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},f="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes depthPacking".split(" ");
this.getParameters=function(d,f,k,l,m){var p=e[d.type],n;b.floatVertexTextures&&m&&m.skeleton&&m.skeleton.useVertexTexture?n=1024:(n=Math.floor((b.maxVertexUniforms-20)/4),void 0!==m&&m instanceof THREE.SkinnedMesh&&(n=Math.min(m.skeleton.bones.length,n),n<m.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+m.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)")));var q=a.getPrecision();null!==d.precision&&(q=b.getMaxPrecision(d.precision),q!==
d.precision&&console.warn("THREE.WebGLProgram.getParameters:",d.precision,"not supported, using",q,"instead."));var r=a.getCurrentRenderTarget();return{shaderID:p,precision:q,supportsVertexTextures:b.vertexTextures,outputEncoding:c(r?r.texture:null,a.gammaOutput),map:!!d.map,mapEncoding:c(d.map,a.gammaInput),envMap:!!d.envMap,envMapMode:d.envMap&&d.envMap.mapping,envMapEncoding:c(d.envMap,a.gammaInput),envMapCubeUV:!!d.envMap&&(d.envMap.mapping===THREE.CubeUVReflectionMapping||d.envMap.mapping===
THREE.CubeUVRefractionMapping),lightMap:!!d.lightMap,aoMap:!!d.aoMap,emissiveMap:!!d.emissiveMap,emissiveMapEncoding:c(d.emissiveMap,a.gammaInput),bumpMap:!!d.bumpMap,normalMap:!!d.normalMap,displacementMap:!!d.displacementMap,roughnessMap:!!d.roughnessMap,metalnessMap:!!d.metalnessMap,specularMap:!!d.specularMap,alphaMap:!!d.alphaMap,combine:d.combine,vertexColors:d.vertexColors,fog:!!k,useFog:d.fog,fogExp:k instanceof THREE.FogExp2,flatShading:d.shading===THREE.FlatShading,sizeAttenuation:d.sizeAttenuation,
logarithmicDepthBuffer:b.logarithmicDepthBuffer,skinning:d.skinning,maxBones:n,useVertexTexture:b.floatVertexTextures&&m&&m.skeleton&&m.skeleton.useVertexTexture,morphTargets:d.morphTargets,morphNormals:d.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:f.directional.length,numPointLights:f.point.length,numSpotLights:f.spot.length,numHemiLights:f.hemi.length,numClippingPlanes:l,shadowMapEnabled:a.shadowMap.enabled&&m.receiveShadow&&0<f.shadows.length,shadowMapType:a.shadowMap.type,
toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:d.premultipliedAlpha,alphaTest:d.alphaTest,doubleSided:d.side===THREE.DoubleSide,flipSided:d.side===THREE.BackSide,depthPacking:void 0!==d.depthPacking?d.depthPacking:!1}};this.getProgramCode=function(a,b){var c=[];b.shaderID?c.push(b.shaderID):(c.push(a.fragmentShader),c.push(a.vertexShader));if(void 0!==a.defines)for(var d in a.defines)c.push(d),c.push(a.defines[d]);for(d=0;d<f.length;d++)c.push(b[f[d]]);
return c.join()};this.acquireProgram=function(b,c,e){for(var f,m=0,p=d.length;m<p;m++){var n=d[m];if(n.code===e){f=n;++f.usedTimes;break}}void 0===f&&(f=new THREE.WebGLProgram(a,e,b,c),d.push(f));return f};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=d.indexOf(a);d[b]=d[d.length-1];d.pop();a.destroy()}};this.programs=d};
THREE.WebGLProperties=function(){var a={};this.get=function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c};this.delete=function(b){delete a[b.uuid]};this.clear=function(){a={}}};
THREE.WebGLShader=function(){function a(a){a=a.split("\n");for(var c=0;c<a.length;c++)a[c]=c+1+": "+a[c];return a.join("\n")}return function(b,c,d){var e=b.createShader(c);b.shaderSource(e,d);b.compileShader(e);!1===b.getShaderParameter(e,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(e)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",c===b.VERTEX_SHADER?"vertex":"fragment",b.getShaderInfoLog(e),a(d));return e}}();
THREE.WebGLShadowMap=function(a,b,c,d){function e(b,c,d,e){var f=b.geometry,g=null,g=v,h=b.customDepthMaterial;d&&(g=t,h=b.customDistanceMaterial);h?g=h:(h=!1,c.morphTargets&&(f instanceof THREE.BufferGeometry?h=f.morphAttributes&&f.morphAttributes.position&&0<f.morphAttributes.position.length:f instanceof THREE.Geometry&&(h=f.morphTargets&&0<f.morphTargets.length)),b=b instanceof THREE.SkinnedMesh&&c.skinning,f=0,h&&(f|=1),b&&(f|=2),g=g[f]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&
(h=g.uuid,b=c.uuid,f=u[h],void 0===f&&(f={},u[h]=f),h=f[b],void 0===h&&(h=g.clone(),f[b]=h),g=h);g.visible=c.visible;g.wireframe=c.wireframe;b=c.side;F.renderSingleSided&&b==THREE.DoubleSide&&(b=THREE.FrontSide);F.renderReverseSided&&(b===THREE.FrontSide?b=THREE.BackSide:b===THREE.BackSide&&(b=THREE.FrontSide));g.side=b;g.clipShadows=c.clipShadows;g.clippingPlanes=c.clippingPlanes;g.wireframeLinewidth=c.wireframeLinewidth;g.linewidth=c.linewidth;d&&void 0!==g.uniforms.lightPos&&g.uniforms.lightPos.value.copy(e);
return g}function f(a,b,c){if(!1!==a.visible){a.layers.test(b.layers)&&(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)&&a.castShadow&&(!1===a.frustumCulled||!0===k.intersectsObject(a))&&!0===a.material.visible&&(a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld),s.push(a));a=a.children;for(var d=0,e=a.length;d<e;d++)f(a[d],b,c)}}var g=a.context,h=a.state,k=new THREE.Frustum,l=new THREE.Matrix4,m=b.shadows,p=new THREE.Vector2,n=new THREE.Vector2(d.maxTextureSize,
d.maxTextureSize),q=new THREE.Vector3,r=new THREE.Vector3,s=[],v=Array(4),t=Array(4),u={},D=[new THREE.Vector3(1,0,0),new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1),new THREE.Vector3(0,1,0),new THREE.Vector3(0,-1,0)],w=[new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1)],I=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4];
b=new THREE.MeshDepthMaterial;b.depthPacking=THREE.RGBADepthPacking;b.clipping=!0;d=THREE.ShaderLib.distanceRGBA;for(var z=THREE.UniformsUtils.clone(d.uniforms),y=0;4!==y;++y){var A=0!==(y&1),G=0!==(y&2),B=b.clone();B.morphTargets=A;B.skinning=G;v[y]=B;A=new THREE.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:z,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,morphTargets:A,skinning:G,clipping:!0});t[y]=A}var F=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=
THREE.PCFShadowMap;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,d){if(!1!==F.enabled&&(!1!==F.autoUpdate||!1!==F.needsUpdate)&&0!==m.length){h.clearColor(1,1,1,1);h.disable(g.BLEND);h.setDepthTest(!0);h.setScissorTest(!1);for(var u,t,v=0,y=m.length;v<y;v++){var z=m[v],A=z.shadow;if(void 0===A)console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");else{var C=A.camera;p.copy(A.mapSize);p.min(n);if(z instanceof THREE.PointLight){u=6;t=!0;var L=p.x,E=p.y;I[0].set(2*L,E,L,
E);I[1].set(0,E,L,E);I[2].set(3*L,E,L,E);I[3].set(L,E,L,E);I[4].set(3*L,0,L,E);I[5].set(L,0,L,E);p.x*=4;p.y*=2}else u=1,t=!1;null===A.map&&(A.map=new THREE.WebGLRenderTarget(p.x,p.y,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat}),C.updateProjectionMatrix());A instanceof THREE.SpotLightShadow&&A.update(z);L=A.map;A=A.matrix;r.setFromMatrixPosition(z.matrixWorld);C.position.copy(r);a.setRenderTarget(L);a.clear();for(L=0;L<u;L++){t?(q.copy(C.position),q.add(D[L]),
C.up.copy(w[L]),C.lookAt(q),h.viewport(I[L])):(q.setFromMatrixPosition(z.target.matrixWorld),C.lookAt(q));C.updateMatrixWorld();C.matrixWorldInverse.getInverse(C.matrixWorld);A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);A.multiply(C.projectionMatrix);A.multiply(C.matrixWorldInverse);l.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse);k.setFromMatrix(l);s.length=0;f(b,d,C);for(var E=0,B=s.length;E<B;E++){var G=s[E],X=c.update(G),ea=G.material;if(ea instanceof THREE.MultiMaterial)for(var fa=
X.groups,ea=ea.materials,ga=0,V=fa.length;ga<V;ga++){var ba=fa[ga],aa=ea[ba.materialIndex];!0===aa.visible&&(aa=e(G,aa,t,r),a.renderBufferDirect(C,null,X,aa,G,ba))}else aa=e(G,ea,t,r),a.renderBufferDirect(C,null,X,aa,G,null)}}}}u=a.getClearColor();t=a.getClearAlpha();a.setClearColor(u,t);F.needsUpdate=!1}}};
THREE.WebGLState=function(a,b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);return f}var e=this;this.buffers={color:new THREE.WebGLColorBuffer(a,this),depth:new THREE.WebGLDepthBuffer(a,this),stencil:new THREE.WebGLStencilBuffer(a,this)};var f=a.getParameter(a.MAX_VERTEX_ATTRIBS),g=new Uint8Array(f),
h=new Uint8Array(f),k=new Uint8Array(f),l={},m=null,p=null,n=null,q=null,r=null,s=null,v=null,t=null,u=!1,D=null,w=null,I=null,z=null,y=null,A=null,G=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),B=null,F={},J=new THREE.Vector4,P=new THREE.Vector4,K={};K[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);K[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);this.init=function(){this.clearColor(0,0,0,1);this.clearDepth(1);this.clearStencil(0);this.enable(a.DEPTH_TEST);this.setDepthFunc(THREE.LessEqualDepth);
this.setFlipSided(!1);this.setCullFace(THREE.CullFaceBack);this.enable(a.CULL_FACE);this.enable(a.BLEND);this.setBlending(THREE.NormalBlending)};this.initAttributes=function(){for(var a=0,b=g.length;a<b;a++)g[a]=0};this.enableAttribute=function(c){g[c]=1;0===h[c]&&(a.enableVertexAttribArray(c),h[c]=1);0!==k[c]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,0),k[c]=0)};this.enableAttributeAndDivisor=function(b,c,d){g[b]=1;0===h[b]&&(a.enableVertexAttribArray(b),h[b]=1);k[b]!==c&&(d.vertexAttribDivisorANGLE(b,
c),k[b]=c)};this.disableUnusedAttributes=function(){for(var b=0,c=h.length;b!==c;++b)h[b]!==g[b]&&(a.disableVertexAttribArray(b),h[b]=0)};this.enable=function(b){!0!==l[b]&&(a.enable(b),l[b]=!0)};this.disable=function(b){!1!==l[b]&&(a.disable(b),l[b]=!1)};this.getCompressedTextureFormats=function(){if(null===m&&(m=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<
c.length;d++)m.push(c[d]);return m};this.setBlending=function(b,d,e,f,g,h,k,l){if(b!==THREE.NoBlending){this.enable(a.BLEND);if(b!==p||l!==u)b===THREE.AdditiveBlending?l?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):b===THREE.SubtractiveBlending?l?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),
a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):b===THREE.MultiplyBlending?l?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):l?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),
p=b,u=l;if(b===THREE.CustomBlending){g=g||d;h=h||e;k=k||f;if(d!==n||g!==s)a.blendEquationSeparate(c(d),c(g)),n=d,s=g;if(e!==q||f!==r||h!==v||k!==t)a.blendFuncSeparate(c(e),c(f),c(h),c(k)),q=e,r=f,v=h,t=k}else t=v=s=r=q=n=null}else this.disable(a.BLEND),p=b};this.setColorWrite=function(a){this.buffers.color.setMask(a)};this.setDepthTest=function(a){this.buffers.depth.setTest(a)};this.setDepthWrite=function(a){this.buffers.depth.setMask(a)};this.setDepthFunc=function(a){this.buffers.depth.setFunc(a)};
this.setStencilTest=function(a){this.buffers.stencil.setTest(a)};this.setStencilWrite=function(a){this.buffers.stencil.setMask(a)};this.setStencilFunc=function(a,b,c){this.buffers.stencil.setFunc(a,b,c)};this.setStencilOp=function(a,b,c){this.buffers.stencil.setOp(a,b,c)};this.setFlipSided=function(b){D!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),D=b)};this.setCullFace=function(b){b!==THREE.CullFaceNone?(this.enable(a.CULL_FACE),b!==w&&(b===THREE.CullFaceBack?a.cullFace(a.BACK):b===THREE.CullFaceFront?
a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):this.disable(a.CULL_FACE);w=b};this.setLineWidth=function(b){b!==I&&(a.lineWidth(b),I=b)};this.setPolygonOffset=function(b,c,d){if(b){if(this.enable(a.POLYGON_OFFSET_FILL),z!==c||y!==d)a.polygonOffset(c,d),z=c,y=d}else this.disable(a.POLYGON_OFFSET_FILL)};this.getScissorTest=function(){return A};this.setScissorTest=function(b){(A=b)?this.enable(a.SCISSOR_TEST):this.disable(a.SCISSOR_TEST)};this.activeTexture=function(b){void 0===b&&(b=a.TEXTURE0+
G-1);B!==b&&(a.activeTexture(b),B=b)};this.bindTexture=function(b,c){null===B&&e.activeTexture();var d=F[B];void 0===d&&(d={type:void 0,texture:void 0},F[B]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||K[b]),d.type=b,d.texture=c};this.compressedTexImage2D=function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.texImage2D=function(){try{a.texImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.clearColor=function(a,b,c,d){this.buffers.color.setClear(a,
b,c,d)};this.clearDepth=function(a){this.buffers.depth.setClear(a)};this.clearStencil=function(a){this.buffers.stencil.setClear(a)};this.scissor=function(b){!1===J.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),J.copy(b))};this.viewport=function(b){!1===P.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),P.copy(b))};this.reset=function(){for(var b=0;b<h.length;b++)1===h[b]&&(a.disableVertexAttribArray(b),h[b]=0);l={};B=m=null;F={};w=D=p=null;this.buffers.color.reset();this.buffers.depth.reset();this.buffers.stencil.reset()}};
THREE.WebGLColorBuffer=function(a,b){var c=!1,d=new THREE.Vector4,e=null,f=new THREE.Vector4;this.setMask=function(b){e===b||c||(a.colorMask(b,b,b,b),e=b)};this.setLocked=function(a){c=a};this.setClear=function(b,c,e,l){d.set(b,c,e,l);!1===f.equals(d)&&(a.clearColor(b,c,e,l),f.copy(d))};this.reset=function(){c=!1;e=null;f=new THREE.Vector4}};
THREE.WebGLDepthBuffer=function(a,b){var c=!1,d=null,e=null,f=null;this.setTest=function(c){c?b.enable(a.DEPTH_TEST):b.disable(a.DEPTH_TEST)};this.setMask=function(b){d===b||c||(a.depthMask(b),d=b)};this.setFunc=function(b){if(e!==b){if(b)switch(b){case THREE.NeverDepth:a.depthFunc(a.NEVER);break;case THREE.AlwaysDepth:a.depthFunc(a.ALWAYS);break;case THREE.LessDepth:a.depthFunc(a.LESS);break;case THREE.LessEqualDepth:a.depthFunc(a.LEQUAL);break;case THREE.EqualDepth:a.depthFunc(a.EQUAL);break;case THREE.GreaterEqualDepth:a.depthFunc(a.GEQUAL);
break;case THREE.GreaterDepth:a.depthFunc(a.GREATER);break;case THREE.NotEqualDepth:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);e=b}};this.setLocked=function(a){c=a};this.setClear=function(b){f!==b&&(a.clearDepth(b),f=b)};this.reset=function(){c=!1;f=e=d=null}};
THREE.WebGLStencilBuffer=function(a,b){var c=!1,d=null,e=null,f=null,g=null,h=null,k=null,l=null,m=null;this.setTest=function(c){c?b.enable(a.STENCIL_TEST):b.disable(a.STENCIL_TEST)};this.setMask=function(b){d===b||c||(a.stencilMask(b),d=b)};this.setFunc=function(b,c,d){if(e!==b||f!==c||g!==d)a.stencilFunc(b,c,d),e=b,f=c,g=d};this.setOp=function(b,c,d){if(h!==b||k!==c||l!==d)a.stencilOp(b,c,d),h=b,k=c,l=d};this.setLocked=function(a){c=a};this.setClear=function(b){m!==b&&(a.clearStencil(b),m=b)};this.reset=
function(){c=!1;m=l=k=h=g=f=e=d=null}};
THREE.WebGLTextures=function(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){var c=b/Math.max(a.width,a.height),d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");d.width=Math.floor(a.width*c);d.height=Math.floor(a.height*c);d.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,d.width,d.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+d.width+"x"+d.height,a);return d}return a}function k(a){return THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height)}
function l(b){return b===THREE.NearestFilter||b===THREE.NearestMipMapNearestFilter||b===THREE.NearestMipMapLinearFilter?a.NEAREST:a.LINEAR}function m(b){b=b.target;b.removeEventListener("dispose",m);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.delete(b)}v.textures--}function p(b){b=b.target;b.removeEventListener("dispose",p);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==
e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b instanceof THREE.WebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.delete(b.texture);d.delete(b)}v.textures--}function n(b,g){var l=d.get(b);if(0<b.version&&l.__version!==b.version){var n=
b.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",b);else if(!1===n.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",b);else{void 0===l.__webglInit&&(l.__webglInit=!0,b.addEventListener("dispose",m),l.__webglTexture=a.createTexture(),v.textures++);c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_2D,l.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);var p=h(b.image,e.maxTextureSize);if((b.wrapS!==THREE.ClampToEdgeWrapping||b.wrapT!==THREE.ClampToEdgeWrapping||b.minFilter!==THREE.NearestFilter&&b.minFilter!==THREE.LinearFilter)&&!1===k(p))if(n=p,n instanceof HTMLImageElement||n instanceof HTMLCanvasElement){var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=THREE.Math.nearestPowerOfTwo(n.width);r.height=THREE.Math.nearestPowerOfTwo(n.height);r.getContext("2d").drawImage(n,
0,0,r.width,r.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+n.width+"x"+n.height+"). Resized to "+r.width+"x"+r.height,n);p=r}else p=n;var n=k(p),r=f(b.format),s=f(b.type);q(a.TEXTURE_2D,b,n);var G=b.mipmaps;if(b instanceof THREE.DepthTexture){G=a.DEPTH_COMPONENT;if(b.type===THREE.FloatType){if(!t)throw Error("Float Depth Texture only supported in WebGL2.0");G=a.DEPTH_COMPONENT32F}else t&&(G=a.DEPTH_COMPONENT16);c.texImage2D(a.TEXTURE_2D,0,G,p.width,p.height,0,r,s,null)}else if(b instanceof
THREE.DataTexture)if(0<G.length&&n){for(var B=0,F=G.length;B<F;B++)p=G[B],c.texImage2D(a.TEXTURE_2D,B,r,p.width,p.height,0,r,s,p.data);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,p.width,p.height,0,r,s,p.data);else if(b instanceof THREE.CompressedTexture)for(B=0,F=G.length;B<F;B++)p=G[B],b.format!==THREE.RGBAFormat&&b.format!==THREE.RGBFormat?-1<c.getCompressedTextureFormats().indexOf(r)?c.compressedTexImage2D(a.TEXTURE_2D,B,r,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
c.texImage2D(a.TEXTURE_2D,B,r,p.width,p.height,0,r,s,p.data);else if(0<G.length&&n){B=0;for(F=G.length;B<F;B++)p=G[B],c.texImage2D(a.TEXTURE_2D,B,r,r,s,p);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,r,s,p);b.generateMipmaps&&n&&a.generateMipmap(a.TEXTURE_2D);l.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}}c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_2D,l.__webglTexture)}function q(c,g,h){h?(a.texParameteri(c,a.TEXTURE_WRAP_S,f(g.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,
f(g.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,f(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,f(g.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),g.wrapS===THREE.ClampToEdgeWrapping&&g.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",g),a.texParameteri(c,a.TEXTURE_MAG_FILTER,l(g.magFilter)),
a.texParameteri(c,a.TEXTURE_MIN_FILTER,l(g.minFilter)),g.minFilter!==THREE.NearestFilter&&g.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",g));!(h=b.get("EXT_texture_filter_anisotropic"))||g.type===THREE.FloatType&&null===b.get("OES_texture_float_linear")||g.type===THREE.HalfFloatType&&null===b.get("OES_texture_half_float_linear")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||
(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function r(b,e,g,h){var k=f(e.texture.format),l=f(e.texture.type);c.texImage2D(h,0,k,e.width,e.height,0,k,l,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function s(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,
a.DEPTH_COMPONENT16,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var v=g.memory,t="undefined"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext;
this.setTexture2D=n;this.setTextureCube=function(b,g){var l=d.get(b);if(6===b.image.length)if(0<b.version&&l.__version!==b.version){l.__image__webglTextureCube||(b.addEventListener("dispose",m),l.__image__webglTextureCube=a.createTexture(),v.textures++);c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_CUBE_MAP,l.__image__webglTextureCube);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);for(var n=b instanceof THREE.CompressedTexture,p=b.image[0]instanceof THREE.DataTexture,r=[],s=0;6>s;s++)r[s]=
n||p?p?b.image[s].image:b.image[s]:h(b.image[s],e.maxCubemapSize);var t=k(r[0]),B=f(b.format),F=f(b.type);q(a.TEXTURE_CUBE_MAP,b,t);for(s=0;6>s;s++)if(n)for(var J,P=r[s].mipmaps,K=0,H=P.length;K<H;K++)J=P[K],b.format!==THREE.RGBAFormat&&b.format!==THREE.RGBFormat?-1<c.getCompressedTextureFormats().indexOf(B)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+s,K,B,J.width,J.height,0,J.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):
c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+s,K,B,J.width,J.height,0,B,F,J.data);else p?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,B,r[s].width,r[s].height,0,B,F,r[s].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,B,B,F,r[s]);b.generateMipmaps&&t&&a.generateMipmap(a.TEXTURE_CUBE_MAP);l.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+g),c.bindTexture(a.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+
e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=function(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener("dispose",p);f.__webglTexture=a.createTexture();v.textures++;var g=b instanceof THREE.WebGLRenderTargetCube,h=k(b);if(g){e.__webglFramebuffer=[];for(var l=0;6>l;l++)e.__webglFramebuffer[l]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(g){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);q(a.TEXTURE_CUBE_MAP,b.texture,h);for(l=
0;6>l;l++)r(e.__webglFramebuffer[l],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+l);b.texture.generateMipmaps&&h&&a.generateMipmap(a.TEXTURE_CUBE_MAP);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),q(a.TEXTURE_2D,b.texture,h),r(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),b.texture.generateMipmaps&&h&&a.generateMipmap(a.TEXTURE_2D),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=b instanceof THREE.WebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");
if(b instanceof THREE.WebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!(b.depthTexture instanceof THREE.DepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=
!0);n(b.depthTexture,0);b=d.get(b.depthTexture).__webglTexture;a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,b,0)}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),s(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),s(e.__webglDepthbuffer,b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=
function(b){var e=b.texture;e.generateMipmaps&&k(b)&&e.minFilter!==THREE.NearestFilter&&e.minFilter!==THREE.LinearFilter&&(b=b instanceof THREE.WebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,e=d.get(e).__webglTexture,c.bindTexture(b,e),a.generateMipmap(b),c.bindTexture(b,null))}};
THREE.WebGLUniforms=function(){var a=new THREE.Texture,b=new THREE.CubeTexture,c=[],d=[],e=function(a,b,d){var e=a[0];if(0>=e||0<e)return a;var f=b*d,g=c[f];void 0===g&&(g=new Float32Array(f),c[f]=g);if(0!==b)for(e.toArray(g,0),e=1,f=0;e!==b;++e)f+=d,a[e].toArray(g,f);return g},f=function(a,b){var c=d[b];void 0===c&&(c=new Int32Array(b),d[b]=c);for(var e=0;e!==b;++e)c[e]=a.allocTextureUnit();return c},g=function(a,b){a.uniform1f(this.addr,b)},h=function(a,b){a.uniform1i(this.addr,b)},k=function(a,
b){void 0===b.x?a.uniform2fv(this.addr,b):a.uniform2f(this.addr,b.x,b.y)},l=function(a,b){void 0!==b.x?a.uniform3f(this.addr,b.x,b.y,b.z):void 0!==b.r?a.uniform3f(this.addr,b.r,b.g,b.b):a.uniform3fv(this.addr,b)},m=function(a,b){void 0===b.x?a.uniform4fv(this.addr,b):a.uniform4f(this.addr,b.x,b.y,b.z,b.w)},p=function(a,b){a.uniformMatrix2fv(this.addr,!1,b.elements||b)},n=function(a,b){a.uniformMatrix3fv(this.addr,!1,b.elements||b)},q=function(a,b){a.uniformMatrix4fv(this.addr,!1,b.elements||b)},r=
function(b,c,d){var e=d.allocTextureUnit();b.uniform1i(this.addr,e);d.setTexture2D(c||a,e)},s=function(a,c,d){var e=d.allocTextureUnit();a.uniform1i(this.addr,e);d.setTextureCube(c||b,e)},v=function(a,b){a.uniform2iv(this.addr,b)},t=function(a,b){a.uniform3iv(this.addr,b)},u=function(a,b){a.uniform4iv(this.addr,b)},D=function(a){switch(a){case 5126:return g;case 35664:return k;case 35665:return l;case 35666:return m;case 35674:return p;case 35675:return n;case 35676:return q;case 35678:return r;case 35680:return s;
case 5124:case 35670:return h;case 35667:case 35671:return v;case 35668:case 35672:return t;case 35669:case 35673:return u}},w=function(a,b){a.uniform1fv(this.addr,b)},I=function(a,b){a.uniform1iv(this.addr,b)},z=function(a,b){a.uniform2fv(this.addr,e(b,this.size,2))},y=function(a,b){a.uniform3fv(this.addr,e(b,this.size,3))},A=function(a,b){a.uniform4fv(this.addr,e(b,this.size,4))},G=function(a,b){a.uniformMatrix2fv(this.addr,!1,e(b,this.size,4))},B=function(a,b){a.uniformMatrix3fv(this.addr,!1,e(b,
this.size,9))},F=function(a,b){a.uniformMatrix4fv(this.addr,!1,e(b,this.size,16))},J=function(b,c,d){var e=c.length,g=f(d,e);b.uniform1iv(this.addr,g);for(b=0;b!==e;++b)d.setTexture2D(c[b]||a,g[b])},P=function(a,c,d){var e=c.length,g=f(d,e);a.uniform1iv(this.addr,g);for(a=0;a!==e;++a)d.setTextureCube(c[a]||b,g[a])},K=function(a){switch(a){case 5126:return w;case 35664:return z;case 35665:return y;case 35666:return A;case 35674:return G;case 35675:return B;case 35676:return F;case 35678:return J;case 35680:return P;
case 5124:case 35670:return I;case 35667:case 35671:return v;case 35668:case 35672:return t;case 35669:case 35673:return u}},H=function(a,b,c){this.id=a;this.addr=c;this.setValue=D(b.type)},M=function(a,b,c){this.id=a;this.addr=c;this.size=b.size;this.setValue=K(b.type)},O=function(a){this.id=a;this.seq=[];this.map={}};O.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,b[f.id])}};var N=/([\w\d_]+)(\])?(\[|\.)?/g,Q=function(a,b,c){this.seq=[];this.map=
{};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d!==c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,k=h.length;for(N.lastIndex=0;;){var l=N.exec(h),m=N.lastIndex,n=l[1],p=l[3];"]"===l[2]&&(n|=0);if(void 0===p||"["===p&&m+2===k){h=g;e=void 0===p?new H(n,e,f):new M(n,e,f);h.seq.push(e);h.map[e.id]=e;break}else p=g.map[n],void 0===p&&(p=new O(n),n=g,g=p,n.seq.push(g),n.map[g.id]=g),g=p}}};Q.prototype.setValue=function(a,b,c){b=this.map[b];
void 0!==b&&b.setValue(a,c,this.renderer)};Q.prototype.set=function(a,b,c){var d=this.map[c];void 0!==d&&d.setValue(a,b[c],this.renderer)};Q.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};Q.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};Q.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};Q.splitDynamic=function(a,b){for(var c=null,
d=a.length,e=0,f=0;f!==d;++f){var g=a[f],h=b[g.id];h&&!0===h.dynamic?(null===c&&(c=[]),c.push(g)):(e<f&&(a[e]=g),++e)}e<d&&(a.length=e);return c};Q.evalDynamic=function(a,b,c,d){for(var e=0,f=a.length;e!==f;++e){var g=b[a[e].id],h=g.onUpdateCallback;void 0!==h&&h.call(g,c,d)}};return Q}();
THREE.LensFlarePlugin=function(a,b){var c,d,e,f,g,h,k,l,m,p,n=a.context,q=a.state,r,s,v,t,u,D;this.render=function(w,I,z){if(0!==b.length){w=new THREE.Vector3;var y=z.w/z.z,A=.5*z.z,G=.5*z.w,B=16/z.w,F=new THREE.Vector2(B*y,B),J=new THREE.Vector3(1,1,0),P=new THREE.Vector2(1,1),K=new THREE.Box2;K.min.set(0,0);K.max.set(z.z-16,z.w-16);if(void 0===t){var B=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),H=new Uint16Array([0,1,2,0,2,3]);r=n.createBuffer();s=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,
r);n.bufferData(n.ARRAY_BUFFER,B,n.STATIC_DRAW);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s);n.bufferData(n.ELEMENT_ARRAY_BUFFER,H,n.STATIC_DRAW);u=n.createTexture();D=n.createTexture();q.bindTexture(n.TEXTURE_2D,u);n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,
n.NEAREST);q.bindTexture(n.TEXTURE_2D,D);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,16,16,0,n.RGBA,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);var B=v={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},H=n.createProgram(),M=n.createShader(n.FRAGMENT_SHADER),
O=n.createShader(n.VERTEX_SHADER),N="precision "+a.getPrecision()+" float;\n";n.shaderSource(M,N+B.fragmentShader);n.shaderSource(O,N+B.vertexShader);n.compileShader(M);n.compileShader(O);n.attachShader(H,M);n.attachShader(H,O);n.linkProgram(H);t=H;m=n.getAttribLocation(t,"position");p=n.getAttribLocation(t,"uv");c=n.getUniformLocation(t,"renderType");d=n.getUniformLocation(t,"map");e=n.getUniformLocation(t,"occlusionMap");f=n.getUniformLocation(t,"opacity");g=n.getUniformLocation(t,"color");h=n.getUniformLocation(t,
"scale");k=n.getUniformLocation(t,"rotation");l=n.getUniformLocation(t,"screenPosition")}n.useProgram(t);q.initAttributes();q.enableAttribute(m);q.enableAttribute(p);q.disableUnusedAttributes();n.uniform1i(e,0);n.uniform1i(d,1);n.bindBuffer(n.ARRAY_BUFFER,r);n.vertexAttribPointer(m,2,n.FLOAT,!1,16,0);n.vertexAttribPointer(p,2,n.FLOAT,!1,16,8);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s);q.disable(n.CULL_FACE);q.setDepthWrite(!1);H=0;for(M=b.length;H<M;H++)if(B=16/z.w,F.set(B*y,B),O=b[H],w.set(O.matrixWorld.elements[12],
O.matrixWorld.elements[13],O.matrixWorld.elements[14]),w.applyMatrix4(I.matrixWorldInverse),w.applyProjection(I.projectionMatrix),J.copy(w),P.x=z.x+J.x*A+A-8,P.y=z.y+J.y*G+G-8,!0===K.containsPoint(P)){q.activeTexture(n.TEXTURE0);q.bindTexture(n.TEXTURE_2D,null);q.activeTexture(n.TEXTURE1);q.bindTexture(n.TEXTURE_2D,u);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,P.x,P.y,16,16,0);n.uniform1i(c,0);n.uniform2f(h,F.x,F.y);n.uniform3f(l,J.x,J.y,J.z);q.disable(n.BLEND);q.enable(n.DEPTH_TEST);n.drawElements(n.TRIANGLES,
6,n.UNSIGNED_SHORT,0);q.activeTexture(n.TEXTURE0);q.bindTexture(n.TEXTURE_2D,D);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,P.x,P.y,16,16,0);n.uniform1i(c,1);q.disable(n.DEPTH_TEST);q.activeTexture(n.TEXTURE1);q.bindTexture(n.TEXTURE_2D,u);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);O.positionScreen.copy(J);O.customUpdateCallback?O.customUpdateCallback(O):O.updateLensFlares();n.uniform1i(c,2);q.enable(n.BLEND);for(var N=0,Q=O.lensFlares.length;N<Q;N++){var C=O.lensFlares[N];.001<C.opacity&&.001<C.scale&&
(J.x=C.x,J.y=C.y,J.z=C.z,B=C.size*C.scale/z.w,F.x=B*y,F.y=B,n.uniform3f(l,J.x,J.y,J.z),n.uniform2f(h,F.x,F.y),n.uniform1f(k,C.rotation),n.uniform1f(f,C.opacity),n.uniform3f(g,C.color.r,C.color.g,C.color.b),q.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),a.setTexture2D(C.texture,1),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}}q.enable(n.CULL_FACE);q.enable(n.DEPTH_TEST);q.setDepthWrite(!0);a.resetGLState()}}};
THREE.SpritePlugin=function(a,b){var c,d,e,f,g,h,k,l,m,p,n,q,r,s,v,t,u;function D(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var w=a.context,I=a.state,z,y,A,G,B=new THREE.Vector3,F=new THREE.Quaternion,J=new THREE.Vector3;this.render=function(P,K){if(0!==b.length){if(void 0===A){var H=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),M=new Uint16Array([0,1,2,0,2,3]);z=w.createBuffer();y=w.createBuffer();w.bindBuffer(w.ARRAY_BUFFER,
z);w.bufferData(w.ARRAY_BUFFER,H,w.STATIC_DRAW);w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,y);w.bufferData(w.ELEMENT_ARRAY_BUFFER,M,w.STATIC_DRAW);var H=w.createProgram(),M=w.createShader(w.VERTEX_SHADER),O=w.createShader(w.FRAGMENT_SHADER);w.shaderSource(M,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
w.shaderSource(O,["precision "+a.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
w.compileShader(M);w.compileShader(O);w.attachShader(H,M);w.attachShader(H,O);w.linkProgram(H);A=H;t=w.getAttribLocation(A,"position");u=w.getAttribLocation(A,"uv");c=w.getUniformLocation(A,"uvOffset");d=w.getUniformLocation(A,"uvScale");e=w.getUniformLocation(A,"rotation");f=w.getUniformLocation(A,"scale");g=w.getUniformLocation(A,"color");h=w.getUniformLocation(A,"map");k=w.getUniformLocation(A,"opacity");l=w.getUniformLocation(A,"modelViewMatrix");m=w.getUniformLocation(A,"projectionMatrix");p=
w.getUniformLocation(A,"fogType");n=w.getUniformLocation(A,"fogDensity");q=w.getUniformLocation(A,"fogNear");r=w.getUniformLocation(A,"fogFar");s=w.getUniformLocation(A,"fogColor");v=w.getUniformLocation(A,"alphaTest");H=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");H.width=8;H.height=8;M=H.getContext("2d");M.fillStyle="white";M.fillRect(0,0,8,8);G=new THREE.Texture(H);G.needsUpdate=!0}w.useProgram(A);I.initAttributes();I.enableAttribute(t);I.enableAttribute(u);I.disableUnusedAttributes();
I.disable(w.CULL_FACE);I.enable(w.BLEND);w.bindBuffer(w.ARRAY_BUFFER,z);w.vertexAttribPointer(t,2,w.FLOAT,!1,16,0);w.vertexAttribPointer(u,2,w.FLOAT,!1,16,8);w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,y);w.uniformMatrix4fv(m,!1,K.projectionMatrix.elements);I.activeTexture(w.TEXTURE0);w.uniform1i(h,0);M=H=0;(O=P.fog)?(w.uniform3f(s,O.color.r,O.color.g,O.color.b),O instanceof THREE.Fog?(w.uniform1f(q,O.near),w.uniform1f(r,O.far),w.uniform1i(p,1),M=H=1):O instanceof THREE.FogExp2&&(w.uniform1f(n,O.density),
w.uniform1i(p,2),M=H=2)):(w.uniform1i(p,0),M=H=0);for(var O=0,N=b.length;O<N;O++){var Q=b[O];Q.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,Q.matrixWorld);Q.z=-Q.modelViewMatrix.elements[14]}b.sort(D);for(var C=[],O=0,N=b.length;O<N;O++){var Q=b[O],L=Q.material;!1!==L.visible&&(w.uniform1f(v,L.alphaTest),w.uniformMatrix4fv(l,!1,Q.modelViewMatrix.elements),Q.matrixWorld.decompose(B,F,J),C[0]=J.x,C[1]=J.y,Q=0,P.fog&&L.fog&&(Q=M),H!==Q&&(w.uniform1i(p,Q),H=Q),null!==L.map?(w.uniform2f(c,L.map.offset.x,
L.map.offset.y),w.uniform2f(d,L.map.repeat.x,L.map.repeat.y)):(w.uniform2f(c,0,0),w.uniform2f(d,1,1)),w.uniform1f(k,L.opacity),w.uniform3f(g,L.color.r,L.color.g,L.color.b),w.uniform1f(e,L.rotation),w.uniform2fv(f,C),I.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst),I.setDepthTest(L.depthTest),I.setDepthWrite(L.depthWrite),L.map?a.setTexture2D(L.map,0):a.setTexture2D(G,0),w.drawElements(w.TRIANGLES,6,w.UNSIGNED_SHORT,0))}I.enable(w.CULL_FACE);a.resetGLState()}}};
Object.assign(THREE,{Face4:function(a,b,c,d,e,f,g){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,f,g)},LineStrip:0,LinePieces:1,MeshFaceMaterial:THREE.MultiMaterial,PointCloud:function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new THREE.Points(a,b)},Particle:THREE.Sprite,ParticleSystem:function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new THREE.Points(a,
b)},PointCloudMaterial:function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)},ParticleBasicMaterial:function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)},ParticleSystemMaterial:function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)},Vertex:function(a,b,c){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");
return new THREE.Vector3(a,b,c)}});Object.assign(THREE.Box2.prototype,{empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)}});
Object.assign(THREE.Box3.prototype,{empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(THREE.Matrix3.prototype,{multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)}});
Object.assign(THREE.Matrix4.prototype,{extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},translate:function(a){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.error("THREE.Matrix4: .rotateZ() has been removed.")},
rotateByAxis:function(a,b){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}});Object.assign(THREE.Plane.prototype,{isIntersectionLine:function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(a)}});Object.assign(THREE.Quaternion.prototype,{multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)}});
Object.assign(THREE.Ray.prototype,{isIntersectionBox:function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(THREE.Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},
getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(b,a)}});
Object.assign(THREE.Object3D.prototype,{getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},renderDepth:function(a){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)}});
Object.defineProperties(THREE.Object3D.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});
Object.defineProperties(THREE.LOD.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});THREE.PerspectiveCamera.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};
Object.defineProperties(THREE.Light.prototype,{onlyShadow:{set:function(a){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");
this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");
this.shadow.camera.far=a}},shadowCameraVisible:{set:function(a){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=a}},shadowDarkness:{set:function(a){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");
this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(THREE.BufferAttribute.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length}}});
Object.assign(THREE.BufferGeometry.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},
computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(THREE.BufferGeometry.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});
Object.defineProperties(THREE.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(a){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE."+this.type+": .wrapRGB has been removed.");return new THREE.Color}}});
Object.defineProperties(THREE.MeshPhongMaterial.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(a){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});
Object.defineProperties(THREE.ShaderMaterial.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});
THREE.EventDispatcher.prototype=Object.assign(Object.create({constructor:THREE.EventDispatcher,apply:function(a){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in.");Object.assign(a,this)}}),THREE.EventDispatcher.prototype);
Object.assign(THREE.WebGLRenderer.prototype,{supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},
supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");
this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});
Object.defineProperties(THREE.WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");
this.shadowMap.cullFace=a}}});Object.defineProperties(THREE.WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?THREE.CullFaceFront:THREE.CullFaceBack},set:function(a){a=a!==THREE.CullFaceBack;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+a+".");this.renderReverseSided=a}}});
Object.defineProperties(THREE.WebGLRenderTarget.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=
a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=
a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=
a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");
return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});
Object.assign(THREE.Audio.prototype,{load:function(a){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var b=this;(new THREE.AudioLoader).load(a,function(a){b.setBuffer(a)});return this}});Object.assign(THREE.AudioAnalyser.prototype,{getData:function(a){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()}});
THREE.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var e=new THREE.TextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadTextureCube:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new THREE.CubeTextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,
c,void 0,d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(a,b){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};
THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};
THREE.CurveUtils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a,b,c,d,e){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}};
THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Group,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};
THREE.ShapeUtils={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],f=[],g,h,k;if(0<THREE.ShapeUtils.area(a))for(h=0;h<c;h++)e[h]=h;else for(h=0;h<c;h++)e[h]=c-1-h;var l=2*c;for(h=c-1;2<c;){if(0>=l--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}g=h;c<=g&&(g=0);h=g+1;c<=h&&(h=0);k=h+1;c<=k&&(k=0);var m;a:{var p=
m=void 0,n=void 0,q=void 0,r=void 0,s=void 0,v=void 0,t=void 0,u=void 0,p=a[e[g]].x,n=a[e[g]].y,q=a[e[h]].x,r=a[e[h]].y,s=a[e[k]].x,v=a[e[k]].y;if(Number.EPSILON>(q-p)*(v-n)-(r-n)*(s-p))m=!1;else{var D=void 0,w=void 0,I=void 0,z=void 0,y=void 0,A=void 0,G=void 0,B=void 0,F=void 0,J=void 0,F=B=G=u=t=void 0,D=s-q,w=v-r,I=p-s,z=n-v,y=q-p,A=r-n;for(m=0;m<c;m++)if(t=a[e[m]].x,u=a[e[m]].y,!(t===p&&u===n||t===q&&u===r||t===s&&u===v)&&(G=t-p,B=u-n,F=t-q,J=u-r,t-=s,u-=v,F=D*J-w*F,G=y*B-A*G,B=I*u-z*t,F>=-Number.EPSILON&&
B>=-Number.EPSILON&&G>=-Number.EPSILON)){m=!1;break a}m=!0}}if(m){d.push([a[e[g]],a[e[h]],a[e[k]]]);f.push([e[g],e[h],e[k]]);g=h;for(k=h+1;k<c;g++,k++)e[g]=e[k];c--;l=2*c}}return b?f:d}}(),triangulateShape:function(a,b){function c(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function d(a,b,c){return a.x!==b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function e(a,b,c,e,f){var g=b.x-a.x,h=b.y-a.y,k=e.x-c.x,l=e.y-c.y,m=a.x-c.x,n=a.y-c.y,p=h*k-
g*l,G=h*m-g*n;if(Math.abs(p)>Number.EPSILON){if(0<p){if(0>G||G>p)return[];k=l*m-k*n;if(0>k||k>p)return[]}else{if(0<G||G<p)return[];k=l*m-k*n;if(0<k||k<p)return[]}if(0===k)return!f||0!==G&&G!==p?[a]:[];if(k===p)return!f||0!==G&&G!==p?[b]:[];if(0===G)return[c];if(G===p)return[e];f=k/p;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!==G||l*m!==k*n)return[];h=0===g&&0===h;k=0===k&&0===l;if(h&&k)return a.x!==c.x||a.y!==c.y?[]:[a];if(h)return d(c,e,a)?[a]:[];if(k)return d(a,b,c)?[c]:[];0!==g?(a.x<b.x?(g=a,k=a.x,h=b,
a=b.x):(g=b,k=b.x,h=a,a=a.x),c.x<e.x?(b=c,p=c.x,l=e,c=e.x):(b=e,p=e.x,l=c,c=c.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),c.y<e.y?(b=c,p=c.y,l=e,c=e.y):(b=e,p=e.y,l=c,c=c.y));return k<=p?a<p?[]:a===p?f?[]:[b]:a<=c?[b,h]:[b,l]:k>c?[]:k===c?f?[]:[g]:a<=c?[g,h]:[g,l]}function f(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return Math.abs(a)>Number.EPSILON?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}c(a);b.forEach(c);var g,h,k,l,m,p={};k=
a.concat();g=0;for(h=b.length;g<h;g++)Array.prototype.push.apply(k,b[g]);g=0;for(h=k.length;g<h;g++)m=k[g].x+":"+k[g].y,void 0!==p[m]&&console.warn("THREE.ShapeUtils: Duplicate point",m,g),p[m]=g;g=function(a,b){function c(a,b){var d=h.length-1,e=a-1;0>e&&(e=d);var g=a+1;g>d&&(g=0);d=f(h[a],h[e],h[g],k[b]);if(!d)return!1;d=k.length-1;e=b-1;0>e&&(e=d);g=b+1;g>d&&(g=0);return(d=f(k[b],k[e],k[g],h[a]))?!0:!1}function d(a,b){var c,f;for(c=0;c<h.length;c++)if(f=c+1,f%=h.length,f=e(a,b,h[c],h[f],!0),0<
f.length)return!0;return!1}function g(a,c){var d,f,h,k;for(d=0;d<l.length;d++)for(f=b[l[d]],h=0;h<f.length;h++)if(k=h+1,k%=f.length,k=e(a,c,f[h],f[k],!0),0<k.length)return!0;return!1}var h=a.concat(),k,l=[],m,n,p,A,G,B=[],F,J,P,K=0;for(m=b.length;K<m;K++)l.push(K);F=0;for(var H=2*l.length;0<l.length;){H--;if(0>H){console.log("Infinite Loop! Holes left:"+l.length+", Probably Hole outside Shape!");break}for(n=F;n<h.length;n++){p=h[n];m=-1;for(K=0;K<l.length;K++)if(A=l[K],G=p.x+":"+p.y+":"+A,void 0===
B[G]){k=b[A];for(J=0;J<k.length;J++)if(A=k[J],c(n,J)&&!d(p,A)&&!g(p,A)){m=J;l.splice(K,1);F=h.slice(0,n+1);A=h.slice(n);J=k.slice(m);P=k.slice(0,m+1);h=F.concat(J).concat(P).concat(A);F=n;break}if(0<=m)break;B[G]=!0}if(0<=m)break}}return h}(a,b);var n=THREE.ShapeUtils.triangulate(g,!1);g=0;for(h=n.length;g<h;g++)for(l=n[g],k=0;3>k;k++)m=l[k].x+":"+l[k].y,m=p[m],void 0!==m&&(l[k]=m);return n.concat()},isClockWise:function(a){return 0>THREE.ShapeUtils.area(a)},b2:function(){return function(a,b,c,d){var e=
1-a;return e*e*b+2*(1-a)*a*c+a*a*d}}(),b3:function(){return function(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}}()};THREE.Curve=function(){};
THREE.Curve.prototype={constructor:THREE.Curve,getPoint:function(a){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null},getPointAt:function(a){a=this.getUtoTmapping(a);return this.getPoint(a)},getPoints:function(a){a||(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){a||(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){a||
(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,f=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),f+=c.distanceTo(d),b.push(f),d=c;return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c=this.getLengths(),d=0,e=c.length,f;f=b?b:a*c[e-1];for(var g=0,h=e-
1,k;g<=h;)if(d=Math.floor(g+(h-g)/2),k=c[d]-f,0>k)g=d+1;else if(0<k)h=d-1;else{h=d;break}d=h;if(c[d]===f)return d/(e-1);g=c[d];return c=(d+(f-g)/(c[d+1]-g))/(e-1)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)}};
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.autoClose=!1};
THREE.CurvePath.prototype=Object.assign(Object.create(THREE.Curve.prototype),{constructor:THREE.CurvePath,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))},getPoint:function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=
this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){a||(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},
getPoints:function(a){a=a||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++)for(var f=e[d],f=f.getPoints(f instanceof THREE.EllipseCurve?2*a:f instanceof THREE.LineCurve?1:f instanceof THREE.SplineCurve?a*f.points.length:a),g=0;g<f.length;g++){var h=f[g];c&&c.equals(h)||(b.push(h),c=h)}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},createPointsGeometry:function(a){a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){a=this.getSpacedPoints(a);
return this.createGeometry(a)},createGeometry:function(a){for(var b=new THREE.Geometry,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new THREE.Vector3(e.x,e.y,e.z||0))}return b}});THREE.Font=function(a){this.data=a};
Object.assign(THREE.Font.prototype,{generateShapes:function(a,b,c){void 0===b&&(b=100);void 0===c&&(c=4);var d=this.data;a=String(a).split("");var e=b/d.resolution,f=0;b=[];for(var g=0;g<a.length;g++){var h;h=e;var k=f,l=d.glyphs[a[g]]||d.glyphs["?"];if(l){var m=new THREE.ShapePath,p=[],n=THREE.ShapeUtils.b2,q=THREE.ShapeUtils.b3,r=void 0,s=void 0,v=s=r=void 0,t=void 0,u=void 0,D=void 0,w=void 0,I=void 0,t=void 0;if(l.o)for(var z=l._cachedOutline||(l._cachedOutline=l.o.split(" ")),y=0,A=z.length;y<
A;)switch(z[y++]){case "m":r=z[y++]*h+k;s=z[y++]*h;m.moveTo(r,s);break;case "l":r=z[y++]*h+k;s=z[y++]*h;m.lineTo(r,s);break;case "q":r=z[y++]*h+k;s=z[y++]*h;u=z[y++]*h+k;D=z[y++]*h;m.quadraticCurveTo(u,D,r,s);if(t=p[p.length-1])for(var v=t.x,t=t.y,G=1;G<=c;G++){var B=G/c;n(B,v,u,r);n(B,t,D,s)}break;case "b":if(r=z[y++]*h+k,s=z[y++]*h,u=z[y++]*h+k,D=z[y++]*h,w=z[y++]*h+k,I=z[y++]*h,m.bezierCurveTo(u,D,w,I,r,s),t=p[p.length-1])for(v=t.x,t=t.y,G=1;G<=c;G++)B=G/c,q(B,v,u,w,r),q(B,t,D,I,s)}h={offset:l.ha*
h,path:m}}else h=void 0;f+=h.offset;b.push(h.path)}c=[];d=0;for(a=b.length;d<a;d++)Array.prototype.push.apply(c,b[d].toShapes());return c}});THREE.Path=function(a){THREE.CurvePath.call(this);this.currentPoint=new THREE.Vector2;a&&this.fromPoints(a)};
THREE.Path.prototype=Object.assign(Object.create(THREE.CurvePath.prototype),{constructor:THREE.Path,fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new THREE.LineCurve(this.currentPoint.clone(),new THREE.Vector2(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,b,c,d){a=new THREE.QuadraticBezierCurve(this.currentPoint.clone(),new THREE.Vector2(a,
b),new THREE.Vector2(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,f){a=new THREE.CubicBezierCurve(this.currentPoint.clone(),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,f));this.curves.push(a);this.currentPoint.set(e,f)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a),b=new THREE.SplineCurve(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,
c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a=new THREE.EllipseCurve(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)}});THREE.ShapePath=function(){this.subPaths=[];this.currentPath=null};
THREE.ShapePath.prototype={moveTo:function(a,b){this.currentPath=new THREE.Path;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new THREE.Shape;
f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,l=h.y-g.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=THREE.ShapeUtils.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);var g,
h,k,l=[];if(1===f.length)return h=f[0],k=new THREE.Shape,k.curves=h.curves,l.push(k),l;var m=!e(f[0].getPoints()),m=a?!m:m;k=[];var p=[],n=[],q=0,r;p[q]=void 0;n[q]=[];for(var s=0,v=f.length;s<v;s++)h=f[s],r=h.getPoints(),g=e(r),(g=a?!g:g)?(!m&&p[q]&&q++,p[q]={s:new THREE.Shape,p:r},p[q].s.curves=h.curves,m&&q++,n[q]=[]):n[q].push({h:h,p:r[0]});if(!p[0])return c(f);if(1<p.length){s=!1;h=[];e=0;for(f=p.length;e<f;e++)k[e]=[];e=0;for(f=p.length;e<f;e++)for(g=n[e],m=0;m<g.length;m++){q=g[m];r=!0;for(v=
0;v<p.length;v++)d(q.p,p[v].p)&&(e!==v&&h.push({froms:e,tos:v,hole:m}),r?(r=!1,k[v].push(q)):s=!0);r&&k[e].push(q)}0<h.length&&(s||(n=k))}s=0;for(e=p.length;s<e;s++)for(k=p[s].s,l.push(k),h=n[s],f=0,g=h.length;f<g;f++)k.holes.push(h[f].h);return l}};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};
THREE.Shape.prototype=Object.assign(Object.create(THREE.Path.prototype),{constructor:THREE.Shape,extrude:function(a){return new THREE.ExtrudeGeometry(this,a)},makeGeometry:function(a){return new THREE.ShapeGeometry(this,a)},getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}});
THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.constructor=THREE.LineCurve;THREE.LineCurve.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};
THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve;THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))};
THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b=THREE.CurveUtils.tangentQuadraticBezier;return(new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))).normalize()};THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve;
THREE.CubicBezierCurve.prototype.getPoint=function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))};THREE.CubicBezierCurve.prototype.getTangent=function(a){var b=THREE.CurveUtils.tangentCubicBezier;return(new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))).normalize()};THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};
THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.constructor=THREE.SplineCurve;THREE.SplineCurve.prototype.getPoint=function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0===c?c:c-1],e=b[c],f=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector2(c(d.x,e.x,f.x,b.x,a),c(d.y,e.y,f.y,b.y,a))};
THREE.EllipseCurve=function(a,b,c,d,e,f,g,h){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=g;this.aRotation=h||0};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve;
THREE.EllipseCurve.prototype.getPoint=function(a){for(var b=2*Math.PI,c=this.aEndAngle-this.aStartAngle,d=Math.abs(c)<Number.EPSILON;0>c;)c+=b;for(;c>b;)c-=b;c<Number.EPSILON&&(c=d?0:b);!0!==this.aClockwise||d||(c=c===b?-b:c-b);b=this.aStartAngle+a*c;a=this.aX+this.xRadius*Math.cos(b);var e=this.aY+this.yRadius*Math.sin(b);0!==this.aRotation&&(b=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=a-this.aX,e-=this.aY,a=d*b-e*c+this.aX,e=d*c+e*b+this.aY);return new THREE.Vector2(a,e)};
THREE.ArcCurve=function(a,b,c,d,e,f){THREE.EllipseCurve.call(this,a,b,c,c,d,e,f)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.ArcCurve.prototype.constructor=THREE.ArcCurve;THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){if(1===a)return this.v2.clone();var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});
THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y),b(a,this.v0.z,this.v1.z,this.v2.z))});
THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),b(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))});
THREE.SplineCurve3=THREE.Curve.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0==c?c:c-1],e=b[c],f=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector3(c(d.x,e.x,f.x,b.x,a),c(d.y,e.y,f.y,b.y,a),c(d.z,e.z,f.z,b.z,a))});
THREE.CatmullRomCurve3=function(){function a(){}var b=new THREE.Vector3,c=new a,d=new a,e=new a;a.prototype.init=function(a,b,c,d){this.c0=a;this.c1=c;this.c2=-3*a+3*b-2*c-d;this.c3=2*a-2*b+c+d};a.prototype.initNonuniformCatmullRom=function(a,b,c,d,e,m,p){a=((b-a)/e-(c-a)/(e+m)+(c-b)/m)*m;d=((c-b)/m-(d-b)/(m+p)+(d-c)/p)*m;this.init(b,c,a,d)};a.prototype.initCatmullRom=function(a,b,c,d,e){this.init(b,c,e*(c-a),e*(d-b))};a.prototype.calc=function(a){var b=a*a;return this.c0+this.c1*a+this.c2*b+this.c3*
b*a};return THREE.Curve.create(function(a){this.points=a||[];this.closed=!1},function(a){var g=this.points,h,k;k=g.length;2>k&&console.log("duh, you need at least 2 points");a*=k-(this.closed?0:1);h=Math.floor(a);a-=h;this.closed?h+=0<h?0:(Math.floor(Math.abs(h)/g.length)+1)*g.length:0===a&&h===k-1&&(h=k-2,a=1);var l,m,p;this.closed||0<h?l=g[(h-1)%k]:(b.subVectors(g[0],g[1]).add(g[0]),l=b);m=g[h%k];p=g[(h+1)%k];this.closed||h+2<k?g=g[(h+2)%k]:(b.subVectors(g[k-1],g[k-2]).add(g[k-1]),g=b);if(void 0===
this.type||"centripetal"===this.type||"chordal"===this.type){var n="chordal"===this.type?.5:.25;k=Math.pow(l.distanceToSquared(m),n);h=Math.pow(m.distanceToSquared(p),n);n=Math.pow(p.distanceToSquared(g),n);1E-4>h&&(h=1);1E-4>k&&(k=h);1E-4>n&&(n=h);c.initNonuniformCatmullRom(l.x,m.x,p.x,g.x,k,h,n);d.initNonuniformCatmullRom(l.y,m.y,p.y,g.y,k,h,n);e.initNonuniformCatmullRom(l.z,m.z,p.z,g.z,k,h,n)}else"catmullrom"===this.type&&(k=void 0!==this.tension?this.tension:.5,c.initCatmullRom(l.x,m.x,p.x,g.x,
k),d.initCatmullRom(l.y,m.y,p.y,g.y,k),e.initCatmullRom(l.z,m.z,p.z,g.z,k));return new THREE.Vector3(c.calc(a),d.calc(a),e.calc(a))})}();THREE.ClosedSplineCurve3=function(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.");THREE.CatmullRomCurve3.call(this,a);this.type="catmullrom";this.closed=!0};THREE.ClosedSplineCurve3.prototype=Object.create(THREE.CatmullRomCurve3.prototype);
THREE.BoxGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new THREE.BoxBufferGeometry(a,b,c,d,e,f));this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry;THREE.CubeGeometry=THREE.BoxGeometry;
THREE.BoxBufferGeometry=function(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,k,l,J,P){var K=f/l,H=g/J,M=f/2,O=g/2,N=k/2;g=l+1;for(var Q=J+1,C=f=0,L=new THREE.Vector3,E=0;E<Q;E++)for(var $=E*H-O,T=0;T<g;T++)L[a]=(T*K-M)*d,L[b]=$*e,L[c]=N,p[r]=L.x,p[r+1]=L.y,p[r+2]=L.z,L[a]=0,L[b]=0,L[c]=0<k?1:-1,n[r]=L.x,n[r+1]=L.y,n[r+2]=L.z,q[s]=T/l,q[s+1]=1-E/J,r+=3,s+=2,f+=1;for(E=0;E<J;E++)for(T=0;T<l;T++)a=t+T+g*(E+1),b=t+(T+1)+g*(E+1),c=t+(T+1)+g*E,m[v]=t+T+g*E,m[v+1]=a,m[v+2]=c,m[v+3]=a,m[v+4]=b,m[v+5]=c,v+=6,C+=
6;h.addGroup(u,C,P);u+=C;t+=f}THREE.BufferGeometry.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var k=function(a,b,c){a=0+(a+1)*(b+1)*2+(a+1)*(c+1)*2;return a+=(c+1)*(b+1)*2}(d,e,f),l=function(a,b,c){a=0+a*b*2+a*c*2;a+=c*b*2;return 6*a}(d,e,f),m=new (65535<l?Uint32Array:Uint16Array)(l),p=new Float32Array(3*k),n=new Float32Array(3*k),q=new Float32Array(2*
k),r=0,s=0,v=0,t=0,u=0;g("z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a,f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z",1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(new THREE.BufferAttribute(m,1));this.addAttribute("position",new THREE.BufferAttribute(p,3));this.addAttribute("normal",new THREE.BufferAttribute(n,3));this.addAttribute("uv",new THREE.BufferAttribute(q,2))};THREE.BoxBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.BoxBufferGeometry.prototype.constructor=THREE.BoxBufferGeometry;THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new THREE.CircleBufferGeometry(a,b,c,d))};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry;
THREE.CircleBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=b+2,f=new Float32Array(3*e),g=new Float32Array(3*e),e=new Float32Array(2*e);g[2]=1;e[0]=.5;e[1]=.5;for(var h=0,k=3,l=2;h<=b;h++,k+=3,l+=2){var m=c+h/b*d;f[k]=a*Math.cos(m);f[k+1]=a*Math.sin(m);g[k+2]=1;e[l]=(f[k]/a+1)/2;e[l+1]=(f[k+1]/a+1)/2}c=
[];for(k=1;k<=b;k++)c.push(k,k+1,0);this.setIndex(new THREE.BufferAttribute(new Uint16Array(c),1));this.addAttribute("position",new THREE.BufferAttribute(f,3));this.addAttribute("normal",new THREE.BufferAttribute(g,3));this.addAttribute("uv",new THREE.BufferAttribute(e,2));this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry;
THREE.CylinderBufferGeometry=function(a,b,c,d,e,f,g,h){function k(c){var e,f,k,m=new THREE.Vector2,n=new THREE.Vector3,p=0,D=!0===c?a:b,K=!0===c?1:-1;f=t;for(e=1;e<=d;e++)r.setXYZ(t,0,w*K,0),s.setXYZ(t,0,K,0),m.x=.5,m.y=.5,v.setXY(t,m.x,m.y),t++;k=t;for(e=0;e<=d;e++){var H=e/d*h+g,M=Math.cos(H),H=Math.sin(H);n.x=D*H;n.y=w*K;n.z=D*M;r.setXYZ(t,n.x,n.y,n.z);s.setXYZ(t,0,K,0);m.x=.5*M+.5;m.y=.5*H*K+.5;v.setXY(t,m.x,m.y);t++}for(e=0;e<d;e++)m=f+e,n=k+e,!0===c?(q.setX(u,n),u++,q.setX(u,n+1)):(q.setX(u,
n+1),u++,q.setX(u,n)),u++,q.setX(u,m),u++,p+=3;l.addGroup(I,p,!0===c?1:2);I+=p}THREE.BufferGeometry.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var l=this;a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=Math.floor(d)||8;e=Math.floor(e)||1;f=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var m=0;!1===f&&(0<a&&m++,0<b&&m++);var p=function(){var a=(d+1)*
(e+1);!1===f&&(a+=(d+1)*m+d*m);return a}(),n=function(){var a=d*e*6;!1===f&&(a+=d*m*3);return a}(),q=new THREE.BufferAttribute(new (65535<n?Uint32Array:Uint16Array)(n),1),r=new THREE.BufferAttribute(new Float32Array(3*p),3),s=new THREE.BufferAttribute(new Float32Array(3*p),3),v=new THREE.BufferAttribute(new Float32Array(2*p),2),t=0,u=0,D=[],w=c/2,I=0;(function(){var f,k,m=new THREE.Vector3,n=new THREE.Vector3,p=0,F=(b-a)/c;for(k=0;k<=e;k++){var J=[],P=k/e,K=P*(b-a)+a;for(f=0;f<=d;f++){var H=f/d;n.x=
K*Math.sin(H*h+g);n.y=-P*c+w;n.z=K*Math.cos(H*h+g);r.setXYZ(t,n.x,n.y,n.z);m.copy(n);if(0===a&&0===k||0===b&&k===e)m.x=Math.sin(H*h+g),m.z=Math.cos(H*h+g);m.setY(Math.sqrt(m.x*m.x+m.z*m.z)*F).normalize();s.setXYZ(t,m.x,m.y,m.z);v.setXY(t,H,1-P);J.push(t);t++}D.push(J)}for(f=0;f<d;f++)for(k=0;k<e;k++)m=D[k+1][f],n=D[k+1][f+1],F=D[k][f+1],q.setX(u,D[k][f]),u++,q.setX(u,m),u++,q.setX(u,F),u++,q.setX(u,m),u++,q.setX(u,n),u++,q.setX(u,F),u++,p+=6;l.addGroup(I,p,0);I+=p})();!1===f&&(0<a&&k(!0),0<b&&k(!1));
this.setIndex(q);this.addAttribute("position",r);this.addAttribute("normal",s);this.addAttribute("uv",v)};THREE.CylinderBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CylinderBufferGeometry.prototype.constructor=THREE.CylinderBufferGeometry;
THREE.CylinderGeometry=function(a,b,c,d,e,f,g,h){THREE.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new THREE.CylinderBufferGeometry(a,b,c,d,e,f,g,h));this.mergeVertices()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;
THREE.ConeBufferGeometry=function(a,b,c,d,e,f,g){THREE.CylinderBufferGeometry.call(this,0,a,b,c,d,e,f,g);this.type="ConeBufferGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,thetaStart:f,thetaLength:g}};THREE.ConeBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.ConeBufferGeometry.prototype.constructor=THREE.ConeBufferGeometry;
THREE.ConeGeometry=function(a,b,c,d,e,f,g){THREE.CylinderGeometry.call(this,0,a,b,c,d,e,f,g);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}};THREE.ConeGeometry.prototype=Object.create(THREE.CylinderGeometry.prototype);THREE.ConeGeometry.prototype.constructor=THREE.ConeGeometry;
THREE.EdgesGeometry=function(a,b){function c(a,b){return a-b}THREE.BufferGeometry.call(this);var d=Math.cos(THREE.Math.DEG2RAD*(void 0!==b?b:1)),e=[0,0],f={},g=["a","b","c"],h;a instanceof THREE.BufferGeometry?(h=new THREE.Geometry,h.fromBufferGeometry(a)):h=a.clone();h.mergeVertices();h.computeFaceNormals();var k=h.vertices;h=h.faces;for(var l=0,m=h.length;l<m;l++)for(var p=h[l],n=0;3>n;n++){e[0]=p[g[n]];e[1]=p[g[(n+1)%3]];e.sort(c);var q=e.toString();void 0===f[q]?f[q]={vert1:e[0],vert2:e[1],face1:l,
face2:void 0}:f[q].face2=l}e=[];for(q in f)if(g=f[q],void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=d)l=k[g.vert1],e.push(l.x),e.push(l.y),e.push(l.z),l=k[g.vert2],e.push(l.x),e.push(l.y),e.push(l.z);this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(e),3))};THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry;
THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry;THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=1,d=a.x-b.x,e=a.y-b.y,f=c.x-a.x,g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),l=Math.sqrt(f*f+g*g),h=b.x-e/k;b=b.y+d/k;f=((c.x-g/l-h)*g-(c.y+f/l-b)*f)/(d*g-e*f);c=h+d*f-a.x;a=b+e*f-a.y;d=c*c+a*a;if(2>=d)return new THREE.Vector2(c,a);d=Math.sqrt(d/2)}else a=!1,d>Number.EPSILON?
f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(c=-e,a=d,d=Math.sqrt(h)):(c=d,a=e,d=Math.sqrt(h/2));return new THREE.Vector2(c/d,a/d)}function e(a,b){var c,d;for(E=a.length;0<=--E;){c=E;d=E-1;0>d&&(d=a.length-1);for(var e=0,f=q+2*m,e=0;e<f;e++){var g=Q*e,h=Q*(e+1),k=b+c+g,g=b+d+g,l=b+d+h,h=b+c+h,k=k+B,g=g+B,l=l+B,h=h+B;G.faces.push(new THREE.Face3(k,g,h,null,null,1));G.faces.push(new THREE.Face3(g,l,h,null,null,1));k=t.generateSideWallUV(G,
k,g,l,h);G.faceVertexUvs[0].push([k[0],k[1],k[3]]);G.faceVertexUvs[0].push([k[1],k[2],k[3]])}}}function f(a,b,c){G.vertices.push(new THREE.Vector3(a,b,c))}function g(a,b,c){a+=B;b+=B;c+=B;G.faces.push(new THREE.Face3(a,b,c,null,null,0));a=t.generateTopUV(G,a,b,c);G.faceVertexUvs[0].push(a)}var h=void 0!==b.amount?b.amount:100,k=void 0!==b.bevelThickness?b.bevelThickness:6,l=void 0!==b.bevelSize?b.bevelSize:k-2,m=void 0!==b.bevelSegments?b.bevelSegments:3,p=void 0!==b.bevelEnabled?b.bevelEnabled:!0,
n=void 0!==b.curveSegments?b.curveSegments:12,q=void 0!==b.steps?b.steps:1,r=b.extrudePath,s,v=!1,t=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,u,D,w,I;r&&(s=r.getSpacedPoints(q),v=!0,p=!1,u=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(r,q,!1),D=new THREE.Vector3,w=new THREE.Vector3,I=new THREE.Vector3);p||(l=k=m=0);var z,y,A,G=this,B=this.vertices.length,r=a.extractPoints(n),n=r.shape,F=r.holes;if(r=!THREE.ShapeUtils.isClockWise(n)){n=n.reverse();
y=0;for(A=F.length;y<A;y++)z=F[y],THREE.ShapeUtils.isClockWise(z)&&(F[y]=z.reverse());r=!1}var J=THREE.ShapeUtils.triangulateShape(n,F),P=n;y=0;for(A=F.length;y<A;y++)z=F[y],n=n.concat(z);var K,H,M,O,N,Q=n.length,C,L=J.length,r=[],E=0;M=P.length;K=M-1;for(H=E+1;E<M;E++,K++,H++)K===M&&(K=0),H===M&&(H=0),r[E]=d(P[E],P[K],P[H]);var $=[],T,X=r.concat();y=0;for(A=F.length;y<A;y++){z=F[y];T=[];E=0;M=z.length;K=M-1;for(H=E+1;E<M;E++,K++,H++)K===M&&(K=0),H===M&&(H=0),T[E]=d(z[E],z[K],z[H]);$.push(T);X=X.concat(T)}for(K=
0;K<m;K++){M=K/m;O=k*(1-M);H=l*Math.sin(M*Math.PI/2);E=0;for(M=P.length;E<M;E++)N=c(P[E],r[E],H),f(N.x,N.y,-O);y=0;for(A=F.length;y<A;y++)for(z=F[y],T=$[y],E=0,M=z.length;E<M;E++)N=c(z[E],T[E],H),f(N.x,N.y,-O)}H=l;for(E=0;E<Q;E++)N=p?c(n[E],X[E],H):n[E],v?(w.copy(u.normals[0]).multiplyScalar(N.x),D.copy(u.binormals[0]).multiplyScalar(N.y),I.copy(s[0]).add(w).add(D),f(I.x,I.y,I.z)):f(N.x,N.y,0);for(M=1;M<=q;M++)for(E=0;E<Q;E++)N=p?c(n[E],X[E],H):n[E],v?(w.copy(u.normals[M]).multiplyScalar(N.x),D.copy(u.binormals[M]).multiplyScalar(N.y),
I.copy(s[M]).add(w).add(D),f(I.x,I.y,I.z)):f(N.x,N.y,h/q*M);for(K=m-1;0<=K;K--){M=K/m;O=k*(1-M);H=l*Math.sin(M*Math.PI/2);E=0;for(M=P.length;E<M;E++)N=c(P[E],r[E],H),f(N.x,N.y,h+O);y=0;for(A=F.length;y<A;y++)for(z=F[y],T=$[y],E=0,M=z.length;E<M;E++)N=c(z[E],T[E],H),v?f(N.x,N.y+s[q-1].y,s[q-1].x+O):f(N.x,N.y,h+O)}(function(){if(p){var a;a=0*Q;for(E=0;E<L;E++)C=J[E],g(C[2]+a,C[1]+a,C[0]+a);a=q+2*m;a*=Q;for(E=0;E<L;E++)C=J[E],g(C[0]+a,C[1]+a,C[2]+a)}else{for(E=0;E<L;E++)C=J[E],g(C[2],C[1],C[0]);for(E=
0;E<L;E++)C=J[E],g(C[0]+Q*q,C[1]+Q*q,C[2]+Q*q)}})();(function(){var a=0;e(P,a);a+=P.length;y=0;for(A=F.length;y<A;y++)z=F[y],e(z,a),a+=z.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d){a=a.vertices;b=a[b];c=a[c];d=a[d];return[new THREE.Vector2(b.x,b.y),new THREE.Vector2(c.x,c.y),new THREE.Vector2(d.x,d.y)]},generateSideWallUV:function(a,b,c,d,e){a=a.vertices;b=a[b];c=a[c];d=a[d];e=a[e];return.01>Math.abs(b.y-c.y)?[new THREE.Vector2(b.x,1-b.z),new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z),new THREE.Vector2(e.x,1-e.z)]:[new THREE.Vector2(b.y,1-b.z),new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,
1-d.z),new THREE.Vector2(e.y,1-e.z)]}};THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(a)&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry;THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,f,g,h=this.vertices.length;e=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var k=e.shape,l=e.holes;if(!THREE.ShapeUtils.isClockWise(k))for(k=k.reverse(),e=0,f=l.length;e<f;e++)g=l[e],THREE.ShapeUtils.isClockWise(g)&&(l[e]=g.reverse());var m=THREE.ShapeUtils.triangulateShape(k,l);e=0;for(f=l.length;e<f;e++)g=l[e],k=k.concat(g);
l=k.length;f=m.length;for(e=0;e<l;e++)g=k[e],this.vertices.push(new THREE.Vector3(g.x,g.y,0));for(e=0;e<f;e++)l=m[e],k=l[0]+h,g=l[1]+h,l=l[2]+h,this.faces.push(new THREE.Face3(k,g,l,null,null,c)),this.faceVertexUvs[0].push(d.generateTopUV(this,k,g,l))};
THREE.LatheBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="LatheBufferGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=THREE.Math.clamp(d,0,2*Math.PI);for(var e=(b+1)*a.length,f=b*a.length*6,g=new THREE.BufferAttribute(new (65535<f?Uint32Array:Uint16Array)(f),1),h=new THREE.BufferAttribute(new Float32Array(3*e),3),k=new THREE.BufferAttribute(new Float32Array(2*e),2),l=0,m=0,p=1/b,n=new THREE.Vector3,q=new THREE.Vector2,
e=0;e<=b;e++)for(var f=c+e*p*d,r=Math.sin(f),s=Math.cos(f),f=0;f<=a.length-1;f++)n.x=a[f].x*r,n.y=a[f].y,n.z=a[f].x*s,h.setXYZ(l,n.x,n.y,n.z),q.x=e/b,q.y=f/(a.length-1),k.setXY(l,q.x,q.y),l++;for(e=0;e<b;e++)for(f=0;f<a.length-1;f++)c=f+e*a.length,l=c+a.length,p=c+a.length+1,n=c+1,g.setX(m,c),m++,g.setX(m,l),m++,g.setX(m,n),m++,g.setX(m,l),m++,g.setX(m,p),m++,g.setX(m,n),m++;this.setIndex(g);this.addAttribute("position",h);this.addAttribute("uv",k);this.computeVertexNormals();if(d===2*Math.PI)for(d=
this.attributes.normal.array,g=new THREE.Vector3,h=new THREE.Vector3,k=new THREE.Vector3,c=b*a.length*3,f=e=0;e<a.length;e++,f+=3)g.x=d[f+0],g.y=d[f+1],g.z=d[f+2],h.x=d[c+f+0],h.y=d[c+f+1],h.z=d[c+f+2],k.addVectors(g,h).normalize(),d[f+0]=d[c+f+0]=k.x,d[f+1]=d[c+f+1]=k.y,d[f+2]=d[c+f+2]=k.z};THREE.LatheBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.LatheBufferGeometry.prototype.constructor=THREE.LatheBufferGeometry;
THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new THREE.LatheBufferGeometry(a,b,c,d));this.mergeVertices()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry;
THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new THREE.PlaneBufferGeometry(a,b,c,d))};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry;
THREE.PlaneBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var g=c+1,h=d+1,k=a/c,l=b/d;b=new Float32Array(g*h*3);a=new Float32Array(g*h*3);for(var m=new Float32Array(g*h*2),p=0,n=0,q=0;q<h;q++)for(var r=q*l-f,s=0;s<g;s++)b[p]=s*k-e,b[p+1]=-r,a[p+2]=1,m[n]=s/c,m[n+1]=1-q/d,p+=3,n+=2;p=0;e=new (65535<b.length/3?Uint32Array:Uint16Array)(c*
d*6);for(q=0;q<d;q++)for(s=0;s<c;s++)f=s+g*(q+1),h=s+1+g*(q+1),k=s+1+g*q,e[p]=s+g*q,e[p+1]=f,e[p+2]=k,e[p+3]=f,e[p+4]=h,e[p+5]=k,p+=6;this.setIndex(new THREE.BufferAttribute(e,1));this.addAttribute("position",new THREE.BufferAttribute(b,3));this.addAttribute("normal",new THREE.BufferAttribute(a,3));this.addAttribute("uv",new THREE.BufferAttribute(m,2))};THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry;
THREE.RingBufferGeometry=function(a,b,c,d,e,f){THREE.BufferGeometry.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||20;b=b||50;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var g=(c+1)*(d+1),h=c*d*6,h=new THREE.BufferAttribute(new (65535<h?Uint32Array:Uint16Array)(h),1),k=new THREE.BufferAttribute(new Float32Array(3*g),3),l=new THREE.BufferAttribute(new Float32Array(3*
g),3),g=new THREE.BufferAttribute(new Float32Array(2*g),2),m=0,p=0,n,q=a,r=(b-a)/d,s=new THREE.Vector3,v=new THREE.Vector2,t;for(a=0;a<=d;a++){for(t=0;t<=c;t++)n=e+t/c*f,s.x=q*Math.cos(n),s.y=q*Math.sin(n),k.setXYZ(m,s.x,s.y,s.z),l.setXYZ(m,0,0,1),v.x=(s.x/b+1)/2,v.y=(s.y/b+1)/2,g.setXY(m,v.x,v.y),m++;q+=r}for(a=0;a<d;a++)for(b=a*(c+1),t=0;t<c;t++)e=n=t+b,f=n+c+1,m=n+c+2,n+=1,h.setX(p,e),p++,h.setX(p,f),p++,h.setX(p,m),p++,h.setX(p,e),p++,h.setX(p,m),p++,h.setX(p,n),p++;this.setIndex(h);this.addAttribute("position",
k);this.addAttribute("normal",l);this.addAttribute("uv",g)};THREE.RingBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.RingBufferGeometry.prototype.constructor=THREE.RingBufferGeometry;THREE.RingGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new THREE.RingBufferGeometry(a,b,c,d,e,f))};
THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry.prototype.constructor=THREE.RingGeometry;THREE.SphereGeometry=function(a,b,c,d,e,f,g){THREE.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new THREE.SphereBufferGeometry(a,b,c,d,e,f,g))};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry;
THREE.SphereBufferGeometry=function(a,b,c,d,e,f,g){THREE.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;for(var h=f+g,k=(b+1)*(c+1),l=new THREE.BufferAttribute(new Float32Array(3*k),3),m=new THREE.BufferAttribute(new Float32Array(3*
k),3),k=new THREE.BufferAttribute(new Float32Array(2*k),2),p=0,n=[],q=new THREE.Vector3,r=0;r<=c;r++){for(var s=[],v=r/c,t=0;t<=b;t++){var u=t/b,D=-a*Math.cos(d+u*e)*Math.sin(f+v*g),w=a*Math.cos(f+v*g),I=a*Math.sin(d+u*e)*Math.sin(f+v*g);q.set(D,w,I).normalize();l.setXYZ(p,D,w,I);m.setXYZ(p,q.x,q.y,q.z);k.setXY(p,u,1-v);s.push(p);p++}n.push(s)}d=[];for(r=0;r<c;r++)for(t=0;t<b;t++)e=n[r][t+1],g=n[r][t],p=n[r+1][t],q=n[r+1][t+1],(0!==r||0<f)&&d.push(e,g,q),(r!==c-1||h<Math.PI)&&d.push(g,p,q);this.setIndex(new (65535<
l.count?THREE.Uint32Attribute:THREE.Uint16Attribute)(d,1));this.addAttribute("position",l);this.addAttribute("normal",m);this.addAttribute("uv",k);this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry;
THREE.TextGeometry=function(a,b){b=b||{};var c=b.font;if(!1===c instanceof THREE.Font)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new THREE.Geometry;c=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b);this.type="TextGeometry"};
THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TextGeometry.prototype.constructor=THREE.TextGeometry;
THREE.TorusBufferGeometry=function(a,b,c,d,e){THREE.BufferGeometry.call(this);this.type="TorusBufferGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var f=(c+1)*(d+1),g=c*d*6,g=new (65535<g?Uint32Array:Uint16Array)(g),h=new Float32Array(3*f),k=new Float32Array(3*f),f=new Float32Array(2*f),l=0,m=0,p=0,n=new THREE.Vector3,q=new THREE.Vector3,r=new THREE.Vector3,s,v;for(s=0;s<=c;s++)for(v=0;v<=d;v++){var t=
v/d*e,u=s/c*Math.PI*2;q.x=(a+b*Math.cos(u))*Math.cos(t);q.y=(a+b*Math.cos(u))*Math.sin(t);q.z=b*Math.sin(u);h[l]=q.x;h[l+1]=q.y;h[l+2]=q.z;n.x=a*Math.cos(t);n.y=a*Math.sin(t);r.subVectors(q,n).normalize();k[l]=r.x;k[l+1]=r.y;k[l+2]=r.z;f[m]=v/d;f[m+1]=s/c;l+=3;m+=2}for(s=1;s<=c;s++)for(v=1;v<=d;v++)a=(d+1)*(s-1)+v-1,b=(d+1)*(s-1)+v,e=(d+1)*s+v,g[p]=(d+1)*s+v-1,g[p+1]=a,g[p+2]=e,g[p+3]=a,g[p+4]=b,g[p+5]=e,p+=6;this.setIndex(new THREE.BufferAttribute(g,1));this.addAttribute("position",new THREE.BufferAttribute(h,
3));this.addAttribute("normal",new THREE.BufferAttribute(k,3));this.addAttribute("uv",new THREE.BufferAttribute(f,2))};THREE.TorusBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.TorusBufferGeometry.prototype.constructor=THREE.TorusBufferGeometry;
THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new THREE.TorusBufferGeometry(a,b,c,d,e))};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry;
THREE.TorusKnotBufferGeometry=function(a,b,c,d,e,f){function g(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a);a*=c/b;b=Math.cos(a);e.x=d*(2+b)*.5*f;e.y=d*(2+b)*g*.5;e.z=d*Math.sin(a)*.5}THREE.BufferGeometry.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||100;b=b||40;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var h=(d+1)*(c+1),k=d*c*6,k=new THREE.BufferAttribute(new (65535<k?Uint32Array:Uint16Array)(k),1),l=new THREE.BufferAttribute(new Float32Array(3*
h),3),m=new THREE.BufferAttribute(new Float32Array(3*h),3),h=new THREE.BufferAttribute(new Float32Array(2*h),2),p,n,q=0,r=0,s=new THREE.Vector3,v=new THREE.Vector3,t=new THREE.Vector2,u=new THREE.Vector3,D=new THREE.Vector3,w=new THREE.Vector3,I=new THREE.Vector3,z=new THREE.Vector3;for(p=0;p<=c;++p)for(n=p/c*e*Math.PI*2,g(n,e,f,a,u),g(n+.01,e,f,a,D),I.subVectors(D,u),z.addVectors(D,u),w.crossVectors(I,z),z.crossVectors(w,I),w.normalize(),z.normalize(),n=0;n<=d;++n){var y=n/d*Math.PI*2,A=-b*Math.cos(y),
y=b*Math.sin(y);s.x=u.x+(A*z.x+y*w.x);s.y=u.y+(A*z.y+y*w.y);s.z=u.z+(A*z.z+y*w.z);l.setXYZ(q,s.x,s.y,s.z);v.subVectors(s,u).normalize();m.setXYZ(q,v.x,v.y,v.z);t.x=p/c;t.y=n/d;h.setXY(q,t.x,t.y);q++}for(n=1;n<=c;n++)for(p=1;p<=d;p++)a=(d+1)*n+(p-1),b=(d+1)*n+p,e=(d+1)*(n-1)+p,k.setX(r,(d+1)*(n-1)+(p-1)),r++,k.setX(r,a),r++,k.setX(r,e),r++,k.setX(r,a),r++,k.setX(r,b),r++,k.setX(r,e),r++;this.setIndex(k);this.addAttribute("position",l);this.addAttribute("normal",m);this.addAttribute("uv",h)};
THREE.TorusKnotBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.TorusKnotBufferGeometry.prototype.constructor=THREE.TorusKnotBufferGeometry;
THREE.TorusKnotGeometry=function(a,b,c,d,e,f,g){THREE.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void 0!==g&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new THREE.TorusKnotBufferGeometry(a,b,c,d,e,f));this.mergeVertices()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry;
THREE.TubeGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e,taper:f};b=b||64;c=c||1;d=d||8;e=e||!1;f=f||THREE.TubeGeometry.NoTaper;var g=[],h,k,l=b+1,m,p,n,q,r,s=new THREE.Vector3,v,t,u;v=new THREE.TubeGeometry.FrenetFrames(a,b,e);t=v.normals;u=v.binormals;this.tangents=v.tangents;this.normals=t;this.binormals=u;for(v=0;v<l;v++)for(g[v]=[],m=v/(l-1),r=a.getPointAt(m),h=t[v],k=u[v],n=c*f(m),m=0;m<
d;m++)p=m/d*2*Math.PI,q=-n*Math.cos(p),p=n*Math.sin(p),s.copy(r),s.x+=q*h.x+p*k.x,s.y+=q*h.y+p*k.y,s.z+=q*h.z+p*k.z,g[v][m]=this.vertices.push(new THREE.Vector3(s.x,s.y,s.z))-1;for(v=0;v<b;v++)for(m=0;m<d;m++)f=e?(v+1)%b:v+1,l=(m+1)%d,a=g[v][m],c=g[f][m],f=g[f][l],l=g[v][l],s=new THREE.Vector2(v/b,m/d),t=new THREE.Vector2((v+1)/b,m/d),u=new THREE.Vector2((v+1)/b,(m+1)/d),h=new THREE.Vector2(v/b,(m+1)/d),this.faces.push(new THREE.Face3(a,c,l)),this.faceVertexUvs[0].push([s,t,h]),this.faces.push(new THREE.Face3(c,
f,l)),this.faceVertexUvs[0].push([t.clone(),u,h.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry;THREE.TubeGeometry.NoTaper=function(a){return 1};THREE.TubeGeometry.SinusoidalTaper=function(a){return Math.sin(Math.PI*a)};
THREE.TubeGeometry.FrenetFrames=function(a,b,c){var d=new THREE.Vector3,e=[],f=[],g=[],h=new THREE.Vector3,k=new THREE.Matrix4;b+=1;var l,m,p;this.tangents=e;this.normals=f;this.binormals=g;for(l=0;l<b;l++)m=l/(b-1),e[l]=a.getTangentAt(m),e[l].normalize();f[0]=new THREE.Vector3;g[0]=new THREE.Vector3;a=Number.MAX_VALUE;l=Math.abs(e[0].x);m=Math.abs(e[0].y);p=Math.abs(e[0].z);l<=a&&(a=l,d.set(1,0,0));m<=a&&(a=m,d.set(0,1,0));p<=a&&d.set(0,0,1);h.crossVectors(e[0],d).normalize();f[0].crossVectors(e[0],
h);g[0].crossVectors(e[0],f[0]);for(l=1;l<b;l++)f[l]=f[l-1].clone(),g[l]=g[l-1].clone(),h.crossVectors(e[l-1],e[l]),h.length()>Number.EPSILON&&(h.normalize(),d=Math.acos(THREE.Math.clamp(e[l-1].dot(e[l]),-1,1)),f[l].applyMatrix4(k.makeRotationAxis(h,d))),g[l].crossVectors(e[l],f[l]);if(c)for(d=Math.acos(THREE.Math.clamp(f[0].dot(f[b-1]),-1,1)),d/=b-1,0<e[0].dot(h.crossVectors(f[0],f[b-1]))&&(d=-d),l=1;l<b;l++)f[l].applyMatrix4(k.makeRotationAxis(e[l],d*l)),g[l].crossVectors(e[l],f[l])};
THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=k.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+.5;a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5;b.uv=new THREE.Vector2(c,1-a);return b}function f(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);k.faces.push(d);v.copy(a).add(b).add(c).divideScalar(3);d=Math.atan2(v.z,-v.x);k.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),h(c.uv,c,d)])}function g(a,
b){for(var c=Math.pow(2,b),d=e(k.vertices[a.a]),g=e(k.vertices[a.b]),h=e(k.vertices[a.c]),l=[],m=0;m<=c;m++){l[m]=[];for(var n=e(d.clone().lerp(h,m/c)),p=e(g.clone().lerp(h,m/c)),q=c-m,r=0;r<=q;r++)l[m][r]=0===r&&m===c?n:e(n.clone().lerp(p,r/q))}for(m=0;m<c;m++)for(r=0;r<2*(c-m)-1;r++)d=Math.floor(r/2),0===r%2?f(l[m][d+1],l[m+1][d],l[m][d]):f(l[m][d+1],l[m+1][d+1],l[m+1][d])}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+.5,a.y));
return a.clone()}THREE.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;for(var k=this,l=0,m=a.length;l<m;l+=3)e(new THREE.Vector3(a[l],a[l+1],a[l+2]));a=this.vertices;for(var p=[],n=l=0,m=b.length;l<m;l+=3,n++){var q=a[b[l]],r=a[b[l+1]],s=a[b[l+2]];p[n]=new THREE.Face3(q.index,r.index,s.index,[q.clone(),r.clone(),s.clone()])}for(var v=new THREE.Vector3,l=0,m=p.length;l<m;l++)g(p[l],d);l=0;for(m=this.faceVertexUvs[0].length;l<
m;l++)b=this.faceVertexUvs[0][l],d=b[0].x,a=b[1].x,p=b[2].x,n=Math.max(d,a,p),q=Math.min(d,a,p),.9<n&&.1>q&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>p&&(b[2].x+=1));l=0;for(m=this.vertices.length;l<m;l++)this.vertices[l].multiplyScalar(c);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry;
THREE.DodecahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,
12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}};THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry;
THREE.IcosahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}};THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);
THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry;THREE.OctahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}};THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry;
THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}};THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry;
THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};var d=this.vertices,e=this.faces,f=this.faceVertexUvs[0],g,h,k,l,m=b+1;for(g=0;g<=c;g++)for(l=g/c,h=0;h<=b;h++)k=h/b,k=a(k,l),d.push(k);var p,n,q,r;for(g=0;g<c;g++)for(h=0;h<b;h++)a=g*m+h,d=g*m+h+1,l=(g+1)*m+h+1,k=(g+1)*m+h,p=new THREE.Vector2(h/b,g/c),n=new THREE.Vector2((h+1)/b,g/c),q=new THREE.Vector2((h+1)/b,(g+1)/c),r=new THREE.Vector2(h/b,(g+1)/c),e.push(new THREE.Face3(a,
d,k)),f.push([p,n,r]),e.push(new THREE.Face3(d,l,k)),f.push([n.clone(),q,r.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry;
THREE.WireframeGeometry=function(a){function b(a,b){return a-b}THREE.BufferGeometry.call(this);var c=[0,0],d={},e=["a","b","c"];if(a instanceof THREE.Geometry){var f=a.vertices,g=a.faces,h=0,k=new Uint32Array(6*g.length);a=0;for(var l=g.length;a<l;a++)for(var m=g[a],p=0;3>p;p++){c[0]=m[e[p]];c[1]=m[e[(p+1)%3]];c.sort(b);var n=c.toString();void 0===d[n]&&(k[2*h]=c[0],k[2*h+1]=c[1],d[n]=!0,h++)}c=new Float32Array(6*h);a=0;for(l=h;a<l;a++)for(p=0;2>p;p++)d=f[k[2*a+p]],h=6*a+3*p,c[h+0]=d.x,c[h+1]=d.y,
c[h+2]=d.z;this.addAttribute("position",new THREE.BufferAttribute(c,3))}else if(a instanceof THREE.BufferGeometry){if(null!==a.index){l=a.index.array;f=a.attributes.position;e=a.groups;h=0;0===e.length&&a.addGroup(0,l.length);k=new Uint32Array(2*l.length);g=0;for(m=e.length;g<m;++g){a=e[g];p=a.start;n=a.count;a=p;for(var q=p+n;a<q;a+=3)for(p=0;3>p;p++)c[0]=l[a+p],c[1]=l[a+(p+1)%3],c.sort(b),n=c.toString(),void 0===d[n]&&(k[2*h]=c[0],k[2*h+1]=c[1],d[n]=!0,h++)}c=new Float32Array(6*h);a=0;for(l=h;a<
l;a++)for(p=0;2>p;p++)h=6*a+3*p,d=k[2*a+p],c[h+0]=f.getX(d),c[h+1]=f.getY(d),c[h+2]=f.getZ(d)}else for(f=a.attributes.position.array,h=f.length/3,k=h/3,c=new Float32Array(6*h),a=0,l=k;a<l;a++)for(p=0;3>p;p++)h=18*a+6*p,k=9*a+3*p,c[h+0]=f[k],c[h+1]=f[k+1],c[h+2]=f[k+2],d=9*a+(p+1)%3*3,c[h+3]=f[d],c[h+4]=f[d+1],c[h+5]=f[d+2];this.addAttribute("position",new THREE.BufferAttribute(c,3))}};THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry;THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,a,b)};THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.AxisHelper.prototype.constructor=THREE.AxisHelper;
THREE.ArrowHelper=function(){var a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,1,0],3));var b=new THREE.CylinderBufferGeometry(0,.5,1,5,1);b.translate(0,-.5,0);return function(c,d,e,f,g,h){THREE.Object3D.call(this);void 0===f&&(f=16776960);void 0===e&&(e=1);void 0===g&&(g=.2*e);void 0===h&&(h=.2*g);this.position.copy(d);this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:f}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new THREE.Mesh(b,
new THREE.MeshBasicMaterial({color:f}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,g,h)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper;
THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};
THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};THREE.BoxHelper=function(a,b){void 0===b&&(b=16776960);var c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(24),e=new THREE.BufferGeometry;e.setIndex(new THREE.BufferAttribute(c,1));e.addAttribute("position",new THREE.BufferAttribute(d,3));THREE.LineSegments.call(this,e,new THREE.LineBasicMaterial({color:b}));void 0!==a&&this.update(a)};
THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.BoxHelper.prototype.constructor=THREE.BoxHelper;
THREE.BoxHelper.prototype.update=function(){var a=new THREE.Box3;return function(b){b instanceof THREE.Box3?a.copy(b):a.setFromObject(b);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();
THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper;THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===f[a]&&(f[a]=[]);f[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),f={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.LineSegments.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=
!1;this.pointMap=f;this.update()};THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;
THREE.CameraHelper.prototype.update=function(){function a(a,g,h,k){d.set(g,h,k).unproject(e);a=c[a];if(void 0!==a)for(g=0,h=a.length;g<h;g++)b.vertices[a[g]].copy(d)}var b,c,d=new THREE.Vector3,e=new THREE.Camera;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,
-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;void 0===b&&(b=1);var c=new THREE.BufferGeometry;c.addAttribute("position",new THREE.Float32Attribute([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));var d=new THREE.LineBasicMaterial({fog:!1});this.add(new THREE.Line(c,d));c=new THREE.BufferGeometry;c.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,0,1],3));this.add(new THREE.Line(c,
d));this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper;THREE.DirectionalLightHelper.prototype.dispose=function(){var a=this.children[0],b=this.children[1];a.geometry.dispose();a.material.dispose();b.geometry.dispose();b.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);var d=this.children[0],e=this.children[1];d.lookAt(c);d.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);e.lookAt(c);e.scale.z=c.length()}}();
THREE.EdgesHelper=function(a,b,c){b=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.EdgesGeometry(a.geometry,c),new THREE.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper;
THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=
!1;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper;
THREE.FaceNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,f=this.object.geometry,g=f.vertices,f=f.faces,h=0,k=0,l=f.length;k<l;k++){var m=f[k],p=m.normal;a.copy(g[m.a]).add(g[m.b]).add(g[m.c]).divideScalar(3).applyMatrix4(d);b.copy(p).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);
e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0;return this}}();
THREE.GridHelper=function(a,b,c,d){b=b||1;c=new THREE.Color(void 0!==c?c:4473924);d=new THREE.Color(void 0!==d?d:8947848);for(var e=b/2,f=2*a/b,g=[],h=[],k=0,l=0,m=-a;k<=b;k++,m+=f){g.push(-a,0,m,a,0,m);g.push(m,0,-a,m,0,a);var p=k===e?c:d;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3}a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32Attribute(g,3));a.addAttribute("color",new THREE.Float32Attribute(h,3));g=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});
THREE.LineSegments.call(this,a,g)};THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.GridHelper.prototype.constructor=THREE.GridHelper;THREE.GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
THREE.HemisphereLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];var c=new THREE.SphereGeometry(b,4,2);c.rotateX(-Math.PI/2);for(var d=0;8>d;d++)c.faces[d].color=this.colors[4>d?0:1];d=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(c,d);this.add(this.lightSphere);this.update()};
THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper;THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereBufferGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper;
THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(a){this.bones=this.getBoneList(a);for(var b=new THREE.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof THREE.Bone&&(b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3),b.colors.push(new THREE.Color(0,0,1)),b.colors.push(new THREE.Color(0,1,0)));b.dynamic=!0;c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.LineSegments.call(this,b,c);this.root=a;this.matrix=a.matrixWorld;
this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper;THREE.SkeletonHelper.prototype.getBoneList=function(a){var b=[];a instanceof THREE.Bone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,this.getBoneList(a.children[c]));return b};
THREE.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new THREE.Matrix4).getInverse(this.root.matrixWorld),c=new THREE.Matrix4,d=0,e=0;e<this.bones.length;e++){var f=this.bones[e];f.parent instanceof THREE.Bone&&(c.multiplyMatrices(b,f.matrixWorld),a.vertices[d].setFromMatrixPosition(c),c.multiplyMatrices(b,f.parent.matrixWorld),a.vertices[d+1].setFromMatrixPosition(c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};
THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.BufferGeometry;for(var b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute("position",new THREE.Float32Attribute(b,3));b=new THREE.LineBasicMaterial({fog:!1});this.cone=new THREE.LineSegments(a,
b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper;THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};
THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=3*c.faces.length:c instanceof THREE.BufferGeometry&&(b=c.attributes.normal.count);c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};
THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper;
THREE.VertexNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,f=this.geometry.attributes.position,g=this.object.geometry;if(g instanceof THREE.Geometry)for(var h=g.vertices,k=g.faces,l=g=0,m=k.length;l<m;l++)for(var p=k[l],n=0,q=p.vertexNormals.length;n<q;n++){var r=p.vertexNormals[n];a.copy(h[p[d[n]]]).applyMatrix4(e);
b.copy(r).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);f.setXYZ(g,a.x,a.y,a.z);g+=1;f.setXYZ(g,b.x,b.y,b.z);g+=1}else if(g instanceof THREE.BufferGeometry)for(d=g.attributes.position,h=g.attributes.normal,n=g=0,q=d.count;n<q;n++)a.set(d.getX(n),d.getY(n),d.getZ(n)).applyMatrix4(e),b.set(h.getX(n),h.getY(n),h.getZ(n)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(g,a.x,a.y,a.z),g+=1,f.setXYZ(g,b.x,b.y,b.z),g+=1;f.needsUpdate=!0;return this}}();
THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(a.geometry),new THREE.LineBasicMaterial({color:c}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper;THREE.ImmediateRenderObject=function(a){THREE.Object3D.call(this);this.material=a;this.render=function(a){}};
THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject;THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh;
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={start:b,end:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)_?(\d+)/i,c,d={},e=this.geometry,f=0,g=e.morphTargets.length;f<g;f++){var h=e.morphTargets[f].name.match(b);if(h&&1<h.length){var k=h[1];d[k]||(d[k]={start:Infinity,end:-Infinity});h=d[k];f<h.start&&(h.start=f);f>h.end&&(h.end=f);c||(c=k)}}for(k in d)h=d[k],this.createAnimation(k,h.start,h.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.start+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),g=d.weight;f!==d.currentFrame&&
(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*g,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);e=d.time%e/e;d.directionBackwards&&(e=1-e);d.currentFrame!==d.lastFrame?(this.morphTargetInfluences[d.currentFrame]=e*g,this.morphTargetInfluences[d.lastFrame]=(1-e)*g):this.morphTargetInfluences[d.currentFrame]=g}}};

/**
 * @author mrdoob / http://mrdoob.com/
 * @author supereggbert / http://www.paulbrunt.co.uk/
 * @author julianwa / https://github.com/julianwa
 */

THREE.RenderableObject = function () {

	this.id = 0;

	this.object = null;
	this.z = 0;
	this.renderOrder = 0;

};

//

THREE.RenderableFace = function () {

	this.id = 0;

	this.v1 = new THREE.RenderableVertex();
	this.v2 = new THREE.RenderableVertex();
	this.v3 = new THREE.RenderableVertex();

	this.normalModel = new THREE.Vector3();

	this.vertexNormalsModel = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];
	this.vertexNormalsLength = 0;

	this.color = new THREE.Color();
	this.material = null;
	this.uvs = [ new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() ];

	this.z = 0;
	this.renderOrder = 0;

};

//

THREE.RenderableVertex = function () {

	this.position = new THREE.Vector3();
	this.positionWorld = new THREE.Vector3();
	this.positionScreen = new THREE.Vector4();

	this.visible = true;

};

THREE.RenderableVertex.prototype.copy = function ( vertex ) {

	this.positionWorld.copy( vertex.positionWorld );
	this.positionScreen.copy( vertex.positionScreen );

};

//

THREE.RenderableLine = function () {

	this.id = 0;

	this.v1 = new THREE.RenderableVertex();
	this.v2 = new THREE.RenderableVertex();

	this.vertexColors = [ new THREE.Color(), new THREE.Color() ];
	this.material = null;

	this.z = 0;
	this.renderOrder = 0;

};

//

THREE.RenderableSprite = function () {

	this.id = 0;

	this.object = null;

	this.x = 0;
	this.y = 0;
	this.z = 0;

	this.rotation = 0;
	this.scale = new THREE.Vector2();

	this.material = null;
	this.renderOrder = 0;

};

//

THREE.Projector = function () {

	var _object, _objectCount, _objectPool = [], _objectPoolLength = 0,
	_vertex, _vertexCount, _vertexPool = [], _vertexPoolLength = 0,
	_face, _faceCount, _facePool = [], _facePoolLength = 0,
	_line, _lineCount, _linePool = [], _linePoolLength = 0,
	_sprite, _spriteCount, _spritePool = [], _spritePoolLength = 0,

	_renderData = { objects: [], lights: [], elements: [] },

	_vector3 = new THREE.Vector3(),
	_vector4 = new THREE.Vector4(),

	_clipBox = new THREE.Box3( new THREE.Vector3( - 1, - 1, - 1 ), new THREE.Vector3( 1, 1, 1 ) ),
	_boundingBox = new THREE.Box3(),
	_points3 = new Array( 3 ),
	_points4 = new Array( 4 ),

	_viewMatrix = new THREE.Matrix4(),
	_viewProjectionMatrix = new THREE.Matrix4(),

	_modelMatrix,
	_modelViewProjectionMatrix = new THREE.Matrix4(),

	_normalMatrix = new THREE.Matrix3(),

	_frustum = new THREE.Frustum(),

	_clippedVertex1PositionScreen = new THREE.Vector4(),
	_clippedVertex2PositionScreen = new THREE.Vector4();

	//

	this.projectVector = function ( vector, camera ) {

		console.warn( 'THREE.Projector: .projectVector() is now vector.project().' );
		vector.project( camera );

	};

	this.unprojectVector = function ( vector, camera ) {

		console.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );
		vector.unproject( camera );

	};

	this.pickingRay = function ( vector, camera ) {

		console.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );

	};

	//

	var RenderList = function () {

		var normals = [];
		var uvs = [];

		var object = null;
		var material = null;

		var normalMatrix = new THREE.Matrix3();

		function setObject( value ) {

			object = value;
			material = object.material;

			normalMatrix.getNormalMatrix( object.matrixWorld );

			normals.length = 0;
			uvs.length = 0;

		}

		function projectVertex( vertex ) {

			var position = vertex.position;
			var positionWorld = vertex.positionWorld;
			var positionScreen = vertex.positionScreen;

			positionWorld.copy( position ).applyMatrix4( _modelMatrix );
			positionScreen.copy( positionWorld ).applyMatrix4( _viewProjectionMatrix );

			var invW = 1 / positionScreen.w;

			positionScreen.x *= invW;
			positionScreen.y *= invW;
			positionScreen.z *= invW;

			vertex.visible = positionScreen.x >= - 1 && positionScreen.x <= 1 &&
					 positionScreen.y >= - 1 && positionScreen.y <= 1 &&
					 positionScreen.z >= - 1 && positionScreen.z <= 1;

		}

		function pushVertex( x, y, z ) {

			_vertex = getNextVertexInPool();
			_vertex.position.set( x, y, z );

			projectVertex( _vertex );

		}

		function pushNormal( x, y, z ) {

			normals.push( x, y, z );

		}

		function pushUv( x, y ) {

			uvs.push( x, y );

		}

		function checkTriangleVisibility( v1, v2, v3 ) {

			if ( v1.visible === true || v2.visible === true || v3.visible === true ) return true;

			_points3[ 0 ] = v1.positionScreen;
			_points3[ 1 ] = v2.positionScreen;
			_points3[ 2 ] = v3.positionScreen;

			return _clipBox.intersectsBox( _boundingBox.setFromPoints( _points3 ) );

		}

		function checkBackfaceCulling( v1, v2, v3 ) {

			return ( ( v3.positionScreen.x - v1.positionScreen.x ) *
				    ( v2.positionScreen.y - v1.positionScreen.y ) -
				    ( v3.positionScreen.y - v1.positionScreen.y ) *
				    ( v2.positionScreen.x - v1.positionScreen.x ) ) < 0;

		}

		function pushLine( a, b ) {

			var v1 = _vertexPool[ a ];
			var v2 = _vertexPool[ b ];

			_line = getNextLineInPool();

			_line.id = object.id;
			_line.v1.copy( v1 );
			_line.v2.copy( v2 );
			_line.z = ( v1.positionScreen.z + v2.positionScreen.z ) / 2;
			_line.renderOrder = object.renderOrder;

			_line.material = object.material;

			_renderData.elements.push( _line );

		}

		function pushTriangle( a, b, c ) {

			var v1 = _vertexPool[ a ];
			var v2 = _vertexPool[ b ];
			var v3 = _vertexPool[ c ];

			if ( checkTriangleVisibility( v1, v2, v3 ) === false ) return;

			if ( material.side === THREE.DoubleSide || checkBackfaceCulling( v1, v2, v3 ) === true ) {

				_face = getNextFaceInPool();

				_face.id = object.id;
				_face.v1.copy( v1 );
				_face.v2.copy( v2 );
				_face.v3.copy( v3 );
				_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;
				_face.renderOrder = object.renderOrder;

				// use first vertex normal as face normal

				_face.normalModel.fromArray( normals, a * 3 );
				_face.normalModel.applyMatrix3( normalMatrix ).normalize();

				for ( var i = 0; i < 3; i ++ ) {

					var normal = _face.vertexNormalsModel[ i ];
					normal.fromArray( normals, arguments[ i ] * 3 );
					normal.applyMatrix3( normalMatrix ).normalize();

					var uv = _face.uvs[ i ];
					uv.fromArray( uvs, arguments[ i ] * 2 );

				}

				_face.vertexNormalsLength = 3;

				_face.material = object.material;

				_renderData.elements.push( _face );

			}

		}

		return {
			setObject: setObject,
			projectVertex: projectVertex,
			checkTriangleVisibility: checkTriangleVisibility,
			checkBackfaceCulling: checkBackfaceCulling,
			pushVertex: pushVertex,
			pushNormal: pushNormal,
			pushUv: pushUv,
			pushLine: pushLine,
			pushTriangle: pushTriangle
		}

	};

	var renderList = new RenderList();

	this.projectScene = function ( scene, camera, sortObjects, sortElements ) {

		_faceCount = 0;
		_lineCount = 0;
		_spriteCount = 0;

		_renderData.elements.length = 0;

		if ( scene.autoUpdate === true ) scene.updateMatrixWorld();
		if ( camera.parent === null ) camera.updateMatrixWorld();

		_viewMatrix.copy( camera.matrixWorldInverse.getInverse( camera.matrixWorld ) );
		_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );

		_frustum.setFromMatrix( _viewProjectionMatrix );

		//

		_objectCount = 0;

		_renderData.objects.length = 0;
		_renderData.lights.length = 0;

		function addObject( object ) {

			_object = getNextObjectInPool();
			_object.id = object.id;
			_object.object = object;

			_vector3.setFromMatrixPosition( object.matrixWorld );
			_vector3.applyProjection( _viewProjectionMatrix );
			_object.z = _vector3.z;
			_object.renderOrder = object.renderOrder;

			_renderData.objects.push( _object );

		}

		scene.traverseVisible( function ( object ) {

			if ( object instanceof THREE.Light ) {

				_renderData.lights.push( object );

			} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line ) {

				if ( object.material.visible === false ) return;
				if ( object.frustumCulled === true && _frustum.intersectsObject( object ) === false ) return;

				addObject( object );

			} else if ( object instanceof THREE.Sprite ) {

				if ( object.material.visible === false ) return;
				if ( object.frustumCulled === true && _frustum.intersectsSprite( object ) === false ) return;

				addObject( object );

			}

		} );

		if ( sortObjects === true ) {

			_renderData.objects.sort( painterSort );

		}

		//

		for ( var o = 0, ol = _renderData.objects.length; o < ol; o ++ ) {

			var object = _renderData.objects[ o ].object;
			var geometry = object.geometry;

			renderList.setObject( object );

			_modelMatrix = object.matrixWorld;

			_vertexCount = 0;

			if ( object instanceof THREE.Mesh ) {

				if ( geometry instanceof THREE.BufferGeometry ) {

					var attributes = geometry.attributes;
					var groups = geometry.groups;

					if ( attributes.position === undefined ) continue;

					var positions = attributes.position.array;

					for ( var i = 0, l = positions.length; i < l; i += 3 ) {

						renderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );

					}

					if ( attributes.normal !== undefined ) {

						var normals = attributes.normal.array;

						for ( var i = 0, l = normals.length; i < l; i += 3 ) {

							renderList.pushNormal( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] );

						}

					}

					if ( attributes.uv !== undefined ) {

						var uvs = attributes.uv.array;

						for ( var i = 0, l = uvs.length; i < l; i += 2 ) {

							renderList.pushUv( uvs[ i ], uvs[ i + 1 ] );

						}

					}

					if ( geometry.index !== null ) {

						var indices = geometry.index.array;

						if ( groups.length > 0 ) {

							for ( var o = 0; o < groups.length; o ++ ) {

								var group = groups[ o ];

								for ( var i = group.start, l = group.start + group.count; i < l; i += 3 ) {

									renderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );

								}

							}

						} else {

							for ( var i = 0, l = indices.length; i < l; i += 3 ) {

								renderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );

							}

						}

					} else {

						for ( var i = 0, l = positions.length / 3; i < l; i += 3 ) {

							renderList.pushTriangle( i, i + 1, i + 2 );

						}

					}

				} else if ( geometry instanceof THREE.Geometry ) {

					var vertices = geometry.vertices;
					var faces = geometry.faces;
					var faceVertexUvs = geometry.faceVertexUvs[ 0 ];

					_normalMatrix.getNormalMatrix( _modelMatrix );

					var material = object.material;

					var isFaceMaterial = material instanceof THREE.MultiMaterial;
					var objectMaterials = isFaceMaterial === true ? object.material : null;

					for ( var v = 0, vl = vertices.length; v < vl; v ++ ) {

						var vertex = vertices[ v ];

						_vector3.copy( vertex );

						if ( material.morphTargets === true ) {

							var morphTargets = geometry.morphTargets;
							var morphInfluences = object.morphTargetInfluences;

							for ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {

								var influence = morphInfluences[ t ];

								if ( influence === 0 ) continue;

								var target = morphTargets[ t ];
								var targetVertex = target.vertices[ v ];

								_vector3.x += ( targetVertex.x - vertex.x ) * influence;
								_vector3.y += ( targetVertex.y - vertex.y ) * influence;
								_vector3.z += ( targetVertex.z - vertex.z ) * influence;

							}

						}

						renderList.pushVertex( _vector3.x, _vector3.y, _vector3.z );

					}

					for ( var f = 0, fl = faces.length; f < fl; f ++ ) {

						var face = faces[ f ];

						material = isFaceMaterial === true
							 ? objectMaterials.materials[ face.materialIndex ]
							 : object.material;

						if ( material === undefined ) continue;

						var side = material.side;

						var v1 = _vertexPool[ face.a ];
						var v2 = _vertexPool[ face.b ];
						var v3 = _vertexPool[ face.c ];

						if ( renderList.checkTriangleVisibility( v1, v2, v3 ) === false ) continue;

						var visible = renderList.checkBackfaceCulling( v1, v2, v3 );

						if ( side !== THREE.DoubleSide ) {

							if ( side === THREE.FrontSide && visible === false ) continue;
							if ( side === THREE.BackSide && visible === true ) continue;

						}

						_face = getNextFaceInPool();

						_face.id = object.id;
						_face.v1.copy( v1 );
						_face.v2.copy( v2 );
						_face.v3.copy( v3 );

						_face.normalModel.copy( face.normal );

						if ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {

							_face.normalModel.negate();

						}

						_face.normalModel.applyMatrix3( _normalMatrix ).normalize();

						var faceVertexNormals = face.vertexNormals;

						for ( var n = 0, nl = Math.min( faceVertexNormals.length, 3 ); n < nl; n ++ ) {

							var normalModel = _face.vertexNormalsModel[ n ];
							normalModel.copy( faceVertexNormals[ n ] );

							if ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {

								normalModel.negate();

							}

							normalModel.applyMatrix3( _normalMatrix ).normalize();

						}

						_face.vertexNormalsLength = faceVertexNormals.length;

						var vertexUvs = faceVertexUvs[ f ];

						if ( vertexUvs !== undefined ) {

							for ( var u = 0; u < 3; u ++ ) {

								_face.uvs[ u ].copy( vertexUvs[ u ] );

							}

						}

						_face.color = face.color;
						_face.material = material;

						_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;
						_face.renderOrder = object.renderOrder;

						_renderData.elements.push( _face );

					}

				}

			} else if ( object instanceof THREE.Line ) {

				if ( geometry instanceof THREE.BufferGeometry ) {

					var attributes = geometry.attributes;

					if ( attributes.position !== undefined ) {

						var positions = attributes.position.array;

						for ( var i = 0, l = positions.length; i < l; i += 3 ) {

							renderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );

						}

						if ( geometry.index !== null ) {

							var indices = geometry.index.array;

							for ( var i = 0, l = indices.length; i < l; i += 2 ) {

								renderList.pushLine( indices[ i ], indices[ i + 1 ] );

							}

						} else {

							var step = object instanceof THREE.LineSegments ? 2 : 1;

							for ( var i = 0, l = ( positions.length / 3 ) - 1; i < l; i += step ) {

								renderList.pushLine( i, i + 1 );

							}

						}

					}

				} else if ( geometry instanceof THREE.Geometry ) {

					_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );

					var vertices = object.geometry.vertices;

					if ( vertices.length === 0 ) continue;

					v1 = getNextVertexInPool();
					v1.positionScreen.copy( vertices[ 0 ] ).applyMatrix4( _modelViewProjectionMatrix );

					var step = object instanceof THREE.LineSegments ? 2 : 1;

					for ( var v = 1, vl = vertices.length; v < vl; v ++ ) {

						v1 = getNextVertexInPool();
						v1.positionScreen.copy( vertices[ v ] ).applyMatrix4( _modelViewProjectionMatrix );

						if ( ( v + 1 ) % step > 0 ) continue;

						v2 = _vertexPool[ _vertexCount - 2 ];

						_clippedVertex1PositionScreen.copy( v1.positionScreen );
						_clippedVertex2PositionScreen.copy( v2.positionScreen );

						if ( clipLine( _clippedVertex1PositionScreen, _clippedVertex2PositionScreen ) === true ) {

							// Perform the perspective divide
							_clippedVertex1PositionScreen.multiplyScalar( 1 / _clippedVertex1PositionScreen.w );
							_clippedVertex2PositionScreen.multiplyScalar( 1 / _clippedVertex2PositionScreen.w );

							_line = getNextLineInPool();

							_line.id = object.id;
							_line.v1.positionScreen.copy( _clippedVertex1PositionScreen );
							_line.v2.positionScreen.copy( _clippedVertex2PositionScreen );

							_line.z = Math.max( _clippedVertex1PositionScreen.z, _clippedVertex2PositionScreen.z );
							_line.renderOrder = object.renderOrder;

							_line.material = object.material;

							if ( object.material.vertexColors === THREE.VertexColors ) {

								_line.vertexColors[ 0 ].copy( object.geometry.colors[ v ] );
								_line.vertexColors[ 1 ].copy( object.geometry.colors[ v - 1 ] );

							}

							_renderData.elements.push( _line );

						}

					}

				}

			} else if ( object instanceof THREE.Sprite ) {

				_vector4.set( _modelMatrix.elements[ 12 ], _modelMatrix.elements[ 13 ], _modelMatrix.elements[ 14 ], 1 );
				_vector4.applyMatrix4( _viewProjectionMatrix );

				var invW = 1 / _vector4.w;

				_vector4.z *= invW;

				if ( _vector4.z >= - 1 && _vector4.z <= 1 ) {

					_sprite = getNextSpriteInPool();
					_sprite.id = object.id;
					_sprite.x = _vector4.x * invW;
					_sprite.y = _vector4.y * invW;
					_sprite.z = _vector4.z;
					_sprite.renderOrder = object.renderOrder;
					_sprite.object = object;

					_sprite.rotation = object.rotation;

					_sprite.scale.x = object.scale.x * Math.abs( _sprite.x - ( _vector4.x + camera.projectionMatrix.elements[ 0 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 12 ] ) );
					_sprite.scale.y = object.scale.y * Math.abs( _sprite.y - ( _vector4.y + camera.projectionMatrix.elements[ 5 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 13 ] ) );

					_sprite.material = object.material;

					_renderData.elements.push( _sprite );

				}

			}

		}

		if ( sortElements === true ) {

			_renderData.elements.sort( painterSort );

		}

		return _renderData;

	};

	// Pools

	function getNextObjectInPool() {

		if ( _objectCount === _objectPoolLength ) {

			var object = new THREE.RenderableObject();
			_objectPool.push( object );
			_objectPoolLength ++;
			_objectCount ++;
			return object;

		}

		return _objectPool[ _objectCount ++ ];

	}

	function getNextVertexInPool() {

		if ( _vertexCount === _vertexPoolLength ) {

			var vertex = new THREE.RenderableVertex();
			_vertexPool.push( vertex );
			_vertexPoolLength ++;
			_vertexCount ++;
			return vertex;

		}

		return _vertexPool[ _vertexCount ++ ];

	}

	function getNextFaceInPool() {

		if ( _faceCount === _facePoolLength ) {

			var face = new THREE.RenderableFace();
			_facePool.push( face );
			_facePoolLength ++;
			_faceCount ++;
			return face;

		}

		return _facePool[ _faceCount ++ ];


	}

	function getNextLineInPool() {

		if ( _lineCount === _linePoolLength ) {

			var line = new THREE.RenderableLine();
			_linePool.push( line );
			_linePoolLength ++;
			_lineCount ++;
			return line;

		}

		return _linePool[ _lineCount ++ ];

	}

	function getNextSpriteInPool() {

		if ( _spriteCount === _spritePoolLength ) {

			var sprite = new THREE.RenderableSprite();
			_spritePool.push( sprite );
			_spritePoolLength ++;
			_spriteCount ++;
			return sprite;

		}

		return _spritePool[ _spriteCount ++ ];

	}

	//

	function painterSort( a, b ) {

		if ( a.renderOrder !== b.renderOrder ) {

			return a.renderOrder - b.renderOrder;

		} else if ( a.z !== b.z ) {

			return b.z - a.z;

		} else if ( a.id !== b.id ) {

			return a.id - b.id;

		} else {

			return 0;

		}

	}

	function clipLine( s1, s2 ) {

		var alpha1 = 0, alpha2 = 1,

		// Calculate the boundary coordinate of each vertex for the near and far clip planes,
		// Z = -1 and Z = +1, respectively.
		bc1near =  s1.z + s1.w,
		bc2near =  s2.z + s2.w,
		bc1far =  - s1.z + s1.w,
		bc2far =  - s2.z + s2.w;

		if ( bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0 ) {

			// Both vertices lie entirely within all clip planes.
			return true;

		} else if ( ( bc1near < 0 && bc2near < 0 ) || ( bc1far < 0 && bc2far < 0 ) ) {

			// Both vertices lie entirely outside one of the clip planes.
			return false;

		} else {

			// The line segment spans at least one clip plane.

			if ( bc1near < 0 ) {

				// v1 lies outside the near plane, v2 inside
				alpha1 = Math.max( alpha1, bc1near / ( bc1near - bc2near ) );

			} else if ( bc2near < 0 ) {

				// v2 lies outside the near plane, v1 inside
				alpha2 = Math.min( alpha2, bc1near / ( bc1near - bc2near ) );

			}

			if ( bc1far < 0 ) {

				// v1 lies outside the far plane, v2 inside
				alpha1 = Math.max( alpha1, bc1far / ( bc1far - bc2far ) );

			} else if ( bc2far < 0 ) {

				// v2 lies outside the far plane, v2 inside
				alpha2 = Math.min( alpha2, bc1far / ( bc1far - bc2far ) );

			}

			if ( alpha2 < alpha1 ) {

				// The line segment spans two boundaries, but is outside both of them.
				// (This can't happen when we're only clipping against just near/far but good
				//  to leave the check here for future usage if other clip planes are added.)
				return false;

			} else {

				// Update the s1 and s2 vertices to match the clipped line segment.
				s1.lerp( s2, alpha1 );
				s2.lerp( s1, 1 - alpha2 );

				return true;

			}

		}

	}

};

/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/
!function(){function a(a){return a.replace(t,"").replace(u,",").replace(v,"").replace(w,"").replace(x,"").split(y)}function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function c(c,d){function e(a){return m+=a.split(/\n/).length-1,k&&(a=a.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),a&&(a=s[1]+b(a)+s[2]+"\n"),a}function f(b){var c=m;if(j?b=j(b,d):g&&(b=b.replace(/\n/g,function(){return m++,"$line="+m+";"})),0===b.indexOf("=")){var e=l&&!/^=[=#]/.test(b);if(b=b.replace(/^=[=#]?|[\s;]*$/g,""),e){var f=b.replace(/\s*\([^\)]+\)/,"");n[f]||/^(include|print)$/.test(f)||(b="$escape("+b+")")}else b="$string("+b+")";b=s[1]+b+s[2]}return g&&(b="$line="+c+";"+b),r(a(b),function(a){if(a&&!p[a]){var b;b="print"===a?u:"include"===a?v:n[a]?"$utils."+a:o[a]?"$helpers."+a:"$data."+a,w+=a+"="+b+",",p[a]=!0}}),b+"\n"}var g=d.debug,h=d.openTag,i=d.closeTag,j=d.parser,k=d.compress,l=d.escape,m=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q="".trim,s=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],t=q?"$out+=text;return $out;":"$out.push(text);",u="function(){var text=''.concat.apply('',arguments);"+t+"}",v="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+t+"}",w="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(g?"$line=0,":""),x=s[0],y="return new String("+s[3]+");";r(c.split(h),function(a){a=a.split(i);var b=a[0],c=a[1];1===a.length?x+=e(b):(x+=f(b),c&&(x+=e(c)))});var z=w+x+y;g&&(z="try{"+z+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+b(c)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var A=new Function("$data","$filename",z);return A.prototype=n,A}catch(B){throw B.temp="function anonymous($data,$filename) {"+z+"}",B}}var d=function(a,b){return"string"==typeof b?q(b,{filename:a}):g(a,b)};d.version="3.0.0",d.config=function(a,b){e[a]=b};var e=d.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},f=d.cache={};d.render=function(a,b){return q(a,b)};var g=d.renderFile=function(a,b){var c=d.get(a)||p({filename:a,name:"Render Error",message:"Template not found"});return b?c(b):c};d.get=function(a){var b;if(f[a])b=f[a];else if("object"==typeof document){var c=document.getElementById(a);if(c){var d=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,"");b=q(d,{filename:a})}}return b};var h=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?h(a.call(a)):""),a},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},j=function(a){return i[a]},k=function(a){return h(a).replace(/&(?![\w#]+;)|[<>"']/g,j)},l=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},m=function(a,b){var c,d;if(l(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)},n=d.utils={$helpers:{},$include:g,$string:h,$escape:k,$each:m};d.helper=function(a,b){o[a]=b};var o=d.helpers=n.$helpers;d.onerror=function(a){var b="Template Error\n\n";for(var c in a)b+="<"+c+">\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var p=function(a){return d.onerror(a),function(){return"{Template Error}"}},q=d.compile=function(a,b){function d(c){try{return new i(c,h)+""}catch(d){return b.debug?p(d)():(b.debug=!0,q(a,b)(c))}}b=b||{};for(var g in e)void 0===b[g]&&(b[g]=e[g]);var h=b.filename;try{var i=c(a,b)}catch(j){return j.filename=h||"anonymous",j.name="Syntax Error",p(j)}return d.prototype=i.prototype,d.toString=function(){return i.toString()},h&&b.cache&&(f[h]=d),d},r=n.$each,s="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",t=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,u=/[^\w$]+/g,v=new RegExp(["\\b"+s.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g,y=/^$|,+/;"function"==typeof define?define(function(){return d}):"undefined"!=typeof exports?module.exports=d:this.template=d}();
!function(global) {

  if (global.template) {
    global.template.config('openTag','<#');
    global.template.config('closeTag','#>');
  }

  global.snot = {};

  global.snot.util = {
    left_pos: left_pos,
    top_pos: top_pos,
    is_mobile: is_mobile,
    is_wechat_login: is_wechat_login,
    get_window_width: get_window_width,
    get_window_height: get_window_height,
    position_to_rotation: position_to_rotation,
    distance2D: distance2D,
    distance3D: distance3D,
    epsilon: epsilon,
    css_text_to_matrix: css_text_to_matrix,
    matrix_to_css_text: matrix_to_css_text,
    webgl_check: webgl_check,
    load_js: load_js,
    rotation_to_position: rotation_to_position
  };

  function top_pos(elem) {
    var curtop = 0;
    if (elem.offsetParent) {
      do { 
          curtop += elem.offsetTop; 
      } while (elem = elem.offsetParent);
    }
    return curtop;
  };

  function left_pos(elem) {
    var curleft = 0;
    if (elem.offsetParent) {
        do { 
            curleft += elem.offsetLeft; 
        } while (elem = elem.offsetParent);
    }
    return curleft;
  };
  
  function is_mobile() {
    return get_window_width() < 500;
  }
  
  function is_wechat_login() {
    return window.navigator.userAgent.indexOf('MicroMessenger') >= 0 ? true : false;
  }
  
  function get_window_width() {
    return document.documentElement.clientWidth;
  }
  
  function get_window_height() {
    return document.documentElement.clientHeight;
  }
  
  function position_to_rotation(x, y, z) {
    var r = distance3D(x, y, z, 0, 0, 0);
    var rx = Math.asin(z / r);
    var ry = Math.asin(y / r / Math.cos(rx));
    if (x < 0) {
        ry = ry > 0 ? Math.PI - ry : - Math.PI - ry;
    }
  
    return {
      rx: - rx * 180 / Math.PI,
      ry: (ry < 0 ? ry + Math.PI * 2 : ry) * 180 / Math.PI
    };
  }
  
  function distance2D(a, b, c, d) {
    return Math.pow((a - c) * (a - c) + (b - d) * (b - d), 0.5);
  }
  
  function distance3D(a, b, c, d, e, f) {
    return Math.pow((a - d) * (a - d) + (b - e) * (b - e) + (c - f) * (c - f), 0.5);
  }
  
  function epsilon(value) {
    return Math.abs(value) < 0.000001 ? 0 : value.toFixed(5);
  };
  
  function css_text_to_matrix(t) {
    var m = new WebKitCSSMatrix(t);
    return [
      epsilon(m.m11), epsilon(m.m12), epsilon(m.m13), epsilon(m.m14),
      epsilon(m.m21), epsilon(m.m22), epsilon(m.m23), epsilon(m.m24),
      epsilon(m.m31), epsilon(m.m32), epsilon(m.m33), epsilon(m.m34),
      epsilon(m.m41), epsilon(m.m42), epsilon(m.m43), epsilon(m.m44)
    ];
  }
  
  function matrix_to_css_text(a, b, c, d,
                              e, f, g, h,
                              i, j, k, l,
                              m, n, o, p) {
      if (typeof(a) == 'object') {
          return 'matrix3d(' + (a.join(',')) + ')';
      }
      return 'matrix3d(' + a + ',' + b + ',' + c + ',' + d+',' + e + ',' + f + ',' + g + ',' + h + ',' + i + ',' + j + ',' + k + ',' + l + ',' + m + ',' + n + ',' + o+ ',' + p + ')';
  }
  
  window.requestAnimationFrame= (function () { 
    return window.requestAnimationFrame || 
    window.webkitRequestAnimationFrame || 
    window.mozRequestAnimationFrame || 
    window.oRequestAnimationFrame || 
    // if all else fails, use setTimeout 
    function (callback) { 
      return window.setTimeout(callback, 1000 / 60); // shoot for 60 fps 
    }; 
  })(); 
  
  function webgl_check(return_context) {
    if (!!window.WebGLRenderingContext) {
      var canvas = document.createElement("canvas");
      var names = ['webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'];
      var context = false;
  
      for (var i = 0;i < 4; i++) {
        try {
          context = canvas.getContext(names[i]);
          if (context && typeof context.getParameter == 'function') {
            // WebGL is enabled
            if (return_context) {
              // return WebGL object if the function's argument is present
              return {
                name: names[i],
                gl: context
              };
            }
            // else, return just true
            return true;
          }
        } catch(e) {}
      }
  
      // WebGL is supported, but disabled
      return false;
    }
  
    // WebGL not supported
    return false;
  }
  
  function load_js(file, callback) {
    var _doc = document.getElementsByTagName('head')[0];
    var js = document.createElement('script');
    js.setAttribute('type', 'text/javascript');
    js.setAttribute('src', file);
    _doc.appendChild(js);
    if (!/*@cc_on!@*/0) { //if not ie
      //firefox2、firefox3、safari3.1+、opera9.6+ support js.onload
      js.onload = function () {
        callback();
      }
    } else {
      //ie6、ie7 support js.onreadystatechange
      js.onReadyStateChange = function () {
        if (js.readyState == 'loaded' || js.readyState == 'complete') {
          callback();
        }
      }
    }
  }
  
  function rotation_to_position(z, rx, ry, rz) {
    z = - z;
    rx = - rx;
  
    var x = snot.bg_size / 2;
    var y = snot.bg_size / 2;
  
    var transform = css_text_to_matrix('translate3d(' + x + 'px,' + y + 'px,0) rotateY(' + (0) + 'deg) rotateX(' + (0) + 'deg) rotateY(' + (ry ? - ry : 0) + 'deg) rotateX(' + (rx ? - rx : 0) + 'deg) rotateZ(' + (rz ? rz : 0) +'deg) translateZ(' + z + 'px)' );
    return [ - transform[12] + snot.bg_size / 2, transform[13] - snot.bg_size / 2, - transform[14]];
  }
}(window);

!function(global) {

  var dom_offset_top;
  var dom_offset_left;
  var snot = {

    camera_look_at: {
      x: 0,
      y: 0,
      z: 1,
    },
    mouse_sensitivity: 0.3,
    auto_rotation: 0,
    frames: 0,
    bg_rotation: [0, 0, 0, 0, 0, 0],

    pause_animation: false,

    dom      : document.getElementById('snot-wrap'),
    camera   : document.getElementById('snot-camera'),
    container: document.getElementById('snot-container'),

    bg_size: 1024,

    generator: {},
    gyro: false,
    ry: 0,        // Rotate * degree around y axis
    rx: 0,        // Rotate * degree around x axis
    max_fov: 120, // Max field of view (degree)
    min_fov: 60,   // Min field of view (degree)
    fov: 90,      // Default field of view
    smooth: 0.17,
    min_detect_distance: 20,
    on_click: function() {},
    on_sprite_click: function() {},
  }
  var prev_gyro;

  var PI = Math.PI;
  var sin = Math.sin;
  var cos = Math.cos;
  var tan = Math.tan;
  var acos = Math.acos;
  var atan = Math.atan;
  var pow = Math.pow;
  var floor = Math.floor;
  var sqrt = Math.sqrt;

  var dist_rx;
  var dist_ry;
  var previous_quat = new THREE.Quaternion();
  var screen_orientation = 0;
  var vars = {
    alpha: 0,
    beta: 90 * PI / 180,
    gamma: 0
  };

  var varsDest = {
    alpha: 0,
    beta: 0,
    gamma: 0
  };


  function _pointStandardlization(x, y, z) {
    var ratio = 200 / distance3D(x, y, z, 0, 0, 0);
    return [x * ratio, y * ratio, z * ratio];
  }

  if (global.snot) {
    for (var i in snot) {
      global.snot[i] = snot[i];
    }
    snot = global.snot;
  } else {
    console.error('snot-utils.js is missing');
    return;
  }
  var util = global.snot.util;
  var epsilon = util.epsilon;
  var distance3D = util.distance3D;
  var distance2D = util.distance2D;

  var set_fov = function (degree) {
    if (degree < snot.min_fov || degree > snot.max_fov) {
      return;
    }
    snot.fov = degree;
    snot.container.style['-webkit-transform'] = 'scale(' + tan(snot.max_fov / 2 * PI / 180) / tan(snot.fov / 2 * PI / 180) + ')';
  }

  function reset() {
    var sprites = document.getElementsByClassName('sprite');
    for (var i = 0; i < sprites.length; ++ i) {
      sprites[i].remove();
    }
  }

  var _init = function(config, ajax) {
    reset();

    cancelAnimationFrame(snot._animateId);

    for (var i in config) {
      if (i == 'generator') {
        merge_json(snot.generator, config.generator);
      }
      snot[i] = config[i];
    }
    prev_gyro = snot.gyro;

    dom_offset_left = util.left_pos(snot.dom);
    dom_offset_top = util.top_pos(snot.dom);

    dist_rx = snot.rx + 0.1; //unknown bug for mobile safari
    dist_ry = snot.ry;

    //First init
    if (!ajax) {

      snot.width = snot.dom.offsetWidth;
      snot.height = snot.dom.offsetHeight;

      //compute the max Horizontal Field of view
      //perspective= projectiveScreenWidth/2
      //           = width/2/tan(max_fov/2)
      snot.perspective = snot.width / 2 / tan(snot.max_fov / 2 * PI / 180);

      snot.container.style['-webkit-perspective'] = snot.perspective + 'px';

      //camera offset
      // Z is depth(front) Y is height X is right
      //
      // translateZ setFOV
      // rotateX rotate around X axis
      // rotateY rotate around Y axis
      // translateX translate the Camera to center
      // translateY
      snot.cameraBaseTransform = 'translateX(' + epsilon(- (snot.bg_size - snot.width) / 2) + 'px) translateY(' + epsilon(- (snot.bg_size - snot.height) / 2) + 'px)';
      snot.camera.style['-webkit-transform'] = 'translateZ(-' + snot.perspective + 'px) rotateX(' + snot.rx + 'deg) rotateY(' + snot.ry + 'deg)' + snot.cameraBaseTransform;
    }
    set_fov(snot.fov);

    if (config.bg_imgs) {
      load_bg_imgs(config.bg_imgs, config.bg_rotation || snot.bg_rotation);
    }

    if (config) {
      _load_sprites(config.sprites);
    }

    if (util.is_mobile()) {
      snot.container.addEventListener('touchstart', mouseDown, false);
      snot.container.addEventListener('touchmove' , mouseMove, false);
      snot.container.addEventListener('touchend'  , mouseUp  , false);
    } else {
      snot.container.addEventListener('mousedown' , mouseDown , false);
      snot.container.addEventListener('mousemove' , mouseMove , false);
      snot.container.addEventListener('mouseup'   , mouseUp   , false);
      snot.container.addEventListener('mousewheel', mouseWheel, false);
    }

    if (config.callback) {
      config.callback();
    }
  }

  function load_bg_imgs(bg_imgs, bg_rotation) {
    var bg_config = {
      front : 'rotateY(90deg)' + '                rotateZ(' + bg_rotation[0] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px)',
      bottom: 'rotateY(90deg)' + 'rotateX(90deg)  rotateZ(' + bg_rotation[1] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px) rotateZ(90deg)',
      left  : 'rotateY(90deg)' + 'rotateY(90deg)  rotateZ(' + bg_rotation[2] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px)',
      back  : 'rotateY(90deg)' + 'rotateY(180deg) rotateZ(' + bg_rotation[3] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px)',
      top   : 'rotateY(90deg)' + 'rotateX(-90deg) rotateZ(' + bg_rotation[4] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px) rotateZ(-90deg)',
      right : 'rotateY(90deg)' + 'rotateY(-90deg) rotateZ(' + bg_rotation[5] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px)'
    };

    var bg_dom;
    var count = 0;
    for (var i in bg_config) {
      bg_dom = document.getElementsByClassName('snot-bg ' + i)[0];
      bg_dom.style['-webkit-transform'] = bg_config[i];
      bg_dom.style['width'] = snot.bg_size + 2 + 'px';        // 2 more pixels for overlapping gaps ( chrome's bug )
      bg_dom.style['height'] = snot.bg_size + 2 + 'px';        // 2 more pixels for overlapping gaps ( chrome's bug )

      bg_dom.setAttribute('src', bg_imgs[count]);
      bg_dom.setAttribute('data-index', count);
      ++count;
    }
  }

  var touches = {
    fx:0,   // First  finger x
    fy:0,   // First  finger y
    sx:0,   // Second finger x
    sy:0    // Second finger y
  };

  var _load_sprites = function(sprites) {
    for (var i in sprites) {
      var t = sprites[i];
      if (t.standardlization) {
        var standard = _pointStandardlization(t.x,t.y,t.z);
        t.x=standard[0];
        t.y=standard[1];
        t.z=standard[2];
      }

      var temp_wrapper = document.createElement('div');
      temp_wrapper.innerHTML = template(snot.generator[t.generator], t);
      var element = temp_wrapper.firstChild;
      element.data = sprites[i];
      add_sprite_by_position(element, t);
    }
  }

  function m_make_rotation_axis(point, rotation) {
    return new THREE.Matrix4().makeRotationAxis(point, rotation);
  }

  function m_multiply() {
    var mats = arguments;

    var l = mats.length;
    while (l > 1) {
      var last2 = mats[l - 2];
      var last1 = mats[l - 1];
      mats[l - 2] = new THREE.Matrix4().multiplyMatrices(
        last2,
        last1
      );
      l--;
    }
    return mats[0];
  }

  function v_set_from_matrix_position(mat4) {
    return new THREE.Vector3().setFromMatrixPosition(mat4);
  }

  function m_set_position(p) {
    return new THREE.Matrix4().setPosition(p);
  }

  function add_sprite_by_position(element, p) {

    var x = p.x;
    var z = - p.z;
    var y = - p.y;

    var spriteContainer = document.createElement('div');
    spriteContainer.style.display = 'inline-block';
    spriteContainer.style.position = 'absolute';
    spriteContainer.className = 'sprite-container';
    spriteContainer.id = element.data.id;

    spriteContainer.style['-webkit-transform-origin-x'] = '0';
    spriteContainer.style['-webkit-transform-origin-y'] = '0';

    var arc = x == 0 && z == 0 ? 0 : acos( z / pow(x * x + z * z, 0.5));

    arc = x < 0 ? 2 * PI - arc : arc;
    arc = arc * 180 / PI;

    var r = distance3D(x, y, z, 0, 0, 0);
    x += snot.bg_size / 2;
    y += snot.bg_size / 2;

    spriteContainer.style['-webkit-transform'] = 'translate3d(' + epsilon(x) + 'px,' + epsilon(y) + 'px,' + epsilon(z) + 'px) rotateY(' + epsilon(arc) + 'deg) rotateX(' + epsilon(- (y - snot.bg_size / 2) / r * 90)+'deg) rotateY(180deg)';

    var spriteWrap = document.createElement('div');
    spriteWrap.className='sprite-wrap';
    spriteWrap.appendChild(element);
    spriteWrap.setAttribute('data-visible', element.data.visible == false ? false : true);

    spriteContainer.appendChild(spriteWrap);
    snot.camera.appendChild(spriteContainer);
  }

  var update_sprite_visibility = function(id) {
    var visible = snot.sprites[id].visible;
    var spriteContainer = document.getElementById(id);
    spriteContainer.firstChild.setAttribute('data-visible', visible ? true : false);
  }

  var update_sprite_position = function(id) {
    var x = snot.sprites[id].x;
    var y = snot.sprites[id].y;
    var z = snot.sprites[id].z;
    z=-z;
    y=-y;
    var arc = x == 0 && z == 0 ? 0 : acos( z / pow(x * x + z * z, 0.5));

    arc = x < 0 ? 2 * PI - arc : arc;
    arc = arc * 180/ PI;

    var r = distance3D(x, y, z, 0, 0, 0);
    x += snot.bg_size / 2;
    y += snot.bg_size / 2;

    var spriteContainer = document.getElementById(id);

    spriteContainer.style['-webkit-transform'] = 'translate3d(' + epsilon(x) + 'px,' + epsilon(y) + 'px,' + epsilon(z) + 'px) rotateY(' + epsilon(arc) + 'deg) rotateX(' + epsilon(- (y - snot.bg_size / 2) / r * 90) + 'deg) rotateY(180deg)';
  }

  var mouseMove = function(event) {

    event.preventDefault();
    event.stopPropagation();

    var x = Math.floor(event.clientX >= 0 ? event.clientX : event.touches[0].pageX);
    var y = Math.floor(event.clientY >= 0 ? event.clientY : event.touches[0].pageY);
    x -= dom_offset_left;
    y -= dom_offset_top;

    touches.click = false;

    if (!touches.onTouching) {
      return false;
    }

    if (event.touches && event.touches.length > 1) {

      var cfx = x;                          // Current frist  finger x
      var cfy = y;                          // Current first  finger y
      var csx = event.touches[1].pageX;     // Current second finger x
      var csy = event.touches[1].pageY;     // Current second finger y

      var dis = distance2D(touches.fx, touches.fy, touches.sx, touches.sy) - distance2D(cfx, cfy, csx, csy);

      var ratio = 0.12;
      snot.setFov(snot.fov + dis * ratio);

      touches.fx = cfx;
      touches.fy = cfy;
      touches.sx = csx;
      touches.sy = csy;

      return false;
    }

    var ratio = snot.mouse_sensitivity;

    dist_ry = dist_ry + (touches.fx - x) * ratio;
    dist_rx = dist_rx - (touches.fy - y) * ratio;

    touches.fx = x;
    touches.fy = y;

    dist_rx = dist_rx > 90 ? 90 : dist_rx;
    dist_rx = dist_rx < -90 ? -90 : dist_rx;

  };

  var mouseDownX;
  var mouseDownY;
  var mouseDown = function (event) {

    event.preventDefault();
    event.stopPropagation();

    var x = floor(event.clientX >= 0 ? event.clientX : event.touches[0].clientX);
    var y = floor(event.clientY >= 0 ? event.clientY : event.touches[0].clientY);
    x -= dom_offset_left;
    y -= dom_offset_top;

    mouseDownX = x;
    mouseDownY = y;

    touches.fx = x;
    touches.fy = y;
    touches.click = true;

    if (event.touches && event.touches.length > 1) {

      touches.sx = event.touches[1].pageX;
      touches.sy = event.touches[1].pageY;

    }

    touches.onTouching = true;
  }

  var mouseWheel = function (event) {

    event.preventDefault();
    event.stopPropagation();

    var offset = event.deltaY;
    snot.setFov(snot.fov + offset * 0.06);

  }

  function on_click(x, y) {
    var R = 100;
    var fov = snot.fov;
    var bg_size = snot.bg_size;
    var arcFactor = Math.PI / 180;
    var rz = snot.rz * arcFactor;
    var width = snot.width;
    var height = snot.height;

    var ry = (x / width - 0.5) * fov;
    var rx = (y / height-0.5) * fov * height / width;
    var r = cos(fov / 2 * arcFactor) * bg_size;
    var ratiox = (x - width / 2) / width * 2;
    var ratioy = (y - height / 2) / width * 2;
    var P = sin(fov / 2 * arcFactor) * bg_size;

    ry = atan(ratiox * P / r);
    rx = atan(ratioy * P / r);

    ry *= 180 / PI;
    rx *= 180 / PI;

    var xyz2 = util.rotation_to_position(R, rx, 0);

    var rr = distance3D(- tan(ry * arcFactor) * xyz2[2], - xyz2[1], xyz2[2], 0, 0, 0);
    var ratio = R / rr;

    var new_x = - tan(ry * PI / 180) * xyz2[2] * ratio;
    var new_y = - xyz2[1] * ratio;
    var new_z = xyz2[2] * ratio;

    var pos = v_set_from_matrix_position(m_multiply(
      m_make_rotation_axis({x: 0, y: 1, z: 0}, - snot.ry * PI / 180),
      m_make_rotation_axis({x: 0, y: 0, z: 1}, - snot.rz * PI / 180),
      m_make_rotation_axis({x: 1, y: 0, z: 0}, - snot.rx * PI / 180),
      m_set_position({x: new_x, y: new_y, z: new_z})
    ));

    ax = - pos.x;
    ay = pos.y;
    az = pos.z;

    var min_offset = 0.4;
    var min_distance = snot.min_detect_distance;
    var nearest;

    var spriteContainers = document.getElementsByClassName('sprite-container');
    for (var i = 0 ;i < spriteContainers.length; ++i) {
      var self = spriteContainers[i];
      var matrix = util.css_text_to_matrix(self.style.webkitTransform);
      var rate_ = 100 / distance3D(0, 0, 0, snot.bg_size / 2 - matrix[12], matrix[13] - snot.bg_size / 2, - matrix[14]);

      var distance = distance3D(- ax, - ay, az, (snot.bg_size / 2 - matrix[12]) * rate_, rate_ * (matrix[13] - snot.bg_size / 2), rate_ * ( - matrix[14]));
      if (distance < min_distance) {
        min_distance = distance;
        nearest = self.children[0];
      }
    }

    var rotation = util.position_to_rotation(ax, az, ay);
    if (nearest) {
      snot.on_sprite_click(snot.sprites[nearest.parentElement.id], nearest);
    } else {
      snot.on_click(ax, ay, az, rotation[0], rotation[1]);
    }
  }

  var mouseUp = function (event) {
    event.preventDefault();
    event.stopPropagation();

    var x = floor(event.clientX >= 0 ? event.clientX : event.changedTouches[0].pageX);
    var y = floor(event.clientY >= 0 ? event.clientY : event.changedTouches[0].pageY);
    x -= dom_offset_left;
    y -= dom_offset_top;

    //Screen coordinate to Sphere 3d coordinate
    if (distance2D(mouseDownX, mouseDownY, x, y) < 5) {
      on_click(x, y);
    }
    touches.onTouching = false;
  }

  function _run() {
    snot._animateId = requestAnimationFrame(_run);
    if (!snot.pause_animation) {
      _update();
    }
  }

  function m_make_rotation_from_quaternion(q) {
    return new THREE.Matrix4().makeRotationFromQuaternion(q);
  }

  var camera_euler = new THREE.Euler();
  var target_quat = new THREE.Quaternion();
  var rotate_90_quat = new THREE.Quaternion(- sqrt( 0.5 ), 0, 0, sqrt( 0.5 ))
  var adjust_screen_quats = {
    0: new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), 0),
    90: new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), - 90),
    180: new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), - 180),
    '-90': new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), 90),
  };
  var look_at_euler = new THREE.Euler();

  function update_camera(x, y, z) {

    camera_euler.set(y, x, z, 'YXZ'); // 'ZXY' for the device, but 'YXZ' for us

    target_quat.setFromEuler(camera_euler); // orient the device

    target_quat.multiply(rotate_90_quat); // camera looks out the back of the device, not the top
                                          // - PI/2 around the x-axis
    target_quat.multiply(adjust_screen_quats[screen_orientation]); // adjust for screen orientation

    var slerp_quat = new THREE.Quaternion();
    THREE.Quaternion.slerp(target_quat, previous_quat, slerp_quat, 1 - snot.smooth);
    previous_quat = slerp_quat;
    var look_at_quat = slerp_quat.clone();
    look_at_quat.x *= -1;
    look_at_quat.z *= -1;
    var look_at_mat = m_make_rotation_from_quaternion(look_at_quat.normalize()).transpose();
    var look_at_rot = look_at_euler.setFromRotationMatrix(look_at_mat, 'XZY');

    snot.rx = look_at_rot._x * 180 / PI;
    snot.ry = look_at_rot._y * 180 / PI;
    snot.rz = look_at_rot._z * 180 / PI;

    snot.camera_look_at = v_set_from_matrix_position(m_multiply(
      m_make_rotation_axis({x: 0, y: 1, z: 0}, look_at_rot._y),
      m_make_rotation_axis({x: 0, y: 0, z: 1}, look_at_rot._z),
      m_make_rotation_axis({x: 1, y: 0, z: 0}, - look_at_rot._x),
      m_set_position({x: 0, y: 0, z: 1})
    )); // bad performance here

    snot.camera.style.transform = 'translateZ(' + epsilon(snot.perspective) + 'px)' + " matrix3d(" + look_at_mat.elements + ")"+ snot.cameraBaseTransform;
  }

  function _update() {
    snot.frames++;

    if (snot.gyro) {
      if (vars.alpha === -1 && vars.beta === -1 && vars.gamma === - 1) {
        return;
      }

      update_camera(vars.alpha, vars.beta, - vars.gamma);
    } else {
      if (prev_gyro) {
        dist_rx = 0;
        dist_ry = 0;
      }
      dist_ry += snot.auto_rotation;
      update_camera( - dist_ry * PI / 180, dist_rx * PI / 180 + PI / 2, 0);
    }
    prev_gyro = snot.gyro;

    for (var i in snot.sprites) {
      var sprite = snot.sprites[i];
      if (sprite.need_update_position) {
        sprite.need_update_position = false;
        update_sprite_position(sprite.id);
      }
      if (sprite.need_update_visibility) {
        sprite.need_update_visibility = false;
        update_sprite_visibility(sprite.id);
      }
    }
  }

  window.addEventListener('orientationchange', function(ev) {
    screen_orientation = window.orientation || 0;
  }, false );

  window.addEventListener('deviceorientation', function(ev) {
    if (ev.alpha !== null) {
      vars.beta = ev.beta  * Math.PI / 180 ;
      vars.gamma = ev.gamma  * Math.PI / 180;
      vars.alpha = ev.alpha  * Math.PI / 180;
    } else {
      vars.beta = vars.gamma = vars.alpha = -1;
    }
  }, true);


  var _setRx = function(rx, smooth) {
    //TODO
  }

  var _setRy=function(ry,smooth){
    //TODO
  }

  function merge_json(obj, json) {
    for (var i in json) {
      if (obj[i] == undefined) {
        obj[i] = json[i];
      }
    }
  }

  merge_json(snot, {
    setFov: set_fov,
    setRx: _setRx,
    setRy: _setRy,
    init: _init,
    run: _run,
    update: _update,
    load_sprites: _load_sprites,
  });
}(window);

!function(global) {

  var snot = {

    camera_look_at: {
      x: 0,
      y: 0,
      z: 1,
    },
    mouse_sensitivity: 0.3,
    auto_rotation: 0,
    frames:0,
    bg_rotation: [0, 0, 0, 0, 0, 0],

    pause_animation: false,
    generator: {
      text: text_generator,
    },

    dom      : document.getElementById('snot-wrap'),
    camera   : document.getElementById('snot-camera'),
    container: document.getElementById('snot-container'),

    bg_size: 1024,

    gyro: false,

    smooth: 0.17,
    quaternion: {},

    rz: 0,
    ry: 0,       // Rotate * degree around y axis
    rx: 0,       // Rotate * degree around x axis
    max_fov: 120, // Max field of view (degree)
    min_fov: 60,  // Min field of view (degree)
    fov: 90,     // Default field of view
  };

  if (global.snot) {
    for (var i in snot) {
      global.snot[i] = snot[i];
    }
    snot = global.snot;
  } else {
    console.error('snot-utils.js is missing');
    return;
  }
  var util = global.snot.util;
  var epsilon = util.epsilon;
  var distance3D = util.distance3D;
  var distance2D = util.distance2D;

  var camera;
  var scene;
  var renderer;
  var bg_materials = [];
  var suspects = [];
  var sprites = {};
  var dist_ry;
  var dist_rx;
  var _overdraw = 1;
  THREE.ImageUtils.crossOrigin = '*';

  var mouse_down_x;
  var mouse_down_rx;
  var mouse_down_ry;
  var mouse_down_y;
  var is_mouse_down = false;

  function _pointStandardlization(x, y, z) {
    var ratio=200/distance3D(x, y, z, 0, 0, 0);
    return [x * ratio, y * ratio, z * ratio];
  }
  //0     1    2    3    4   5
  //front down left back top right
  //front down left back top right
  var img_index_convert = [3, 0, 4, 1, 5, 2];
  function load_bg_imgs(imgs) {
    var size = snot.bg_size;
    var precision = 1;
    var geometry = new THREE.BoxGeometry(size, size, size, precision, precision, precision);
    for (var index = 0;index < 6; ++index) {
      var img_url = imgs[img_index_convert[index]];
      bg_materials.push(new THREE.MeshBasicMaterial({
        map: THREE.ImageUtils.loadTexture(img_url, THREE.UVMapping),
        overdraw: _overdraw
      }));
    }
    var material= new THREE.MeshFaceMaterial(bg_materials);
    var mesh = new THREE.Mesh(geometry, material);
    mesh.scale.x = - 1;

    scene.add(mesh);
  }

  function text_generator(x, y, z, text, size, rotation_x, color) {
    var rate = 20;

    var canvas = document.createElement('canvas');
    var context = canvas.getContext('2d');
    var ch = parseInt(canvas.height);
    var cw = parseInt(canvas.width);
    function drawCanvas(text, size) {
      context = canvas.getContext('2d');
      context.font = size + 'px STHeiti';
      if (!color) {
        context.shadowOffsetX = 5;
        context.shadowOffsetY = 5;
        context.shadowBlur = 20;
        context.shadowColor = 'rgba(0,0,0,1)';
        context.fillStyle = '#fff';
      } else {
        context.fillStyle = color;
      }
      context.textAlign = 'center';
      context.textBaseline = 'middle';
    }
    drawCanvas(text, size);
    canvas.width = parseInt(context.measureText(text).width + 10);
    ch = parseInt(canvas.height);
    cw = parseInt(canvas.width);
    drawCanvas(text, size);
    context.fillText(text, cw / 2, ch / 2);

    var geom = new THREE.PlaneGeometry(cw / rate, ch / rate, 1, 1);
    var cTexture = new THREE.Texture(canvas);
    var mat = new THREE.MeshBasicMaterial({map:cTexture, transparent:true, overdraw:_overdraw});
    cTexture.needsUpdate = true;
    var mesh = new THREE.Mesh(geom, mat);

    mesh.position.set(x, y, z);

    if (rotation_x) {
      rotation_x = rotation_x * Math.PI / 180;
      mesh.rotation.x = rotation_x;
    } else {
      var rotation = util.position_to_rotation(x, z, y);
      rotation.ry = 270 - rotation.ry;
      rotation.ry = rotation.ry < 0 ? rotation.ry + 360 : rotation.ry;
      mesh.rotation.y = rotation.ry * Math.PI / 180;
    }

    return mesh;
  }
  function init(config) {
    for (var i in config) {
      if (i == 'generator') {
        for (var j in config.generator) {
          snot.generator[j] = config.generator[j];
        }
        continue;
      }
      snot[i] = config[i];
    }
    var smooth = snot.smooth;
    snot.smooth = 0;
    for (var i in sprites) {
      scene.remove(scene.getObjectByName(i));
    }
    sprites = {};
    var rx = snot.rx;
    var ry = snot.ry;

    var container = snot.container;
    camera = new THREE.PerspectiveCamera(snot.fov, window.innerWidth / window.innerHeight, 1, 1100);
    camera.target = new THREE.Vector3(0, 0, 0);
    snot.camera = camera;

    scene = new THREE.Scene();

    snot.scene = scene;

    if (config.callback) {
      config.callback();
    }
    load_bg_imgs(config.bg_imgs);

    var SphereGeometry = new THREE.SphereGeometry(snot.bg_size * 1.8, 32, 32);
    var SphereMaterial = new THREE.MeshBasicMaterial({color: 0xff00ff, side: THREE.DoubleSide});
    var SphereMesh = new THREE.Mesh(SphereGeometry, SphereMaterial);
    scene.add(SphereMesh);
    suspects.push(SphereMesh);

    load_sprites(config.sprites);

    renderer = new THREE.WebGLRenderer();

    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);

    container.addEventListener('touchstart', onDocumentMouseDown, false);
    container.addEventListener('touchmove', onDocumentMouseMove, false);
    container.addEventListener('touchend', onDocumentMouseUp, false);

    container.addEventListener('mousedown', onDocumentMouseDown, false);
    container.addEventListener('mousemove', onDocumentMouseMove, false);
    container.addEventListener('mouseup', onDocumentMouseUp, false);
    container.addEventListener('mousewheel', onDocumentMouseWheel, false);
    //container.addEventListener('DOMMouseScroll', onDocumentMouseWheel, false);

    update();
    snot.smooth = smooth;
  }

  function onDocumentMouseDown(event) {

    event.preventDefault();

    is_mouse_down = true;
    var x = parseInt(event.clientX >= 0 ? event.clientX : event.changedTouches[0].clientX);
    var y = parseInt(event.clientY >= 0 ? event.clientY : event.changedTouches[0].clientY);
    mouse_down_x = x;
    mouse_down_y = y;
    mouse_down_ry = snot.ry;
    mouse_down_rx = snot.rx;

  }


  function onDocumentMouseMove( event ) {

    if (!is_mouse_down) {
      return;
    }

    var x = parseInt(event.clientX >= 0 ? event.clientX : event.touches[0].pageX);
    var y = parseInt(event.clientY >= 0 ? event.clientY : event.touches[0].pageY);

    if (event.touches && event.touches.length > 1) {
      return;
    }

    dist_ry = (mouse_down_x - x) * snot.mouse_sensitivity + mouse_down_ry;
    dist_rx = (y - mouse_down_y) * snot.mouse_sensitivity + mouse_down_rx;
    dist_rx = dist_rx >= 90 ? 89 : dist_rx;
    dist_rx = dist_rx <= - 90 ? -89 : dist_rx;

    snot.rx = dist_rx;
    snot.ry = dist_ry;
  }

  function onDocumentMouseUp(event) {
    is_mouse_down = false;
    var x = parseInt(event.clientX >= 0 ? event.clientX : event.changedTouches[0].pageX);
    var y = parseInt(event.clientY >= 0 ? event.clientY : event.changedTouches[0].pageY);

    if (util.distance2D(x, y, mouse_down_x, mouse_down_y) < 5) {//单击
      var raycaster = new THREE.Raycaster();
      var mouse = new THREE.Vector2();
      mouse.set((x / window.innerWidth) * 2 - 1, - (y / window.innerHeight) * 2 + 1);
      raycaster.setFromCamera(mouse, camera);
      raycaster.far = snot.bg_size * 2;
      var intersects = raycaster.intersectObjects(suspects);
      if (intersects.length != 0) {
        var point = intersects[0].point;
        if (intersects[0].object.data) {
          snot.onSpriteClick(intersects[0].object.data);
        } else {
          var standard = _pointStandardlization(point.x, point.y, point.z);
          var rotation = util.position_to_rotation(point.x, point.y, point.z);
          snot.on_click(standard[0], standard[1], standard[2], rotation.rx, rotation.ry);
        }
      }
    }
  }

  function onDocumentMouseWheel(event) {

    // WebKit

    if (event.wheelDeltaY) {

      snot.fov -= event.wheelDeltaY * 0.05;

      // Opera / Explorer 9

    } else if (event.wheelDelta) {

      snot.fov -= event.wheelDelta * 0.05;

      // Firefox

    } else if (event.detail) {

      snot.fov += event.detail * 1.0;

    }
    snot.fov = snot.fov > snot.max_fov ? snot.max_fov : snot.fov;
    snot.fov = snot.fov < snot.min_fov ? snot.min_fov : snot.fov;

  }

  function update() {

    snot.ry += snot.auto_rotation;

    var rx = snot.rx;
    var ry = snot.ry;
    var rz = snot.rz * Math.PI / 180;

    ry = THREE.Math.degToRad(ry + 180);
    rx = THREE.Math.degToRad(rx - 90);

    camera.autoUpdateMatrix = false;

    var q = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, - 1, 0), ry);
    rx += Math.PI / 2;
    q = new THREE.Quaternion().multiplyQuaternions(q, new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(1, 0, 0), rx));
    q = new THREE.Quaternion().multiplyQuaternions(q, new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), rz));

    var newQuaternion = new THREE.Quaternion();
    THREE.Quaternion.slerp(camera.quaternion, q, newQuaternion, 1 - snot.smooth);
    camera.quaternion.copy(newQuaternion);
    camera.quaternion.normalize();

    camera.fov = snot.fov;
    camera.updateProjectionMatrix();
    renderer.render(scene, camera);
  }

  function set_fov(fov) {
    snot.fov = fov;
    snot.fov = snot.fov > snot.max_fov ? snot.max_fov : snot.fov;
    snot.fov = snot.fov < snot.min_fov ? snot.min_fov : snot.fov;
  }
  function set_rx(rx) {
    dist_rx = rx;
  }
  function set_ry(ry) {
    dist_ry = ry;
  }
  function load_sprites(sps) {
    for (var i in sps) {
      var functionName = sps[i].spriteType;
      var mesh = snot.generator[functionName](sps[i]);

      mesh.data = sps[i];
      sprites[mesh.name] = true;
      suspects.push(mesh);
      scene.add(mesh);

    }
  }
  function run() {
    snot._animateId = requestAnimationFrame(run);
    if (!snot.pause_animation) {
      update();
    }
  }

  function extend(obj, json) {
    for (var i in json) {
      obj[i] = json[i];
    }
  }
  extend(global.snot,{
    set_fov: set_fov,
    set_rx: set_rx,
    set_ry: set_ry,
    init: init,
    run: run,
    load_sprites: load_sprites
  });
}(window);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRocmVlLm1pbi5qcyIsIlByb2plY3Rvci5qcyIsInRlbXBsYXRlLW5hdGl2ZS5qcyIsInNub3RfdXRpbHMuanMiLCJzbm90X2Nzc19yZW5kZXJlci5qcyIsInNub3Rfd2ViZ2xfcmVuZGVyZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqK0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2o2QkE7QUFDQTtBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoic25vdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyB0aHJlZWpzLm9yZy9saWNlbnNlXG4ndXNlIHN0cmljdCc7dmFyIFRIUkVFPXtSRVZJU0lPTjpcIjc5XCJ9O1wiZnVuY3Rpb25cIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwidGhyZWVcIixUSFJFRSk6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIG1vZHVsZSYmKG1vZHVsZS5leHBvcnRzPVRIUkVFKTt2b2lkIDA9PT1OdW1iZXIuRVBTSUxPTiYmKE51bWJlci5FUFNJTE9OPU1hdGgucG93KDIsLTUyKSk7dm9pZCAwPT09TWF0aC5zaWduJiYoTWF0aC5zaWduPWZ1bmN0aW9uKGEpe3JldHVybiAwPmE/LTE6MDxhPzE6K2F9KTt2b2lkIDA9PT1GdW5jdGlvbi5wcm90b3R5cGUubmFtZSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSxcIm5hbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKS5tYXRjaCgvXlxccypmdW5jdGlvblxccyooXFxTKilcXHMqXFwoLylbMV19fSk7XG52b2lkIDA9PT1PYmplY3QuYXNzaWduJiZmdW5jdGlvbigpe09iamVjdC5hc3NpZ249ZnVuY3Rpb24oYSl7aWYodm9pZCAwPT09YXx8bnVsbD09PWEpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtmb3IodmFyIGI9T2JqZWN0KGEpLGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKXt2YXIgZD1hcmd1bWVudHNbY107aWYodm9pZCAwIT09ZCYmbnVsbCE9PWQpZm9yKHZhciBlIGluIGQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGQsZSkmJihiW2VdPWRbZV0pfXJldHVybiBifX0oKTtcbk9iamVjdC5hc3NpZ24oVEhSRUUse01PVVNFOntMRUZUOjAsTUlERExFOjEsUklHSFQ6Mn0sQ3VsbEZhY2VOb25lOjAsQ3VsbEZhY2VCYWNrOjEsQ3VsbEZhY2VGcm9udDoyLEN1bGxGYWNlRnJvbnRCYWNrOjMsRnJvbnRGYWNlRGlyZWN0aW9uQ1c6MCxGcm9udEZhY2VEaXJlY3Rpb25DQ1c6MSxCYXNpY1NoYWRvd01hcDowLFBDRlNoYWRvd01hcDoxLFBDRlNvZnRTaGFkb3dNYXA6MixGcm9udFNpZGU6MCxCYWNrU2lkZToxLERvdWJsZVNpZGU6MixGbGF0U2hhZGluZzoxLFNtb290aFNoYWRpbmc6MixOb0NvbG9yczowLEZhY2VDb2xvcnM6MSxWZXJ0ZXhDb2xvcnM6MixOb0JsZW5kaW5nOjAsTm9ybWFsQmxlbmRpbmc6MSxBZGRpdGl2ZUJsZW5kaW5nOjIsU3VidHJhY3RpdmVCbGVuZGluZzozLE11bHRpcGx5QmxlbmRpbmc6NCxDdXN0b21CbGVuZGluZzo1LEFkZEVxdWF0aW9uOjEwMCxTdWJ0cmFjdEVxdWF0aW9uOjEwMSxSZXZlcnNlU3VidHJhY3RFcXVhdGlvbjoxMDIsTWluRXF1YXRpb246MTAzLFxuTWF4RXF1YXRpb246MTA0LFplcm9GYWN0b3I6MjAwLE9uZUZhY3RvcjoyMDEsU3JjQ29sb3JGYWN0b3I6MjAyLE9uZU1pbnVzU3JjQ29sb3JGYWN0b3I6MjAzLFNyY0FscGhhRmFjdG9yOjIwNCxPbmVNaW51c1NyY0FscGhhRmFjdG9yOjIwNSxEc3RBbHBoYUZhY3RvcjoyMDYsT25lTWludXNEc3RBbHBoYUZhY3RvcjoyMDcsRHN0Q29sb3JGYWN0b3I6MjA4LE9uZU1pbnVzRHN0Q29sb3JGYWN0b3I6MjA5LFNyY0FscGhhU2F0dXJhdGVGYWN0b3I6MjEwLE5ldmVyRGVwdGg6MCxBbHdheXNEZXB0aDoxLExlc3NEZXB0aDoyLExlc3NFcXVhbERlcHRoOjMsRXF1YWxEZXB0aDo0LEdyZWF0ZXJFcXVhbERlcHRoOjUsR3JlYXRlckRlcHRoOjYsTm90RXF1YWxEZXB0aDo3LE11bHRpcGx5T3BlcmF0aW9uOjAsTWl4T3BlcmF0aW9uOjEsQWRkT3BlcmF0aW9uOjIsTm9Ub25lTWFwcGluZzowLExpbmVhclRvbmVNYXBwaW5nOjEsUmVpbmhhcmRUb25lTWFwcGluZzoyLFVuY2hhcnRlZDJUb25lTWFwcGluZzozLFxuQ2luZW9uVG9uZU1hcHBpbmc6NCxVVk1hcHBpbmc6MzAwLEN1YmVSZWZsZWN0aW9uTWFwcGluZzozMDEsQ3ViZVJlZnJhY3Rpb25NYXBwaW5nOjMwMixFcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZzozMDMsRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc6MzA0LFNwaGVyaWNhbFJlZmxlY3Rpb25NYXBwaW5nOjMwNSxDdWJlVVZSZWZsZWN0aW9uTWFwcGluZzozMDYsQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc6MzA3LFJlcGVhdFdyYXBwaW5nOjFFMyxDbGFtcFRvRWRnZVdyYXBwaW5nOjEwMDEsTWlycm9yZWRSZXBlYXRXcmFwcGluZzoxMDAyLE5lYXJlc3RGaWx0ZXI6MTAwMyxOZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcjoxMDA0LE5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXI6MTAwNSxMaW5lYXJGaWx0ZXI6MTAwNixMaW5lYXJNaXBNYXBOZWFyZXN0RmlsdGVyOjEwMDcsTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyOjEwMDgsVW5zaWduZWRCeXRlVHlwZToxMDA5LFxuQnl0ZVR5cGU6MTAxMCxTaG9ydFR5cGU6MTAxMSxVbnNpZ25lZFNob3J0VHlwZToxMDEyLEludFR5cGU6MTAxMyxVbnNpZ25lZEludFR5cGU6MTAxNCxGbG9hdFR5cGU6MTAxNSxIYWxmRmxvYXRUeXBlOjEwMjUsVW5zaWduZWRTaG9ydDQ0NDRUeXBlOjEwMTYsVW5zaWduZWRTaG9ydDU1NTFUeXBlOjEwMTcsVW5zaWduZWRTaG9ydDU2NVR5cGU6MTAxOCxBbHBoYUZvcm1hdDoxMDE5LFJHQkZvcm1hdDoxMDIwLFJHQkFGb3JtYXQ6MTAyMSxMdW1pbmFuY2VGb3JtYXQ6MTAyMixMdW1pbmFuY2VBbHBoYUZvcm1hdDoxMDIzLFJHQkVGb3JtYXQ6VEhSRUUuUkdCQUZvcm1hdCxEZXB0aEZvcm1hdDoxMDI2LFJHQl9TM1RDX0RYVDFfRm9ybWF0OjIwMDEsUkdCQV9TM1RDX0RYVDFfRm9ybWF0OjIwMDIsUkdCQV9TM1RDX0RYVDNfRm9ybWF0OjIwMDMsUkdCQV9TM1RDX0RYVDVfRm9ybWF0OjIwMDQsUkdCX1BWUlRDXzRCUFBWMV9Gb3JtYXQ6MjEwMCxSR0JfUFZSVENfMkJQUFYxX0Zvcm1hdDoyMTAxLFxuUkdCQV9QVlJUQ180QlBQVjFfRm9ybWF0OjIxMDIsUkdCQV9QVlJUQ18yQlBQVjFfRm9ybWF0OjIxMDMsUkdCX0VUQzFfRm9ybWF0OjIxNTEsTG9vcE9uY2U6MjIwMCxMb29wUmVwZWF0OjIyMDEsTG9vcFBpbmdQb25nOjIyMDIsSW50ZXJwb2xhdGVEaXNjcmV0ZToyMzAwLEludGVycG9sYXRlTGluZWFyOjIzMDEsSW50ZXJwb2xhdGVTbW9vdGg6MjMwMixaZXJvQ3VydmF0dXJlRW5kaW5nOjI0MDAsWmVyb1Nsb3BlRW5kaW5nOjI0MDEsV3JhcEFyb3VuZEVuZGluZzoyNDAyLFRyaWFuZ2xlc0RyYXdNb2RlOjAsVHJpYW5nbGVTdHJpcERyYXdNb2RlOjEsVHJpYW5nbGVGYW5EcmF3TW9kZToyLExpbmVhckVuY29kaW5nOjNFMyxzUkdCRW5jb2Rpbmc6MzAwMSxHYW1tYUVuY29kaW5nOjMwMDcsUkdCRUVuY29kaW5nOjMwMDIsTG9nTHV2RW5jb2Rpbmc6MzAwMyxSR0JNN0VuY29kaW5nOjMwMDQsUkdCTTE2RW5jb2Rpbmc6MzAwNSxSR0JERW5jb2Rpbmc6MzAwNixCYXNpY0RlcHRoUGFja2luZzozMjAwLFxuUkdCQURlcHRoUGFja2luZzozMjAxfSk7VEhSRUUuQ29sb3I9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB2b2lkIDA9PT1iJiZ2b2lkIDA9PT1jP3RoaXMuc2V0KGEpOnRoaXMuc2V0UkdCKGEsYixjKX07XG5USFJFRS5Db2xvci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkNvbG9yLHI6MSxnOjEsYjoxLHNldDpmdW5jdGlvbihhKXthIGluc3RhbmNlb2YgVEhSRUUuQ29sb3I/dGhpcy5jb3B5KGEpOlwibnVtYmVyXCI9PT10eXBlb2YgYT90aGlzLnNldEhleChhKTpcInN0cmluZ1wiPT09dHlwZW9mIGEmJnRoaXMuc2V0U3R5bGUoYSk7cmV0dXJuIHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLmI9dGhpcy5nPXRoaXMucj1hfSxzZXRIZXg6ZnVuY3Rpb24oYSl7YT1NYXRoLmZsb29yKGEpO3RoaXMucj0oYT4+MTYmMjU1KS8yNTU7dGhpcy5nPShhPj44JjI1NSkvMjU1O3RoaXMuYj0oYSYyNTUpLzI1NTtyZXR1cm4gdGhpc30sc2V0UkdCOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnI9YTt0aGlzLmc9Yjt0aGlzLmI9YztyZXR1cm4gdGhpc30sc2V0SFNMOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMsZCl7MD5kJiYoZCs9MSk7MTxkJiYoZC09MSk7cmV0dXJuIGQ8MS82P2ErNiooYy1hKSpcbmQ6LjU+ZD9jOmQ8Mi8zP2ErNiooYy1hKSooMi8zLWQpOmF9cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtiPVRIUkVFLk1hdGguZXVjbGlkZWFuTW9kdWxvKGIsMSk7Yz1USFJFRS5NYXRoLmNsYW1wKGMsMCwxKTtkPVRIUkVFLk1hdGguY2xhbXAoZCwwLDEpOzA9PT1jP3RoaXMucj10aGlzLmc9dGhpcy5iPWQ6KGM9LjU+PWQ/ZCooMStjKTpkK2MtZCpjLGQ9MipkLWMsdGhpcy5yPWEoZCxjLGIrMS8zKSx0aGlzLmc9YShkLGMsYiksdGhpcy5iPWEoZCxjLGItMS8zKSk7cmV0dXJuIHRoaXN9fSgpLHNldFN0eWxlOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dm9pZCAwIT09YiYmMT5wYXJzZUZsb2F0KGIpJiZjb25zb2xlLndhcm4oXCJUSFJFRS5Db2xvcjogQWxwaGEgY29tcG9uZW50IG9mIFwiK2ErXCIgd2lsbCBiZSBpZ25vcmVkLlwiKX12YXIgYztpZihjPS9eKCg/OnJnYnxoc2wpYT8pXFwoXFxzKihbXlxcKV0qKVxcKS8uZXhlYyhhKSl7dmFyIGQ9Y1syXTtzd2l0Y2goY1sxXSl7Y2FzZSBcInJnYlwiOmNhc2UgXCJyZ2JhXCI6aWYoYz1cbi9eKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMoZCkpcmV0dXJuIHRoaXMucj1NYXRoLm1pbigyNTUscGFyc2VJbnQoY1sxXSwxMCkpLzI1NSx0aGlzLmc9TWF0aC5taW4oMjU1LHBhcnNlSW50KGNbMl0sMTApKS8yNTUsdGhpcy5iPU1hdGgubWluKDI1NSxwYXJzZUludChjWzNdLDEwKSkvMjU1LGIoY1s1XSksdGhpcztpZihjPS9eKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMoZCkpcmV0dXJuIHRoaXMucj1NYXRoLm1pbigxMDAscGFyc2VJbnQoY1sxXSwxMCkpLzEwMCx0aGlzLmc9TWF0aC5taW4oMTAwLHBhcnNlSW50KGNbMl0sMTApKS8xMDAsdGhpcy5iPU1hdGgubWluKDEwMCxwYXJzZUludChjWzNdLDEwKSkvMTAwLGIoY1s1XSksdGhpczticmVhaztjYXNlIFwiaHNsXCI6Y2FzZSBcImhzbGFcIjppZihjPS9eKFswLTldKlxcLj9bMC05XSspXFxzKixcXHMqKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMoZCkpe3ZhciBkPVxucGFyc2VGbG9hdChjWzFdKS8zNjAsZT1wYXJzZUludChjWzJdLDEwKS8xMDAsZj1wYXJzZUludChjWzNdLDEwKS8xMDA7YihjWzVdKTtyZXR1cm4gdGhpcy5zZXRIU0woZCxlLGYpfX19ZWxzZSBpZihjPS9eXFwjKFtBLUZhLWYwLTldKykkLy5leGVjKGEpKXtjPWNbMV07ZD1jLmxlbmd0aDtpZigzPT09ZClyZXR1cm4gdGhpcy5yPXBhcnNlSW50KGMuY2hhckF0KDApK2MuY2hhckF0KDApLDE2KS8yNTUsdGhpcy5nPXBhcnNlSW50KGMuY2hhckF0KDEpK2MuY2hhckF0KDEpLDE2KS8yNTUsdGhpcy5iPXBhcnNlSW50KGMuY2hhckF0KDIpK2MuY2hhckF0KDIpLDE2KS8yNTUsdGhpcztpZig2PT09ZClyZXR1cm4gdGhpcy5yPXBhcnNlSW50KGMuY2hhckF0KDApK2MuY2hhckF0KDEpLDE2KS8yNTUsdGhpcy5nPXBhcnNlSW50KGMuY2hhckF0KDIpK2MuY2hhckF0KDMpLDE2KS8yNTUsdGhpcy5iPXBhcnNlSW50KGMuY2hhckF0KDQpK2MuY2hhckF0KDUpLDE2KS8yNTUsdGhpc31hJiYwPGEubGVuZ3RoJiZcbihjPVRIUkVFLkNvbG9yS2V5d29yZHNbYV0sdm9pZCAwIT09Yz90aGlzLnNldEhleChjKTpjb25zb2xlLndhcm4oXCJUSFJFRS5Db2xvcjogVW5rbm93biBjb2xvciBcIithKSk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMucix0aGlzLmcsdGhpcy5iKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLnI9YS5yO3RoaXMuZz1hLmc7dGhpcy5iPWEuYjtyZXR1cm4gdGhpc30sY29weUdhbW1hVG9MaW5lYXI6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0yKTt0aGlzLnI9TWF0aC5wb3coYS5yLGIpO3RoaXMuZz1NYXRoLnBvdyhhLmcsYik7dGhpcy5iPU1hdGgucG93KGEuYixiKTtyZXR1cm4gdGhpc30sY29weUxpbmVhclRvR2FtbWE6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0yKTt2YXIgYz0wPGI/MS9iOjE7dGhpcy5yPU1hdGgucG93KGEucixjKTt0aGlzLmc9TWF0aC5wb3coYS5nLGMpO3RoaXMuYj1NYXRoLnBvdyhhLmIsXG5jKTtyZXR1cm4gdGhpc30sY29udmVydEdhbW1hVG9MaW5lYXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnIsYj10aGlzLmcsYz10aGlzLmI7dGhpcy5yPWEqYTt0aGlzLmc9YipiO3RoaXMuYj1jKmM7cmV0dXJuIHRoaXN9LGNvbnZlcnRMaW5lYXJUb0dhbW1hOmZ1bmN0aW9uKCl7dGhpcy5yPU1hdGguc3FydCh0aGlzLnIpO3RoaXMuZz1NYXRoLnNxcnQodGhpcy5nKTt0aGlzLmI9TWF0aC5zcXJ0KHRoaXMuYik7cmV0dXJuIHRoaXN9LGdldEhleDpmdW5jdGlvbigpe3JldHVybiAyNTUqdGhpcy5yPDwxNl4yNTUqdGhpcy5nPDw4XjI1NSp0aGlzLmI8PDB9LGdldEhleFN0cmluZzpmdW5jdGlvbigpe3JldHVybihcIjAwMDAwMFwiK3RoaXMuZ2V0SGV4KCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNil9LGdldEhTTDpmdW5jdGlvbihhKXthPWF8fHtoOjAsczowLGw6MH07dmFyIGI9dGhpcy5yLGM9dGhpcy5nLGQ9dGhpcy5iLGU9TWF0aC5tYXgoYixjLGQpLGY9TWF0aC5taW4oYixjLGQpLGcsaD1cbihmK2UpLzI7aWYoZj09PWUpZj1nPTA7ZWxzZXt2YXIgaz1lLWYsZj0uNT49aD9rLyhlK2YpOmsvKDItZS1mKTtzd2l0Y2goZSl7Y2FzZSBiOmc9KGMtZCkvaysoYzxkPzY6MCk7YnJlYWs7Y2FzZSBjOmc9KGQtYikvaysyO2JyZWFrO2Nhc2UgZDpnPShiLWMpL2srNH1nLz02fWEuaD1nO2Eucz1mO2EubD1oO3JldHVybiBhfSxnZXRTdHlsZTpmdW5jdGlvbigpe3JldHVyblwicmdiKFwiKygyNTUqdGhpcy5yfDApK1wiLFwiKygyNTUqdGhpcy5nfDApK1wiLFwiKygyNTUqdGhpcy5ifDApK1wiKVwifSxvZmZzZXRIU0w6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0SFNMKCk7ZC5oKz1hO2Qucys9YjtkLmwrPWM7dGhpcy5zZXRIU0woZC5oLGQucyxkLmwpO3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSl7dGhpcy5yKz1hLnI7dGhpcy5nKz1hLmc7dGhpcy5iKz1hLmI7cmV0dXJuIHRoaXN9LGFkZENvbG9yczpmdW5jdGlvbihhLGIpe3RoaXMucj1hLnIrYi5yO3RoaXMuZz1hLmcrYi5nO3RoaXMuYj1cbmEuYitiLmI7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLnIrPWE7dGhpcy5nKz1hO3RoaXMuYis9YTtyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGEpe3RoaXMucj1NYXRoLm1heCgwLHRoaXMuci1hLnIpO3RoaXMuZz1NYXRoLm1heCgwLHRoaXMuZy1hLmcpO3RoaXMuYj1NYXRoLm1heCgwLHRoaXMuYi1hLmIpO3JldHVybiB0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihhKXt0aGlzLnIqPWEucjt0aGlzLmcqPWEuZzt0aGlzLmIqPWEuYjtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5yKj1hO3RoaXMuZyo9YTt0aGlzLmIqPWE7cmV0dXJuIHRoaXN9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLnIrPShhLnItdGhpcy5yKSpiO3RoaXMuZys9KGEuZy10aGlzLmcpKmI7dGhpcy5iKz0oYS5iLXRoaXMuYikqYjtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnI9PT10aGlzLnImJmEuZz09PXRoaXMuZyYmYS5iPT09XG50aGlzLmJ9LGZyb21BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO3RoaXMucj1hW2JdO3RoaXMuZz1hW2IrMV07dGhpcy5iPWFbYisyXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPVtdKTt2b2lkIDA9PT1iJiYoYj0wKTthW2JdPXRoaXMucjthW2IrMV09dGhpcy5nO2FbYisyXT10aGlzLmI7cmV0dXJuIGF9fTtcblRIUkVFLkNvbG9yS2V5d29yZHM9e2FsaWNlYmx1ZToxNTc5MjM4MyxhbnRpcXVld2hpdGU6MTY0NDQzNzUsYXF1YTo2NTUzNSxhcXVhbWFyaW5lOjgzODg1NjQsYXp1cmU6MTU3OTQxNzUsYmVpZ2U6MTYxMTkyNjAsYmlzcXVlOjE2NzcwMjQ0LGJsYWNrOjAsYmxhbmNoZWRhbG1vbmQ6MTY3NzIwNDUsYmx1ZToyNTUsYmx1ZXZpb2xldDo5MDU1MjAyLGJyb3duOjEwODI0MjM0LGJ1cmx5d29vZDoxNDU5NjIzMSxjYWRldGJsdWU6NjI2NjUyOCxjaGFydHJldXNlOjgzODgzNTIsY2hvY29sYXRlOjEzNzg5NDcwLGNvcmFsOjE2NzQ0MjcyLGNvcm5mbG93ZXJibHVlOjY1OTE5ODEsY29ybnNpbGs6MTY3NzUzODgsY3JpbXNvbjoxNDQyMzEwMCxjeWFuOjY1NTM1LGRhcmtibHVlOjEzOSxkYXJrY3lhbjozNTcyMyxkYXJrZ29sZGVucm9kOjEyMDkyOTM5LGRhcmtncmF5OjExMTE5MDE3LGRhcmtncmVlbjoyNTYwMCxkYXJrZ3JleToxMTExOTAxNyxkYXJra2hha2k6MTI0MzMyNTksZGFya21hZ2VudGE6OTEwOTY0MyxcbmRhcmtvbGl2ZWdyZWVuOjU1OTc5OTksZGFya29yYW5nZToxNjc0NzUyMCxkYXJrb3JjaGlkOjEwMDQwMDEyLGRhcmtyZWQ6OTEwOTUwNCxkYXJrc2FsbW9uOjE1MzA4NDEwLGRhcmtzZWFncmVlbjo5NDE5OTE5LGRhcmtzbGF0ZWJsdWU6NDczNDM0NyxkYXJrc2xhdGVncmF5OjMxMDA0OTUsZGFya3NsYXRlZ3JleTozMTAwNDk1LGRhcmt0dXJxdW9pc2U6NTI5NDUsZGFya3Zpb2xldDo5Njk5NTM5LGRlZXBwaW5rOjE2NzE2OTQ3LGRlZXBza3libHVlOjQ5MTUxLGRpbWdyYXk6NjkwODI2NSxkaW1ncmV5OjY5MDgyNjUsZG9kZ2VyYmx1ZToyMDAzMTk5LGZpcmVicmljazoxMTY3NDE0NixmbG9yYWx3aGl0ZToxNjc3NTkyMCxmb3Jlc3RncmVlbjoyMjYzODQyLGZ1Y2hzaWE6MTY3MTE5MzUsZ2FpbnNib3JvOjE0NDc0NDYwLGdob3N0d2hpdGU6MTYzMTY2NzEsZ29sZDoxNjc2NjcyMCxnb2xkZW5yb2Q6MTQzMjkxMjAsZ3JheTo4NDIxNTA0LGdyZWVuOjMyNzY4LGdyZWVueWVsbG93OjExNDAzMDU1LFxuZ3JleTo4NDIxNTA0LGhvbmV5ZGV3OjE1Nzk0MTYwLGhvdHBpbms6MTY3Mzg3NDAsaW5kaWFucmVkOjEzNDU4NTI0LGluZGlnbzo0OTE1MzMwLGl2b3J5OjE2Nzc3MjAwLGtoYWtpOjE1Nzg3NjYwLGxhdmVuZGVyOjE1MTMyNDEwLGxhdmVuZGVyYmx1c2g6MTY3NzMzNjUsbGF3bmdyZWVuOjgxOTA5NzYsbGVtb25jaGlmZm9uOjE2Nzc1ODg1LGxpZ2h0Ymx1ZToxMTM5MzI1NCxsaWdodGNvcmFsOjE1NzYxNTM2LGxpZ2h0Y3lhbjoxNDc0NTU5OSxsaWdodGdvbGRlbnJvZHllbGxvdzoxNjQ0ODIxMCxsaWdodGdyYXk6MTM4ODIzMjMsbGlnaHRncmVlbjo5NDk4MjU2LGxpZ2h0Z3JleToxMzg4MjMyMyxsaWdodHBpbms6MTY3NTg0NjUsbGlnaHRzYWxtb246MTY3NTI3NjIsbGlnaHRzZWFncmVlbjoyMTQyODkwLGxpZ2h0c2t5Ymx1ZTo4OTAwMzQ2LGxpZ2h0c2xhdGVncmF5Ojc4MzM3NTMsbGlnaHRzbGF0ZWdyZXk6NzgzMzc1MyxsaWdodHN0ZWVsYmx1ZToxMTU4NDczNCxsaWdodHllbGxvdzoxNjc3NzE4NCxcbmxpbWU6NjUyODAsbGltZWdyZWVuOjMzMjkzMzAsbGluZW46MTY0NDU2NzAsbWFnZW50YToxNjcxMTkzNSxtYXJvb246ODM4ODYwOCxtZWRpdW1hcXVhbWFyaW5lOjY3MzczMjIsbWVkaXVtYmx1ZToyMDUsbWVkaXVtb3JjaGlkOjEyMjExNjY3LG1lZGl1bXB1cnBsZTo5NjYyNjgzLG1lZGl1bXNlYWdyZWVuOjM5NzgwOTcsbWVkaXVtc2xhdGVibHVlOjgwODc3OTAsbWVkaXVtc3ByaW5nZ3JlZW46NjQxNTQsbWVkaXVtdHVycXVvaXNlOjQ3NzIzMDAsbWVkaXVtdmlvbGV0cmVkOjEzMDQ3MTczLG1pZG5pZ2h0Ymx1ZToxNjQ0OTEyLG1pbnRjcmVhbToxNjEyMTg1MCxtaXN0eXJvc2U6MTY3NzAyNzMsbW9jY2FzaW46MTY3NzAyMjksbmF2YWpvd2hpdGU6MTY3Njg2ODUsbmF2eToxMjgsb2xkbGFjZToxNjY0MzU1OCxvbGl2ZTo4NDIxMzc2LG9saXZlZHJhYjo3MDQ4NzM5LG9yYW5nZToxNjc1MzkyMCxvcmFuZ2VyZWQ6MTY3MjkzNDQsb3JjaGlkOjE0MzE1NzM0LHBhbGVnb2xkZW5yb2Q6MTU2NTcxMzAsXG5wYWxlZ3JlZW46MTAwMjU4ODAscGFsZXR1cnF1b2lzZToxMTUyOTk2NixwYWxldmlvbGV0cmVkOjE0MzgxMjAzLHBhcGF5YXdoaXA6MTY3NzMwNzcscGVhY2hwdWZmOjE2NzY3NjczLHBlcnU6MTM0Njg5OTEscGluazoxNjc2MTAzNSxwbHVtOjE0NTI0NjM3LHBvd2RlcmJsdWU6MTE1OTE5MTAscHVycGxlOjgzODg3MzYscmVkOjE2NzExNjgwLHJvc3licm93bjoxMjM1NzUxOSxyb3lhbGJsdWU6NDI4Njk0NSxzYWRkbGVicm93bjo5MTI3MTg3LHNhbG1vbjoxNjQxNjg4MixzYW5keWJyb3duOjE2MDMyODY0LHNlYWdyZWVuOjMwNTAzMjcsc2Vhc2hlbGw6MTY3NzQ2Mzgsc2llbm5hOjEwNTA2Nzk3LHNpbHZlcjoxMjYzMjI1Nixza3libHVlOjg5MDAzMzEsc2xhdGVibHVlOjY5NzAwNjEsc2xhdGVncmF5OjczNzI5NDQsc2xhdGVncmV5OjczNzI5NDQsc25vdzoxNjc3NTkzMCxzcHJpbmdncmVlbjo2NTQwNyxzdGVlbGJsdWU6NDYyMDk4MCx0YW46MTM4MDg3ODAsdGVhbDozMjg5Nix0aGlzdGxlOjE0MjA0ODg4LFxudG9tYXRvOjE2NzM3MDk1LHR1cnF1b2lzZTo0MjUxODU2LHZpb2xldDoxNTYzMTA4Nix3aGVhdDoxNjExMzMzMSx3aGl0ZToxNjc3NzIxNSx3aGl0ZXNtb2tlOjE2MTE5Mjg1LHllbGxvdzoxNjc3Njk2MCx5ZWxsb3dncmVlbjoxMDE0NTA3NH07VEhSRUUuUXVhdGVybmlvbj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWF8fDA7dGhpcy5feT1ifHwwO3RoaXMuX3o9Y3x8MDt0aGlzLl93PXZvaWQgMCE9PWQ/ZDoxfTtcblRIUkVFLlF1YXRlcm5pb24ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5RdWF0ZXJuaW9uLGdldCB4KCl7cmV0dXJuIHRoaXMuX3h9LHNldCB4KGEpe3RoaXMuX3g9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX0sZ2V0IHkoKXtyZXR1cm4gdGhpcy5feX0sc2V0IHkoYSl7dGhpcy5feT1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfSxnZXQgeigpe3JldHVybiB0aGlzLl96fSxzZXQgeihhKXt0aGlzLl96PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9LGdldCB3KCl7cmV0dXJuIHRoaXMuX3d9LHNldCB3KGEpe3RoaXMuX3c9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX0sc2V0OmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuX3g9YTt0aGlzLl95PWI7dGhpcy5fej1jO3RoaXMuX3c9ZDt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5feCx0aGlzLl95LHRoaXMuX3osdGhpcy5fdyl9LFxuY29weTpmdW5jdGlvbihhKXt0aGlzLl94PWEueDt0aGlzLl95PWEueTt0aGlzLl96PWEuejt0aGlzLl93PWEudzt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbUV1bGVyOmZ1bmN0aW9uKGEsYil7aWYoITE9PT1hIGluc3RhbmNlb2YgVEhSRUUuRXVsZXIpdGhyb3cgRXJyb3IoXCJUSFJFRS5RdWF0ZXJuaW9uOiAuc2V0RnJvbUV1bGVyKCkgbm93IGV4cGVjdHMgYSBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLlwiKTt2YXIgYz1NYXRoLmNvcyhhLl94LzIpLGQ9TWF0aC5jb3MoYS5feS8yKSxlPU1hdGguY29zKGEuX3ovMiksZj1NYXRoLnNpbihhLl94LzIpLGc9TWF0aC5zaW4oYS5feS8yKSxoPU1hdGguc2luKGEuX3ovMiksaz1hLm9yZGVyO1wiWFlaXCI9PT1rPyh0aGlzLl94PWYqZCplK2MqZypoLHRoaXMuX3k9YypnKmUtZipkKmgsdGhpcy5fej1jKmQqaCtmKmcqZSx0aGlzLl93PWMqZCplLWYqZypoKTpcIllYWlwiPT09XG5rPyh0aGlzLl94PWYqZCplK2MqZypoLHRoaXMuX3k9YypnKmUtZipkKmgsdGhpcy5fej1jKmQqaC1mKmcqZSx0aGlzLl93PWMqZCplK2YqZypoKTpcIlpYWVwiPT09az8odGhpcy5feD1mKmQqZS1jKmcqaCx0aGlzLl95PWMqZyplK2YqZCpoLHRoaXMuX3o9YypkKmgrZipnKmUsdGhpcy5fdz1jKmQqZS1mKmcqaCk6XCJaWVhcIj09PWs/KHRoaXMuX3g9ZipkKmUtYypnKmgsdGhpcy5feT1jKmcqZStmKmQqaCx0aGlzLl96PWMqZCpoLWYqZyplLHRoaXMuX3c9YypkKmUrZipnKmgpOlwiWVpYXCI9PT1rPyh0aGlzLl94PWYqZCplK2MqZypoLHRoaXMuX3k9YypnKmUrZipkKmgsdGhpcy5fej1jKmQqaC1mKmcqZSx0aGlzLl93PWMqZCplLWYqZypoKTpcIlhaWVwiPT09ayYmKHRoaXMuX3g9ZipkKmUtYypnKmgsdGhpcy5feT1jKmcqZS1mKmQqaCx0aGlzLl96PWMqZCpoK2YqZyplLHRoaXMuX3c9YypkKmUrZipnKmgpO2lmKCExIT09Yil0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbUF4aXNBbmdsZTpmdW5jdGlvbihhLFxuYil7dmFyIGM9Yi8yLGQ9TWF0aC5zaW4oYyk7dGhpcy5feD1hLngqZDt0aGlzLl95PWEueSpkO3RoaXMuX3o9YS56KmQ7dGhpcy5fdz1NYXRoLmNvcyhjKTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZWxlbWVudHMsYz1iWzBdO2E9Yls0XTt2YXIgZD1iWzhdLGU9YlsxXSxmPWJbNV0sZz1iWzldLGg9YlsyXSxrPWJbNl0sYj1iWzEwXSxsPWMrZitiOzA8bD8oYz0uNS9NYXRoLnNxcnQobCsxKSx0aGlzLl93PS4yNS9jLHRoaXMuX3g9KGstZykqYyx0aGlzLl95PShkLWgpKmMsdGhpcy5fej0oZS1hKSpjKTpjPmYmJmM+Yj8oYz0yKk1hdGguc3FydCgxK2MtZi1iKSx0aGlzLl93PShrLWcpL2MsdGhpcy5feD0uMjUqYyx0aGlzLl95PShhK2UpL2MsdGhpcy5fej0oZCtoKS9jKTpmPmI/KGM9MipNYXRoLnNxcnQoMStmLWMtYiksdGhpcy5fdz0oZC1oKS9jLHRoaXMuX3g9KGErZSkvYyx0aGlzLl95PVxuLjI1KmMsdGhpcy5fej0oZytrKS9jKTooYz0yKk1hdGguc3FydCgxK2ItYy1mKSx0aGlzLl93PShlLWEpL2MsdGhpcy5feD0oZCtoKS9jLHRoaXMuX3k9KGcraykvYyx0aGlzLl96PS4yNSpjKTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbVVuaXRWZWN0b3JzOmZ1bmN0aW9uKCl7dmFyIGEsYjtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuVmVjdG9yMyk7Yj1jLmRvdChkKSsxOzFFLTY+Yj8oYj0wLE1hdGguYWJzKGMueCk+TWF0aC5hYnMoYy56KT9hLnNldCgtYy55LGMueCwwKTphLnNldCgwLC1jLnosYy55KSk6YS5jcm9zc1ZlY3RvcnMoYyxkKTt0aGlzLl94PWEueDt0aGlzLl95PWEueTt0aGlzLl96PWEuejt0aGlzLl93PWI7cmV0dXJuIHRoaXMubm9ybWFsaXplKCl9fSgpLGludmVyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25qdWdhdGUoKS5ub3JtYWxpemUoKX0sY29uanVnYXRlOmZ1bmN0aW9uKCl7dGhpcy5feCo9XG4tMTt0aGlzLl95Kj0tMTt0aGlzLl96Kj0tMTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl94KmEuX3grdGhpcy5feSphLl95K3RoaXMuX3oqYS5feit0aGlzLl93KmEuX3d9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3gqdGhpcy5feCt0aGlzLl95KnRoaXMuX3krdGhpcy5feip0aGlzLl96K3RoaXMuX3cqdGhpcy5fd30sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLl94KnRoaXMuX3grdGhpcy5feSp0aGlzLl95K3RoaXMuX3oqdGhpcy5feit0aGlzLl93KnRoaXMuX3cpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxlbmd0aCgpOzA9PT1hPyh0aGlzLl96PXRoaXMuX3k9dGhpcy5feD0wLHRoaXMuX3c9MSk6KGE9MS9hLHRoaXMuX3gqPWEsdGhpcy5feSo9YSx0aGlzLl96Kj1hLHRoaXMuX3cqPWEpO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxcbm11bHRpcGx5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHZvaWQgMCE9PWI/KGNvbnNvbGUud2FybihcIlRIUkVFLlF1YXRlcm5pb246IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5UXVhdGVybmlvbnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMoYSxiKSk6dGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKHRoaXMsYSl9LHByZW11bHRpcGx5OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMoYSx0aGlzKX0sbXVsdGlwbHlRdWF0ZXJuaW9uczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuX3gsZD1hLl95LGU9YS5feixmPWEuX3csZz1iLl94LGg9Yi5feSxrPWIuX3osbD1iLl93O3RoaXMuX3g9YypsK2YqZytkKmstZSpoO3RoaXMuX3k9ZCpsK2YqaCtlKmctYyprO3RoaXMuX3o9ZSpsK2YqaytjKmgtZCpnO3RoaXMuX3c9ZipsLWMqZy1kKmgtZSprO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO1xucmV0dXJuIHRoaXN9LHNsZXJwOmZ1bmN0aW9uKGEsYil7aWYoMD09PWIpcmV0dXJuIHRoaXM7aWYoMT09PWIpcmV0dXJuIHRoaXMuY29weShhKTt2YXIgYz10aGlzLl94LGQ9dGhpcy5feSxlPXRoaXMuX3osZj10aGlzLl93LGc9ZiphLl93K2MqYS5feCtkKmEuX3krZSphLl96OzA+Zz8odGhpcy5fdz0tYS5fdyx0aGlzLl94PS1hLl94LHRoaXMuX3k9LWEuX3ksdGhpcy5fej0tYS5feixnPS1nKTp0aGlzLmNvcHkoYSk7aWYoMTw9ZylyZXR1cm4gdGhpcy5fdz1mLHRoaXMuX3g9Yyx0aGlzLl95PWQsdGhpcy5fej1lLHRoaXM7dmFyIGg9TWF0aC5zcXJ0KDEtZypnKTtpZiguMDAxPk1hdGguYWJzKGgpKXJldHVybiB0aGlzLl93PS41KihmK3RoaXMuX3cpLHRoaXMuX3g9LjUqKGMrdGhpcy5feCksdGhpcy5feT0uNSooZCt0aGlzLl95KSx0aGlzLl96PS41KihlK3RoaXMuX3opLHRoaXM7dmFyIGs9TWF0aC5hdGFuMihoLGcpLGc9TWF0aC5zaW4oKDEtYikqaykvaCxoPU1hdGguc2luKGIqXG5rKS9oO3RoaXMuX3c9ZipnK3RoaXMuX3cqaDt0aGlzLl94PWMqZyt0aGlzLl94Kmg7dGhpcy5feT1kKmcrdGhpcy5feSpoO3RoaXMuX3o9ZSpnK3RoaXMuX3oqaDt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLl94PT09dGhpcy5feCYmYS5feT09PXRoaXMuX3kmJmEuX3o9PT10aGlzLl96JiZhLl93PT09dGhpcy5fd30sZnJvbUFycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy5feD1hW2JdO3RoaXMuX3k9YVtiKzFdO3RoaXMuX3o9YVtiKzJdO3RoaXMuX3c9YVtiKzNdO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO3ZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy5feDthW2IrMV09dGhpcy5feTthW2IrMl09dGhpcy5fejthW2IrM109dGhpcy5fdztyZXR1cm4gYX0sb25DaGFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5vbkNoYW5nZUNhbGxiYWNrPVxuYTtyZXR1cm4gdGhpc30sb25DaGFuZ2VDYWxsYmFjazpmdW5jdGlvbigpe319O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5RdWF0ZXJuaW9uLHtzbGVycDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYy5jb3B5KGEpLnNsZXJwKGIsZCl9LHNsZXJwRmxhdDpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD1jW2QrMF0saz1jW2QrMV0sbD1jW2QrMl07Yz1jW2QrM107ZD1lW2YrMF07dmFyIG09ZVtmKzFdLHA9ZVtmKzJdO2U9ZVtmKzNdO2lmKGMhPT1lfHxoIT09ZHx8ayE9PW18fGwhPT1wKXtmPTEtZzt2YXIgbj1oKmQrayptK2wqcCtjKmUscT0wPD1uPzE6LTEscj0xLW4qbjtyPk51bWJlci5FUFNJTE9OJiYocj1NYXRoLnNxcnQociksbj1NYXRoLmF0YW4yKHIsbipxKSxmPU1hdGguc2luKGYqbikvcixnPU1hdGguc2luKGcqbikvcik7cSo9ZztoPWgqZitkKnE7az1rKmYrbSpxO2w9bCpmK3AqcTtjPWMqZitlKnE7Zj09PTEtZyYmKGc9MS9NYXRoLnNxcnQoaCpoK2sqaytsKmwrYypjKSxoKj1nLGsqPWcsbCo9ZyxjKj1nKX1hW2JdPWg7YVtiKzFdPWs7YVtiKzJdPWw7XG5hW2IrM109Y319KTtUSFJFRS5WZWN0b3IyPWZ1bmN0aW9uKGEsYil7dGhpcy54PWF8fDA7dGhpcy55PWJ8fDB9O1xuVEhSRUUuVmVjdG9yMi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlZlY3RvcjIsZ2V0IHdpZHRoKCl7cmV0dXJuIHRoaXMueH0sc2V0IHdpZHRoKGEpe3RoaXMueD1hfSxnZXQgaGVpZ2h0KCl7cmV0dXJuIHRoaXMueX0sc2V0IGhlaWdodChhKXt0aGlzLnk9YX0sc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy54PWE7dGhpcy55PWI7cmV0dXJuIHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLnk9dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oYSl7dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oYSl7dGhpcy55PWE7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIDA6dGhpcy54PWI7YnJlYWs7Y2FzZSAxOnRoaXMueT1iO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybiB0aGlzLng7XG5jYXNlIDE6cmV0dXJuIHRoaXMueTtkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsdGhpcy55KX0sY29weTpmdW5jdGlvbihhKXt0aGlzLng9YS54O3RoaXMueT1hLnk7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5hZGRWZWN0b3JzKGEsYik7dGhpcy54Kz1hLng7dGhpcy55Kz1hLnk7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngrPWE7dGhpcy55Kz1hO3JldHVybiB0aGlzfSxhZGRWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7cmV0dXJuIHRoaXN9LFxuYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz1hLngqYjt0aGlzLnkrPWEueSpiO3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyhhLGIpO3RoaXMueC09YS54O3RoaXMueS09YS55O3JldHVybiB0aGlzfSxzdWJTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54LT1hO3RoaXMueS09YTtyZXR1cm4gdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3JldHVybiB0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihhKXt0aGlzLngqPWEueDt0aGlzLnkqPWEueTtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7aXNGaW5pdGUoYSk/KHRoaXMueCo9YSxcbnRoaXMueSo9YSk6dGhpcy55PXRoaXMueD0wO3JldHVybiB0aGlzfSxkaXZpZGU6ZnVuY3Rpb24oYSl7dGhpcy54Lz1hLng7dGhpcy55Lz1hLnk7cmV0dXJuIHRoaXN9LGRpdmlkZVNjYWxhcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigxL2EpfSxtaW46ZnVuY3Rpb24oYSl7dGhpcy54PU1hdGgubWluKHRoaXMueCxhLngpO3RoaXMueT1NYXRoLm1pbih0aGlzLnksYS55KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGEpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsYS54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LGEueSk7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKGEsYil7dGhpcy54PU1hdGgubWF4KGEueCxNYXRoLm1pbihiLngsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KGEueSxNYXRoLm1pbihiLnksdGhpcy55KSk7cmV0dXJuIHRoaXN9LGNsYW1wU2NhbGFyOmZ1bmN0aW9uKCl7dmFyIGEsYjtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2b2lkIDA9PT1cbmEmJihhPW5ldyBUSFJFRS5WZWN0b3IyLGI9bmV3IFRIUkVFLlZlY3RvcjIpO2Euc2V0KGMsYyk7Yi5zZXQoZCxkKTtyZXR1cm4gdGhpcy5jbGFtcChhLGIpfX0oKSxjbGFtcExlbmd0aDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoTWF0aC5tYXgoYSxNYXRoLm1pbihiLGMpKS9jKX0sZmxvb3I6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT1NYXRoLmZsb29yKHRoaXMueSk7cmV0dXJuIHRoaXN9LGNlaWw6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5jZWlsKHRoaXMueCk7dGhpcy55PU1hdGguY2VpbCh0aGlzLnkpO3JldHVybiB0aGlzfSxyb3VuZDpmdW5jdGlvbigpe3RoaXMueD1NYXRoLnJvdW5kKHRoaXMueCk7dGhpcy55PU1hdGgucm91bmQodGhpcy55KTtyZXR1cm4gdGhpc30scm91bmRUb1plcm86ZnVuY3Rpb24oKXt0aGlzLng9MD50aGlzLng/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO1xudGhpcy55PTA+dGhpcy55P01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy54PS10aGlzLng7dGhpcy55PS10aGlzLnk7cmV0dXJuIHRoaXN9LGRvdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy54KmEueCt0aGlzLnkqYS55fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnl9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55KX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCkpfSxhbmdsZTpmdW5jdGlvbigpe3ZhciBhPU1hdGguYXRhbjIodGhpcy55LHRoaXMueCk7MD5hJiYoYSs9MipNYXRoLlBJKTtyZXR1cm4gYX0sXG5kaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZChhKSl9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueC1hLng7YT10aGlzLnktYS55O3JldHVybiBiKmIrYSphfSxkaXN0YW5jZVRvTWFuaGF0dGFuOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLmFicyh0aGlzLngtYS54KStNYXRoLmFicyh0aGlzLnktYS55KX0sc2V0TGVuZ3RoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKGEvdGhpcy5sZW5ndGgoKSl9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPShhLngtdGhpcy54KSpiO3RoaXMueSs9KGEueS10aGlzLnkpKmI7cmV0dXJuIHRoaXN9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKGIsYSkubXVsdGlwbHlTY2FsYXIoYykuYWRkKGEpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueD09PXRoaXMueCYmYS55PT09dGhpcy55fSxcbmZyb21BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO3RoaXMueD1hW2JdO3RoaXMueT1hW2IrMV07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLng7YVtiKzFdPXRoaXMueTtyZXR1cm4gYX0sZnJvbUF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyl7dm9pZCAwPT09YyYmKGM9MCk7Yj1iKmEuaXRlbVNpemUrYzt0aGlzLng9YS5hcnJheVtiXTt0aGlzLnk9YS5hcnJheVtiKzFdO3JldHVybiB0aGlzfSxyb3RhdGVBcm91bmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLmNvcyhiKSxkPU1hdGguc2luKGIpLGU9dGhpcy54LWEueCxmPXRoaXMueS1hLnk7dGhpcy54PWUqYy1mKmQrYS54O3RoaXMueT1lKmQrZipjK2EueTtyZXR1cm4gdGhpc319O1RIUkVFLlZlY3RvcjM9ZnVuY3Rpb24oYSxiLGMpe3RoaXMueD1hfHwwO3RoaXMueT1ifHwwO3RoaXMuej1jfHwwfTtcblRIUkVFLlZlY3RvcjMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5WZWN0b3IzLHNldDpmdW5jdGlvbihhLGIsYyl7dGhpcy54PWE7dGhpcy55PWI7dGhpcy56PWM7cmV0dXJuIHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLno9dGhpcy55PXRoaXMueD1hO3JldHVybiB0aGlzfSxzZXRYOmZ1bmN0aW9uKGEpe3RoaXMueD1hO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGEpe3RoaXMueT1hO3JldHVybiB0aGlzfSxzZXRaOmZ1bmN0aW9uKGEpe3RoaXMuej1hO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYSl7Y2FzZSAwOnRoaXMueD1iO2JyZWFrO2Nhc2UgMTp0aGlzLnk9YjticmVhaztjYXNlIDI6dGhpcy56PWI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtcbmNhc2UgMjpyZXR1cm4gdGhpcy56O2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnksdGhpcy56KX0sY29weTpmdW5jdGlvbihhKXt0aGlzLng9YS54O3RoaXMueT1hLnk7dGhpcy56PWEuejtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnMoYSxiKTt0aGlzLngrPWEueDt0aGlzLnkrPWEueTt0aGlzLnorPWEuejtyZXR1cm4gdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCs9YTt0aGlzLnkrPWE7dGhpcy56Kz1hO3JldHVybiB0aGlzfSxhZGRWZWN0b3JzOmZ1bmN0aW9uKGEsXG5iKXt0aGlzLng9YS54K2IueDt0aGlzLnk9YS55K2IueTt0aGlzLno9YS56K2IuejtyZXR1cm4gdGhpc30sYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz1hLngqYjt0aGlzLnkrPWEueSpiO3RoaXMueis9YS56KmI7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5zdWJWZWN0b3JzKGEsYik7dGhpcy54LT1hLng7dGhpcy55LT1hLnk7dGhpcy56LT1hLno7cmV0dXJuIHRoaXN9LHN1YlNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngtPWE7dGhpcy55LT1hO3RoaXMuei09YTtyZXR1cm4gdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3RoaXMuej1hLnotYi56O3JldHVybiB0aGlzfSxcbm11bHRpcGx5OmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseVZlY3RvcnMoYSxiKTt0aGlzLngqPWEueDt0aGlzLnkqPWEueTt0aGlzLnoqPWEuejtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7aXNGaW5pdGUoYSk/KHRoaXMueCo9YSx0aGlzLnkqPWEsdGhpcy56Kj1hKTp0aGlzLno9dGhpcy55PXRoaXMueD0wO3JldHVybiB0aGlzfSxtdWx0aXBseVZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54KmIueDt0aGlzLnk9YS55KmIueTt0aGlzLno9YS56KmIuejtyZXR1cm4gdGhpc30sYXBwbHlFdWxlcjpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiKXshMT09PWIgaW5zdGFuY2VvZiBUSFJFRS5FdWxlciYmXG5jb25zb2xlLmVycm9yKFwiVEhSRUUuVmVjdG9yMzogLmFwcGx5RXVsZXIoKSBub3cgZXhwZWN0cyBhbiBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLlwiKTt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuUXVhdGVybmlvbik7cmV0dXJuIHRoaXMuYXBwbHlRdWF0ZXJuaW9uKGEuc2V0RnJvbUV1bGVyKGIpKX19KCksYXBwbHlBeGlzQW5nbGU6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYixjKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuUXVhdGVybmlvbik7cmV0dXJuIHRoaXMuYXBwbHlRdWF0ZXJuaW9uKGEuc2V0RnJvbUF4aXNBbmdsZShiLGMpKX19KCksYXBwbHlNYXRyaXgzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMuejthPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzNdKmMrYVs2XSpkO3RoaXMueT1hWzFdKmIrYVs0XSpjK2FbN10qZDt0aGlzLno9YVsyXSpiK2FbNV0qYythWzhdKmQ7cmV0dXJuIHRoaXN9LFxuYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMuejthPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzRdKmMrYVs4XSpkK2FbMTJdO3RoaXMueT1hWzFdKmIrYVs1XSpjK2FbOV0qZCthWzEzXTt0aGlzLno9YVsyXSpiK2FbNl0qYythWzEwXSpkK2FbMTRdO3JldHVybiB0aGlzfSxhcHBseVByb2plY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56O2E9YS5lbGVtZW50czt2YXIgZT0xLyhhWzNdKmIrYVs3XSpjK2FbMTFdKmQrYVsxNV0pO3RoaXMueD0oYVswXSpiK2FbNF0qYythWzhdKmQrYVsxMl0pKmU7dGhpcy55PShhWzFdKmIrYVs1XSpjK2FbOV0qZCthWzEzXSkqZTt0aGlzLno9KGFbMl0qYithWzZdKmMrYVsxMF0qZCthWzE0XSkqZTtyZXR1cm4gdGhpc30sYXBwbHlRdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMueixlPWEueCxmPWEueSxnPWEuejthPVxuYS53O3ZhciBoPWEqYitmKmQtZypjLGs9YSpjK2cqYi1lKmQsbD1hKmQrZSpjLWYqYixiPS1lKmItZipjLWcqZDt0aGlzLng9aCphK2IqLWUrayotZy1sKi1mO3RoaXMueT1rKmErYiotZitsKi1lLWgqLWc7dGhpcy56PWwqYStiKi1nK2gqLWYtayotZTtyZXR1cm4gdGhpc30scHJvamVjdDpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWF0cml4NCk7YS5tdWx0aXBseU1hdHJpY2VzKGIucHJvamVjdGlvbk1hdHJpeCxhLmdldEludmVyc2UoYi5tYXRyaXhXb3JsZCkpO3JldHVybiB0aGlzLmFwcGx5UHJvamVjdGlvbihhKX19KCksdW5wcm9qZWN0OmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5NYXRyaXg0KTthLm11bHRpcGx5TWF0cmljZXMoYi5tYXRyaXhXb3JsZCxhLmdldEludmVyc2UoYi5wcm9qZWN0aW9uTWF0cml4KSk7cmV0dXJuIHRoaXMuYXBwbHlQcm9qZWN0aW9uKGEpfX0oKSxcbnRyYW5zZm9ybURpcmVjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLno7YT1hLmVsZW1lbnRzO3RoaXMueD1hWzBdKmIrYVs0XSpjK2FbOF0qZDt0aGlzLnk9YVsxXSpiK2FbNV0qYythWzldKmQ7dGhpcy56PWFbMl0qYithWzZdKmMrYVsxMF0qZDtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKX0sZGl2aWRlOmZ1bmN0aW9uKGEpe3RoaXMueC89YS54O3RoaXMueS89YS55O3RoaXMuei89YS56O3JldHVybiB0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9hKX0sbWluOmZ1bmN0aW9uKGEpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsYS54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LGEueSk7dGhpcy56PU1hdGgubWluKHRoaXMueixhLnopO3JldHVybiB0aGlzfSxtYXg6ZnVuY3Rpb24oYSl7dGhpcy54PU1hdGgubWF4KHRoaXMueCxhLngpO3RoaXMueT1NYXRoLm1heCh0aGlzLnksYS55KTt0aGlzLno9XG5NYXRoLm1heCh0aGlzLnosYS56KTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oYSxiKXt0aGlzLng9TWF0aC5tYXgoYS54LE1hdGgubWluKGIueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgoYS55LE1hdGgubWluKGIueSx0aGlzLnkpKTt0aGlzLno9TWF0aC5tYXgoYS56LE1hdGgubWluKGIueix0aGlzLnopKTtyZXR1cm4gdGhpc30sY2xhbXBTY2FsYXI6ZnVuY3Rpb24oKXt2YXIgYSxiO3JldHVybiBmdW5jdGlvbihjLGQpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMpO2Euc2V0KGMsYyxjKTtiLnNldChkLGQsZCk7cmV0dXJuIHRoaXMuY2xhbXAoYSxiKX19KCksY2xhbXBMZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KGEsTWF0aC5taW4oYixjKSkvYyl9LGZsb29yOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9XG5NYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PU1hdGguZmxvb3IodGhpcy56KTtyZXR1cm4gdGhpc30sY2VpbDpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmNlaWwodGhpcy54KTt0aGlzLnk9TWF0aC5jZWlsKHRoaXMueSk7dGhpcy56PU1hdGguY2VpbCh0aGlzLnopO3JldHVybiB0aGlzfSxyb3VuZDpmdW5jdGlvbigpe3RoaXMueD1NYXRoLnJvdW5kKHRoaXMueCk7dGhpcy55PU1hdGgucm91bmQodGhpcy55KTt0aGlzLno9TWF0aC5yb3VuZCh0aGlzLnopO3JldHVybiB0aGlzfSxyb3VuZFRvWmVybzpmdW5jdGlvbigpe3RoaXMueD0wPnRoaXMueD9NYXRoLmNlaWwodGhpcy54KTpNYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PTA+dGhpcy55P01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9MD50aGlzLno/TWF0aC5jZWlsKHRoaXMueik6TWF0aC5mbG9vcih0aGlzLnopO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLng9LXRoaXMueDt0aGlzLnk9XG4tdGhpcy55O3RoaXMuej0tdGhpcy56O3JldHVybiB0aGlzfSxkb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMueCphLngrdGhpcy55KmEueSt0aGlzLnoqYS56fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMuen0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueil9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSkrTWF0aC5hYnModGhpcy56KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCkpfSxzZXRMZW5ndGg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoYS90aGlzLmxlbmd0aCgpKX0sbGVycDpmdW5jdGlvbihhLGIpe3RoaXMueCs9KGEueC10aGlzLngpKmI7dGhpcy55Kz1cbihhLnktdGhpcy55KSpiO3RoaXMueis9KGEuei10aGlzLnopKmI7cmV0dXJuIHRoaXN9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKGIsYSkubXVsdGlwbHlTY2FsYXIoYykuYWRkKGEpfSxjcm9zczpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5jcm9zcygpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmNyb3NzVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuY3Jvc3NWZWN0b3JzKGEsYik7dmFyIGM9dGhpcy54LGQ9dGhpcy55LGU9dGhpcy56O3RoaXMueD1kKmEuei1lKmEueTt0aGlzLnk9ZSphLngtYyphLno7dGhpcy56PWMqYS55LWQqYS54O3JldHVybiB0aGlzfSxjcm9zc1ZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLngsZD1hLnksZT1hLnosZj1iLngsZz1iLnksaD1iLno7dGhpcy54PWQqaC1lKmc7dGhpcy55PWUqZi1jKmg7XG50aGlzLno9YypnLWQqZjtyZXR1cm4gdGhpc30scHJvamVjdE9uVmVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZG90KHRoaXMpL2EubGVuZ3RoU3EoKTtyZXR1cm4gdGhpcy5jb3B5KGEpLm11bHRpcGx5U2NhbGFyKGIpfSxwcm9qZWN0T25QbGFuZTpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuVmVjdG9yMyk7YS5jb3B5KHRoaXMpLnByb2plY3RPblZlY3RvcihiKTtyZXR1cm4gdGhpcy5zdWIoYSl9fSgpLHJlZmxlY3Q6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlZlY3RvcjMpO3JldHVybiB0aGlzLnN1YihhLmNvcHkoYikubXVsdGlwbHlTY2FsYXIoMip0aGlzLmRvdChiKSkpfX0oKSxhbmdsZVRvOmZ1bmN0aW9uKGEpe2E9dGhpcy5kb3QoYSkvTWF0aC5zcXJ0KHRoaXMubGVuZ3RoU3EoKSphLmxlbmd0aFNxKCkpO3JldHVybiBNYXRoLmFjb3MoVEhSRUUuTWF0aC5jbGFtcChhLFxuLTEsMSkpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZChhKSl9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueC1hLngsYz10aGlzLnktYS55O2E9dGhpcy56LWEuejtyZXR1cm4gYipiK2MqYythKmF9LGRpc3RhbmNlVG9NYW5oYXR0YW46ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguYWJzKHRoaXMueC1hLngpK01hdGguYWJzKHRoaXMueS1hLnkpK01hdGguYWJzKHRoaXMuei1hLnopfSxzZXRGcm9tU3BoZXJpY2FsOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguc2luKGEucGhpKSphLnJhZGl1czt0aGlzLng9YipNYXRoLnNpbihhLnRoZXRhKTt0aGlzLnk9TWF0aC5jb3MoYS5waGkpKmEucmFkaXVzO3RoaXMuej1iKk1hdGguY29zKGEudGhldGEpO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4UG9zaXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihhLDMpfSxcbnNldEZyb21NYXRyaXhTY2FsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4oYSwwKS5sZW5ndGgoKSxjPXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihhLDEpLmxlbmd0aCgpO2E9dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKGEsMikubGVuZ3RoKCk7dGhpcy54PWI7dGhpcy55PWM7dGhpcy56PWE7cmV0dXJuIHRoaXN9LHNldEZyb21NYXRyaXhDb2x1bW46ZnVuY3Rpb24oYSxiKXtpZihcIm51bWJlclwiPT09dHlwZW9mIGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IHNldEZyb21NYXRyaXhDb2x1bW4gbm93IGV4cGVjdHMgKCBtYXRyaXgsIGluZGV4ICkuXCIpO3ZhciBjPWE7YT1iO2I9Y31yZXR1cm4gdGhpcy5mcm9tQXJyYXkoYS5lbGVtZW50cyw0KmIpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueD09PXRoaXMueCYmYS55PT09dGhpcy55JiZhLno9PT10aGlzLnp9LGZyb21BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO1xudGhpcy54PWFbYl07dGhpcy55PWFbYisxXTt0aGlzLno9YVtiKzJdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO3ZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy54O2FbYisxXT10aGlzLnk7YVtiKzJdPXRoaXMuejtyZXR1cm4gYX0sZnJvbUF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyl7dm9pZCAwPT09YyYmKGM9MCk7Yj1iKmEuaXRlbVNpemUrYzt0aGlzLng9YS5hcnJheVtiXTt0aGlzLnk9YS5hcnJheVtiKzFdO3RoaXMuej1hLmFycmF5W2IrMl07cmV0dXJuIHRoaXN9fTtUSFJFRS5WZWN0b3I0PWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMueD1hfHwwO3RoaXMueT1ifHwwO3RoaXMuej1jfHwwO3RoaXMudz12b2lkIDAhPT1kP2Q6MX07XG5USFJFRS5WZWN0b3I0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVmVjdG9yNCxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy54PWE7dGhpcy55PWI7dGhpcy56PWM7dGhpcy53PWQ7cmV0dXJuIHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLnc9dGhpcy56PXRoaXMueT10aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WDpmdW5jdGlvbihhKXt0aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihhKXt0aGlzLnk9YTtyZXR1cm4gdGhpc30sc2V0WjpmdW5jdGlvbihhKXt0aGlzLno9YTtyZXR1cm4gdGhpc30sc2V0VzpmdW5jdGlvbihhKXt0aGlzLnc9YTtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMDp0aGlzLng9YjticmVhaztjYXNlIDE6dGhpcy55PWI7YnJlYWs7Y2FzZSAyOnRoaXMuej1iO2JyZWFrO2Nhc2UgMzp0aGlzLnc9YjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIitcbmEpO319LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7Y2FzZSAzOnJldHVybiB0aGlzLnc7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSx0aGlzLnosdGhpcy53KX0sY29weTpmdW5jdGlvbihhKXt0aGlzLng9YS54O3RoaXMueT1hLnk7dGhpcy56PWEuejt0aGlzLnc9dm9pZCAwIT09YS53P2EudzoxO3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuYWRkVmVjdG9ycyhhLGIpO1xudGhpcy54Kz1hLng7dGhpcy55Kz1hLnk7dGhpcy56Kz1hLno7dGhpcy53Kz1hLnc7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngrPWE7dGhpcy55Kz1hO3RoaXMueis9YTt0aGlzLncrPWE7cmV0dXJuIHRoaXN9LGFkZFZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54K2IueDt0aGlzLnk9YS55K2IueTt0aGlzLno9YS56K2Iuejt0aGlzLnc9YS53K2IudztyZXR1cm4gdGhpc30sYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz1hLngqYjt0aGlzLnkrPWEueSpiO3RoaXMueis9YS56KmI7dGhpcy53Kz1hLncqYjtyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLnN1YlZlY3RvcnMoYSxiKTt0aGlzLngtPVxuYS54O3RoaXMueS09YS55O3RoaXMuei09YS56O3RoaXMudy09YS53O3JldHVybiB0aGlzfSxzdWJTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54LT1hO3RoaXMueS09YTt0aGlzLnotPWE7dGhpcy53LT1hO3JldHVybiB0aGlzfSxzdWJWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueC1iLng7dGhpcy55PWEueS1iLnk7dGhpcy56PWEuei1iLno7dGhpcy53PWEudy1iLnc7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe2lzRmluaXRlKGEpPyh0aGlzLngqPWEsdGhpcy55Kj1hLHRoaXMueio9YSx0aGlzLncqPWEpOnRoaXMudz10aGlzLno9dGhpcy55PXRoaXMueD0wO3JldHVybiB0aGlzfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56LGU9dGhpcy53O2E9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbNF0qYythWzhdKmQrYVsxMl0qZTt0aGlzLnk9YVsxXSpiK2FbNV0qYythWzldKmQrYVsxM10qZTt0aGlzLno9XG5hWzJdKmIrYVs2XSpjK2FbMTBdKmQrYVsxNF0qZTt0aGlzLnc9YVszXSpiK2FbN10qYythWzExXSpkK2FbMTVdKmU7cmV0dXJuIHRoaXN9LGRpdmlkZVNjYWxhcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcigxL2EpfSxzZXRBeGlzQW5nbGVGcm9tUXVhdGVybmlvbjpmdW5jdGlvbihhKXt0aGlzLnc9MipNYXRoLmFjb3MoYS53KTt2YXIgYj1NYXRoLnNxcnQoMS1hLncqYS53KTsxRS00PmI/KHRoaXMueD0xLHRoaXMuej10aGlzLnk9MCk6KHRoaXMueD1hLngvYix0aGlzLnk9YS55L2IsdGhpcy56PWEuei9iKTtyZXR1cm4gdGhpc30sc2V0QXhpc0FuZ2xlRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKGEpe3ZhciBiLGMsZDthPWEuZWxlbWVudHM7dmFyIGU9YVswXTtkPWFbNF07dmFyIGY9YVs4XSxnPWFbMV0saD1hWzVdLGs9YVs5XTtjPWFbMl07Yj1hWzZdO3ZhciBsPWFbMTBdO2lmKC4wMT5NYXRoLmFicyhkLWcpJiYuMDE+TWF0aC5hYnMoZi1jKSYmLjAxPlxuTWF0aC5hYnMoay1iKSl7aWYoLjE+TWF0aC5hYnMoZCtnKSYmLjE+TWF0aC5hYnMoZitjKSYmLjE+TWF0aC5hYnMoaytiKSYmLjE+TWF0aC5hYnMoZStoK2wtMykpcmV0dXJuIHRoaXMuc2V0KDEsMCwwLDApLHRoaXM7YT1NYXRoLlBJO2U9KGUrMSkvMjtoPShoKzEpLzI7bD0obCsxKS8yO2Q9KGQrZykvNDtmPShmK2MpLzQ7az0oaytiKS80O2U+aCYmZT5sPy4wMT5lPyhiPTAsZD1jPS43MDcxMDY3ODEpOihiPU1hdGguc3FydChlKSxjPWQvYixkPWYvYik6aD5sPy4wMT5oPyhiPS43MDcxMDY3ODEsYz0wLGQ9LjcwNzEwNjc4MSk6KGM9TWF0aC5zcXJ0KGgpLGI9ZC9jLGQ9ay9jKTouMDE+bD8oYz1iPS43MDcxMDY3ODEsZD0wKTooZD1NYXRoLnNxcnQobCksYj1mL2QsYz1rL2QpO3RoaXMuc2V0KGIsYyxkLGEpO3JldHVybiB0aGlzfWE9TWF0aC5zcXJ0KChiLWspKihiLWspKyhmLWMpKihmLWMpKyhnLWQpKihnLWQpKTsuMDAxPk1hdGguYWJzKGEpJiYoYT0xKTt0aGlzLng9KGItaykvXG5hO3RoaXMueT0oZi1jKS9hO3RoaXMuej0oZy1kKS9hO3RoaXMudz1NYXRoLmFjb3MoKGUraCtsLTEpLzIpO3JldHVybiB0aGlzfSxtaW46ZnVuY3Rpb24oYSl7dGhpcy54PU1hdGgubWluKHRoaXMueCxhLngpO3RoaXMueT1NYXRoLm1pbih0aGlzLnksYS55KTt0aGlzLno9TWF0aC5taW4odGhpcy56LGEueik7dGhpcy53PU1hdGgubWluKHRoaXMudyxhLncpO3JldHVybiB0aGlzfSxtYXg6ZnVuY3Rpb24oYSl7dGhpcy54PU1hdGgubWF4KHRoaXMueCxhLngpO3RoaXMueT1NYXRoLm1heCh0aGlzLnksYS55KTt0aGlzLno9TWF0aC5tYXgodGhpcy56LGEueik7dGhpcy53PU1hdGgubWF4KHRoaXMudyxhLncpO3JldHVybiB0aGlzfSxjbGFtcDpmdW5jdGlvbihhLGIpe3RoaXMueD1NYXRoLm1heChhLngsTWF0aC5taW4oYi54LHRoaXMueCkpO3RoaXMueT1NYXRoLm1heChhLnksTWF0aC5taW4oYi55LHRoaXMueSkpO3RoaXMuej1NYXRoLm1heChhLnosTWF0aC5taW4oYi56LHRoaXMueikpO1xudGhpcy53PU1hdGgubWF4KGEudyxNYXRoLm1pbihiLncsdGhpcy53KSk7cmV0dXJuIHRoaXN9LGNsYW1wU2NhbGFyOmZ1bmN0aW9uKCl7dmFyIGEsYjtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuVmVjdG9yNCxiPW5ldyBUSFJFRS5WZWN0b3I0KTthLnNldChjLGMsYyxjKTtiLnNldChkLGQsZCxkKTtyZXR1cm4gdGhpcy5jbGFtcChhLGIpfX0oKSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9TWF0aC5mbG9vcih0aGlzLnopO3RoaXMudz1NYXRoLmZsb29yKHRoaXMudyk7cmV0dXJuIHRoaXN9LGNlaWw6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5jZWlsKHRoaXMueCk7dGhpcy55PU1hdGguY2VpbCh0aGlzLnkpO3RoaXMuej1NYXRoLmNlaWwodGhpcy56KTt0aGlzLnc9TWF0aC5jZWlsKHRoaXMudyk7cmV0dXJuIHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7dGhpcy54PVxuTWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7dGhpcy56PU1hdGgucm91bmQodGhpcy56KTt0aGlzLnc9TWF0aC5yb3VuZCh0aGlzLncpO3JldHVybiB0aGlzfSxyb3VuZFRvWmVybzpmdW5jdGlvbigpe3RoaXMueD0wPnRoaXMueD9NYXRoLmNlaWwodGhpcy54KTpNYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PTA+dGhpcy55P01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9MD50aGlzLno/TWF0aC5jZWlsKHRoaXMueik6TWF0aC5mbG9vcih0aGlzLnopO3RoaXMudz0wPnRoaXMudz9NYXRoLmNlaWwodGhpcy53KTpNYXRoLmZsb29yKHRoaXMudyk7cmV0dXJuIHRoaXN9LG5lZ2F0ZTpmdW5jdGlvbigpe3RoaXMueD0tdGhpcy54O3RoaXMueT0tdGhpcy55O3RoaXMuej0tdGhpcy56O3RoaXMudz0tdGhpcy53O3JldHVybiB0aGlzfSxkb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMueCphLngrdGhpcy55KmEueSt0aGlzLnoqXG5hLnordGhpcy53KmEud30sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnordGhpcy53KnRoaXMud30sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53KX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KStNYXRoLmFicyh0aGlzLnopK01hdGguYWJzKHRoaXMudyl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcih0aGlzLmxlbmd0aCgpKX0sc2V0TGVuZ3RoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKGEvdGhpcy5sZW5ndGgoKSl9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPShhLngtdGhpcy54KSpiO3RoaXMueSs9KGEueS10aGlzLnkpKmI7dGhpcy56Kz0oYS56LVxudGhpcy56KSpiO3RoaXMudys9KGEudy10aGlzLncpKmI7cmV0dXJuIHRoaXN9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKGIsYSkubXVsdGlwbHlTY2FsYXIoYykuYWRkKGEpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueD09PXRoaXMueCYmYS55PT09dGhpcy55JiZhLno9PT10aGlzLnomJmEudz09PXRoaXMud30sZnJvbUFycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy54PWFbYl07dGhpcy55PWFbYisxXTt0aGlzLno9YVtiKzJdO3RoaXMudz1hW2IrM107cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLng7YVtiKzFdPXRoaXMueTthW2IrMl09dGhpcy56O2FbYiszXT10aGlzLnc7cmV0dXJuIGF9LGZyb21BdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMD09PWMmJihjPTApO2I9YiphLml0ZW1TaXplK1xuYzt0aGlzLng9YS5hcnJheVtiXTt0aGlzLnk9YS5hcnJheVtiKzFdO3RoaXMuej1hLmFycmF5W2IrMl07dGhpcy53PWEuYXJyYXlbYiszXTtyZXR1cm4gdGhpc319O1RIUkVFLkV1bGVyPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuX3g9YXx8MDt0aGlzLl95PWJ8fDA7dGhpcy5fej1jfHwwO3RoaXMuX29yZGVyPWR8fFRIUkVFLkV1bGVyLkRlZmF1bHRPcmRlcn07VEhSRUUuRXVsZXIuUm90YXRpb25PcmRlcnM9XCJYWVogWVpYIFpYWSBYWlkgWVhaIFpZWFwiLnNwbGl0KFwiIFwiKTtUSFJFRS5FdWxlci5EZWZhdWx0T3JkZXI9XCJYWVpcIjtcblRIUkVFLkV1bGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuRXVsZXIsZ2V0IHgoKXtyZXR1cm4gdGhpcy5feH0sc2V0IHgoYSl7dGhpcy5feD1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfSxnZXQgeSgpe3JldHVybiB0aGlzLl95fSxzZXQgeShhKXt0aGlzLl95PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9LGdldCB6KCl7cmV0dXJuIHRoaXMuX3p9LHNldCB6KGEpe3RoaXMuX3o9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX0sZ2V0IG9yZGVyKCl7cmV0dXJuIHRoaXMuX29yZGVyfSxzZXQgb3JkZXIoYSl7dGhpcy5fb3JkZXI9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX0sc2V0OmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuX3g9YTt0aGlzLl95PWI7dGhpcy5fej1jO3RoaXMuX29yZGVyPWR8fHRoaXMuX29yZGVyO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLl94LFxudGhpcy5feSx0aGlzLl96LHRoaXMuX29yZGVyKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLl94PWEuX3g7dGhpcy5feT1hLl95O3RoaXMuX3o9YS5fejt0aGlzLl9vcmRlcj1hLl9vcmRlcjt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1USFJFRS5NYXRoLmNsYW1wLGU9YS5lbGVtZW50czthPWVbMF07dmFyIGY9ZVs0XSxnPWVbOF0saD1lWzFdLGs9ZVs1XSxsPWVbOV0sbT1lWzJdLHA9ZVs2XSxlPWVbMTBdO2I9Ynx8dGhpcy5fb3JkZXI7XCJYWVpcIj09PWI/KHRoaXMuX3k9TWF0aC5hc2luKGQoZywtMSwxKSksLjk5OTk5Pk1hdGguYWJzKGcpPyh0aGlzLl94PU1hdGguYXRhbjIoLWwsZSksdGhpcy5fej1NYXRoLmF0YW4yKC1mLGEpKToodGhpcy5feD1NYXRoLmF0YW4yKHAsayksdGhpcy5fej0wKSk6XCJZWFpcIj09PWI/KHRoaXMuX3g9TWF0aC5hc2luKC1kKGwsLTEsMSkpLC45OTk5OT5NYXRoLmFicyhsKT9cbih0aGlzLl95PU1hdGguYXRhbjIoZyxlKSx0aGlzLl96PU1hdGguYXRhbjIoaCxrKSk6KHRoaXMuX3k9TWF0aC5hdGFuMigtbSxhKSx0aGlzLl96PTApKTpcIlpYWVwiPT09Yj8odGhpcy5feD1NYXRoLmFzaW4oZChwLC0xLDEpKSwuOTk5OTk+TWF0aC5hYnMocCk/KHRoaXMuX3k9TWF0aC5hdGFuMigtbSxlKSx0aGlzLl96PU1hdGguYXRhbjIoLWYsaykpOih0aGlzLl95PTAsdGhpcy5fej1NYXRoLmF0YW4yKGgsYSkpKTpcIlpZWFwiPT09Yj8odGhpcy5feT1NYXRoLmFzaW4oLWQobSwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKG0pPyh0aGlzLl94PU1hdGguYXRhbjIocCxlKSx0aGlzLl96PU1hdGguYXRhbjIoaCxhKSk6KHRoaXMuX3g9MCx0aGlzLl96PU1hdGguYXRhbjIoLWYsaykpKTpcIllaWFwiPT09Yj8odGhpcy5fej1NYXRoLmFzaW4oZChoLC0xLDEpKSwuOTk5OTk+TWF0aC5hYnMoaCk/KHRoaXMuX3g9TWF0aC5hdGFuMigtbCxrKSx0aGlzLl95PU1hdGguYXRhbjIoLW0sYSkpOih0aGlzLl94PVxuMCx0aGlzLl95PU1hdGguYXRhbjIoZyxlKSkpOlwiWFpZXCI9PT1iPyh0aGlzLl96PU1hdGguYXNpbigtZChmLC0xLDEpKSwuOTk5OTk+TWF0aC5hYnMoZik/KHRoaXMuX3g9TWF0aC5hdGFuMihwLGspLHRoaXMuX3k9TWF0aC5hdGFuMihnLGEpKToodGhpcy5feD1NYXRoLmF0YW4yKC1sLGUpLHRoaXMuX3k9MCkpOmNvbnNvbGUud2FybihcIlRIUkVFLkV1bGVyOiAuc2V0RnJvbVJvdGF0aW9uTWF0cml4KCkgZ2l2ZW4gdW5zdXBwb3J0ZWQgb3JkZXI6IFwiK2IpO3RoaXMuX29yZGVyPWI7aWYoITEhPT1jKXRoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxzZXRGcm9tUXVhdGVybmlvbjpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiLGMsZCl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1hdHJpeDQpO2EubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oYik7cmV0dXJuIHRoaXMuc2V0RnJvbVJvdGF0aW9uTWF0cml4KGEsYyxkKX19KCksc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24oYSxcbmIpe3JldHVybiB0aGlzLnNldChhLngsYS55LGEueixifHx0aGlzLl9vcmRlcil9LHJlb3JkZXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuUXVhdGVybmlvbjtyZXR1cm4gZnVuY3Rpb24oYil7YS5zZXRGcm9tRXVsZXIodGhpcyk7cmV0dXJuIHRoaXMuc2V0RnJvbVF1YXRlcm5pb24oYSxiKX19KCksZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLl94PT09dGhpcy5feCYmYS5feT09PXRoaXMuX3kmJmEuX3o9PT10aGlzLl96JiZhLl9vcmRlcj09PXRoaXMuX29yZGVyfSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy5feD1hWzBdO3RoaXMuX3k9YVsxXTt0aGlzLl96PWFbMl07dm9pZCAwIT09YVszXSYmKHRoaXMuX29yZGVyPWFbM10pO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO3ZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy5feDthW2IrMV09dGhpcy5feTthW2IrMl09dGhpcy5fejtcbmFbYiszXT10aGlzLl9vcmRlcjtyZXR1cm4gYX0sdG9WZWN0b3IzOmZ1bmN0aW9uKGEpe3JldHVybiBhP2Euc2V0KHRoaXMuX3gsdGhpcy5feSx0aGlzLl96KTpuZXcgVEhSRUUuVmVjdG9yMyh0aGlzLl94LHRoaXMuX3ksdGhpcy5feil9LG9uQ2hhbmdlOmZ1bmN0aW9uKGEpe3RoaXMub25DaGFuZ2VDYWxsYmFjaz1hO3JldHVybiB0aGlzfSxvbkNoYW5nZUNhbGxiYWNrOmZ1bmN0aW9uKCl7fX07VEhSRUUuTGluZTM9ZnVuY3Rpb24oYSxiKXt0aGlzLnN0YXJ0PXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLmVuZD12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlZlY3RvcjN9O1xuVEhSRUUuTGluZTMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5MaW5lMyxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnN0YXJ0LmNvcHkoYSk7dGhpcy5lbmQuY29weShiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydC5jb3B5KGEuc3RhcnQpO3RoaXMuZW5kLmNvcHkoYS5lbmQpO3JldHVybiB0aGlzfSxjZW50ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IzKS5hZGRWZWN0b3JzKHRoaXMuc3RhcnQsdGhpcy5lbmQpLm11bHRpcGx5U2NhbGFyKC41KX0sZGVsdGE6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IzKS5zdWJWZWN0b3JzKHRoaXMuZW5kLHRoaXMuc3RhcnQpfSxkaXN0YW5jZVNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5lbmQpfSxkaXN0YW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0LmRpc3RhbmNlVG8odGhpcy5lbmQpfSxcbmF0OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIHRoaXMuZGVsdGEoYykubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMuc3RhcnQpfSxjbG9zZXN0UG9pbnRUb1BvaW50UGFyYW1ldGVyOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYyxkKXthLnN1YlZlY3RvcnMoYyx0aGlzLnN0YXJ0KTtiLnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCk7dmFyIGU9Yi5kb3QoYiksZT1iLmRvdChhKS9lO2QmJihlPVRIUkVFLk1hdGguY2xhbXAoZSwwLDEpKTtyZXR1cm4gZX19KCksY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbihhLGIsYyl7YT10aGlzLmNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXIoYSxiKTtjPWN8fG5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiB0aGlzLmRlbHRhKGMpLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnN0YXJ0KX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnQuYXBwbHlNYXRyaXg0KGEpO1xudGhpcy5lbmQuYXBwbHlNYXRyaXg0KGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RhcnQuZXF1YWxzKHRoaXMuc3RhcnQpJiZhLmVuZC5lcXVhbHModGhpcy5lbmQpfX07VEhSRUUuQm94Mj1mdW5jdGlvbihhLGIpe3RoaXMubWluPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMihJbmZpbml0eSxJbmZpbml0eSk7dGhpcy5tYXg9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5WZWN0b3IyKC1JbmZpbml0eSwtSW5maW5pdHkpfTtcblRIUkVFLkJveDIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Cb3gyLHNldDpmdW5jdGlvbihhLGIpe3RoaXMubWluLmNvcHkoYSk7dGhpcy5tYXguY29weShiKTtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50czpmdW5jdGlvbihhKXt0aGlzLm1ha2VFbXB0eSgpO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmV4cGFuZEJ5UG9pbnQoYVtiXSk7cmV0dXJuIHRoaXN9LHNldEZyb21DZW50ZXJBbmRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjI7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5jb3B5KGMpLm11bHRpcGx5U2NhbGFyKC41KTt0aGlzLm1pbi5jb3B5KGIpLnN1YihkKTt0aGlzLm1heC5jb3B5KGIpLmFkZChkKTtyZXR1cm4gdGhpc319KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5taW4uY29weShhLm1pbik7dGhpcy5tYXguY29weShhLm1heCk7XG5yZXR1cm4gdGhpc30sbWFrZUVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5taW4ueD10aGlzLm1pbi55PUluZmluaXR5O3RoaXMubWF4Lng9dGhpcy5tYXgueT0tSW5maW5pdHk7cmV0dXJuIHRoaXN9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXgueDx0aGlzLm1pbi54fHx0aGlzLm1heC55PHRoaXMubWluLnl9LGNlbnRlcjpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlZlY3RvcjIpLmFkZFZlY3RvcnModGhpcy5taW4sdGhpcy5tYXgpLm11bHRpcGx5U2NhbGFyKC41KX0sc2l6ZTpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlZlY3RvcjIpLnN1YlZlY3RvcnModGhpcy5tYXgsdGhpcy5taW4pfSxleHBhbmRCeVBvaW50OmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhKTt0aGlzLm1heC5tYXgoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5VmVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMubWluLnN1YihhKTt0aGlzLm1heC5hZGQoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMubWluLmFkZFNjYWxhcigtYSk7XG50aGlzLm1heC5hZGRTY2FsYXIoYSk7cmV0dXJuIHRoaXN9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueDx0aGlzLm1pbi54fHxhLng+dGhpcy5tYXgueHx8YS55PHRoaXMubWluLnl8fGEueT50aGlzLm1heC55PyExOiEwfSxjb250YWluc0JveDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5taW4ueDw9YS5taW4ueCYmYS5tYXgueDw9dGhpcy5tYXgueCYmdGhpcy5taW4ueTw9YS5taW4ueSYmYS5tYXgueTw9dGhpcy5tYXgueT8hMDohMX0sZ2V0UGFyYW1ldGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IyKS5zZXQoKGEueC10aGlzLm1pbi54KS8odGhpcy5tYXgueC10aGlzLm1pbi54KSwoYS55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpKX0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5tYXgueDx0aGlzLm1pbi54fHxhLm1pbi54PnRoaXMubWF4Lnh8fGEubWF4Lnk8dGhpcy5taW4ueXx8YS5taW4ueT5cbnRoaXMubWF4Lnk/ITE6ITB9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IFRIUkVFLlZlY3RvcjIpLmNvcHkoYSkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMjtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuY29weShiKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCkuc3ViKGIpLmxlbmd0aCgpfX0oKSxpbnRlcnNlY3Q6ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWF4KGEubWluKTt0aGlzLm1heC5taW4oYS5tYXgpO3JldHVybiB0aGlzfSx1bmlvbjpmdW5jdGlvbihhKXt0aGlzLm1pbi5taW4oYS5taW4pO3RoaXMubWF4Lm1heChhLm1heCk7cmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGQoYSk7dGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWluLmVxdWFscyh0aGlzLm1pbikmJlxuYS5tYXguZXF1YWxzKHRoaXMubWF4KX19O1RIUkVFLkJveDM9ZnVuY3Rpb24oYSxiKXt0aGlzLm1pbj12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjMoSW5maW5pdHksSW5maW5pdHksSW5maW5pdHkpO3RoaXMubWF4PXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuVmVjdG9yMygtSW5maW5pdHksLUluZmluaXR5LC1JbmZpbml0eSl9O1xuVEhSRUUuQm94My5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkJveDMsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5taW4uY29weShhKTt0aGlzLm1heC5jb3B5KGIpO3JldHVybiB0aGlzfSxzZXRGcm9tQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPUluZmluaXR5LGM9SW5maW5pdHksZD1JbmZpbml0eSxlPS1JbmZpbml0eSxmPS1JbmZpbml0eSxnPS1JbmZpbml0eSxoPTAsaz1hLmxlbmd0aDtoPGs7aCs9Myl7dmFyIGw9YVtoXSxtPWFbaCsxXSxwPWFbaCsyXTtsPGImJihiPWwpO208YyYmKGM9bSk7cDxkJiYoZD1wKTtsPmUmJihlPWwpO20+ZiYmKGY9bSk7cD5nJiYoZz1wKX10aGlzLm1pbi5zZXQoYixjLGQpO3RoaXMubWF4LnNldChlLGYsZyl9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oYSl7dGhpcy5tYWtlRW1wdHkoKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspdGhpcy5leHBhbmRCeVBvaW50KGFbYl0pO3JldHVybiB0aGlzfSxzZXRGcm9tQ2VudGVyQW5kU2l6ZTpmdW5jdGlvbigpe3ZhciBhPVxubmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5jb3B5KGMpLm11bHRpcGx5U2NhbGFyKC41KTt0aGlzLm1pbi5jb3B5KGIpLnN1YihkKTt0aGlzLm1heC5jb3B5KGIpLmFkZChkKTtyZXR1cm4gdGhpc319KCksc2V0RnJvbU9iamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz10aGlzO2IudXBkYXRlTWF0cml4V29ybGQoITApO3RoaXMubWFrZUVtcHR5KCk7Yi50cmF2ZXJzZShmdW5jdGlvbihiKXt2YXIgZT1iLmdlb21ldHJ5O2lmKHZvaWQgMCE9PWUpaWYoZSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KWZvcih2YXIgZT1lLnZlcnRpY2VzLGY9MCxnPWUubGVuZ3RoO2Y8ZztmKyspYS5jb3B5KGVbZl0pLGEuYXBwbHlNYXRyaXg0KGIubWF0cml4V29ybGQpLGMuZXhwYW5kQnlQb2ludChhKTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSYmKGc9ZS5hdHRyaWJ1dGVzLnBvc2l0aW9uLFxudm9pZCAwIT09Zykpe3ZhciBoO2cgaW5zdGFuY2VvZiBUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT8oZT1nLmRhdGEuYXJyYXksZj1nLm9mZnNldCxoPWcuZGF0YS5zdHJpZGUpOihlPWcuYXJyYXksZj0wLGg9Myk7Zm9yKGc9ZS5sZW5ndGg7ZjxnO2YrPWgpYS5mcm9tQXJyYXkoZSxmKSxhLmFwcGx5TWF0cml4NChiLm1hdHJpeFdvcmxkKSxjLmV4cGFuZEJ5UG9pbnQoYSl9fSk7cmV0dXJuIHRoaXN9fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubWluLmNvcHkoYS5taW4pO3RoaXMubWF4LmNvcHkoYS5tYXgpO3JldHVybiB0aGlzfSxtYWtlRW1wdHk6ZnVuY3Rpb24oKXt0aGlzLm1pbi54PXRoaXMubWluLnk9dGhpcy5taW4uej1JbmZpbml0eTt0aGlzLm1heC54PXRoaXMubWF4Lnk9dGhpcy5tYXguej0tSW5maW5pdHk7cmV0dXJuIHRoaXN9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXgueDxcbnRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueXx8dGhpcy5tYXguejx0aGlzLm1pbi56fSxjZW50ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IzKS5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhciguNSl9LHNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IzKS5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX0sZXhwYW5kQnlQb2ludDpmdW5jdGlvbihhKXt0aGlzLm1pbi5taW4oYSk7dGhpcy5tYXgubWF4KGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVZlY3RvcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5zdWIoYSk7dGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGRTY2FsYXIoLWEpO3RoaXMubWF4LmFkZFNjYWxhcihhKTtyZXR1cm4gdGhpc30sY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS54PHRoaXMubWluLnh8fFxuYS54PnRoaXMubWF4Lnh8fGEueTx0aGlzLm1pbi55fHxhLnk+dGhpcy5tYXgueXx8YS56PHRoaXMubWluLnp8fGEuej50aGlzLm1heC56PyExOiEwfSxjb250YWluc0JveDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5taW4ueDw9YS5taW4ueCYmYS5tYXgueDw9dGhpcy5tYXgueCYmdGhpcy5taW4ueTw9YS5taW4ueSYmYS5tYXgueTw9dGhpcy5tYXgueSYmdGhpcy5taW4uejw9YS5taW4ueiYmYS5tYXguejw9dGhpcy5tYXguej8hMDohMX0sZ2V0UGFyYW1ldGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IzKS5zZXQoKGEueC10aGlzLm1pbi54KS8odGhpcy5tYXgueC10aGlzLm1pbi54KSwoYS55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpLChhLnotdGhpcy5taW4ueikvKHRoaXMubWF4LnotdGhpcy5taW4ueikpfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKGEpe3JldHVybiBhLm1heC54PHRoaXMubWluLnh8fGEubWluLng+dGhpcy5tYXgueHx8XG5hLm1heC55PHRoaXMubWluLnl8fGEubWluLnk+dGhpcy5tYXgueXx8YS5tYXguejx0aGlzLm1pbi56fHxhLm1pbi56PnRoaXMubWF4Lno/ITE6ITB9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlZlY3RvcjMpO3RoaXMuY2xhbXBQb2ludChiLmNlbnRlcixhKTtyZXR1cm4gYS5kaXN0YW5jZVRvU3F1YXJlZChiLmNlbnRlcik8PWIucmFkaXVzKmIucmFkaXVzfX0oKSxpbnRlcnNlY3RzUGxhbmU6ZnVuY3Rpb24oYSl7dmFyIGIsYzswPGEubm9ybWFsLng/KGI9YS5ub3JtYWwueCp0aGlzLm1pbi54LGM9YS5ub3JtYWwueCp0aGlzLm1heC54KTooYj1hLm5vcm1hbC54KnRoaXMubWF4LngsYz1hLm5vcm1hbC54KnRoaXMubWluLngpOzA8YS5ub3JtYWwueT8oYis9YS5ub3JtYWwueSp0aGlzLm1pbi55LGMrPWEubm9ybWFsLnkqdGhpcy5tYXgueSk6KGIrPWEubm9ybWFsLnkqdGhpcy5tYXgueSxcbmMrPWEubm9ybWFsLnkqdGhpcy5taW4ueSk7MDxhLm5vcm1hbC56PyhiKz1hLm5vcm1hbC56KnRoaXMubWluLnosYys9YS5ub3JtYWwueip0aGlzLm1heC56KTooYis9YS5ub3JtYWwueip0aGlzLm1heC56LGMrPWEubm9ybWFsLnoqdGhpcy5taW4ueik7cmV0dXJuIGI8PWEuY29uc3RhbnQmJmM+PWEuY29uc3RhbnR9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IFRIUkVFLlZlY3RvcjMpLmNvcHkoYSkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuY29weShiKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCkuc3ViKGIpLmxlbmd0aCgpfX0oKSxnZXRCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXtiPWJ8fG5ldyBUSFJFRS5TcGhlcmU7Yi5jZW50ZXI9XG50aGlzLmNlbnRlcigpO2IucmFkaXVzPS41KnRoaXMuc2l6ZShhKS5sZW5ndGgoKTtyZXR1cm4gYn19KCksaW50ZXJzZWN0OmZ1bmN0aW9uKGEpe3RoaXMubWluLm1heChhLm1pbik7dGhpcy5tYXgubWluKGEubWF4KTt0aGlzLmlzRW1wdHkoKSYmdGhpcy5tYWtlRW1wdHkoKTtyZXR1cm4gdGhpc30sdW5pb246ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWluKGEubWluKTt0aGlzLm1heC5tYXgoYS5tYXgpO3JldHVybiB0aGlzfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oKXt2YXIgYT1bbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjMsbmV3IFRIUkVFLlZlY3RvcjNdO3JldHVybiBmdW5jdGlvbihiKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gdGhpczthWzBdLnNldCh0aGlzLm1pbi54LHRoaXMubWluLnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO1xuYVsxXS5zZXQodGhpcy5taW4ueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTthWzJdLnNldCh0aGlzLm1pbi54LHRoaXMubWF4LnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO2FbM10uc2V0KHRoaXMubWluLngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7YVs0XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTthWzVdLnNldCh0aGlzLm1heC54LHRoaXMubWluLnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGIpO2FbNl0uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoYik7YVs3XS5zZXQodGhpcy5tYXgueCx0aGlzLm1heC55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTt0aGlzLnNldEZyb21Qb2ludHMoYSk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGQoYSk7dGhpcy5tYXguYWRkKGEpO1xucmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5taW4uZXF1YWxzKHRoaXMubWluKSYmYS5tYXguZXF1YWxzKHRoaXMubWF4KX19O1RIUkVFLk1hdHJpeDM9ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnRzPW5ldyBGbG9hdDMyQXJyYXkoWzEsMCwwLDAsMSwwLDAsMCwxXSk7MDxhcmd1bWVudHMubGVuZ3RoJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4MzogdGhlIGNvbnN0cnVjdG9yIG5vIGxvbmdlciByZWFkcyBhcmd1bWVudHMuIHVzZSAuc2V0KCkgaW5zdGVhZC5cIil9O1xuVEhSRUUuTWF0cml4My5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLk1hdHJpeDMsc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbD10aGlzLmVsZW1lbnRzO2xbMF09YTtsWzFdPWQ7bFsyXT1nO2xbM109YjtsWzRdPWU7bFs1XT1oO2xbNl09YztsWzddPWY7bFs4XT1rO3JldHVybiB0aGlzfSxpZGVudGl0eTpmdW5jdGlvbigpe3RoaXMuc2V0KDEsMCwwLDAsMSwwLDAsMCwxKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmZyb21BcnJheSh0aGlzLmVsZW1lbnRzKX0sY29weTpmdW5jdGlvbihhKXthPWEuZWxlbWVudHM7dGhpcy5zZXQoYVswXSxhWzNdLGFbNl0sYVsxXSxhWzRdLGFbN10sYVsyXSxhWzVdLGFbOF0pO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4NDpmdW5jdGlvbihhKXthPWEuZWxlbWVudHM7dGhpcy5zZXQoYVswXSxhWzRdLGFbOF0sYVsxXSxhWzVdLGFbOV0sYVsyXSxhWzZdLGFbMTBdKTtcbnJldHVybiB0aGlzfSxhcHBseVRvVmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuVmVjdG9yMyk7dm9pZCAwPT09YyYmKGM9MCk7dm9pZCAwPT09ZCYmKGQ9Yi5sZW5ndGgpO2Zvcih2YXIgZT0wO2U8ZDtlKz0zLGMrPTMpYS5mcm9tQXJyYXkoYixjKSxhLmFwcGx5TWF0cml4Myh0aGlzKSxhLnRvQXJyYXkoYixjKTtyZXR1cm4gYn19KCksYXBwbHlUb0J1ZmZlcjpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiLGMsZCl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlZlY3RvcjMpO3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMD09PWQmJihkPWIubGVuZ3RoL2IuaXRlbVNpemUpO2Zvcih2YXIgZT0wO2U8ZDtlKyssYysrKWEueD1iLmdldFgoYyksYS55PWIuZ2V0WShjKSxhLno9Yi5nZXRaKGMpLGEuYXBwbHlNYXRyaXgzKHRoaXMpLGIuc2V0WFlaKGEueCxhLnksYS56KTtyZXR1cm4gYn19KCksXG5tdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2JbMF0qPWE7YlszXSo9YTtiWzZdKj1hO2JbMV0qPWE7Yls0XSo9YTtiWzddKj1hO2JbMl0qPWE7Yls1XSo9YTtiWzhdKj1hO3JldHVybiB0aGlzfSxkZXRlcm1pbmFudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHMsYj1hWzBdLGM9YVsxXSxkPWFbMl0sZT1hWzNdLGY9YVs0XSxnPWFbNV0saD1hWzZdLGs9YVs3XSxhPWFbOF07cmV0dXJuIGIqZiphLWIqZyprLWMqZSphK2MqZypoK2QqZSprLWQqZipofSxnZXRJbnZlcnNlOmZ1bmN0aW9uKGEsYil7YSBpbnN0YW5jZW9mIFRIUkVFLk1hdHJpeDQmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXgzLmdldEludmVyc2Ugbm8gbG9uZ2VyIHRha2VzIGEgTWF0cml4NCBhcmd1bWVudC5cIik7dmFyIGM9YS5lbGVtZW50cyxkPXRoaXMuZWxlbWVudHMsZT1jWzBdLGY9Y1sxXSxnPWNbMl0saD1jWzNdLGs9Y1s0XSxsPWNbNV0sbT1jWzZdLHA9Y1s3XSxcbmM9Y1s4XSxuPWMqay1sKnAscT1sKm0tYypoLHI9cCpoLWsqbSxzPWUqbitmKnErZypyO2lmKDA9PT1zKXtpZihiKXRocm93IEVycm9yKFwiVEhSRUUuTWF0cml4My5nZXRJbnZlcnNlKCk6IGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDBcIik7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4My5nZXRJbnZlcnNlKCk6IGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDBcIik7cmV0dXJuIHRoaXMuaWRlbnRpdHkoKX1zPTEvcztkWzBdPW4qcztkWzFdPShnKnAtYypmKSpzO2RbMl09KGwqZi1nKmspKnM7ZFszXT1xKnM7ZFs0XT0oYyplLWcqbSkqcztkWzVdPShnKmgtbCplKSpzO2RbNl09cipzO2RbN109KGYqbS1wKmUpKnM7ZFs4XT0oayplLWYqaCkqcztyZXR1cm4gdGhpc30sdHJhbnNwb3NlOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLmVsZW1lbnRzO2E9YlsxXTtiWzFdPWJbM107YlszXT1hO2E9YlsyXTtiWzJdPWJbNl07Yls2XT1hO2E9Yls1XTtiWzVdPVxuYls3XTtiWzddPWE7cmV0dXJuIHRoaXN9LGZsYXR0ZW5Ub0FycmF5T2Zmc2V0OmZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLmZsYXR0ZW5Ub0FycmF5T2Zmc2V0IGlzIGRlcHJlY2F0ZWQgLSBqdXN0IHVzZSAudG9BcnJheSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy50b0FycmF5KGEsYil9LGdldE5vcm1hbE1hdHJpeDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4NChhKS5nZXRJbnZlcnNlKHRoaXMpLnRyYW5zcG9zZSgpfSx0cmFuc3Bvc2VJbnRvQXJyYXk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50czthWzBdPWJbMF07YVsxXT1iWzNdO2FbMl09Yls2XTthWzNdPWJbMV07YVs0XT1iWzRdO2FbNV09Yls3XTthWzZdPWJbMl07YVs3XT1iWzVdO2FbOF09Yls4XTtyZXR1cm4gdGhpc30sZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudHMuc2V0KGEpO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09XG5hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7dmFyIGM9dGhpcy5lbGVtZW50czthW2JdPWNbMF07YVtiKzFdPWNbMV07YVtiKzJdPWNbMl07YVtiKzNdPWNbM107YVtiKzRdPWNbNF07YVtiKzVdPWNbNV07YVtiKzZdPWNbNl07YVtiKzddPWNbN107YVtiKzhdPWNbOF07cmV0dXJuIGF9fTtUSFJFRS5NYXRyaXg0PWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50cz1uZXcgRmxvYXQzMkFycmF5KFsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXSk7MDxhcmd1bWVudHMubGVuZ3RoJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogdGhlIGNvbnN0cnVjdG9yIG5vIGxvbmdlciByZWFkcyBhcmd1bWVudHMuIHVzZSAuc2V0KCkgaW5zdGVhZC5cIil9O1xuVEhSRUUuTWF0cml4NC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLk1hdHJpeDQsc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrLGwsbSxwLG4scSxyLHMpe3ZhciB2PXRoaXMuZWxlbWVudHM7dlswXT1hO3ZbNF09Yjt2WzhdPWM7dlsxMl09ZDt2WzFdPWU7dls1XT1mO3ZbOV09Zzt2WzEzXT1oO3ZbMl09azt2WzZdPWw7dlsxMF09bTt2WzE0XT1wO3ZbM109bjt2WzddPXE7dlsxMV09cjt2WzE1XT1zO3JldHVybiB0aGlzfSxpZGVudGl0eTpmdW5jdGlvbigpe3RoaXMuc2V0KDEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuTWF0cml4NCkuZnJvbUFycmF5KHRoaXMuZWxlbWVudHMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudHMuc2V0KGEuZWxlbWVudHMpO3JldHVybiB0aGlzfSxjb3B5UG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50czthPWEuZWxlbWVudHM7XG5iWzEyXT1hWzEyXTtiWzEzXT1hWzEzXTtiWzE0XT1hWzE0XTtyZXR1cm4gdGhpc30sZXh0cmFjdEJhc2lzOmZ1bmN0aW9uKGEsYixjKXthLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywwKTtiLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywxKTtjLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywyKTtyZXR1cm4gdGhpc30sbWFrZUJhc2lzOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNldChhLngsYi54LGMueCwwLGEueSxiLnksYy55LDAsYS56LGIueixjLnosMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sZXh0cmFjdFJvdGF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5WZWN0b3IzKTt2YXIgYz10aGlzLmVsZW1lbnRzLGQ9Yi5lbGVtZW50cyxlPTEvYS5zZXRGcm9tTWF0cml4Q29sdW1uKGIsMCkubGVuZ3RoKCksZj0xL2Euc2V0RnJvbU1hdHJpeENvbHVtbihiLDEpLmxlbmd0aCgpO2I9MS9hLnNldEZyb21NYXRyaXhDb2x1bW4oYixcbjIpLmxlbmd0aCgpO2NbMF09ZFswXSplO2NbMV09ZFsxXSplO2NbMl09ZFsyXSplO2NbNF09ZFs0XSpmO2NbNV09ZFs1XSpmO2NbNl09ZFs2XSpmO2NbOF09ZFs4XSpiO2NbOV09ZFs5XSpiO2NbMTBdPWRbMTBdKmI7cmV0dXJuIHRoaXN9fSgpLG1ha2VSb3RhdGlvbkZyb21FdWxlcjpmdW5jdGlvbihhKXshMT09PWEgaW5zdGFuY2VvZiBUSFJFRS5FdWxlciYmY29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDogLm1ha2VSb3RhdGlvbkZyb21FdWxlcigpIG5vdyBleHBlY3RzIGEgRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci5cIik7dmFyIGI9dGhpcy5lbGVtZW50cyxjPWEueCxkPWEueSxlPWEueixmPU1hdGguY29zKGMpLGM9TWF0aC5zaW4oYyksZz1NYXRoLmNvcyhkKSxkPU1hdGguc2luKGQpLGg9TWF0aC5jb3MoZSksZT1NYXRoLnNpbihlKTtpZihcIlhZWlwiPT09YS5vcmRlcil7YT1mKmg7dmFyIGs9ZiplLGw9YypoLG09YyplO2JbMF09ZypoO2JbNF09XG4tZyplO2JbOF09ZDtiWzFdPWsrbCpkO2JbNV09YS1tKmQ7Yls5XT0tYypnO2JbMl09bS1hKmQ7Yls2XT1sK2sqZDtiWzEwXT1mKmd9ZWxzZVwiWVhaXCI9PT1hLm9yZGVyPyhhPWcqaCxrPWcqZSxsPWQqaCxtPWQqZSxiWzBdPWErbSpjLGJbNF09bCpjLWssYls4XT1mKmQsYlsxXT1mKmUsYls1XT1mKmgsYls5XT0tYyxiWzJdPWsqYy1sLGJbNl09bSthKmMsYlsxMF09ZipnKTpcIlpYWVwiPT09YS5vcmRlcj8oYT1nKmgsaz1nKmUsbD1kKmgsbT1kKmUsYlswXT1hLW0qYyxiWzRdPS1mKmUsYls4XT1sK2sqYyxiWzFdPWsrbCpjLGJbNV09ZipoLGJbOV09bS1hKmMsYlsyXT0tZipkLGJbNl09YyxiWzEwXT1mKmcpOlwiWllYXCI9PT1hLm9yZGVyPyhhPWYqaCxrPWYqZSxsPWMqaCxtPWMqZSxiWzBdPWcqaCxiWzRdPWwqZC1rLGJbOF09YSpkK20sYlsxXT1nKmUsYls1XT1tKmQrYSxiWzldPWsqZC1sLGJbMl09LWQsYls2XT1jKmcsYlsxMF09ZipnKTpcIllaWFwiPT09YS5vcmRlcj8oYT1mKmcsaz1mKlxuZCxsPWMqZyxtPWMqZCxiWzBdPWcqaCxiWzRdPW0tYSplLGJbOF09bCplK2ssYlsxXT1lLGJbNV09ZipoLGJbOV09LWMqaCxiWzJdPS1kKmgsYls2XT1rKmUrbCxiWzEwXT1hLW0qZSk6XCJYWllcIj09PWEub3JkZXImJihhPWYqZyxrPWYqZCxsPWMqZyxtPWMqZCxiWzBdPWcqaCxiWzRdPS1lLGJbOF09ZCpoLGJbMV09YSplK20sYls1XT1mKmgsYls5XT1rKmUtbCxiWzJdPWwqZS1rLGJbNl09YypoLGJbMTBdPW0qZSthKTtiWzNdPTA7Yls3XT0wO2JbMTFdPTA7YlsxMl09MDtiWzEzXT0wO2JbMTRdPTA7YlsxNV09MTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cyxjPWEueCxkPWEueSxlPWEueixmPWEudyxnPWMrYyxoPWQrZCxrPWUrZTthPWMqZzt2YXIgbD1jKmgsYz1jKmssbT1kKmgsZD1kKmssZT1lKmssZz1mKmcsaD1mKmgsZj1mKms7YlswXT0xLShtK2UpO2JbNF09bC1mO2JbOF09YytoO2JbMV09bCtcbmY7Yls1XT0xLShhK2UpO2JbOV09ZC1nO2JbMl09Yy1oO2JbNl09ZCtnO2JbMTBdPTEtKGErbSk7YlszXT0wO2JbN109MDtiWzExXT0wO2JbMTJdPTA7YlsxM109MDtiWzE0XT0wO2JbMTVdPTE7cmV0dXJuIHRoaXN9LGxvb2tBdDpmdW5jdGlvbigpe3ZhciBhLGIsYztyZXR1cm4gZnVuY3Rpb24oZCxlLGYpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuVmVjdG9yMyk7dmFyIGc9dGhpcy5lbGVtZW50cztjLnN1YlZlY3RvcnMoZCxlKS5ub3JtYWxpemUoKTswPT09Yy5sZW5ndGhTcSgpJiYoYy56PTEpO2EuY3Jvc3NWZWN0b3JzKGYsYykubm9ybWFsaXplKCk7MD09PWEubGVuZ3RoU3EoKSYmKGMueis9MUUtNCxhLmNyb3NzVmVjdG9ycyhmLGMpLm5vcm1hbGl6ZSgpKTtiLmNyb3NzVmVjdG9ycyhjLGEpO2dbMF09YS54O2dbNF09Yi54O2dbOF09Yy54O2dbMV09YS55O2dbNV09Yi55O2dbOV09Yy55O2dbMl09YS56O1xuZ1s2XT1iLno7Z1sxMF09Yy56O3JldHVybiB0aGlzfX0oKSxtdWx0aXBseTpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDAhPT1iPyhjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseU1hdHJpY2VzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseU1hdHJpY2VzKGEsYikpOnRoaXMubXVsdGlwbHlNYXRyaWNlcyh0aGlzLGEpfSxwcmVtdWx0aXBseTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKGEsdGhpcyl9LG11bHRpcGx5TWF0cmljZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmVsZW1lbnRzLGQ9Yi5lbGVtZW50cyxlPXRoaXMuZWxlbWVudHMsZj1jWzBdLGc9Y1s0XSxoPWNbOF0saz1jWzEyXSxsPWNbMV0sbT1jWzVdLHA9Y1s5XSxuPWNbMTNdLHE9Y1syXSxyPWNbNl0scz1jWzEwXSx2PWNbMTRdLHQ9Y1szXSx1PWNbN10sRD1jWzExXSxjPWNbMTVdLFxudz1kWzBdLEk9ZFs0XSx6PWRbOF0seT1kWzEyXSxBPWRbMV0sRz1kWzVdLEI9ZFs5XSxGPWRbMTNdLEo9ZFsyXSxQPWRbNl0sSz1kWzEwXSxIPWRbMTRdLE09ZFszXSxPPWRbN10sTj1kWzExXSxkPWRbMTVdO2VbMF09Zip3K2cqQStoKkoraypNO2VbNF09ZipJK2cqRytoKlAraypPO2VbOF09Zip6K2cqQitoKksraypOO2VbMTJdPWYqeStnKkYraCpIK2sqZDtlWzFdPWwqdyttKkErcCpKK24qTTtlWzVdPWwqSSttKkcrcCpQK24qTztlWzldPWwqeittKkIrcCpLK24qTjtlWzEzXT1sKnkrbSpGK3AqSCtuKmQ7ZVsyXT1xKncrcipBK3MqSit2Kk07ZVs2XT1xKkkrcipHK3MqUCt2Kk87ZVsxMF09cSp6K3IqQitzKksrdipOO2VbMTRdPXEqeStyKkYrcypIK3YqZDtlWzNdPXQqdyt1KkErRCpKK2MqTTtlWzddPXQqSSt1KkcrRCpQK2MqTztlWzExXT10KnordSpCK0QqSytjKk47ZVsxNV09dCp5K3UqRitEKkgrYypkO3JldHVybiB0aGlzfSxtdWx0aXBseVRvQXJyYXk6ZnVuY3Rpb24oYSxiLFxuYyl7dmFyIGQ9dGhpcy5lbGVtZW50czt0aGlzLm11bHRpcGx5TWF0cmljZXMoYSxiKTtjWzBdPWRbMF07Y1sxXT1kWzFdO2NbMl09ZFsyXTtjWzNdPWRbM107Y1s0XT1kWzRdO2NbNV09ZFs1XTtjWzZdPWRbNl07Y1s3XT1kWzddO2NbOF09ZFs4XTtjWzldPWRbOV07Y1sxMF09ZFsxMF07Y1sxMV09ZFsxMV07Y1sxMl09ZFsxMl07Y1sxM109ZFsxM107Y1sxNF09ZFsxNF07Y1sxNV09ZFsxNV07cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YlswXSo9YTtiWzRdKj1hO2JbOF0qPWE7YlsxMl0qPWE7YlsxXSo9YTtiWzVdKj1hO2JbOV0qPWE7YlsxM10qPWE7YlsyXSo9YTtiWzZdKj1hO2JbMTBdKj1hO2JbMTRdKj1hO2JbM10qPWE7Yls3XSo9YTtiWzExXSo9YTtiWzE1XSo9YTtyZXR1cm4gdGhpc30sYXBwbHlUb1ZlY3RvcjNBcnJheTpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiLGMsZCl7dm9pZCAwPT09YSYmXG4oYT1uZXcgVEhSRUUuVmVjdG9yMyk7dm9pZCAwPT09YyYmKGM9MCk7dm9pZCAwPT09ZCYmKGQ9Yi5sZW5ndGgpO2Zvcih2YXIgZT0wO2U8ZDtlKz0zLGMrPTMpYS5mcm9tQXJyYXkoYixjKSxhLmFwcGx5TWF0cml4NCh0aGlzKSxhLnRvQXJyYXkoYixjKTtyZXR1cm4gYn19KCksYXBwbHlUb0J1ZmZlcjpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiLGMsZCl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlZlY3RvcjMpO3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMD09PWQmJihkPWIubGVuZ3RoL2IuaXRlbVNpemUpO2Zvcih2YXIgZT0wO2U8ZDtlKyssYysrKWEueD1iLmdldFgoYyksYS55PWIuZ2V0WShjKSxhLno9Yi5nZXRaKGMpLGEuYXBwbHlNYXRyaXg0KHRoaXMpLGIuc2V0WFlaKGEueCxhLnksYS56KTtyZXR1cm4gYn19KCksZGV0ZXJtaW5hbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzLGI9YVswXSxjPWFbNF0sZD1hWzhdLGU9YVsxMl0sZj1hWzFdLGc9XG5hWzVdLGg9YVs5XSxrPWFbMTNdLGw9YVsyXSxtPWFbNl0scD1hWzEwXSxuPWFbMTRdO3JldHVybiBhWzNdKigrZSpoKm0tZCprKm0tZSpnKnArYyprKnArZCpnKm4tYypoKm4pK2FbN10qKCtiKmgqbi1iKmsqcCtlKmYqcC1kKmYqbitkKmsqbC1lKmgqbCkrYVsxMV0qKCtiKmsqbS1iKmcqbi1lKmYqbStjKmYqbitlKmcqbC1jKmsqbCkrYVsxNV0qKC1kKmcqbC1iKmgqbStiKmcqcCtkKmYqbS1jKmYqcCtjKmgqbCl9LHRyYW5zcG9zZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHMsYjtiPWFbMV07YVsxXT1hWzRdO2FbNF09YjtiPWFbMl07YVsyXT1hWzhdO2FbOF09YjtiPWFbNl07YVs2XT1hWzldO2FbOV09YjtiPWFbM107YVszXT1hWzEyXTthWzEyXT1iO2I9YVs3XTthWzddPWFbMTNdO2FbMTNdPWI7Yj1hWzExXTthWzExXT1hWzE0XTthWzE0XT1iO3JldHVybiB0aGlzfSxmbGF0dGVuVG9BcnJheU9mZnNldDpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5mbGF0dGVuVG9BcnJheU9mZnNldCBpcyBkZXByZWNhdGVkIC0ganVzdCB1c2UgLnRvQXJyYXkgaW5zdGVhZC5cIik7XG5yZXR1cm4gdGhpcy50b0FycmF5KGEsYil9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKCl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlZlY3RvcjMpO2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5nZXRQb3NpdGlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBWZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbiggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuc2V0RnJvbU1hdHJpeENvbHVtbih0aGlzLDMpfX0oKSxzZXRQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2JbMTJdPWEueDtiWzEzXT1hLnk7YlsxNF09YS56O3JldHVybiB0aGlzfSxnZXRJbnZlcnNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5lbGVtZW50cyxkPWEuZWxlbWVudHMsZT1kWzBdLGY9ZFsxXSxnPWRbMl0saD1kWzNdLGs9ZFs0XSxsPWRbNV0sbT1kWzZdLHA9ZFs3XSxuPWRbOF0scT1kWzldLHI9ZFsxMF0scz1kWzExXSx2PWRbMTJdLFxudD1kWzEzXSx1PWRbMTRdLGQ9ZFsxNV0sRD1xKnUqcC10KnIqcCt0Km0qcy1sKnUqcy1xKm0qZCtsKnIqZCx3PXYqcipwLW4qdSpwLXYqbSpzK2sqdSpzK24qbSpkLWsqcipkLEk9bip0KnAtdipxKnArdipsKnMtayp0KnMtbipsKmQraypxKmQsej12KnEqbS1uKnQqbS12KmwqcitrKnQqcituKmwqdS1rKnEqdSx5PWUqRCtmKncrZypJK2gqejtpZigwPT09eSl7aWYoYil0aHJvdyBFcnJvcihcIlRIUkVFLk1hdHJpeDQuZ2V0SW52ZXJzZSgpOiBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQuZ2V0SW52ZXJzZSgpOiBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO3JldHVybiB0aGlzLmlkZW50aXR5KCl9eT0xL3k7Y1swXT1EKnk7Y1sxXT0odCpyKmgtcSp1KmgtdCpnKnMrZip1KnMrcSpnKmQtZipyKmQpKnk7Y1syXT0obCp1KmgtdCptKmgrdCpnKnAtZip1KnAtbCpnKmQrZiptKmQpKnk7Y1szXT1cbihxKm0qaC1sKnIqaC1xKmcqcCtmKnIqcCtsKmcqcy1mKm0qcykqeTtjWzRdPXcqeTtjWzVdPShuKnUqaC12KnIqaCt2Kmcqcy1lKnUqcy1uKmcqZCtlKnIqZCkqeTtjWzZdPSh2Km0qaC1rKnUqaC12KmcqcCtlKnUqcCtrKmcqZC1lKm0qZCkqeTtjWzddPShrKnIqaC1uKm0qaCtuKmcqcC1lKnIqcC1rKmcqcytlKm0qcykqeTtjWzhdPUkqeTtjWzldPSh2KnEqaC1uKnQqaC12KmYqcytlKnQqcytuKmYqZC1lKnEqZCkqeTtjWzEwXT0oayp0KmgtdipsKmgrdipmKnAtZSp0KnAtaypmKmQrZSpsKmQpKnk7Y1sxMV09KG4qbCpoLWsqcSpoLW4qZipwK2UqcSpwK2sqZipzLWUqbCpzKSp5O2NbMTJdPXoqeTtjWzEzXT0obip0KmctdipxKmcrdipmKnItZSp0KnItbipmKnUrZSpxKnUpKnk7Y1sxNF09KHYqbCpnLWsqdCpnLXYqZiptK2UqdCptK2sqZip1LWUqbCp1KSp5O2NbMTVdPShrKnEqZy1uKmwqZytuKmYqbS1lKnEqbS1rKmYqcitlKmwqcikqeTtyZXR1cm4gdGhpc30sc2NhbGU6ZnVuY3Rpb24oYSl7dmFyIGI9XG50aGlzLmVsZW1lbnRzLGM9YS54LGQ9YS55O2E9YS56O2JbMF0qPWM7Yls0XSo9ZDtiWzhdKj1hO2JbMV0qPWM7Yls1XSo9ZDtiWzldKj1hO2JbMl0qPWM7Yls2XSo9ZDtiWzEwXSo9YTtiWzNdKj1jO2JbN10qPWQ7YlsxMV0qPWE7cmV0dXJuIHRoaXN9LGdldE1heFNjYWxlT25BeGlzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cztyZXR1cm4gTWF0aC5zcXJ0KE1hdGgubWF4KGFbMF0qYVswXSthWzFdKmFbMV0rYVsyXSphWzJdLGFbNF0qYVs0XSthWzVdKmFbNV0rYVs2XSphWzZdLGFbOF0qYVs4XSthWzldKmFbOV0rYVsxMF0qYVsxMF0pKX0sbWFrZVRyYW5zbGF0aW9uOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNldCgxLDAsMCxhLDAsMSwwLGIsMCwwLDEsYywwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uWDpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKTthPU1hdGguc2luKGEpO3RoaXMuc2V0KDEsMCwwLDAsMCxiLC1hLDAsMCxhLGIsMCwwLDAsMCwxKTtcbnJldHVybiB0aGlzfSxtYWtlUm90YXRpb25ZOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguY29zKGEpO2E9TWF0aC5zaW4oYSk7dGhpcy5zZXQoYiwwLGEsMCwwLDEsMCwwLC1hLDAsYiwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25aOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguY29zKGEpO2E9TWF0aC5zaW4oYSk7dGhpcy5zZXQoYiwtYSwwLDAsYSxiLDAsMCwwLDAsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25BeGlzOmZ1bmN0aW9uKGEsYil7dmFyIGM9TWF0aC5jb3MoYiksZD1NYXRoLnNpbihiKSxlPTEtYyxmPWEueCxnPWEueSxoPWEueixrPWUqZixsPWUqZzt0aGlzLnNldChrKmYrYyxrKmctZCpoLGsqaCtkKmcsMCxrKmcrZCpoLGwqZytjLGwqaC1kKmYsMCxrKmgtZCpnLGwqaCtkKmYsZSpoKmgrYywwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlU2NhbGU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0KGEsMCwwLDAsMCxiLDAsMCwwLDAsYyxcbjAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGNvbXBvc2U6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oYik7dGhpcy5zY2FsZShjKTt0aGlzLnNldFBvc2l0aW9uKGEpO3JldHVybiB0aGlzfSxkZWNvbXBvc2U6ZnVuY3Rpb24oKXt2YXIgYSxiO3JldHVybiBmdW5jdGlvbihjLGQsZSl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuTWF0cml4NCk7dmFyIGY9dGhpcy5lbGVtZW50cyxnPWEuc2V0KGZbMF0sZlsxXSxmWzJdKS5sZW5ndGgoKSxoPWEuc2V0KGZbNF0sZls1XSxmWzZdKS5sZW5ndGgoKSxrPWEuc2V0KGZbOF0sZls5XSxmWzEwXSkubGVuZ3RoKCk7MD50aGlzLmRldGVybWluYW50KCkmJihnPS1nKTtjLng9ZlsxMl07Yy55PWZbMTNdO2Muej1mWzE0XTtiLmVsZW1lbnRzLnNldCh0aGlzLmVsZW1lbnRzKTtjPTEvZzt2YXIgZj0xL2gsbD0xL2s7Yi5lbGVtZW50c1swXSo9YztiLmVsZW1lbnRzWzFdKj1jO1xuYi5lbGVtZW50c1syXSo9YztiLmVsZW1lbnRzWzRdKj1mO2IuZWxlbWVudHNbNV0qPWY7Yi5lbGVtZW50c1s2XSo9ZjtiLmVsZW1lbnRzWzhdKj1sO2IuZWxlbWVudHNbOV0qPWw7Yi5lbGVtZW50c1sxMF0qPWw7ZC5zZXRGcm9tUm90YXRpb25NYXRyaXgoYik7ZS54PWc7ZS55PWg7ZS56PWs7cmV0dXJuIHRoaXN9fSgpLG1ha2VGcnVzdHVtOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz10aGlzLmVsZW1lbnRzO2dbMF09MiplLyhiLWEpO2dbNF09MDtnWzhdPShiK2EpLyhiLWEpO2dbMTJdPTA7Z1sxXT0wO2dbNV09MiplLyhkLWMpO2dbOV09KGQrYykvKGQtYyk7Z1sxM109MDtnWzJdPTA7Z1s2XT0wO2dbMTBdPS0oZitlKS8oZi1lKTtnWzE0XT0tMipmKmUvKGYtZSk7Z1szXT0wO2dbN109MDtnWzExXT0tMTtnWzE1XT0wO3JldHVybiB0aGlzfSxtYWtlUGVyc3BlY3RpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7YT1jKk1hdGgudGFuKFRIUkVFLk1hdGguREVHMlJBRCphKi41KTt2YXIgZT1cbi1hO3JldHVybiB0aGlzLm1ha2VGcnVzdHVtKGUqYixhKmIsZSxhLGMsZCl9LG1ha2VPcnRob2dyYXBoaWM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPXRoaXMuZWxlbWVudHMsaD0xLyhiLWEpLGs9MS8oYy1kKSxsPTEvKGYtZSk7Z1swXT0yKmg7Z1s0XT0wO2dbOF09MDtnWzEyXT0tKChiK2EpKmgpO2dbMV09MDtnWzVdPTIqaztnWzldPTA7Z1sxM109LSgoYytkKSprKTtnWzJdPTA7Z1s2XT0wO2dbMTBdPS0yKmw7Z1sxNF09LSgoZitlKSpsKTtnWzNdPTA7Z1s3XT0wO2dbMTFdPTA7Z1sxNV09MTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YT1hLmVsZW1lbnRzO2Zvcih2YXIgYz0wOzE2PmM7YysrKWlmKGJbY10hPT1hW2NdKXJldHVybiExO3JldHVybiEwfSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSl7dGhpcy5lbGVtZW50cy5zZXQoYSk7cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7XG52b2lkIDA9PT1iJiYoYj0wKTt2YXIgYz10aGlzLmVsZW1lbnRzO2FbYl09Y1swXTthW2IrMV09Y1sxXTthW2IrMl09Y1syXTthW2IrM109Y1szXTthW2IrNF09Y1s0XTthW2IrNV09Y1s1XTthW2IrNl09Y1s2XTthW2IrN109Y1s3XTthW2IrOF09Y1s4XTthW2IrOV09Y1s5XTthW2IrMTBdPWNbMTBdO2FbYisxMV09Y1sxMV07YVtiKzEyXT1jWzEyXTthW2IrMTNdPWNbMTNdO2FbYisxNF09Y1sxNF07YVtiKzE1XT1jWzE1XTtyZXR1cm4gYX19O1RIUkVFLlJheT1mdW5jdGlvbihhLGIpe3RoaXMub3JpZ2luPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLmRpcmVjdGlvbj12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlZlY3RvcjN9O1xuVEhSRUUuUmF5LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuUmF5LHNldDpmdW5jdGlvbihhLGIpe3RoaXMub3JpZ2luLmNvcHkoYSk7dGhpcy5kaXJlY3Rpb24uY29weShiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5vcmlnaW4uY29weShhLm9yaWdpbik7dGhpcy5kaXJlY3Rpb24uY29weShhLmRpcmVjdGlvbik7cmV0dXJuIHRoaXN9LGF0OmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IzKS5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy5vcmlnaW4pfSxsb29rQXQ6ZnVuY3Rpb24oYSl7dGhpcy5kaXJlY3Rpb24uY29weShhKS5zdWIodGhpcy5vcmlnaW4pLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzfSxyZWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7dGhpcy5vcmlnaW4uY29weSh0aGlzLmF0KGIsXG5hKSk7cmV0dXJuIHRoaXN9fSgpLGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxuZXcgVEhSRUUuVmVjdG9yMztjLnN1YlZlY3RvcnMoYSx0aGlzLm9yaWdpbik7dmFyIGQ9Yy5kb3QodGhpcy5kaXJlY3Rpb24pO3JldHVybiAwPmQ/Yy5jb3B5KHRoaXMub3JpZ2luKTpjLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGQpLmFkZCh0aGlzLm9yaWdpbil9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VTcVRvUG9pbnQoYSkpfSxkaXN0YW5jZVNxVG9Qb2ludDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1hLnN1YlZlY3RvcnMoYix0aGlzLm9yaWdpbikuZG90KHRoaXMuZGlyZWN0aW9uKTtpZigwPmMpcmV0dXJuIHRoaXMub3JpZ2luLmRpc3RhbmNlVG9TcXVhcmVkKGIpO2EuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoYykuYWRkKHRoaXMub3JpZ2luKTtcbnJldHVybiBhLmRpc3RhbmNlVG9TcXVhcmVkKGIpfX0oKSxkaXN0YW5jZVNxVG9TZWdtZW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMyxjPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihkLGUsZixnKXthLmNvcHkoZCkuYWRkKGUpLm11bHRpcGx5U2NhbGFyKC41KTtiLmNvcHkoZSkuc3ViKGQpLm5vcm1hbGl6ZSgpO2MuY29weSh0aGlzLm9yaWdpbikuc3ViKGEpO3ZhciBoPS41KmQuZGlzdGFuY2VUbyhlKSxrPS10aGlzLmRpcmVjdGlvbi5kb3QoYiksbD1jLmRvdCh0aGlzLmRpcmVjdGlvbiksbT0tYy5kb3QoYikscD1jLmxlbmd0aFNxKCksbj1NYXRoLmFicygxLWsqaykscTswPG4/KGQ9ayptLWwsZT1rKmwtbSxxPWgqbiwwPD1kP2U+PS1xP2U8PXE/KGg9MS9uLGQqPWgsZSo9aCxrPWQqKGQrayplKzIqbCkrZSooaypkK2UrMiptKStwKTooZT1oLGQ9TWF0aC5tYXgoMCwtKGsqZStsKSksaz0tZCpkK2UqKGUrMipcbm0pK3ApOihlPS1oLGQ9TWF0aC5tYXgoMCwtKGsqZStsKSksaz0tZCpkK2UqKGUrMiptKStwKTplPD0tcT8oZD1NYXRoLm1heCgwLC0oLWsqaCtsKSksZT0wPGQ/LWg6TWF0aC5taW4oTWF0aC5tYXgoLWgsLW0pLGgpLGs9LWQqZCtlKihlKzIqbSkrcCk6ZTw9cT8oZD0wLGU9TWF0aC5taW4oTWF0aC5tYXgoLWgsLW0pLGgpLGs9ZSooZSsyKm0pK3ApOihkPU1hdGgubWF4KDAsLShrKmgrbCkpLGU9MDxkP2g6TWF0aC5taW4oTWF0aC5tYXgoLWgsLW0pLGgpLGs9LWQqZCtlKihlKzIqbSkrcCkpOihlPTA8az8taDpoLGQ9TWF0aC5tYXgoMCwtKGsqZStsKSksaz0tZCpkK2UqKGUrMiptKStwKTtmJiZmLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGQpLmFkZCh0aGlzLm9yaWdpbik7ZyYmZy5jb3B5KGIpLm11bHRpcGx5U2NhbGFyKGUpLmFkZChhKTtyZXR1cm4ga319KCksaW50ZXJzZWN0U3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsXG5jKXthLnN1YlZlY3RvcnMoYi5jZW50ZXIsdGhpcy5vcmlnaW4pO3ZhciBkPWEuZG90KHRoaXMuZGlyZWN0aW9uKSxlPWEuZG90KGEpLWQqZCxmPWIucmFkaXVzKmIucmFkaXVzO2lmKGU+ZilyZXR1cm4gbnVsbDtmPU1hdGguc3FydChmLWUpO2U9ZC1mO2QrPWY7cmV0dXJuIDA+ZSYmMD5kP251bGw6MD5lP3RoaXMuYXQoZCxjKTp0aGlzLmF0KGUsYyl9fSgpLGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KGEuY2VudGVyKTw9YS5yYWRpdXN9LGRpc3RhbmNlVG9QbGFuZTpmdW5jdGlvbihhKXt2YXIgYj1hLm5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKDA9PT1iKXJldHVybiAwPT09YS5kaXN0YW5jZVRvUG9pbnQodGhpcy5vcmlnaW4pPzA6bnVsbDthPS0odGhpcy5vcmlnaW4uZG90KGEubm9ybWFsKSthLmNvbnN0YW50KS9iO3JldHVybiAwPD1hP2E6bnVsbH0saW50ZXJzZWN0UGxhbmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1cbnRoaXMuZGlzdGFuY2VUb1BsYW5lKGEpO3JldHVybiBudWxsPT09Yz9udWxsOnRoaXMuYXQoYyxiKX0saW50ZXJzZWN0c1BsYW5lOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzdGFuY2VUb1BvaW50KHRoaXMub3JpZ2luKTtyZXR1cm4gMD09PWJ8fDA+YS5ub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSpiPyEwOiExfSxpbnRlcnNlY3RCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnO2Q9MS90aGlzLmRpcmVjdGlvbi54O2Y9MS90aGlzLmRpcmVjdGlvbi55O2c9MS90aGlzLmRpcmVjdGlvbi56O3ZhciBoPXRoaXMub3JpZ2luOzA8PWQ/KGM9KGEubWluLngtaC54KSpkLGQqPWEubWF4LngtaC54KTooYz0oYS5tYXgueC1oLngpKmQsZCo9YS5taW4ueC1oLngpOzA8PWY/KGU9KGEubWluLnktaC55KSpmLGYqPWEubWF4LnktaC55KTooZT0oYS5tYXgueS1oLnkpKmYsZio9YS5taW4ueS1oLnkpO2lmKGM+Znx8ZT5kKXJldHVybiBudWxsO2lmKGU+Y3x8YyE9PWMpYz1lO2lmKGY8ZHx8ZCE9PVxuZClkPWY7MDw9Zz8oZT0oYS5taW4uei1oLnopKmcsZyo9YS5tYXguei1oLnopOihlPShhLm1heC56LWgueikqZyxnKj1hLm1pbi56LWgueik7aWYoYz5nfHxlPmQpcmV0dXJuIG51bGw7aWYoZT5jfHxjIT09YyljPWU7aWYoZzxkfHxkIT09ZClkPWc7cmV0dXJuIDA+ZD9udWxsOnRoaXMuYXQoMDw9Yz9jOmQsYil9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIG51bGwhPT10aGlzLmludGVyc2VjdEJveChiLGEpfX0oKSxpbnRlcnNlY3RUcmlhbmdsZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuVmVjdG9yMyxkPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihlLGYsZyxoLGspe2Iuc3ViVmVjdG9ycyhmLGUpO2Muc3ViVmVjdG9ycyhnLGUpO2QuY3Jvc3NWZWN0b3JzKGIsYyk7Zj10aGlzLmRpcmVjdGlvbi5kb3QoZCk7XG5pZigwPGYpe2lmKGgpcmV0dXJuIG51bGw7aD0xfWVsc2UgaWYoMD5mKWg9LTEsZj0tZjtlbHNlIHJldHVybiBudWxsO2Euc3ViVmVjdG9ycyh0aGlzLm9yaWdpbixlKTtlPWgqdGhpcy5kaXJlY3Rpb24uZG90KGMuY3Jvc3NWZWN0b3JzKGEsYykpO2lmKDA+ZSlyZXR1cm4gbnVsbDtnPWgqdGhpcy5kaXJlY3Rpb24uZG90KGIuY3Jvc3MoYSkpO2lmKDA+Z3x8ZStnPmYpcmV0dXJuIG51bGw7ZT0taCphLmRvdChkKTtyZXR1cm4gMD5lP251bGw6dGhpcy5hdChlL2Ysayl9fSgpLGFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt0aGlzLmRpcmVjdGlvbi5hZGQodGhpcy5vcmlnaW4pLmFwcGx5TWF0cml4NChhKTt0aGlzLm9yaWdpbi5hcHBseU1hdHJpeDQoYSk7dGhpcy5kaXJlY3Rpb24uc3ViKHRoaXMub3JpZ2luKTt0aGlzLmRpcmVjdGlvbi5ub3JtYWxpemUoKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLm9yaWdpbi5lcXVhbHModGhpcy5vcmlnaW4pJiZhLmRpcmVjdGlvbi5lcXVhbHModGhpcy5kaXJlY3Rpb24pfX07XG5USFJFRS5TcGhlcmU9ZnVuY3Rpb24oYSxiKXt0aGlzLmNlbnRlcj12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5yYWRpdXM9dm9pZCAwIT09Yj9iOjB9O1xuVEhSRUUuU3BoZXJlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuU3BoZXJlLHNldDpmdW5jdGlvbihhLGIpe3RoaXMuY2VudGVyLmNvcHkoYSk7dGhpcy5yYWRpdXM9YjtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50czpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5Cb3gzO3JldHVybiBmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMuY2VudGVyO3ZvaWQgMCE9PWM/ZC5jb3B5KGMpOmEuc2V0RnJvbVBvaW50cyhiKS5jZW50ZXIoZCk7Zm9yKHZhciBlPTAsZj0wLGc9Yi5sZW5ndGg7ZjxnO2YrKyllPU1hdGgubWF4KGUsZC5kaXN0YW5jZVRvU3F1YXJlZChiW2ZdKSk7dGhpcy5yYWRpdXM9TWF0aC5zcXJ0KGUpO3JldHVybiB0aGlzfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLmNlbnRlci5jb3B5KGEuY2VudGVyKTt0aGlzLnJhZGl1cz1hLnJhZGl1cztyZXR1cm4gdGhpc30sXG5lbXB0eTpmdW5jdGlvbigpe3JldHVybiAwPj10aGlzLnJhZGl1c30sY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmNlbnRlcik8PXRoaXMucmFkaXVzKnRoaXMucmFkaXVzfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzdGFuY2VUbyh0aGlzLmNlbnRlciktdGhpcy5yYWRpdXN9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yYWRpdXMrYS5yYWRpdXM7cmV0dXJuIGEuY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuY2VudGVyKTw9YipifSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKGEpe3JldHVybiBhLmludGVyc2VjdHNTcGhlcmUodGhpcyl9LGludGVyc2VjdHNQbGFuZTpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5hYnModGhpcy5jZW50ZXIuZG90KGEubm9ybWFsKS1hLmNvbnN0YW50KTw9dGhpcy5yYWRpdXN9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1cbnRoaXMuY2VudGVyLmRpc3RhbmNlVG9TcXVhcmVkKGEpLGQ9Ynx8bmV3IFRIUkVFLlZlY3RvcjM7ZC5jb3B5KGEpO2M+dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXMmJihkLnN1Yih0aGlzLmNlbnRlcikubm9ybWFsaXplKCksZC5tdWx0aXBseVNjYWxhcih0aGlzLnJhZGl1cykuYWRkKHRoaXMuY2VudGVyKSk7cmV0dXJuIGR9LGdldEJvdW5kaW5nQm94OmZ1bmN0aW9uKGEpe2E9YXx8bmV3IFRIUkVFLkJveDM7YS5zZXQodGhpcy5jZW50ZXIsdGhpcy5jZW50ZXIpO2EuZXhwYW5kQnlTY2FsYXIodGhpcy5yYWRpdXMpO3JldHVybiBhfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuYXBwbHlNYXRyaXg0KGEpO3RoaXMucmFkaXVzKj1hLmdldE1heFNjYWxlT25BeGlzKCk7cmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLmNlbnRlci5hZGQoYSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5jZW50ZXIuZXF1YWxzKHRoaXMuY2VudGVyKSYmXG5hLnJhZGl1cz09PXRoaXMucmFkaXVzfX07VEhSRUUuRnJ1c3R1bT1mdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5wbGFuZXM9W3ZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuUGxhbmUsdm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5QbGFuZSx2b2lkIDAhPT1jP2M6bmV3IFRIUkVFLlBsYW5lLHZvaWQgMCE9PWQ/ZDpuZXcgVEhSRUUuUGxhbmUsdm9pZCAwIT09ZT9lOm5ldyBUSFJFRS5QbGFuZSx2b2lkIDAhPT1mP2Y6bmV3IFRIUkVFLlBsYW5lXX07XG5USFJFRS5GcnVzdHVtLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuRnJ1c3R1bSxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPXRoaXMucGxhbmVzO2dbMF0uY29weShhKTtnWzFdLmNvcHkoYik7Z1syXS5jb3B5KGMpO2dbM10uY29weShkKTtnWzRdLmNvcHkoZSk7Z1s1XS5jb3B5KGYpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wbGFuZXMsYz0wOzY+YztjKyspYltjXS5jb3B5KGEucGxhbmVzW2NdKTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBsYW5lcyxjPWEuZWxlbWVudHM7YT1jWzBdO3ZhciBkPWNbMV0sZT1jWzJdLGY9Y1szXSxnPWNbNF0saD1jWzVdLGs9Y1s2XSxsPWNbN10sbT1jWzhdLHA9Y1s5XSxuPWNbMTBdLHE9Y1sxMV0scj1jWzEyXSxzPWNbMTNdLHY9Y1sxNF0sXG5jPWNbMTVdO2JbMF0uc2V0Q29tcG9uZW50cyhmLWEsbC1nLHEtbSxjLXIpLm5vcm1hbGl6ZSgpO2JbMV0uc2V0Q29tcG9uZW50cyhmK2EsbCtnLHErbSxjK3IpLm5vcm1hbGl6ZSgpO2JbMl0uc2V0Q29tcG9uZW50cyhmK2QsbCtoLHErcCxjK3MpLm5vcm1hbGl6ZSgpO2JbM10uc2V0Q29tcG9uZW50cyhmLWQsbC1oLHEtcCxjLXMpLm5vcm1hbGl6ZSgpO2JbNF0uc2V0Q29tcG9uZW50cyhmLWUsbC1rLHEtbixjLXYpLm5vcm1hbGl6ZSgpO2JbNV0uc2V0Q29tcG9uZW50cyhmK2UsbCtrLHErbixjK3YpLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzfSxpbnRlcnNlY3RzT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlNwaGVyZTtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5nZW9tZXRyeTtudWxsPT09Yy5ib3VuZGluZ1NwaGVyZSYmYy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTthLmNvcHkoYy5ib3VuZGluZ1NwaGVyZSkuYXBwbHlNYXRyaXg0KGIubWF0cml4V29ybGQpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoYSl9fSgpLFxuaW50ZXJzZWN0c1Nwcml0ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5TcGhlcmU7cmV0dXJuIGZ1bmN0aW9uKGIpe2EuY2VudGVyLnNldCgwLDAsMCk7YS5yYWRpdXM9LjcwNzEwNjc4MTE4NjU0NzY7YS5hcHBseU1hdHJpeDQoYi5tYXRyaXhXb3JsZCk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShhKX19KCksaW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBsYW5lcyxjPWEuY2VudGVyO2E9LWEucmFkaXVzO2Zvcih2YXIgZD0wOzY+ZDtkKyspaWYoYltkXS5kaXN0YW5jZVRvUG9pbnQoYyk8YSlyZXR1cm4hMTtyZXR1cm4hMH0saW50ZXJzZWN0c0JveDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD10aGlzLnBsYW5lcyxlPTA7Nj5lO2UrKyl7dmFyIGY9ZFtlXTthLng9MDxmLm5vcm1hbC54P2MubWluLng6Yy5tYXgueDtiLng9MDxmLm5vcm1hbC54P1xuYy5tYXgueDpjLm1pbi54O2EueT0wPGYubm9ybWFsLnk/Yy5taW4ueTpjLm1heC55O2IueT0wPGYubm9ybWFsLnk/Yy5tYXgueTpjLm1pbi55O2Euej0wPGYubm9ybWFsLno/Yy5taW4uejpjLm1heC56O2Iuej0wPGYubm9ybWFsLno/Yy5tYXguejpjLm1pbi56O3ZhciBnPWYuZGlzdGFuY2VUb1BvaW50KGEpLGY9Zi5kaXN0YW5jZVRvUG9pbnQoYik7aWYoMD5nJiYwPmYpcmV0dXJuITF9cmV0dXJuITB9fSgpLGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucGxhbmVzLGM9MDs2PmM7YysrKWlmKDA+YltjXS5kaXN0YW5jZVRvUG9pbnQoYSkpcmV0dXJuITE7cmV0dXJuITB9fTtUSFJFRS5QbGFuZT1mdW5jdGlvbihhLGIpe3RoaXMubm9ybWFsPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuVmVjdG9yMygxLDAsMCk7dGhpcy5jb25zdGFudD12b2lkIDAhPT1iP2I6MH07XG5USFJFRS5QbGFuZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlBsYW5lLHNldDpmdW5jdGlvbihhLGIpe3RoaXMubm9ybWFsLmNvcHkoYSk7dGhpcy5jb25zdGFudD1iO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnRzOmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMubm9ybWFsLnNldChhLGIsYyk7dGhpcy5jb25zdGFudD1kO3JldHVybiB0aGlzfSxzZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludDpmdW5jdGlvbihhLGIpe3RoaXMubm9ybWFsLmNvcHkoYSk7dGhpcy5jb25zdGFudD0tYi5kb3QodGhpcy5ub3JtYWwpO3JldHVybiB0aGlzfSxzZXRGcm9tQ29wbGFuYXJQb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihjLGQsZSl7ZD1hLnN1YlZlY3RvcnMoZSxkKS5jcm9zcyhiLnN1YlZlY3RvcnMoYyxkKSkubm9ybWFsaXplKCk7dGhpcy5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludChkLFxuYyk7cmV0dXJuIHRoaXN9fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubm9ybWFsLmNvcHkoYS5ub3JtYWwpO3RoaXMuY29uc3RhbnQ9YS5jb25zdGFudDtyZXR1cm4gdGhpc30sbm9ybWFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9MS90aGlzLm5vcm1hbC5sZW5ndGgoKTt0aGlzLm5vcm1hbC5tdWx0aXBseVNjYWxhcihhKTt0aGlzLmNvbnN0YW50Kj1hO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLmNvbnN0YW50Kj0tMTt0aGlzLm5vcm1hbC5uZWdhdGUoKTtyZXR1cm4gdGhpc30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vcm1hbC5kb3QoYSkrdGhpcy5jb25zdGFudH0sZGlzdGFuY2VUb1NwaGVyZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5jZW50ZXIpLWEucmFkaXVzfSxwcm9qZWN0UG9pbnQ6ZnVuY3Rpb24oYSxcbmIpe3JldHVybiB0aGlzLm9ydGhvUG9pbnQoYSxiKS5zdWIoYSkubmVnYXRlKCl9LG9ydGhvUG9pbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmRpc3RhbmNlVG9Qb2ludChhKTtyZXR1cm4oYnx8bmV3IFRIUkVFLlZlY3RvcjMpLmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKGMpfSxpbnRlcnNlY3RMaW5lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9Y3x8bmV3IFRIUkVFLlZlY3RvcjMsZT1iLmRlbHRhKGEpLGY9dGhpcy5ub3JtYWwuZG90KGUpO2lmKDA9PT1mKXtpZigwPT09dGhpcy5kaXN0YW5jZVRvUG9pbnQoYi5zdGFydCkpcmV0dXJuIGQuY29weShiLnN0YXJ0KX1lbHNlIHJldHVybiBmPS0oYi5zdGFydC5kb3QodGhpcy5ub3JtYWwpK3RoaXMuY29uc3RhbnQpL2YsMD5mfHwxPGY/dm9pZCAwOmQuY29weShlKS5tdWx0aXBseVNjYWxhcihmKS5hZGQoYi5zdGFydCl9fSgpLGludGVyc2VjdHNMaW5lOmZ1bmN0aW9uKGEpe3ZhciBiPVxudGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5zdGFydCk7YT10aGlzLmRpc3RhbmNlVG9Qb2ludChhLmVuZCk7cmV0dXJuIDA+YiYmMDxhfHwwPmEmJjA8Yn0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnRlcnNlY3RzUGxhbmUodGhpcyl9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW50ZXJzZWN0c1BsYW5lKHRoaXMpfSxjb3BsYW5hclBvaW50OmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuY29weSh0aGlzLm5vcm1hbCkubXVsdGlwbHlTY2FsYXIoLXRoaXMuY29uc3RhbnQpfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5NYXRyaXgzO3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPXRoaXMuY29wbGFuYXJQb2ludChhKS5hcHBseU1hdHJpeDQoYyksZj1kfHxiLmdldE5vcm1hbE1hdHJpeChjKSxmPXRoaXMubm9ybWFsLmFwcGx5TWF0cml4MyhmKS5ub3JtYWxpemUoKTtcbnRoaXMuY29uc3RhbnQ9LWUuZG90KGYpO3JldHVybiB0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5jb25zdGFudC09YS5kb3QodGhpcy5ub3JtYWwpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9ybWFsLmVxdWFscyh0aGlzLm5vcm1hbCkmJmEuY29uc3RhbnQ9PT10aGlzLmNvbnN0YW50fX07VEhSRUUuU3BoZXJpY2FsPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnJhZGl1cz12b2lkIDAhPT1hP2E6MTt0aGlzLnBoaT12b2lkIDAhPT1iP2I6MDt0aGlzLnRoZXRhPXZvaWQgMCE9PWM/YzowO3JldHVybiB0aGlzfTtcblRIUkVFLlNwaGVyaWNhbC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlNwaGVyaWNhbCxzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMucmFkaXVzPWE7dGhpcy5waGk9Yjt0aGlzLnRoZXRhPWM7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMucmFkaXVzLmNvcHkoYS5yYWRpdXMpO3RoaXMucGhpLmNvcHkoYS5waGkpO3RoaXMudGhldGEuY29weShhLnRoZXRhKTtyZXR1cm4gdGhpc30sbWFrZVNhZmU6ZnVuY3Rpb24oKXt0aGlzLnBoaT1NYXRoLm1heCgxRS02LE1hdGgubWluKE1hdGguUEktMUUtNix0aGlzLnBoaSkpO3JldHVybiB0aGlzfSxzZXRGcm9tVmVjdG9yMzpmdW5jdGlvbihhKXt0aGlzLnJhZGl1cz1hLmxlbmd0aCgpOzA9PT10aGlzLnJhZGl1cz90aGlzLnBoaT10aGlzLnRoZXRhPTA6KHRoaXMudGhldGE9TWF0aC5hdGFuMihhLngsYS56KSx0aGlzLnBoaT1cbk1hdGguYWNvcyhUSFJFRS5NYXRoLmNsYW1wKGEueS90aGlzLnJhZGl1cywtMSwxKSkpO3JldHVybiB0aGlzfX07XG5USFJFRS5NYXRoPXtERUcyUkFEOk1hdGguUEkvMTgwLFJBRDJERUc6MTgwL01hdGguUEksZ2VuZXJhdGVVVUlEOmZ1bmN0aW9uKCl7dmFyIGE9XCIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiLnNwbGl0KFwiXCIpLGI9QXJyYXkoMzYpLGM9MCxkO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgZT0wOzM2PmU7ZSsrKTg9PT1lfHwxMz09PWV8fDE4PT09ZXx8MjM9PT1lP2JbZV09XCItXCI6MTQ9PT1lP2JbZV09XCI0XCI6KDI+PWMmJihjPTMzNTU0NDMyKzE2Nzc3MjE2Kk1hdGgucmFuZG9tKCl8MCksZD1jJjE1LGM+Pj00LGJbZV09YVsxOT09PWU/ZCYzfDg6ZF0pO3JldHVybiBiLmpvaW4oXCJcIil9fSgpLGNsYW1wOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTWF0aC5tYXgoYixNYXRoLm1pbihjLGEpKX0sZXVjbGlkZWFuTW9kdWxvOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGElYitiKSVifSxtYXBMaW5lYXI6ZnVuY3Rpb24oYSxiLGMsXG5kLGUpe3JldHVybiBkKyhhLWIpKihlLWQpLyhjLWIpfSxzbW9vdGhzdGVwOmZ1bmN0aW9uKGEsYixjKXtpZihhPD1iKXJldHVybiAwO2lmKGE+PWMpcmV0dXJuIDE7YT0oYS1iKS8oYy1iKTtyZXR1cm4gYSphKigzLTIqYSl9LHNtb290aGVyc3RlcDpmdW5jdGlvbihhLGIsYyl7aWYoYTw9YilyZXR1cm4gMDtpZihhPj1jKXJldHVybiAxO2E9KGEtYikvKGMtYik7cmV0dXJuIGEqYSphKihhKig2KmEtMTUpKzEwKX0scmFuZG9tMTY6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRoLnJhbmRvbTE2KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIE1hdGgucmFuZG9tKCkgaW5zdGVhZC5cIik7cmV0dXJuIE1hdGgucmFuZG9tKCl9LHJhbmRJbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGItYSsxKSl9LHJhbmRGbG9hdDpmdW5jdGlvbihhLGIpe3JldHVybiBhK01hdGgucmFuZG9tKCkqKGItYSl9LHJhbmRGbG9hdFNwcmVhZDpmdW5jdGlvbihhKXtyZXR1cm4gYSpcbiguNS1NYXRoLnJhbmRvbSgpKX0sZGVnVG9SYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEqVEhSRUUuTWF0aC5ERUcyUkFEfSxyYWRUb0RlZzpmdW5jdGlvbihhKXtyZXR1cm4gYSpUSFJFRS5NYXRoLlJBRDJERUd9LGlzUG93ZXJPZlR3bzpmdW5jdGlvbihhKXtyZXR1cm4gMD09PShhJmEtMSkmJjAhPT1hfSxuZWFyZXN0UG93ZXJPZlR3bzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5wb3coMixNYXRoLnJvdW5kKE1hdGgubG9nKGEpL01hdGguTE4yKSl9LG5leHRQb3dlck9mVHdvOmZ1bmN0aW9uKGEpe2EtLTthfD1hPj4xO2F8PWE+PjI7YXw9YT4+NDthfD1hPj44O2F8PWE+PjE2O2ErKztyZXR1cm4gYX19O1xuVEhSRUUuU3BsaW5lPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMsZCxlLGYsZyl7YT0uNSooYy1hKTtkPS41KihkLWIpO3JldHVybigyKihiLWMpK2ErZCkqZysoLTMqKGItYyktMiphLWQpKmYrYSplK2J9dGhpcy5wb2ludHM9YTt2YXIgYz1bXSxkPXt4OjAseTowLHo6MH0sZSxmLGcsaCxrLGwsbSxwLG47dGhpcy5pbml0RnJvbUFycmF5PWZ1bmN0aW9uKGEpe3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXRoaXMucG9pbnRzW2JdPXt4OmFbYl1bMF0seTphW2JdWzFdLHo6YVtiXVsyXX19O3RoaXMuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7ZT0odGhpcy5wb2ludHMubGVuZ3RoLTEpKmE7Zj1NYXRoLmZsb29yKGUpO2c9ZS1mO2NbMF09MD09PWY/ZjpmLTE7Y1sxXT1mO2NbMl09Zj50aGlzLnBvaW50cy5sZW5ndGgtMj90aGlzLnBvaW50cy5sZW5ndGgtMTpmKzE7Y1szXT1mPnRoaXMucG9pbnRzLmxlbmd0aC0zP3RoaXMucG9pbnRzLmxlbmd0aC0xOmYrXG4yO2w9dGhpcy5wb2ludHNbY1swXV07bT10aGlzLnBvaW50c1tjWzFdXTtwPXRoaXMucG9pbnRzW2NbMl1dO249dGhpcy5wb2ludHNbY1szXV07aD1nKmc7az1nKmg7ZC54PWIobC54LG0ueCxwLngsbi54LGcsaCxrKTtkLnk9YihsLnksbS55LHAueSxuLnksZyxoLGspO2Quej1iKGwueixtLnoscC56LG4ueixnLGgsayk7cmV0dXJuIGR9O3RoaXMuZ2V0Q29udHJvbFBvaW50c0FycmF5PWZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMucG9pbnRzLmxlbmd0aCxkPVtdO2ZvcihhPTA7YTxjO2ErKyliPXRoaXMucG9pbnRzW2FdLGRbYV09W2IueCxiLnksYi56XTtyZXR1cm4gZH07dGhpcy5nZXRMZW5ndGg9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9Yj1iPTAsZj1uZXcgVEhSRUUuVmVjdG9yMyxnPW5ldyBUSFJFRS5WZWN0b3IzLGg9W10saz0wO2hbMF09MDthfHwoYT0xMDApO2M9dGhpcy5wb2ludHMubGVuZ3RoKmE7Zi5jb3B5KHRoaXMucG9pbnRzWzBdKTtmb3IoYT0xO2E8YzthKyspYj1cbmEvYyxkPXRoaXMuZ2V0UG9pbnQoYiksZy5jb3B5KGQpLGsrPWcuZGlzdGFuY2VUbyhmKSxmLmNvcHkoZCksYio9dGhpcy5wb2ludHMubGVuZ3RoLTEsYj1NYXRoLmZsb29yKGIpLGIhPT1lJiYoaFtiXT1rLGU9Yik7aFtoLmxlbmd0aF09aztyZXR1cm57Y2h1bmtzOmgsdG90YWw6a319O3RoaXMucmVwYXJhbWV0cml6ZUJ5QXJjTGVuZ3RoPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPVtdLGs9bmV3IFRIUkVFLlZlY3RvcjMsbD10aGlzLmdldExlbmd0aCgpO2gucHVzaChrLmNvcHkodGhpcy5wb2ludHNbMF0pLmNsb25lKCkpO2ZvcihiPTE7Yjx0aGlzLnBvaW50cy5sZW5ndGg7YisrKXtjPWwuY2h1bmtzW2JdLWwuY2h1bmtzW2ItMV07Zz1NYXRoLmNlaWwoYSpjL2wudG90YWwpO2U9KGItMSkvKHRoaXMucG9pbnRzLmxlbmd0aC0xKTtmPWIvKHRoaXMucG9pbnRzLmxlbmd0aC0xKTtmb3IoYz0xO2M8Zy0xO2MrKylkPWUrMS9nKmMqKGYtZSksZD10aGlzLmdldFBvaW50KGQpLFxuaC5wdXNoKGsuY29weShkKS5jbG9uZSgpKTtoLnB1c2goay5jb3B5KHRoaXMucG9pbnRzW2JdKS5jbG9uZSgpKX10aGlzLnBvaW50cz1ofX07VEhSRUUuVHJpYW5nbGU9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYT12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5iPXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLmM9dm9pZCAwIT09Yz9jOm5ldyBUSFJFRS5WZWN0b3IzfTtUSFJFRS5UcmlhbmdsZS5ub3JtYWw9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYixjLGQsZSl7ZT1lfHxuZXcgVEhSRUUuVmVjdG9yMztlLnN1YlZlY3RvcnMoZCxjKTthLnN1YlZlY3RvcnMoYixjKTtlLmNyb3NzKGEpO2I9ZS5sZW5ndGhTcSgpO3JldHVybiAwPGI/ZS5tdWx0aXBseVNjYWxhcigxL01hdGguc3FydChiKSk6ZS5zZXQoMCwwLDApfX0oKTtcblRIUkVFLlRyaWFuZ2xlLmJhcnljb29yZEZyb21Qb2ludD1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyxoKXthLnN1YlZlY3RvcnMoZyxlKTtiLnN1YlZlY3RvcnMoZixlKTtjLnN1YlZlY3RvcnMoZCxlKTtkPWEuZG90KGEpO2U9YS5kb3QoYik7Zj1hLmRvdChjKTt2YXIgaz1iLmRvdChiKTtnPWIuZG90KGMpO3ZhciBsPWQqay1lKmU7aD1ofHxuZXcgVEhSRUUuVmVjdG9yMztpZigwPT09bClyZXR1cm4gaC5zZXQoLTIsLTEsLTEpO2w9MS9sO2s9KGsqZi1lKmcpKmw7ZD0oZCpnLWUqZikqbDtyZXR1cm4gaC5zZXQoMS1rLWQsZCxrKX19KCk7XG5USFJFRS5UcmlhbmdsZS5jb250YWluc1BvaW50PWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkLGUpe2I9VEhSRUUuVHJpYW5nbGUuYmFyeWNvb3JkRnJvbVBvaW50KGIsYyxkLGUsYSk7cmV0dXJuIDA8PWIueCYmMDw9Yi55JiYxPj1iLngrYi55fX0oKTtcblRIUkVFLlRyaWFuZ2xlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVHJpYW5nbGUsc2V0OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmEuY29weShhKTt0aGlzLmIuY29weShiKTt0aGlzLmMuY29weShjKTtyZXR1cm4gdGhpc30sc2V0RnJvbVBvaW50c0FuZEluZGljZXM6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5hLmNvcHkoYVtiXSk7dGhpcy5iLmNvcHkoYVtjXSk7dGhpcy5jLmNvcHkoYVtkXSk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuYS5jb3B5KGEuYSk7dGhpcy5iLmNvcHkoYS5iKTt0aGlzLmMuY29weShhLmMpO3JldHVybiB0aGlzfSxhcmVhOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXthLnN1YlZlY3RvcnModGhpcy5jLHRoaXMuYik7Yi5zdWJWZWN0b3JzKHRoaXMuYSxcbnRoaXMuYik7cmV0dXJuLjUqYS5jcm9zcyhiKS5sZW5ndGgoKX19KCksbWlkcG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IzKS5hZGRWZWN0b3JzKHRoaXMuYSx0aGlzLmIpLmFkZCh0aGlzLmMpLm11bHRpcGx5U2NhbGFyKDEvMyl9LG5vcm1hbDpmdW5jdGlvbihhKXtyZXR1cm4gVEhSRUUuVHJpYW5nbGUubm9ybWFsKHRoaXMuYSx0aGlzLmIsdGhpcy5jLGEpfSxwbGFuZTpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlBsYW5lKS5zZXRGcm9tQ29wbGFuYXJQb2ludHModGhpcy5hLHRoaXMuYix0aGlzLmMpfSxiYXJ5Y29vcmRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVEhSRUUuVHJpYW5nbGUuYmFyeWNvb3JkRnJvbVBvaW50KGEsdGhpcy5hLHRoaXMuYix0aGlzLmMsYil9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFRIUkVFLlRyaWFuZ2xlLmNvbnRhaW5zUG9pbnQoYSx0aGlzLmEsdGhpcy5iLHRoaXMuYyl9LFxuY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbigpe3ZhciBhLGIsYyxkO3JldHVybiBmdW5jdGlvbihlLGYpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5QbGFuZSxiPVtuZXcgVEhSRUUuTGluZTMsbmV3IFRIUkVFLkxpbmUzLG5ldyBUSFJFRS5MaW5lM10sYz1uZXcgVEhSRUUuVmVjdG9yMyxkPW5ldyBUSFJFRS5WZWN0b3IzKTt2YXIgZz1mfHxuZXcgVEhSRUUuVmVjdG9yMyxoPUluZmluaXR5O2Euc2V0RnJvbUNvcGxhbmFyUG9pbnRzKHRoaXMuYSx0aGlzLmIsdGhpcy5jKTthLnByb2plY3RQb2ludChlLGMpO2lmKCEwPT09dGhpcy5jb250YWluc1BvaW50KGMpKWcuY29weShjKTtlbHNle2JbMF0uc2V0KHRoaXMuYSx0aGlzLmIpO2JbMV0uc2V0KHRoaXMuYix0aGlzLmMpO2JbMl0uc2V0KHRoaXMuYyx0aGlzLmEpO2Zvcih2YXIgaz0wO2s8Yi5sZW5ndGg7aysrKXtiW2tdLmNsb3Nlc3RQb2ludFRvUG9pbnQoYywhMCxkKTt2YXIgbD1jLmRpc3RhbmNlVG9TcXVhcmVkKGQpO2w8XG5oJiYoaD1sLGcuY29weShkKSl9fXJldHVybiBnfX0oKSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuYS5lcXVhbHModGhpcy5hKSYmYS5iLmVxdWFscyh0aGlzLmIpJiZhLmMuZXF1YWxzKHRoaXMuYyl9fTtUSFJFRS5JbnRlcnBvbGFudD1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLnBhcmFtZXRlclBvc2l0aW9ucz1hO3RoaXMuX2NhY2hlZEluZGV4PTA7dGhpcy5yZXN1bHRCdWZmZXI9dm9pZCAwIT09ZD9kOm5ldyBiLmNvbnN0cnVjdG9yKGMpO3RoaXMuc2FtcGxlVmFsdWVzPWI7dGhpcy52YWx1ZVNpemU9Y307XG5USFJFRS5JbnRlcnBvbGFudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkludGVycG9sYW50LGV2YWx1YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGFyYW1ldGVyUG9zaXRpb25zLGM9dGhpcy5fY2FjaGVkSW5kZXgsZD1iW2NdLGU9YltjLTFdO2E6e2I6e2M6e2Q6aWYoIShhPGQpKXtmb3IodmFyIGY9YysyOzspe2lmKHZvaWQgMD09PWQpe2lmKGE8ZSlicmVhayBkO3RoaXMuX2NhY2hlZEluZGV4PWM9Yi5sZW5ndGg7cmV0dXJuIHRoaXMuYWZ0ZXJFbmRfKGMtMSxhLGUpfWlmKGM9PT1mKWJyZWFrO2U9ZDtkPWJbKytjXTtpZihhPGQpYnJlYWsgYn1kPWIubGVuZ3RoO2JyZWFrIGN9aWYoYT49ZSlicmVhayBhO2Vsc2V7Zj1iWzFdO2E8ZiYmKGM9MixlPWYpO2ZvcihmPWMtMjs7KXtpZih2b2lkIDA9PT1lKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMuYmVmb3JlU3RhcnRfKDAsYSxkKTtpZihjPT09ZilicmVhaztkPWU7ZT1iWy0tYy0xXTtpZihhPj1lKWJyZWFrIGJ9ZD1cbmM7Yz0wfX1mb3IoO2M8ZDspZT1jK2Q+Pj4xLGE8YltlXT9kPWU6Yz1lKzE7ZD1iW2NdO2U9YltjLTFdO2lmKHZvaWQgMD09PWUpcmV0dXJuIHRoaXMuX2NhY2hlZEluZGV4PTAsdGhpcy5iZWZvcmVTdGFydF8oMCxhLGQpO2lmKHZvaWQgMD09PWQpcmV0dXJuIHRoaXMuX2NhY2hlZEluZGV4PWM9Yi5sZW5ndGgsdGhpcy5hZnRlckVuZF8oYy0xLGUsYSl9dGhpcy5fY2FjaGVkSW5kZXg9Yzt0aGlzLmludGVydmFsQ2hhbmdlZF8oYyxlLGQpfXJldHVybiB0aGlzLmludGVycG9sYXRlXyhjLGUsYSxkKX0sc2V0dGluZ3M6bnVsbCxEZWZhdWx0U2V0dGluZ3NfOnt9LGdldFNldHRpbmdzXzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldHRpbmdzfHx0aGlzLkRlZmF1bHRTZXR0aW5nc199LGNvcHlTYW1wbGVWYWx1ZV86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZXN1bHRCdWZmZXIsYz10aGlzLnNhbXBsZVZhbHVlcyxkPXRoaXMudmFsdWVTaXplO2EqPWQ7Zm9yKHZhciBlPTA7ZSE9PWQ7KytlKWJbZV09XG5jW2ErZV07cmV0dXJuIGJ9LGludGVycG9sYXRlXzpmdW5jdGlvbihhLGIsYyxkKXt0aHJvdyBFcnJvcihcImNhbGwgdG8gYWJzdHJhY3QgbWV0aG9kXCIpO30saW50ZXJ2YWxDaGFuZ2VkXzpmdW5jdGlvbihhLGIsYyl7fX07T2JqZWN0LmFzc2lnbihUSFJFRS5JbnRlcnBvbGFudC5wcm90b3R5cGUse2JlZm9yZVN0YXJ0XzpUSFJFRS5JbnRlcnBvbGFudC5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlXyxhZnRlckVuZF86VEhSRUUuSW50ZXJwb2xhbnQucHJvdG90eXBlLmNvcHlTYW1wbGVWYWx1ZV99KTtUSFJFRS5DdWJpY0ludGVycG9sYW50PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkludGVycG9sYW50LmNhbGwodGhpcyxhLGIsYyxkKTt0aGlzLl9vZmZzZXROZXh0PXRoaXMuX3dlaWdodE5leHQ9dGhpcy5fb2Zmc2V0UHJldj10aGlzLl93ZWlnaHRQcmV2PS0wfTtcblRIUkVFLkN1YmljSW50ZXJwb2xhbnQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5JbnRlcnBvbGFudC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5DdWJpY0ludGVycG9sYW50LERlZmF1bHRTZXR0aW5nc186e2VuZGluZ1N0YXJ0OlRIUkVFLlplcm9DdXJ2YXR1cmVFbmRpbmcsZW5kaW5nRW5kOlRIUkVFLlplcm9DdXJ2YXR1cmVFbmRpbmd9LGludGVydmFsQ2hhbmdlZF86ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucGFyYW1ldGVyUG9zaXRpb25zLGU9YS0yLGY9YSsxLGc9ZFtlXSxoPWRbZl07aWYodm9pZCAwPT09Zylzd2l0Y2godGhpcy5nZXRTZXR0aW5nc18oKS5lbmRpbmdTdGFydCl7Y2FzZSBUSFJFRS5aZXJvU2xvcGVFbmRpbmc6ZT1hO2c9MipiLWM7YnJlYWs7Y2FzZSBUSFJFRS5XcmFwQXJvdW5kRW5kaW5nOmU9ZC5sZW5ndGgtMjtnPWIrZFtlXS1kW2UrMV07YnJlYWs7ZGVmYXVsdDplPWEsZz1jfWlmKHZvaWQgMD09PWgpc3dpdGNoKHRoaXMuZ2V0U2V0dGluZ3NfKCkuZW5kaW5nRW5kKXtjYXNlIFRIUkVFLlplcm9TbG9wZUVuZGluZzpmPVxuYTtoPTIqYy1iO2JyZWFrO2Nhc2UgVEhSRUUuV3JhcEFyb3VuZEVuZGluZzpmPTE7aD1jK2RbMV0tZFswXTticmVhaztkZWZhdWx0OmY9YS0xLGg9Yn1hPS41KihjLWIpO2Q9dGhpcy52YWx1ZVNpemU7dGhpcy5fd2VpZ2h0UHJldj1hLyhiLWcpO3RoaXMuX3dlaWdodE5leHQ9YS8oaC1jKTt0aGlzLl9vZmZzZXRQcmV2PWUqZDt0aGlzLl9vZmZzZXROZXh0PWYqZH0saW50ZXJwb2xhdGVfOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMucmVzdWx0QnVmZmVyLGY9dGhpcy5zYW1wbGVWYWx1ZXMsZz10aGlzLnZhbHVlU2l6ZTthKj1nO3ZhciBoPWEtZyxrPXRoaXMuX29mZnNldFByZXYsbD10aGlzLl9vZmZzZXROZXh0LG09dGhpcy5fd2VpZ2h0UHJldixwPXRoaXMuX3dlaWdodE5leHQsbj0oYy1iKS8oZC1iKTtjPW4qbjtkPWMqbjtiPS1tKmQrMiptKmMtbSpuO209KDErbSkqZCsoLTEuNS0yKm0pKmMrKC0uNSttKSpuKzE7bj0oLTEtcCkqZCsoMS41K3ApKmMrLjUqbjtwPXAqZC1wKlxuYztmb3IoYz0wO2MhPT1nOysrYyllW2NdPWIqZltrK2NdK20qZltoK2NdK24qZlthK2NdK3AqZltsK2NdO3JldHVybiBlfX0pO1RIUkVFLkRpc2NyZXRlSW50ZXJwb2xhbnQ9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuSW50ZXJwb2xhbnQuY2FsbCh0aGlzLGEsYixjLGQpfTtUSFJFRS5EaXNjcmV0ZUludGVycG9sYW50LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuSW50ZXJwb2xhbnQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuRGlzY3JldGVJbnRlcnBvbGFudCxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuY29weVNhbXBsZVZhbHVlXyhhLTEpfX0pO1RIUkVFLkxpbmVhckludGVycG9sYW50PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkludGVycG9sYW50LmNhbGwodGhpcyxhLGIsYyxkKX07XG5USFJFRS5MaW5lYXJJbnRlcnBvbGFudC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkludGVycG9sYW50LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkxpbmVhckludGVycG9sYW50LGludGVycG9sYXRlXzpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLnJlc3VsdEJ1ZmZlcixmPXRoaXMuc2FtcGxlVmFsdWVzLGc9dGhpcy52YWx1ZVNpemU7YSo9Zzt2YXIgaD1hLWc7Yj0oYy1iKS8oZC1iKTtjPTEtYjtmb3IoZD0wO2QhPT1nOysrZCllW2RdPWZbaCtkXSpjK2ZbYStkXSpiO3JldHVybiBlfX0pO1RIUkVFLlF1YXRlcm5pb25MaW5lYXJJbnRlcnBvbGFudD1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5JbnRlcnBvbGFudC5jYWxsKHRoaXMsYSxiLGMsZCl9O1xuVEhSRUUuUXVhdGVybmlvbkxpbmVhckludGVycG9sYW50LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuSW50ZXJwb2xhbnQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuUXVhdGVybmlvbkxpbmVhckludGVycG9sYW50LGludGVycG9sYXRlXzpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLnJlc3VsdEJ1ZmZlcixmPXRoaXMuc2FtcGxlVmFsdWVzLGc9dGhpcy52YWx1ZVNpemU7YSo9ZztiPShjLWIpLyhkLWIpO2ZvcihjPWErZzthIT09YzthKz00KVRIUkVFLlF1YXRlcm5pb24uc2xlcnBGbGF0KGUsMCxmLGEtZyxmLGEsYik7cmV0dXJuIGV9fSk7VEhSRUUuQ2xvY2s9ZnVuY3Rpb24oYSl7dGhpcy5hdXRvU3RhcnQ9dm9pZCAwIT09YT9hOiEwO3RoaXMuZWxhcHNlZFRpbWU9dGhpcy5vbGRUaW1lPXRoaXMuc3RhcnRUaW1lPTA7dGhpcy5ydW5uaW5nPSExfTtcblRIUkVFLkNsb2NrLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQ2xvY2ssc3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLm9sZFRpbWU9dGhpcy5zdGFydFRpbWU9KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKTt0aGlzLnJ1bm5pbmc9ITB9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmdldEVsYXBzZWRUaW1lKCk7dGhpcy5ydW5uaW5nPSExfSxnZXRFbGFwc2VkVGltZTpmdW5jdGlvbigpe3RoaXMuZ2V0RGVsdGEoKTtyZXR1cm4gdGhpcy5lbGFwc2VkVGltZX0sZ2V0RGVsdGE6ZnVuY3Rpb24oKXt2YXIgYT0wO3RoaXMuYXV0b1N0YXJ0JiYhdGhpcy5ydW5uaW5nJiZ0aGlzLnN0YXJ0KCk7aWYodGhpcy5ydW5uaW5nKXt2YXIgYj0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpLGE9KGItdGhpcy5vbGRUaW1lKS8xRTM7dGhpcy5vbGRUaW1lPWI7dGhpcy5lbGFwc2VkVGltZSs9YX1yZXR1cm4gYX19O1RIUkVFLkV2ZW50RGlzcGF0Y2hlcj1mdW5jdGlvbigpe307XG5PYmplY3QuYXNzaWduKFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUse2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMmJih0aGlzLl9saXN0ZW5lcnM9e30pO3ZhciBjPXRoaXMuX2xpc3RlbmVyczt2b2lkIDA9PT1jW2FdJiYoY1thXT1bXSk7LTE9PT1jW2FdLmluZGV4T2YoYikmJmNbYV0ucHVzaChiKX0saGFzRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMD09PXRoaXMuX2xpc3RlbmVycylyZXR1cm4hMTt2YXIgYz10aGlzLl9saXN0ZW5lcnM7cmV0dXJuIHZvaWQgMCE9PWNbYV0mJi0xIT09Y1thXS5pbmRleE9mKGIpPyEwOiExfSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09dGhpcy5fbGlzdGVuZXJzKXt2YXIgYz10aGlzLl9saXN0ZW5lcnNbYV07aWYodm9pZCAwIT09Yyl7dmFyIGQ9Yy5pbmRleE9mKGIpOy0xIT09ZCYmYy5zcGxpY2UoZCwxKX19fSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe2lmKHZvaWQgMCE9PVxudGhpcy5fbGlzdGVuZXJzKXt2YXIgYj10aGlzLl9saXN0ZW5lcnNbYS50eXBlXTtpZih2b2lkIDAhPT1iKXthLnRhcmdldD10aGlzO2Zvcih2YXIgYz1bXSxkPTAsZT1iLmxlbmd0aCxkPTA7ZDxlO2QrKyljW2RdPWJbZF07Zm9yKGQ9MDtkPGU7ZCsrKWNbZF0uY2FsbCh0aGlzLGEpfX19fSk7VEhSRUUuTGF5ZXJzPWZ1bmN0aW9uKCl7dGhpcy5tYXNrPTF9O1RIUkVFLkxheWVycy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkxheWVycyxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5tYXNrPTE8PGF9LGVuYWJsZTpmdW5jdGlvbihhKXt0aGlzLm1hc2t8PTE8PGF9LHRvZ2dsZTpmdW5jdGlvbihhKXt0aGlzLm1hc2tePTE8PGF9LGRpc2FibGU6ZnVuY3Rpb24oYSl7dGhpcy5tYXNrJj1+KDE8PGEpfSx0ZXN0OmZ1bmN0aW9uKGEpe3JldHVybiAwIT09KHRoaXMubWFzayZhLm1hc2spfX07XG4oZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhLmRpc3RhbmNlLWIuZGlzdGFuY2V9ZnVuY3Rpb24gYyhhLGIsZixnKXtpZighMSE9PWEudmlzaWJsZSYmKGEucmF5Y2FzdChiLGYpLCEwPT09Zykpe2E9YS5jaGlsZHJlbjtnPTA7Zm9yKHZhciBoPWEubGVuZ3RoO2c8aDtnKyspYyhhW2ddLGIsZiwhMCl9fWEuUmF5Y2FzdGVyPWZ1bmN0aW9uKGIsYyxmLGcpe3RoaXMucmF5PW5ldyBhLlJheShiLGMpO3RoaXMubmVhcj1mfHwwO3RoaXMuZmFyPWd8fEluZmluaXR5O3RoaXMucGFyYW1zPXtNZXNoOnt9LExpbmU6e30sTE9EOnt9LFBvaW50czp7dGhyZXNob2xkOjF9LFNwcml0ZTp7fX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcy5wYXJhbXMse1BvaW50Q2xvdWQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlJheWNhc3RlcjogcGFyYW1zLlBvaW50Q2xvdWQgaGFzIGJlZW4gcmVuYW1lZCB0byBwYXJhbXMuUG9pbnRzLlwiKTtyZXR1cm4gdGhpcy5Qb2ludHN9fX0pfTtcbmEuUmF5Y2FzdGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6YS5SYXljYXN0ZXIsbGluZVByZWNpc2lvbjoxLHNldDpmdW5jdGlvbihhLGIpe3RoaXMucmF5LnNldChhLGIpfSxzZXRGcm9tQ2FtZXJhOmZ1bmN0aW9uKGIsYyl7YyBpbnN0YW5jZW9mIGEuUGVyc3BlY3RpdmVDYW1lcmE/KHRoaXMucmF5Lm9yaWdpbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oYy5tYXRyaXhXb3JsZCksdGhpcy5yYXkuZGlyZWN0aW9uLnNldChiLngsYi55LC41KS51bnByb2plY3QoYykuc3ViKHRoaXMucmF5Lm9yaWdpbikubm9ybWFsaXplKCkpOmMgaW5zdGFuY2VvZiBhLk9ydGhvZ3JhcGhpY0NhbWVyYT8odGhpcy5yYXkub3JpZ2luLnNldChiLngsYi55LChjLm5lYXIrYy5mYXIpLyhjLm5lYXItYy5mYXIpKS51bnByb2plY3QoYyksdGhpcy5yYXkuZGlyZWN0aW9uLnNldCgwLDAsLTEpLnRyYW5zZm9ybURpcmVjdGlvbihjLm1hdHJpeFdvcmxkKSk6Y29uc29sZS5lcnJvcihcIlRIUkVFLlJheWNhc3RlcjogVW5zdXBwb3J0ZWQgY2FtZXJhIHR5cGUuXCIpfSxcbmludGVyc2VjdE9iamVjdDpmdW5jdGlvbihhLGUpe3ZhciBmPVtdO2MoYSx0aGlzLGYsZSk7Zi5zb3J0KGIpO3JldHVybiBmfSxpbnRlcnNlY3RPYmplY3RzOmZ1bmN0aW9uKGEsZSl7dmFyIGY9W107aWYoITE9PT1BcnJheS5pc0FycmF5KGEpKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5SYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0czogb2JqZWN0cyBpcyBub3QgYW4gQXJyYXkuXCIpLGY7Zm9yKHZhciBnPTAsaD1hLmxlbmd0aDtnPGg7ZysrKWMoYVtnXSx0aGlzLGYsZSk7Zi5zb3J0KGIpO3JldHVybiBmfX19KShUSFJFRSk7XG5USFJFRS5PYmplY3QzRD1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6VEhSRUUuT2JqZWN0M0RJZENvdW50Kyt9KTt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnR5cGU9XCJPYmplY3QzRFwiO3RoaXMucGFyZW50PW51bGw7dGhpcy5jaGlsZHJlbj1bXTt0aGlzLnVwPVRIUkVFLk9iamVjdDNELkRlZmF1bHRVcC5jbG9uZSgpO3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLkV1bGVyLGM9bmV3IFRIUkVFLlF1YXRlcm5pb24sZD1uZXcgVEhSRUUuVmVjdG9yMygxLDEsMSk7Yi5vbkNoYW5nZShmdW5jdGlvbigpe2Muc2V0RnJvbUV1bGVyKGIsITEpfSk7Yy5vbkNoYW5nZShmdW5jdGlvbigpe2Iuc2V0RnJvbVF1YXRlcm5pb24oYyx2b2lkIDAsITEpfSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7cG9zaXRpb246e2VudW1lcmFibGU6ITAsdmFsdWU6YX0scm90YXRpb246e2VudW1lcmFibGU6ITAsXG52YWx1ZTpifSxxdWF0ZXJuaW9uOntlbnVtZXJhYmxlOiEwLHZhbHVlOmN9LHNjYWxlOntlbnVtZXJhYmxlOiEwLHZhbHVlOmR9LG1vZGVsVmlld01hdHJpeDp7dmFsdWU6bmV3IFRIUkVFLk1hdHJpeDR9LG5vcm1hbE1hdHJpeDp7dmFsdWU6bmV3IFRIUkVFLk1hdHJpeDN9fSk7dGhpcy5tYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQ7dGhpcy5tYXRyaXhXb3JsZD1uZXcgVEhSRUUuTWF0cml4NDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9VEhSRUUuT2JqZWN0M0QuRGVmYXVsdE1hdHJpeEF1dG9VcGRhdGU7dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExO3RoaXMubGF5ZXJzPW5ldyBUSFJFRS5MYXllcnM7dGhpcy52aXNpYmxlPSEwO3RoaXMucmVjZWl2ZVNoYWRvdz10aGlzLmNhc3RTaGFkb3c9ITE7dGhpcy5mcnVzdHVtQ3VsbGVkPSEwO3RoaXMucmVuZGVyT3JkZXI9MDt0aGlzLnVzZXJEYXRhPXt9fTtcblRIUkVFLk9iamVjdDNELkRlZmF1bHRVcD1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCk7VEhSRUUuT2JqZWN0M0QuRGVmYXVsdE1hdHJpeEF1dG9VcGRhdGU9ITA7XG5PYmplY3QuYXNzaWduKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSxUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLHthcHBseU1hdHJpeDpmdW5jdGlvbihhKXt0aGlzLm1hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGEsdGhpcy5tYXRyaXgpO3RoaXMubWF0cml4LmRlY29tcG9zZSh0aGlzLnBvc2l0aW9uLHRoaXMucXVhdGVybmlvbix0aGlzLnNjYWxlKX0sc2V0Um90YXRpb25Gcm9tQXhpc0FuZ2xlOmZ1bmN0aW9uKGEsYil7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoYSxiKX0sc2V0Um90YXRpb25Gcm9tRXVsZXI6ZnVuY3Rpb24oYSl7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihhLCEwKX0sc2V0Um90YXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uKGEpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoYSl9LHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dGhpcy5xdWF0ZXJuaW9uLmNvcHkoYSl9LHJvdGF0ZU9uQXhpczpmdW5jdGlvbigpe3ZhciBhPVxubmV3IFRIUkVFLlF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YS5zZXRGcm9tQXhpc0FuZ2xlKGIsYyk7dGhpcy5xdWF0ZXJuaW9uLm11bHRpcGx5KGEpO3JldHVybiB0aGlzfX0oKSxyb3RhdGVYOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMoMSwwLDApO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMoYSxiKX19KCkscm90YXRlWTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKGEsYil9fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMygwLDAsMSk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhhLGIpfX0oKSx0cmFuc2xhdGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYixjKXthLmNvcHkoYikuYXBwbHlRdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvbik7XG50aGlzLnBvc2l0aW9uLmFkZChhLm11bHRpcGx5U2NhbGFyKGMpKTtyZXR1cm4gdGhpc319KCksdHJhbnNsYXRlWDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGEsYil9fSgpLHRyYW5zbGF0ZVk6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhhLGIpfX0oKSx0cmFuc2xhdGVaOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYSxiKX19KCksbG9jYWxUb1dvcmxkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKX0sd29ybGRUb0xvY2FsOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiLmFwcGx5TWF0cml4NChhLmdldEludmVyc2UodGhpcy5tYXRyaXhXb3JsZCkpfX0oKSxcbmxvb2tBdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihiKXthLmxvb2tBdChiLHRoaXMucG9zaXRpb24sdGhpcy51cCk7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhKX19KCksYWRkOmZ1bmN0aW9uKGEpe2lmKDE8YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBiPTA7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKyl0aGlzLmFkZChhcmd1bWVudHNbYl0pO3JldHVybiB0aGlzfWlmKGE9PT10aGlzKXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuT2JqZWN0M0QuYWRkOiBvYmplY3QgY2FuJ3QgYmUgYWRkZWQgYXMgYSBjaGlsZCBvZiBpdHNlbGYuXCIsYSksdGhpczthIGluc3RhbmNlb2YgVEhSRUUuT2JqZWN0M0Q/KG51bGwhPT1hLnBhcmVudCYmYS5wYXJlbnQucmVtb3ZlKGEpLGEucGFyZW50PXRoaXMsYS5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiYWRkZWRcIn0pLHRoaXMuY2hpbGRyZW4ucHVzaChhKSk6Y29uc29sZS5lcnJvcihcIlRIUkVFLk9iamVjdDNELmFkZDogb2JqZWN0IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5PYmplY3QzRC5cIixcbmEpO3JldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYoMTxhcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspdGhpcy5yZW1vdmUoYXJndW1lbnRzW2JdKTtiPXRoaXMuY2hpbGRyZW4uaW5kZXhPZihhKTstMSE9PWImJihhLnBhcmVudD1udWxsLGEuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInJlbW92ZWRcIn0pLHRoaXMuY2hpbGRyZW4uc3BsaWNlKGIsMSkpfSxnZXRPYmplY3RCeUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldE9iamVjdEJ5UHJvcGVydHkoXCJpZFwiLGEpfSxnZXRPYmplY3RCeU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlQcm9wZXJ0eShcIm5hbWVcIixhKX0sZ2V0T2JqZWN0QnlQcm9wZXJ0eTpmdW5jdGlvbihhLGIpe2lmKHRoaXNbYV09PT1iKXJldHVybiB0aGlzO2Zvcih2YXIgYz0wLGQ9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5jaGlsZHJlbltjXS5nZXRPYmplY3RCeVByb3BlcnR5KGEsXG5iKTtpZih2b2lkIDAhPT1lKXJldHVybiBlfX0sZ2V0V29ybGRQb3NpdGlvbjpmdW5jdGlvbihhKXthPWF8fG5ldyBUSFJFRS5WZWN0b3IzO3RoaXMudXBkYXRlTWF0cml4V29ybGQoITApO3JldHVybiBhLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKX0sZ2V0V29ybGRRdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYyl7Yz1jfHxuZXcgVEhSRUUuUXVhdGVybmlvbjt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTt0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZShhLGMsYik7cmV0dXJuIGN9fSgpLGdldFdvcmxkUm90YXRpb246ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuUXVhdGVybmlvbjtyZXR1cm4gZnVuY3Rpb24oYil7Yj1ifHxuZXcgVEhSRUUuRXVsZXI7dGhpcy5nZXRXb3JsZFF1YXRlcm5pb24oYSk7cmV0dXJuIGIuc2V0RnJvbVF1YXRlcm5pb24oYSxcbnRoaXMucm90YXRpb24ub3JkZXIsITEpfX0oKSxnZXRXb3JsZFNjYWxlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuUXVhdGVybmlvbjtyZXR1cm4gZnVuY3Rpb24oYyl7Yz1jfHxuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTt0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZShhLGIsYyk7cmV0dXJuIGN9fSgpLGdldFdvcmxkRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uKGIpe2I9Ynx8bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5nZXRXb3JsZFF1YXRlcm5pb24oYSk7cmV0dXJuIGIuc2V0KDAsMCwxKS5hcHBseVF1YXRlcm5pb24oYSl9fSgpLHJheWNhc3Q6ZnVuY3Rpb24oKXt9LHRyYXZlcnNlOmZ1bmN0aW9uKGEpe2EodGhpcyk7Zm9yKHZhciBiPXRoaXMuY2hpbGRyZW4sYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKyliW2NdLnRyYXZlcnNlKGEpfSx0cmF2ZXJzZVZpc2libGU6ZnVuY3Rpb24oYSl7aWYoITEhPT1cbnRoaXMudmlzaWJsZSl7YSh0aGlzKTtmb3IodmFyIGI9dGhpcy5jaGlsZHJlbixjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWJbY10udHJhdmVyc2VWaXNpYmxlKGEpfX0sdHJhdmVyc2VBbmNlc3RvcnM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wYXJlbnQ7bnVsbCE9PWImJihhKGIpLGIudHJhdmVyc2VBbmNlc3RvcnMoYSkpfSx1cGRhdGVNYXRyaXg6ZnVuY3Rpb24oKXt0aGlzLm1hdHJpeC5jb21wb3NlKHRoaXMucG9zaXRpb24sdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24oYSl7ITA9PT10aGlzLm1hdHJpeEF1dG9VcGRhdGUmJnRoaXMudXBkYXRlTWF0cml4KCk7aWYoITA9PT10aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGV8fCEwPT09YSludWxsPT09dGhpcy5wYXJlbnQ/dGhpcy5tYXRyaXhXb3JsZC5jb3B5KHRoaXMubWF0cml4KTp0aGlzLm1hdHJpeFdvcmxkLm11bHRpcGx5TWF0cmljZXModGhpcy5wYXJlbnQubWF0cml4V29ybGQsXG50aGlzLm1hdHJpeCksdGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExLGE9ITA7Zm9yKHZhciBiPTAsYz10aGlzLmNoaWxkcmVuLmxlbmd0aDtiPGM7YisrKXRoaXMuY2hpbGRyZW5bYl0udXBkYXRlTWF0cml4V29ybGQoYSl9LHRvSlNPTjpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3ZhciBiPVtdLGM7Zm9yKGMgaW4gYSl7dmFyIGQ9YVtjXTtkZWxldGUgZC5tZXRhZGF0YTtiLnB1c2goZCl9cmV0dXJuIGJ9dmFyIGM9dm9pZCAwPT09YXx8XCJcIj09PWEsZD17fTtjJiYoYT17Z2VvbWV0cmllczp7fSxtYXRlcmlhbHM6e30sdGV4dHVyZXM6e30saW1hZ2VzOnt9fSxkLm1ldGFkYXRhPXt2ZXJzaW9uOjQuNCx0eXBlOlwiT2JqZWN0XCIsZ2VuZXJhdG9yOlwiT2JqZWN0M0QudG9KU09OXCJ9KTt2YXIgZT17fTtlLnV1aWQ9dGhpcy51dWlkO2UudHlwZT10aGlzLnR5cGU7XCJcIiE9PXRoaXMubmFtZSYmKGUubmFtZT10aGlzLm5hbWUpO1wie31cIiE9PUpTT04uc3RyaW5naWZ5KHRoaXMudXNlckRhdGEpJiZcbihlLnVzZXJEYXRhPXRoaXMudXNlckRhdGEpOyEwPT09dGhpcy5jYXN0U2hhZG93JiYoZS5jYXN0U2hhZG93PSEwKTshMD09PXRoaXMucmVjZWl2ZVNoYWRvdyYmKGUucmVjZWl2ZVNoYWRvdz0hMCk7ITE9PT10aGlzLnZpc2libGUmJihlLnZpc2libGU9ITEpO2UubWF0cml4PXRoaXMubWF0cml4LnRvQXJyYXkoKTt2b2lkIDAhPT10aGlzLmdlb21ldHJ5JiYodm9pZCAwPT09YS5nZW9tZXRyaWVzW3RoaXMuZ2VvbWV0cnkudXVpZF0mJihhLmdlb21ldHJpZXNbdGhpcy5nZW9tZXRyeS51dWlkXT10aGlzLmdlb21ldHJ5LnRvSlNPTihhKSksZS5nZW9tZXRyeT10aGlzLmdlb21ldHJ5LnV1aWQpO3ZvaWQgMCE9PXRoaXMubWF0ZXJpYWwmJih2b2lkIDA9PT1hLm1hdGVyaWFsc1t0aGlzLm1hdGVyaWFsLnV1aWRdJiYoYS5tYXRlcmlhbHNbdGhpcy5tYXRlcmlhbC51dWlkXT10aGlzLm1hdGVyaWFsLnRvSlNPTihhKSksZS5tYXRlcmlhbD10aGlzLm1hdGVyaWFsLnV1aWQpO2lmKDA8dGhpcy5jaGlsZHJlbi5sZW5ndGgpe2UuY2hpbGRyZW49XG5bXTtmb3IodmFyIGY9MDtmPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2YrKyllLmNoaWxkcmVuLnB1c2godGhpcy5jaGlsZHJlbltmXS50b0pTT04oYSkub2JqZWN0KX1pZihjKXt2YXIgYz1iKGEuZ2VvbWV0cmllcyksZj1iKGEubWF0ZXJpYWxzKSxnPWIoYS50ZXh0dXJlcyk7YT1iKGEuaW1hZ2VzKTswPGMubGVuZ3RoJiYoZC5nZW9tZXRyaWVzPWMpOzA8Zi5sZW5ndGgmJihkLm1hdGVyaWFscz1mKTswPGcubGVuZ3RoJiYoZC50ZXh0dXJlcz1nKTswPGEubGVuZ3RoJiYoZC5pbWFnZXM9YSl9ZC5vYmplY3Q9ZTtyZXR1cm4gZH0sY2xvbmU6ZnVuY3Rpb24oYSl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMsYSl9LGNvcHk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0hMCk7dGhpcy5uYW1lPWEubmFtZTt0aGlzLnVwLmNvcHkoYS51cCk7dGhpcy5wb3NpdGlvbi5jb3B5KGEucG9zaXRpb24pO3RoaXMucXVhdGVybmlvbi5jb3B5KGEucXVhdGVybmlvbik7dGhpcy5zY2FsZS5jb3B5KGEuc2NhbGUpO1xudGhpcy5tYXRyaXguY29weShhLm1hdHJpeCk7dGhpcy5tYXRyaXhXb3JsZC5jb3B5KGEubWF0cml4V29ybGQpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1hLm1hdHJpeEF1dG9VcGRhdGU7dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPWEubWF0cml4V29ybGROZWVkc1VwZGF0ZTt0aGlzLnZpc2libGU9YS52aXNpYmxlO3RoaXMuY2FzdFNoYWRvdz1hLmNhc3RTaGFkb3c7dGhpcy5yZWNlaXZlU2hhZG93PWEucmVjZWl2ZVNoYWRvdzt0aGlzLmZydXN0dW1DdWxsZWQ9YS5mcnVzdHVtQ3VsbGVkO3RoaXMucmVuZGVyT3JkZXI9YS5yZW5kZXJPcmRlcjt0aGlzLnVzZXJEYXRhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYS51c2VyRGF0YSkpO2lmKCEwPT09Yilmb3IodmFyIGM9MDtjPGEuY2hpbGRyZW4ubGVuZ3RoO2MrKyl0aGlzLmFkZChhLmNoaWxkcmVuW2NdLmNsb25lKCkpO3JldHVybiB0aGlzfX0pO1RIUkVFLk9iamVjdDNESWRDb3VudD0wO1xuVEhSRUUuRmFjZTM9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuYT1hO3RoaXMuYj1iO3RoaXMuYz1jO3RoaXMubm9ybWFsPWQgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IzP2Q6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy52ZXJ0ZXhOb3JtYWxzPUFycmF5LmlzQXJyYXkoZCk/ZDpbXTt0aGlzLmNvbG9yPWUgaW5zdGFuY2VvZiBUSFJFRS5Db2xvcj9lOm5ldyBUSFJFRS5Db2xvcjt0aGlzLnZlcnRleENvbG9ycz1BcnJheS5pc0FycmF5KGUpP2U6W107dGhpcy5tYXRlcmlhbEluZGV4PXZvaWQgMCE9PWY/ZjowfTtcblRIUkVFLkZhY2UzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuRmFjZTMsY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hPWEuYTt0aGlzLmI9YS5iO3RoaXMuYz1hLmM7dGhpcy5ub3JtYWwuY29weShhLm5vcm1hbCk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMubWF0ZXJpYWxJbmRleD1hLm1hdGVyaWFsSW5kZXg7Zm9yKHZhciBiPTAsYz1hLnZlcnRleE5vcm1hbHMubGVuZ3RoO2I8YztiKyspdGhpcy52ZXJ0ZXhOb3JtYWxzW2JdPWEudmVydGV4Tm9ybWFsc1tiXS5jbG9uZSgpO2I9MDtmb3IoYz1hLnZlcnRleENvbG9ycy5sZW5ndGg7YjxjO2IrKyl0aGlzLnZlcnRleENvbG9yc1tiXT1hLnZlcnRleENvbG9yc1tiXS5jbG9uZSgpO3JldHVybiB0aGlzfX07XG5USFJFRS5CdWZmZXJBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiLGMpe3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMuYXJyYXk9YTt0aGlzLml0ZW1TaXplPWI7dGhpcy5keW5hbWljPSExO3RoaXMudXBkYXRlUmFuZ2U9e29mZnNldDowLGNvdW50Oi0xfTt0aGlzLnZlcnNpb249MDt0aGlzLm5vcm1hbGl6ZWQ9ITA9PT1jfTtcblRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSxnZXQgY291bnQoKXtyZXR1cm4gdGhpcy5hcnJheS5sZW5ndGgvdGhpcy5pdGVtU2l6ZX0sc2V0IG5lZWRzVXBkYXRlKGEpeyEwPT09YSYmdGhpcy52ZXJzaW9uKyt9LHNldER5bmFtaWM6ZnVuY3Rpb24oYSl7dGhpcy5keW5hbWljPWE7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hcnJheT1uZXcgYS5hcnJheS5jb25zdHJ1Y3RvcihhLmFycmF5KTt0aGlzLml0ZW1TaXplPWEuaXRlbVNpemU7dGhpcy5keW5hbWljPWEuZHluYW1pYztyZXR1cm4gdGhpc30sY29weUF0OmZ1bmN0aW9uKGEsYixjKXthKj10aGlzLml0ZW1TaXplO2MqPWIuaXRlbVNpemU7Zm9yKHZhciBkPTAsZT10aGlzLml0ZW1TaXplO2Q8ZTtkKyspdGhpcy5hcnJheVthK2RdPWIuYXJyYXlbYytkXTtyZXR1cm4gdGhpc30sY29weUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMuYXJyYXkuc2V0KGEpO1xucmV0dXJuIHRoaXN9LGNvcHlDb2xvcnNBcnJheTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5hcnJheSxjPTAsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YVtkXTt2b2lkIDA9PT1mJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlDb2xvcnNBcnJheSgpOiBjb2xvciBpcyB1bmRlZmluZWRcIixkKSxmPW5ldyBUSFJFRS5Db2xvcik7YltjKytdPWYucjtiW2MrK109Zi5nO2JbYysrXT1mLmJ9cmV0dXJuIHRoaXN9LGNvcHlJbmRpY2VzQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuYXJyYXksYz0wLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF07YltjKytdPWYuYTtiW2MrK109Zi5iO2JbYysrXT1mLmN9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3Iyc0FycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmFycmF5LGM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO3ZvaWQgMD09PWYmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjJzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLFxuZCksZj1uZXcgVEhSRUUuVmVjdG9yMik7YltjKytdPWYueDtiW2MrK109Zi55fXJldHVybiB0aGlzfSxjb3B5VmVjdG9yM3NBcnJheTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5hcnJheSxjPTAsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YVtkXTt2b2lkIDA9PT1mJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3Izc0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWRcIixkKSxmPW5ldyBUSFJFRS5WZWN0b3IzKTtiW2MrK109Zi54O2JbYysrXT1mLnk7YltjKytdPWYuen1yZXR1cm4gdGhpc30sY29weVZlY3RvcjRzQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuYXJyYXksYz0wLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF07dm9pZCAwPT09ZiYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5VmVjdG9yNHNBcnJheSgpOiB2ZWN0b3IgaXMgdW5kZWZpbmVkXCIsZCksZj1uZXcgVEhSRUUuVmVjdG9yNCk7XG5iW2MrK109Zi54O2JbYysrXT1mLnk7YltjKytdPWYuejtiW2MrK109Zi53fXJldHVybiB0aGlzfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTt0aGlzLmFycmF5LnNldChhLGIpO3JldHVybiB0aGlzfSxnZXRYOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZV19LHNldFg6ZnVuY3Rpb24oYSxiKXt0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZV09YjtyZXR1cm4gdGhpc30sZ2V0WTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemUrMV19LHNldFk6ZnVuY3Rpb24oYSxiKXt0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZSsxXT1iO3JldHVybiB0aGlzfSxnZXRaOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZSsyXX0sc2V0WjpmdW5jdGlvbihhLGIpe3RoaXMuYXJyYXlbYSp0aGlzLml0ZW1TaXplKzJdPWI7cmV0dXJuIHRoaXN9LGdldFc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXJyYXlbYSpcbnRoaXMuaXRlbVNpemUrM119LHNldFc6ZnVuY3Rpb24oYSxiKXt0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZSszXT1iO3JldHVybiB0aGlzfSxzZXRYWTpmdW5jdGlvbihhLGIsYyl7YSo9dGhpcy5pdGVtU2l6ZTt0aGlzLmFycmF5W2ErMF09Yjt0aGlzLmFycmF5W2ErMV09YztyZXR1cm4gdGhpc30sc2V0WFlaOmZ1bmN0aW9uKGEsYixjLGQpe2EqPXRoaXMuaXRlbVNpemU7dGhpcy5hcnJheVthKzBdPWI7dGhpcy5hcnJheVthKzFdPWM7dGhpcy5hcnJheVthKzJdPWQ7cmV0dXJuIHRoaXN9LHNldFhZWlc6ZnVuY3Rpb24oYSxiLGMsZCxlKXthKj10aGlzLml0ZW1TaXplO3RoaXMuYXJyYXlbYSswXT1iO3RoaXMuYXJyYXlbYSsxXT1jO3RoaXMuYXJyYXlbYSsyXT1kO3RoaXMuYXJyYXlbYSszXT1lO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX19O1xuVEhSRUUuSW50OEF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBJbnQ4QXJyYXkoYSksYil9O1RIUkVFLlVpbnQ4QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IFVpbnQ4QXJyYXkoYSksYil9O1RIUkVFLlVpbnQ4Q2xhbXBlZEF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBVaW50OENsYW1wZWRBcnJheShhKSxiKX07VEhSRUUuSW50MTZBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgSW50MTZBcnJheShhKSxiKX07VEhSRUUuVWludDE2QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IFVpbnQxNkFycmF5KGEpLGIpfTtcblRIUkVFLkludDMyQXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEludDMyQXJyYXkoYSksYil9O1RIUkVFLlVpbnQzMkF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBVaW50MzJBcnJheShhKSxiKX07VEhSRUUuRmxvYXQzMkF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoYSksYil9O1RIUkVFLkZsb2F0NjRBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQ2NEFycmF5KGEpLGIpfTtcblRIUkVFLkR5bmFtaWNCdWZmZXJBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5EeW5hbWljQnVmZmVyQXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCkuc2V0RHluYW1pYyggdHJ1ZSApIGluc3RlYWQuXCIpO3JldHVybihuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGEsYikpLnNldER5bmFtaWMoITApfTtUSFJFRS5JbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jYWxsKHRoaXMsYSxiKTt0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9Y3x8MX07VEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUpO1RIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlO1xuVEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1RIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5tZXNoUGVyQXR0cmlidXRlPWEubWVzaFBlckF0dHJpYnV0ZTtyZXR1cm4gdGhpc307VEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLmFycmF5PWE7dGhpcy5zdHJpZGU9Yjt0aGlzLmR5bmFtaWM9ITE7dGhpcy51cGRhdGVSYW5nZT17b2Zmc2V0OjAsY291bnQ6LTF9O3RoaXMudmVyc2lvbj0wfTtcblRIUkVFLkludGVybGVhdmVkQnVmZmVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXIsZ2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLmFycmF5Lmxlbmd0aH0sZ2V0IGNvdW50KCl7cmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RoL3RoaXMuc3RyaWRlfSxzZXQgbmVlZHNVcGRhdGUoYSl7ITA9PT1hJiZ0aGlzLnZlcnNpb24rK30sc2V0RHluYW1pYzpmdW5jdGlvbihhKXt0aGlzLmR5bmFtaWM9YTtyZXR1cm4gdGhpc30sY29weTpmdW5jdGlvbihhKXt0aGlzLmFycmF5PW5ldyBhLmFycmF5LmNvbnN0cnVjdG9yKGEuYXJyYXkpO3RoaXMuc3RyaWRlPWEuc3RyaWRlO3RoaXMuZHluYW1pYz1hLmR5bmFtaWM7cmV0dXJuIHRoaXN9LGNvcHlBdDpmdW5jdGlvbihhLGIsYyl7YSo9dGhpcy5zdHJpZGU7Yyo9Yi5zdHJpZGU7Zm9yKHZhciBkPTAsZT10aGlzLnN0cmlkZTtkPGU7ZCsrKXRoaXMuYXJyYXlbYStkXT1iLmFycmF5W2MrZF07cmV0dXJuIHRoaXN9LHNldDpmdW5jdGlvbihhLFxuYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy5hcnJheS5zZXQoYSxiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9fTtUSFJFRS5JbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlcj1mdW5jdGlvbihhLGIsYyl7VEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXIuY2FsbCh0aGlzLGEsYik7dGhpcy5tZXNoUGVyQXR0cmlidXRlPWN8fDF9O1RIUkVFLkluc3RhbmNlZEludGVybGVhdmVkQnVmZmVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkludGVybGVhdmVkQnVmZmVyLnByb3RvdHlwZSk7VEhSRUUuSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkluc3RhbmNlZEludGVybGVhdmVkQnVmZmVyO1xuVEhSRUUuSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXIucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7VEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXIucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1hLm1lc2hQZXJBdHRyaWJ1dGU7cmV0dXJuIHRoaXN9O1RIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMuZGF0YT1hO3RoaXMuaXRlbVNpemU9Yjt0aGlzLm9mZnNldD1jO3RoaXMubm9ybWFsaXplZD0hMD09PWR9O1xuVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSxnZXQgbGVuZ3RoKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiAubGVuZ3RoIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgLmNvdW50LlwiKTtyZXR1cm4gdGhpcy5hcnJheS5sZW5ndGh9LGdldCBjb3VudCgpe3JldHVybiB0aGlzLmRhdGEuY291bnR9LGdldCBhcnJheSgpe3JldHVybiB0aGlzLmRhdGEuYXJyYXl9LHNldFg6ZnVuY3Rpb24oYSxiKXt0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0XT1iO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsxXT1iO3JldHVybiB0aGlzfSxzZXRaOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZStcbnRoaXMub2Zmc2V0KzJdPWI7cmV0dXJuIHRoaXN9LHNldFc6ZnVuY3Rpb24oYSxiKXt0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzNdPWI7cmV0dXJuIHRoaXN9LGdldFg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGF0YS5hcnJheVthKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXRdfSxnZXRZOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzFdfSxnZXRaOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzJdfSxnZXRXOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzNdfSxzZXRYWTpmdW5jdGlvbihhLGIsYyl7YT1hKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2ErMF09Yjt0aGlzLmRhdGEuYXJyYXlbYStcbjFdPWM7cmV0dXJuIHRoaXN9LHNldFhZWjpmdW5jdGlvbihhLGIsYyxkKXthPWEqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldDt0aGlzLmRhdGEuYXJyYXlbYSswXT1iO3RoaXMuZGF0YS5hcnJheVthKzFdPWM7dGhpcy5kYXRhLmFycmF5W2ErMl09ZDtyZXR1cm4gdGhpc30sc2V0WFlaVzpmdW5jdGlvbihhLGIsYyxkLGUpe2E9YSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O3RoaXMuZGF0YS5hcnJheVthKzBdPWI7dGhpcy5kYXRhLmFycmF5W2ErMV09Yzt0aGlzLmRhdGEuYXJyYXlbYSsyXT1kO3RoaXMuZGF0YS5hcnJheVthKzNdPWU7cmV0dXJuIHRoaXN9fTtcblRIUkVFLkdlb21ldHJ5PWZ1bmN0aW9uKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpUSFJFRS5HZW9tZXRyeUlkQ291bnQrK30pO3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudHlwZT1cIkdlb21ldHJ5XCI7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmNvbG9ycz1bXTt0aGlzLmZhY2VzPVtdO3RoaXMuZmFjZVZlcnRleFV2cz1bW11dO3RoaXMubW9ycGhUYXJnZXRzPVtdO3RoaXMubW9ycGhOb3JtYWxzPVtdO3RoaXMuc2tpbldlaWdodHM9W107dGhpcy5za2luSW5kaWNlcz1bXTt0aGlzLmxpbmVEaXN0YW5jZXM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5ncm91cHNOZWVkVXBkYXRlPXRoaXMubGluZURpc3RhbmNlc05lZWRVcGRhdGU9dGhpcy5jb2xvcnNOZWVkVXBkYXRlPXRoaXMubm9ybWFsc05lZWRVcGRhdGU9dGhpcy51dnNOZWVkVXBkYXRlPXRoaXMudmVydGljZXNOZWVkVXBkYXRlPVxudGhpcy5lbGVtZW50c05lZWRVcGRhdGU9ITF9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUsVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSx7YXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPShuZXcgVEhSRUUuTWF0cml4MykuZ2V0Tm9ybWFsTWF0cml4KGEpLGM9MCxkPXRoaXMudmVydGljZXMubGVuZ3RoO2M8ZDtjKyspdGhpcy52ZXJ0aWNlc1tjXS5hcHBseU1hdHJpeDQoYSk7Yz0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2M8ZDtjKyspe2E9dGhpcy5mYWNlc1tjXTthLm5vcm1hbC5hcHBseU1hdHJpeDMoYikubm9ybWFsaXplKCk7Zm9yKHZhciBlPTAsZj1hLnZlcnRleE5vcm1hbHMubGVuZ3RoO2U8ZjtlKyspYS52ZXJ0ZXhOb3JtYWxzW2VdLmFwcGx5TWF0cml4MyhiKS5ub3JtYWxpemUoKX1udWxsIT09dGhpcy5ib3VuZGluZ0JveCYmdGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTtudWxsIT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmdGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtcbnRoaXMubm9ybWFsc05lZWRVcGRhdGU9dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9ITA7cmV0dXJuIHRoaXN9LHJvdGF0ZVg6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1hdHJpeDQpO2EubWFrZVJvdGF0aW9uWChiKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxyb3RhdGVZOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5NYXRyaXg0KTthLm1ha2VSb3RhdGlvblkoYik7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWjpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWF0cml4NCk7YS5tYWtlUm90YXRpb25aKGIpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiLFxuYyxkKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWF0cml4NCk7YS5tYWtlVHJhbnNsYXRpb24oYixjLGQpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHNjYWxlOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWF0cml4NCk7YS5tYWtlU2NhbGUoYixjLGQpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLGxvb2tBdDpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuT2JqZWN0M0QpO2EubG9va0F0KGIpO2EudXBkYXRlTWF0cml4KCk7dGhpcy5hcHBseU1hdHJpeChhLm1hdHJpeCl9fSgpLGZyb21CdWZmZXJHZW9tZXRyeTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixkLGUpe3ZhciBmPXZvaWQgMCE9PWc/W21bYV0uY2xvbmUoKSxtW2JdLmNsb25lKCksbVtkXS5jbG9uZSgpXTpbXSxxPXZvaWQgMCE9PWg/W2MuY29sb3JzW2FdLmNsb25lKCksXG5jLmNvbG9yc1tiXS5jbG9uZSgpLGMuY29sb3JzW2RdLmNsb25lKCldOltdO2U9bmV3IFRIUkVFLkZhY2UzKGEsYixkLGYscSxlKTtjLmZhY2VzLnB1c2goZSk7dm9pZCAwIT09ayYmYy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW3BbYV0uY2xvbmUoKSxwW2JdLmNsb25lKCkscFtkXS5jbG9uZSgpXSk7dm9pZCAwIT09bCYmYy5mYWNlVmVydGV4VXZzWzFdLnB1c2goW25bYV0uY2xvbmUoKSxuW2JdLmNsb25lKCksbltkXS5jbG9uZSgpXSl9dmFyIGM9dGhpcyxkPW51bGwhPT1hLmluZGV4P2EuaW5kZXguYXJyYXk6dm9pZCAwLGU9YS5hdHRyaWJ1dGVzLGY9ZS5wb3NpdGlvbi5hcnJheSxnPXZvaWQgMCE9PWUubm9ybWFsP2Uubm9ybWFsLmFycmF5OnZvaWQgMCxoPXZvaWQgMCE9PWUuY29sb3I/ZS5jb2xvci5hcnJheTp2b2lkIDAsaz12b2lkIDAhPT1lLnV2P2UudXYuYXJyYXk6dm9pZCAwLGw9dm9pZCAwIT09ZS51djI/ZS51djIuYXJyYXk6dm9pZCAwO3ZvaWQgMCE9PWwmJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMV09XG5bXSk7Zm9yKHZhciBtPVtdLHA9W10sbj1bXSxxPWU9MDtlPGYubGVuZ3RoO2UrPTMscSs9MiljLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoZltlXSxmW2UrMV0sZltlKzJdKSksdm9pZCAwIT09ZyYmbS5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGdbZV0sZ1tlKzFdLGdbZSsyXSkpLHZvaWQgMCE9PWgmJmMuY29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKGhbZV0saFtlKzFdLGhbZSsyXSkpLHZvaWQgMCE9PWsmJnAucHVzaChuZXcgVEhSRUUuVmVjdG9yMihrW3FdLGtbcSsxXSkpLHZvaWQgMCE9PWwmJm4ucHVzaChuZXcgVEhSRUUuVmVjdG9yMihsW3FdLGxbcSsxXSkpO2lmKHZvaWQgMCE9PWQpaWYoZj1hLmdyb3VwcywwPGYubGVuZ3RoKWZvcihlPTA7ZTxmLmxlbmd0aDtlKyspZm9yKHZhciByPWZbZV0scz1yLnN0YXJ0LHY9ci5jb3VudCxxPXMscz1zK3Y7cTxzO3ErPTMpYihkW3FdLGRbcSsxXSxkW3ErMl0sci5tYXRlcmlhbEluZGV4KTtlbHNlIGZvcihlPTA7ZTxcbmQubGVuZ3RoO2UrPTMpYihkW2VdLGRbZSsxXSxkW2UrMl0pO2Vsc2UgZm9yKGU9MDtlPGYubGVuZ3RoLzM7ZSs9MyliKGUsZSsxLGUrMik7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTtudWxsIT09YS5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9YS5ib3VuZGluZ0JveC5jbG9uZSgpKTtudWxsIT09YS5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9YS5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKTtyZXR1cm4gdGhpc30sY2VudGVyOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTt2YXIgYT10aGlzLmJvdW5kaW5nQm94LmNlbnRlcigpLm5lZ2F0ZSgpO3RoaXMudHJhbnNsYXRlKGEueCxhLnksYS56KTtyZXR1cm4gYX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTt2YXIgYT10aGlzLmJvdW5kaW5nU3BoZXJlLmNlbnRlcixiPXRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzLGI9MD09PWI/MToxL1xuYixjPW5ldyBUSFJFRS5NYXRyaXg0O2Muc2V0KGIsMCwwLC1iKmEueCwwLGIsMCwtYiphLnksMCwwLGIsLWIqYS56LDAsMCwwLDEpO3RoaXMuYXBwbHlNYXRyaXgoYyk7cmV0dXJuIHRoaXN9LGNvbXB1dGVGYWNlTm9ybWFsczpmdW5jdGlvbigpe2Zvcih2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9MCxkPXRoaXMuZmFjZXMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPXRoaXMuZmFjZXNbY10sZj10aGlzLnZlcnRpY2VzW2UuYV0sZz10aGlzLnZlcnRpY2VzW2UuYl07YS5zdWJWZWN0b3JzKHRoaXMudmVydGljZXNbZS5jXSxnKTtiLnN1YlZlY3RvcnMoZixnKTthLmNyb3NzKGIpO2Eubm9ybWFsaXplKCk7ZS5ub3JtYWwuY29weShhKX19LGNvbXB1dGVWZXJ0ZXhOb3JtYWxzOmZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPSEwKTt2YXIgYixjLGQ7ZD1BcnJheSh0aGlzLnZlcnRpY2VzLmxlbmd0aCk7Yj0wO2ZvcihjPXRoaXMudmVydGljZXMubGVuZ3RoO2I8XG5jO2IrKylkW2JdPW5ldyBUSFJFRS5WZWN0b3IzO2lmKGEpe3ZhciBlLGYsZyxoPW5ldyBUSFJFRS5WZWN0b3IzLGs9bmV3IFRIUkVFLlZlY3RvcjM7YT0wO2ZvcihiPXRoaXMuZmFjZXMubGVuZ3RoO2E8YjthKyspYz10aGlzLmZhY2VzW2FdLGU9dGhpcy52ZXJ0aWNlc1tjLmFdLGY9dGhpcy52ZXJ0aWNlc1tjLmJdLGc9dGhpcy52ZXJ0aWNlc1tjLmNdLGguc3ViVmVjdG9ycyhnLGYpLGsuc3ViVmVjdG9ycyhlLGYpLGguY3Jvc3MoayksZFtjLmFdLmFkZChoKSxkW2MuYl0uYWRkKGgpLGRbYy5jXS5hZGQoaCl9ZWxzZSBmb3IoYT0wLGI9dGhpcy5mYWNlcy5sZW5ndGg7YTxiO2ErKyljPXRoaXMuZmFjZXNbYV0sZFtjLmFdLmFkZChjLm5vcm1hbCksZFtjLmJdLmFkZChjLm5vcm1hbCksZFtjLmNdLmFkZChjLm5vcm1hbCk7Yj0wO2ZvcihjPXRoaXMudmVydGljZXMubGVuZ3RoO2I8YztiKyspZFtiXS5ub3JtYWxpemUoKTthPTA7Zm9yKGI9dGhpcy5mYWNlcy5sZW5ndGg7YTxiO2ErKyljPVxudGhpcy5mYWNlc1thXSxlPWMudmVydGV4Tm9ybWFscywzPT09ZS5sZW5ndGg/KGVbMF0uY29weShkW2MuYV0pLGVbMV0uY29weShkW2MuYl0pLGVbMl0uY29weShkW2MuY10pKTooZVswXT1kW2MuYV0uY2xvbmUoKSxlWzFdPWRbYy5iXS5jbG9uZSgpLGVbMl09ZFtjLmNdLmNsb25lKCkpOzA8dGhpcy5mYWNlcy5sZW5ndGgmJih0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSEwKX0sY29tcHV0ZU1vcnBoTm9ybWFsczpmdW5jdGlvbigpe3ZhciBhLGIsYyxkLGU7Yz0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2M8ZDtjKyspZm9yKGU9dGhpcy5mYWNlc1tjXSxlLl9fb3JpZ2luYWxGYWNlTm9ybWFsP2UuX19vcmlnaW5hbEZhY2VOb3JtYWwuY29weShlLm5vcm1hbCk6ZS5fX29yaWdpbmFsRmFjZU5vcm1hbD1lLm5vcm1hbC5jbG9uZSgpLGUuX19vcmlnaW5hbFZlcnRleE5vcm1hbHN8fChlLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzPVtdKSxhPTAsYj1lLnZlcnRleE5vcm1hbHMubGVuZ3RoO2E8XG5iO2ErKyllLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2FdP2UuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbYV0uY29weShlLnZlcnRleE5vcm1hbHNbYV0pOmUuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbYV09ZS52ZXJ0ZXhOb3JtYWxzW2FdLmNsb25lKCk7dmFyIGY9bmV3IFRIUkVFLkdlb21ldHJ5O2YuZmFjZXM9dGhpcy5mYWNlczthPTA7Zm9yKGI9dGhpcy5tb3JwaFRhcmdldHMubGVuZ3RoO2E8YjthKyspe2lmKCF0aGlzLm1vcnBoTm9ybWFsc1thXSl7dGhpcy5tb3JwaE5vcm1hbHNbYV09e307dGhpcy5tb3JwaE5vcm1hbHNbYV0uZmFjZU5vcm1hbHM9W107dGhpcy5tb3JwaE5vcm1hbHNbYV0udmVydGV4Tm9ybWFscz1bXTtlPXRoaXMubW9ycGhOb3JtYWxzW2FdLmZhY2VOb3JtYWxzO3ZhciBnPXRoaXMubW9ycGhOb3JtYWxzW2FdLnZlcnRleE5vcm1hbHMsaCxrO2M9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKWg9bmV3IFRIUkVFLlZlY3RvcjMsaz17YTpuZXcgVEhSRUUuVmVjdG9yMyxcbmI6bmV3IFRIUkVFLlZlY3RvcjMsYzpuZXcgVEhSRUUuVmVjdG9yM30sZS5wdXNoKGgpLGcucHVzaChrKX1nPXRoaXMubW9ycGhOb3JtYWxzW2FdO2YudmVydGljZXM9dGhpcy5tb3JwaFRhcmdldHNbYV0udmVydGljZXM7Zi5jb21wdXRlRmFjZU5vcm1hbHMoKTtmLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7Yz0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2M8ZDtjKyspZT10aGlzLmZhY2VzW2NdLGg9Zy5mYWNlTm9ybWFsc1tjXSxrPWcudmVydGV4Tm9ybWFsc1tjXSxoLmNvcHkoZS5ub3JtYWwpLGsuYS5jb3B5KGUudmVydGV4Tm9ybWFsc1swXSksay5iLmNvcHkoZS52ZXJ0ZXhOb3JtYWxzWzFdKSxrLmMuY29weShlLnZlcnRleE5vcm1hbHNbMl0pfWM9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKWU9dGhpcy5mYWNlc1tjXSxlLm5vcm1hbD1lLl9fb3JpZ2luYWxGYWNlTm9ybWFsLGUudmVydGV4Tm9ybWFscz1lLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzfSxjb21wdXRlVGFuZ2VudHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5HZW9tZXRyeTogLmNvbXB1dGVUYW5nZW50cygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxcbmNvbXB1dGVMaW5lRGlzdGFuY2VzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLnZlcnRpY2VzLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspMDxjJiYoYSs9YltjXS5kaXN0YW5jZVRvKGJbYy0xXSkpLHRoaXMubGluZURpc3RhbmNlc1tjXT1hfSxjb21wdXRlQm91bmRpbmdCb3g6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9bmV3IFRIUkVFLkJveDMpO3RoaXMuYm91bmRpbmdCb3guc2V0RnJvbVBvaW50cyh0aGlzLnZlcnRpY2VzKX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUpO3RoaXMuYm91bmRpbmdTcGhlcmUuc2V0RnJvbVBvaW50cyh0aGlzLnZlcnRpY2VzKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiLGMpe2lmKCExPT09YSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5HZW9tZXRyeS5tZXJnZSgpOiBnZW9tZXRyeSBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuR2VvbWV0cnkuXCIsXG5hKTtlbHNle3ZhciBkLGU9dGhpcy52ZXJ0aWNlcy5sZW5ndGgsZj10aGlzLnZlcnRpY2VzLGc9YS52ZXJ0aWNlcyxoPXRoaXMuZmFjZXMsaz1hLmZhY2VzLGw9dGhpcy5mYWNlVmVydGV4VXZzWzBdO2E9YS5mYWNlVmVydGV4VXZzWzBdO3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMCE9PWImJihkPShuZXcgVEhSRUUuTWF0cml4MykuZ2V0Tm9ybWFsTWF0cml4KGIpKTtmb3IodmFyIG09MCxwPWcubGVuZ3RoO208cDttKyspe3ZhciBuPWdbbV0uY2xvbmUoKTt2b2lkIDAhPT1iJiZuLmFwcGx5TWF0cml4NChiKTtmLnB1c2gobil9bT0wO2ZvcihwPWsubGVuZ3RoO208cDttKyspe3ZhciBnPWtbbV0scSxyPWcudmVydGV4Tm9ybWFscyxzPWcudmVydGV4Q29sb3JzLG49bmV3IFRIUkVFLkZhY2UzKGcuYStlLGcuYitlLGcuYytlKTtuLm5vcm1hbC5jb3B5KGcubm9ybWFsKTt2b2lkIDAhPT1kJiZuLm5vcm1hbC5hcHBseU1hdHJpeDMoZCkubm9ybWFsaXplKCk7Yj0wO2ZvcihmPXIubGVuZ3RoO2I8XG5mO2IrKylxPXJbYl0uY2xvbmUoKSx2b2lkIDAhPT1kJiZxLmFwcGx5TWF0cml4MyhkKS5ub3JtYWxpemUoKSxuLnZlcnRleE5vcm1hbHMucHVzaChxKTtuLmNvbG9yLmNvcHkoZy5jb2xvcik7Yj0wO2ZvcihmPXMubGVuZ3RoO2I8ZjtiKyspcT1zW2JdLG4udmVydGV4Q29sb3JzLnB1c2gocS5jbG9uZSgpKTtuLm1hdGVyaWFsSW5kZXg9Zy5tYXRlcmlhbEluZGV4K2M7aC5wdXNoKG4pfW09MDtmb3IocD1hLmxlbmd0aDttPHA7bSsrKWlmKGM9YVttXSxkPVtdLHZvaWQgMCE9PWMpe2I9MDtmb3IoZj1jLmxlbmd0aDtiPGY7YisrKWQucHVzaChjW2JdLmNsb25lKCkpO2wucHVzaChkKX19fSxtZXJnZU1lc2g6ZnVuY3Rpb24oYSl7ITE9PT1hIGluc3RhbmNlb2YgVEhSRUUuTWVzaD9jb25zb2xlLmVycm9yKFwiVEhSRUUuR2VvbWV0cnkubWVyZ2VNZXNoKCk6IG1lc2ggbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLk1lc2guXCIsYSk6KGEubWF0cml4QXV0b1VwZGF0ZSYmYS51cGRhdGVNYXRyaXgoKSxcbnRoaXMubWVyZ2UoYS5nZW9tZXRyeSxhLm1hdHJpeCkpfSxtZXJnZVZlcnRpY2VzOmZ1bmN0aW9uKCl7dmFyIGE9e30sYj1bXSxjPVtdLGQsZT1NYXRoLnBvdygxMCw0KSxmLGc7Zj0wO2ZvcihnPXRoaXMudmVydGljZXMubGVuZ3RoO2Y8ZztmKyspZD10aGlzLnZlcnRpY2VzW2ZdLGQ9TWF0aC5yb3VuZChkLngqZSkrXCJfXCIrTWF0aC5yb3VuZChkLnkqZSkrXCJfXCIrTWF0aC5yb3VuZChkLnoqZSksdm9pZCAwPT09YVtkXT8oYVtkXT1mLGIucHVzaCh0aGlzLnZlcnRpY2VzW2ZdKSxjW2ZdPWIubGVuZ3RoLTEpOmNbZl09Y1thW2RdXTthPVtdO2Y9MDtmb3IoZz10aGlzLmZhY2VzLmxlbmd0aDtmPGc7ZisrKWZvcihlPXRoaXMuZmFjZXNbZl0sZS5hPWNbZS5hXSxlLmI9Y1tlLmJdLGUuYz1jW2UuY10sZT1bZS5hLGUuYixlLmNdLGQ9MDszPmQ7ZCsrKWlmKGVbZF09PT1lWyhkKzEpJTNdKXthLnB1c2goZik7YnJlYWt9Zm9yKGY9YS5sZW5ndGgtMTswPD1mO2YtLSlmb3IoZT1hW2ZdLHRoaXMuZmFjZXMuc3BsaWNlKGUsXG4xKSxjPTAsZz10aGlzLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2M8ZztjKyspdGhpcy5mYWNlVmVydGV4VXZzW2NdLnNwbGljZShlLDEpO2Y9dGhpcy52ZXJ0aWNlcy5sZW5ndGgtYi5sZW5ndGg7dGhpcy52ZXJ0aWNlcz1iO3JldHVybiBmfSxzb3J0RmFjZXNCeU1hdGVyaWFsSW5kZXg6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5mYWNlcyxiPWEubGVuZ3RoLGM9MDtjPGI7YysrKWFbY10uX2lkPWM7YS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubWF0ZXJpYWxJbmRleC1iLm1hdGVyaWFsSW5kZXh9KTt2YXIgZD10aGlzLmZhY2VWZXJ0ZXhVdnNbMF0sZT10aGlzLmZhY2VWZXJ0ZXhVdnNbMV0sZixnO2QmJmQubGVuZ3RoPT09YiYmKGY9W10pO2UmJmUubGVuZ3RoPT09YiYmKGc9W10pO2ZvcihjPTA7YzxiO2MrKyl7dmFyIGg9YVtjXS5faWQ7ZiYmZi5wdXNoKGRbaF0pO2cmJmcucHVzaChlW2hdKX1mJiYodGhpcy5mYWNlVmVydGV4VXZzWzBdPWYpO2cmJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMV09XG5nKX0sdG9KU09OOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7cmV0dXJuIGM/YXwxPDxiOmEmfigxPDxiKX1mdW5jdGlvbiBiKGEpe3ZhciBiPWEueC50b1N0cmluZygpK2EueS50b1N0cmluZygpK2Euei50b1N0cmluZygpO2lmKHZvaWQgMCE9PWxbYl0pcmV0dXJuIGxbYl07bFtiXT1rLmxlbmd0aC8zO2sucHVzaChhLngsYS55LGEueik7cmV0dXJuIGxbYl19ZnVuY3Rpb24gYyhhKXt2YXIgYj1hLnIudG9TdHJpbmcoKSthLmcudG9TdHJpbmcoKSthLmIudG9TdHJpbmcoKTtpZih2b2lkIDAhPT1wW2JdKXJldHVybiBwW2JdO3BbYl09bS5sZW5ndGg7bS5wdXNoKGEuZ2V0SGV4KCkpO3JldHVybiBwW2JdfWZ1bmN0aW9uIGQoYSl7dmFyIGI9YS54LnRvU3RyaW5nKCkrYS55LnRvU3RyaW5nKCk7aWYodm9pZCAwIT09cVtiXSlyZXR1cm4gcVtiXTtxW2JdPW4ubGVuZ3RoLzI7bi5wdXNoKGEueCxhLnkpO3JldHVybiBxW2JdfXZhciBlPXttZXRhZGF0YTp7dmVyc2lvbjo0LjQsdHlwZTpcIkdlb21ldHJ5XCIsXG5nZW5lcmF0b3I6XCJHZW9tZXRyeS50b0pTT05cIn19O2UudXVpZD10aGlzLnV1aWQ7ZS50eXBlPXRoaXMudHlwZTtcIlwiIT09dGhpcy5uYW1lJiYoZS5uYW1lPXRoaXMubmFtZSk7aWYodm9pZCAwIT09dGhpcy5wYXJhbWV0ZXJzKXt2YXIgZj10aGlzLnBhcmFtZXRlcnMsZztmb3IoZyBpbiBmKXZvaWQgMCE9PWZbZ10mJihlW2ddPWZbZ10pO3JldHVybiBlfWY9W107Zm9yKGc9MDtnPHRoaXMudmVydGljZXMubGVuZ3RoO2crKyl7dmFyIGg9dGhpcy52ZXJ0aWNlc1tnXTtmLnB1c2goaC54LGgueSxoLnopfXZhciBoPVtdLGs9W10sbD17fSxtPVtdLHA9e30sbj1bXSxxPXt9O2ZvcihnPTA7Zzx0aGlzLmZhY2VzLmxlbmd0aDtnKyspe3ZhciByPXRoaXMuZmFjZXNbZ10scz12b2lkIDAhPT10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1bZ10sdj0wPHIubm9ybWFsLmxlbmd0aCgpLHQ9MDxyLnZlcnRleE5vcm1hbHMubGVuZ3RoLHU9MSE9PXIuY29sb3Iucnx8MSE9PXIuY29sb3IuZ3x8MSE9PXIuY29sb3IuYixcbkQ9MDxyLnZlcnRleENvbG9ycy5sZW5ndGgsdz0wLHc9YSh3LDAsMCksdz1hKHcsMSwhMCksdz1hKHcsMiwhMSksdz1hKHcsMyxzKSx3PWEodyw0LHYpLHc9YSh3LDUsdCksdz1hKHcsNix1KSx3PWEodyw3LEQpO2gucHVzaCh3KTtoLnB1c2goci5hLHIuYixyLmMpO2gucHVzaChyLm1hdGVyaWFsSW5kZXgpO3MmJihzPXRoaXMuZmFjZVZlcnRleFV2c1swXVtnXSxoLnB1c2goZChzWzBdKSxkKHNbMV0pLGQoc1syXSkpKTt2JiZoLnB1c2goYihyLm5vcm1hbCkpO3QmJih2PXIudmVydGV4Tm9ybWFscyxoLnB1c2goYih2WzBdKSxiKHZbMV0pLGIodlsyXSkpKTt1JiZoLnB1c2goYyhyLmNvbG9yKSk7RCYmKHI9ci52ZXJ0ZXhDb2xvcnMsaC5wdXNoKGMoclswXSksYyhyWzFdKSxjKHJbMl0pKSl9ZS5kYXRhPXt9O2UuZGF0YS52ZXJ0aWNlcz1mO2UuZGF0YS5ub3JtYWxzPWs7MDxtLmxlbmd0aCYmKGUuZGF0YS5jb2xvcnM9bSk7MDxuLmxlbmd0aCYmKGUuZGF0YS51dnM9W25dKTtlLmRhdGEuZmFjZXM9XG5oO3JldHVybiBlfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuR2VvbWV0cnkpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmZhY2VzPVtdO3RoaXMuZmFjZVZlcnRleFV2cz1bW11dO2Zvcih2YXIgYj1hLnZlcnRpY2VzLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspdGhpcy52ZXJ0aWNlcy5wdXNoKGJbY10uY2xvbmUoKSk7Yj1hLmZhY2VzO2M9MDtmb3IoZD1iLmxlbmd0aDtjPGQ7YysrKXRoaXMuZmFjZXMucHVzaChiW2NdLmNsb25lKCkpO2M9MDtmb3IoZD1hLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2M8ZDtjKyspe2I9YS5mYWNlVmVydGV4VXZzW2NdO3ZvaWQgMD09PXRoaXMuZmFjZVZlcnRleFV2c1tjXSYmKHRoaXMuZmFjZVZlcnRleFV2c1tjXT1bXSk7Zm9yKHZhciBlPTAsZj1iLmxlbmd0aDtlPGY7ZSsrKXtmb3IodmFyIGc9YltlXSxoPVtdLGs9MCxsPWcubGVuZ3RoO2s8bDtrKyspaC5wdXNoKGdba10uY2xvbmUoKSk7XG50aGlzLmZhY2VWZXJ0ZXhVdnNbY10ucHVzaChoKX19cmV0dXJuIHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KTtUSFJFRS5HZW9tZXRyeUlkQ291bnQ9MDtcblRIUkVFLkRpcmVjdEdlb21ldHJ5PWZ1bmN0aW9uKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpUSFJFRS5HZW9tZXRyeUlkQ291bnQrK30pO3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudHlwZT1cIkRpcmVjdEdlb21ldHJ5XCI7dGhpcy5pbmRpY2VzPVtdO3RoaXMudmVydGljZXM9W107dGhpcy5ub3JtYWxzPVtdO3RoaXMuY29sb3JzPVtdO3RoaXMudXZzPVtdO3RoaXMudXZzMj1bXTt0aGlzLmdyb3Vwcz1bXTt0aGlzLm1vcnBoVGFyZ2V0cz17fTt0aGlzLnNraW5XZWlnaHRzPVtdO3RoaXMuc2tpbkluZGljZXM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5ncm91cHNOZWVkVXBkYXRlPXRoaXMudXZzTmVlZFVwZGF0ZT10aGlzLmNvbG9yc05lZWRVcGRhdGU9dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMX07XG5PYmplY3QuYXNzaWduKFRIUkVFLkRpcmVjdEdlb21ldHJ5LnByb3RvdHlwZSxUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLHtjb21wdXRlQm91bmRpbmdCb3g6VEhSRUUuR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVCb3VuZGluZ0JveCxjb21wdXRlQm91bmRpbmdTcGhlcmU6VEhSRUUuR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5EaXJlY3RHZW9tZXRyeTogY29tcHV0ZUZhY2VOb3JtYWxzKCkgaXMgbm90IGEgbWV0aG9kIG9mIHRoaXMgdHlwZSBvZiBnZW9tZXRyeS5cIil9LGNvbXB1dGVWZXJ0ZXhOb3JtYWxzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuRGlyZWN0R2VvbWV0cnk6IGNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCkgaXMgbm90IGEgbWV0aG9kIG9mIHRoaXMgdHlwZSBvZiBnZW9tZXRyeS5cIil9LGNvbXB1dGVHcm91cHM6ZnVuY3Rpb24oYSl7dmFyIGIsXG5jPVtdLGQ7YT1hLmZhY2VzO2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7ZSsrKXt2YXIgZj1hW2VdO2YubWF0ZXJpYWxJbmRleCE9PWQmJihkPWYubWF0ZXJpYWxJbmRleCx2b2lkIDAhPT1iJiYoYi5jb3VudD0zKmUtYi5zdGFydCxjLnB1c2goYikpLGI9e3N0YXJ0OjMqZSxtYXRlcmlhbEluZGV4OmR9KX12b2lkIDAhPT1iJiYoYi5jb3VudD0zKmUtYi5zdGFydCxjLnB1c2goYikpO3RoaXMuZ3JvdXBzPWN9LGZyb21HZW9tZXRyeTpmdW5jdGlvbihhKXt2YXIgYj1hLmZhY2VzLGM9YS52ZXJ0aWNlcyxkPWEuZmFjZVZlcnRleFV2cyxlPWRbMF0mJjA8ZFswXS5sZW5ndGgsZj1kWzFdJiYwPGRbMV0ubGVuZ3RoLGc9YS5tb3JwaFRhcmdldHMsaD1nLmxlbmd0aCxrO2lmKDA8aCl7az1bXTtmb3IodmFyIGw9MDtsPGg7bCsrKWtbbF09W107dGhpcy5tb3JwaFRhcmdldHMucG9zaXRpb249a312YXIgbT1hLm1vcnBoTm9ybWFscyxwPW0ubGVuZ3RoLG47aWYoMDxwKXtuPVtdO2ZvcihsPTA7bDxcbnA7bCsrKW5bbF09W107dGhpcy5tb3JwaFRhcmdldHMubm9ybWFsPW59Zm9yKHZhciBxPWEuc2tpbkluZGljZXMscj1hLnNraW5XZWlnaHRzLHM9cS5sZW5ndGg9PT1jLmxlbmd0aCx2PXIubGVuZ3RoPT09Yy5sZW5ndGgsbD0wO2w8Yi5sZW5ndGg7bCsrKXt2YXIgdD1iW2xdO3RoaXMudmVydGljZXMucHVzaChjW3QuYV0sY1t0LmJdLGNbdC5jXSk7dmFyIHU9dC52ZXJ0ZXhOb3JtYWxzOzM9PT11Lmxlbmd0aD90aGlzLm5vcm1hbHMucHVzaCh1WzBdLHVbMV0sdVsyXSk6KHU9dC5ub3JtYWwsdGhpcy5ub3JtYWxzLnB1c2godSx1LHUpKTt1PXQudmVydGV4Q29sb3JzOzM9PT11Lmxlbmd0aD90aGlzLmNvbG9ycy5wdXNoKHVbMF0sdVsxXSx1WzJdKToodT10LmNvbG9yLHRoaXMuY29sb3JzLnB1c2godSx1LHUpKTshMD09PWUmJih1PWRbMF1bbF0sdm9pZCAwIT09dT90aGlzLnV2cy5wdXNoKHVbMF0sdVsxXSx1WzJdKTooY29uc29sZS53YXJuKFwiVEhSRUUuRGlyZWN0R2VvbWV0cnkuZnJvbUdlb21ldHJ5KCk6IFVuZGVmaW5lZCB2ZXJ0ZXhVdiBcIixcbmwpLHRoaXMudXZzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIsbmV3IFRIUkVFLlZlY3RvcjIsbmV3IFRIUkVFLlZlY3RvcjIpKSk7ITA9PT1mJiYodT1kWzFdW2xdLHZvaWQgMCE9PXU/dGhpcy51dnMyLnB1c2godVswXSx1WzFdLHVbMl0pOihjb25zb2xlLndhcm4oXCJUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2MiBcIixsKSx0aGlzLnV2czIucHVzaChuZXcgVEhSRUUuVmVjdG9yMixuZXcgVEhSRUUuVmVjdG9yMixuZXcgVEhSRUUuVmVjdG9yMikpKTtmb3IodT0wO3U8aDt1Kyspe3ZhciBEPWdbdV0udmVydGljZXM7a1t1XS5wdXNoKERbdC5hXSxEW3QuYl0sRFt0LmNdKX1mb3IodT0wO3U8cDt1KyspRD1tW3VdLnZlcnRleE5vcm1hbHNbbF0sblt1XS5wdXNoKEQuYSxELmIsRC5jKTtzJiZ0aGlzLnNraW5JbmRpY2VzLnB1c2gocVt0LmFdLHFbdC5iXSxxW3QuY10pO3YmJnRoaXMuc2tpbldlaWdodHMucHVzaChyW3QuYV0sclt0LmJdLFxuclt0LmNdKX10aGlzLmNvbXB1dGVHcm91cHMoYSk7dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9YS52ZXJ0aWNlc05lZWRVcGRhdGU7dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT1hLm5vcm1hbHNOZWVkVXBkYXRlO3RoaXMuY29sb3JzTmVlZFVwZGF0ZT1hLmNvbG9yc05lZWRVcGRhdGU7dGhpcy51dnNOZWVkVXBkYXRlPWEudXZzTmVlZFVwZGF0ZTt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9YS5ncm91cHNOZWVkVXBkYXRlO3JldHVybiB0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7XG5USFJFRS5CdWZmZXJHZW9tZXRyeT1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6VEhSRUUuR2VvbWV0cnlJZENvdW50Kyt9KTt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnR5cGU9XCJCdWZmZXJHZW9tZXRyeVwiO3RoaXMuaW5kZXg9bnVsbDt0aGlzLmF0dHJpYnV0ZXM9e307dGhpcy5tb3JwaEF0dHJpYnV0ZXM9e307dGhpcy5ncm91cHM9W107dGhpcy5ib3VuZGluZ1NwaGVyZT10aGlzLmJvdW5kaW5nQm94PW51bGw7dGhpcy5kcmF3UmFuZ2U9e3N0YXJ0OjAsY291bnQ6SW5maW5pdHl9fTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUse2dldEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXh9LHNldEluZGV4OmZ1bmN0aW9uKGEpe3RoaXMuaW5kZXg9YX0sYWRkQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjKXtpZighMT09PWIgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUmJiExPT09YiBpbnN0YW5jZW9mIFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKWNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkQXR0cmlidXRlKCkgbm93IGV4cGVjdHMgKCBuYW1lLCBhdHRyaWJ1dGUgKS5cIiksdGhpcy5hZGRBdHRyaWJ1dGUoYSxuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGIsYykpO2Vsc2UgaWYoXCJpbmRleFwiPT09YSljb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS5hZGRBdHRyaWJ1dGU6IFVzZSAuc2V0SW5kZXgoKSBmb3IgaW5kZXggYXR0cmlidXRlLlwiKSxcbnRoaXMuc2V0SW5kZXgoYik7ZWxzZSByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2FdPWIsdGhpc30sZ2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmF0dHJpYnV0ZXNbYV19LHJlbW92ZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXtkZWxldGUgdGhpcy5hdHRyaWJ1dGVzW2FdO3JldHVybiB0aGlzfSxhZGRHcm91cDpmdW5jdGlvbihhLGIsYyl7dGhpcy5ncm91cHMucHVzaCh7c3RhcnQ6YSxjb3VudDpiLG1hdGVyaWFsSW5kZXg6dm9pZCAwIT09Yz9jOjB9KX0sY2xlYXJHcm91cHM6ZnVuY3Rpb24oKXt0aGlzLmdyb3Vwcz1bXX0sc2V0RHJhd1JhbmdlOmZ1bmN0aW9uKGEsYil7dGhpcy5kcmF3UmFuZ2Uuc3RhcnQ9YTt0aGlzLmRyYXdSYW5nZS5jb3VudD1ifSxhcHBseU1hdHJpeDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb247dm9pZCAwIT09YiYmKGEuYXBwbHlUb1ZlY3RvcjNBcnJheShiLmFycmF5KSxiLm5lZWRzVXBkYXRlPSEwKTtiPXRoaXMuYXR0cmlidXRlcy5ub3JtYWw7XG52b2lkIDAhPT1iJiYoKG5ldyBUSFJFRS5NYXRyaXgzKS5nZXROb3JtYWxNYXRyaXgoYSkuYXBwbHlUb1ZlY3RvcjNBcnJheShiLmFycmF5KSxiLm5lZWRzVXBkYXRlPSEwKTtudWxsIT09dGhpcy5ib3VuZGluZ0JveCYmdGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTtudWxsIT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmdGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtyZXR1cm4gdGhpc30scm90YXRlWDpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWF0cml4NCk7YS5tYWtlUm90YXRpb25YKGIpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHJvdGF0ZVk6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1hdHJpeDQpO2EubWFrZVJvdGF0aW9uWShiKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxyb3RhdGVaOmZ1bmN0aW9uKCl7dmFyIGE7XG5yZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1hdHJpeDQpO2EubWFrZVJvdGF0aW9uWihiKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYixjLGQpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5NYXRyaXg0KTthLm1ha2VUcmFuc2xhdGlvbihiLGMsZCk7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCksc2NhbGU6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYixjLGQpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5NYXRyaXg0KTthLm1ha2VTY2FsZShiLGMsZCk7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCksbG9va0F0OmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5PYmplY3QzRCk7YS5sb29rQXQoYik7YS51cGRhdGVNYXRyaXgoKTt0aGlzLmFwcGx5TWF0cml4KGEubWF0cml4KX19KCksXG5jZW50ZXI6ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpO3ZhciBhPXRoaXMuYm91bmRpbmdCb3guY2VudGVyKCkubmVnYXRlKCk7dGhpcy50cmFuc2xhdGUoYS54LGEueSxhLnopO3JldHVybiBhfSxzZXRGcm9tT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2VvbWV0cnk7aWYoYSBpbnN0YW5jZW9mIFRIUkVFLlBvaW50c3x8YSBpbnN0YW5jZW9mIFRIUkVFLkxpbmUpe2E9bmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoMypiLnZlcnRpY2VzLmxlbmd0aCwzKTt2YXIgYz1uZXcgVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZSgzKmIuY29sb3JzLmxlbmd0aCwzKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsYS5jb3B5VmVjdG9yM3NBcnJheShiLnZlcnRpY2VzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLGMuY29weUNvbG9yc0FycmF5KGIuY29sb3JzKSk7Yi5saW5lRGlzdGFuY2VzJiZiLmxpbmVEaXN0YW5jZXMubGVuZ3RoPT09Yi52ZXJ0aWNlcy5sZW5ndGgmJlxuKGE9bmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoYi5saW5lRGlzdGFuY2VzLmxlbmd0aCwxKSx0aGlzLmFkZEF0dHJpYnV0ZShcImxpbmVEaXN0YW5jZVwiLGEuY29weUFycmF5KGIubGluZURpc3RhbmNlcykpKTtudWxsIT09Yi5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9Yi5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKTtudWxsIT09Yi5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9Yi5ib3VuZGluZ0JveC5jbG9uZSgpKX1lbHNlIGEgaW5zdGFuY2VvZiBUSFJFRS5NZXNoJiZiIGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkmJnRoaXMuZnJvbUdlb21ldHJ5KGIpO3JldHVybiB0aGlzfSx1cGRhdGVGcm9tT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2VvbWV0cnk7aWYoYSBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpe3ZhciBjPWIuX19kaXJlY3RHZW9tZXRyeTtpZih2b2lkIDA9PT1jfHwhMD09PWIuZWxlbWVudHNOZWVkVXBkYXRlKXJldHVybiB0aGlzLmZyb21HZW9tZXRyeShiKTtcbmMudmVydGljZXNOZWVkVXBkYXRlPWIudmVydGljZXNOZWVkVXBkYXRlfHxiLmVsZW1lbnRzTmVlZFVwZGF0ZTtjLm5vcm1hbHNOZWVkVXBkYXRlPWIubm9ybWFsc05lZWRVcGRhdGV8fGIuZWxlbWVudHNOZWVkVXBkYXRlO2MuY29sb3JzTmVlZFVwZGF0ZT1iLmNvbG9yc05lZWRVcGRhdGV8fGIuZWxlbWVudHNOZWVkVXBkYXRlO2MudXZzTmVlZFVwZGF0ZT1iLnV2c05lZWRVcGRhdGV8fGIuZWxlbWVudHNOZWVkVXBkYXRlO2MuZ3JvdXBzTmVlZFVwZGF0ZT1iLmdyb3Vwc05lZWRVcGRhdGV8fGIuZWxlbWVudHNOZWVkVXBkYXRlO2IuZWxlbWVudHNOZWVkVXBkYXRlPSExO2IudmVydGljZXNOZWVkVXBkYXRlPSExO2Iubm9ybWFsc05lZWRVcGRhdGU9ITE7Yi5jb2xvcnNOZWVkVXBkYXRlPSExO2IudXZzTmVlZFVwZGF0ZT0hMTtiLmdyb3Vwc05lZWRVcGRhdGU9ITE7Yj1jfSEwPT09Yi52ZXJ0aWNlc05lZWRVcGRhdGUmJihjPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbix2b2lkIDAhPT1cbmMmJihjLmNvcHlWZWN0b3Izc0FycmF5KGIudmVydGljZXMpLGMubmVlZHNVcGRhdGU9ITApLGIudmVydGljZXNOZWVkVXBkYXRlPSExKTshMD09PWIubm9ybWFsc05lZWRVcGRhdGUmJihjPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwsdm9pZCAwIT09YyYmKGMuY29weVZlY3RvcjNzQXJyYXkoYi5ub3JtYWxzKSxjLm5lZWRzVXBkYXRlPSEwKSxiLm5vcm1hbHNOZWVkVXBkYXRlPSExKTshMD09PWIuY29sb3JzTmVlZFVwZGF0ZSYmKGM9dGhpcy5hdHRyaWJ1dGVzLmNvbG9yLHZvaWQgMCE9PWMmJihjLmNvcHlDb2xvcnNBcnJheShiLmNvbG9ycyksYy5uZWVkc1VwZGF0ZT0hMCksYi5jb2xvcnNOZWVkVXBkYXRlPSExKTtiLnV2c05lZWRVcGRhdGUmJihjPXRoaXMuYXR0cmlidXRlcy51dix2b2lkIDAhPT1jJiYoYy5jb3B5VmVjdG9yMnNBcnJheShiLnV2cyksYy5uZWVkc1VwZGF0ZT0hMCksYi51dnNOZWVkVXBkYXRlPSExKTtiLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlJiYoYz10aGlzLmF0dHJpYnV0ZXMubGluZURpc3RhbmNlLFxudm9pZCAwIT09YyYmKGMuY29weUFycmF5KGIubGluZURpc3RhbmNlcyksYy5uZWVkc1VwZGF0ZT0hMCksYi5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT0hMSk7Yi5ncm91cHNOZWVkVXBkYXRlJiYoYi5jb21wdXRlR3JvdXBzKGEuZ2VvbWV0cnkpLHRoaXMuZ3JvdXBzPWIuZ3JvdXBzLGIuZ3JvdXBzTmVlZFVwZGF0ZT0hMSk7cmV0dXJuIHRoaXN9LGZyb21HZW9tZXRyeTpmdW5jdGlvbihhKXthLl9fZGlyZWN0R2VvbWV0cnk9KG5ldyBUSFJFRS5EaXJlY3RHZW9tZXRyeSkuZnJvbUdlb21ldHJ5KGEpO3JldHVybiB0aGlzLmZyb21EaXJlY3RHZW9tZXRyeShhLl9fZGlyZWN0R2VvbWV0cnkpfSxmcm9tRGlyZWN0R2VvbWV0cnk6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEZsb2F0MzJBcnJheSgzKmEudmVydGljZXMubGVuZ3RoKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsKG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYiwzKSkuY29weVZlY3RvcjNzQXJyYXkoYS52ZXJ0aWNlcykpO1xuMDxhLm5vcm1hbHMubGVuZ3RoJiYoYj1uZXcgRmxvYXQzMkFycmF5KDMqYS5ub3JtYWxzLmxlbmd0aCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIiwobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShiLDMpKS5jb3B5VmVjdG9yM3NBcnJheShhLm5vcm1hbHMpKSk7MDxhLmNvbG9ycy5sZW5ndGgmJihiPW5ldyBGbG9hdDMyQXJyYXkoMyphLmNvbG9ycy5sZW5ndGgpLHRoaXMuYWRkQXR0cmlidXRlKFwiY29sb3JcIiwobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShiLDMpKS5jb3B5Q29sb3JzQXJyYXkoYS5jb2xvcnMpKSk7MDxhLnV2cy5sZW5ndGgmJihiPW5ldyBGbG9hdDMyQXJyYXkoMiphLnV2cy5sZW5ndGgpLHRoaXMuYWRkQXR0cmlidXRlKFwidXZcIiwobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShiLDIpKS5jb3B5VmVjdG9yMnNBcnJheShhLnV2cykpKTswPGEudXZzMi5sZW5ndGgmJihiPW5ldyBGbG9hdDMyQXJyYXkoMiphLnV2czIubGVuZ3RoKSx0aGlzLmFkZEF0dHJpYnV0ZShcInV2MlwiLFxuKG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYiwyKSkuY29weVZlY3RvcjJzQXJyYXkoYS51dnMyKSkpOzA8YS5pbmRpY2VzLmxlbmd0aCYmKGI9bmV3ICg2NTUzNTxhLnZlcnRpY2VzLmxlbmd0aD9VaW50MzJBcnJheTpVaW50MTZBcnJheSkoMyphLmluZGljZXMubGVuZ3RoKSx0aGlzLnNldEluZGV4KChuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGIsMSkpLmNvcHlJbmRpY2VzQXJyYXkoYS5pbmRpY2VzKSkpO3RoaXMuZ3JvdXBzPWEuZ3JvdXBzO2Zvcih2YXIgYyBpbiBhLm1vcnBoVGFyZ2V0cyl7Zm9yKHZhciBiPVtdLGQ9YS5tb3JwaFRhcmdldHNbY10sZT0wLGY9ZC5sZW5ndGg7ZTxmO2UrKyl7dmFyIGc9ZFtlXSxoPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKDMqZy5sZW5ndGgsMyk7Yi5wdXNoKGguY29weVZlY3RvcjNzQXJyYXkoZykpfXRoaXMubW9ycGhBdHRyaWJ1dGVzW2NdPWJ9MDxhLnNraW5JbmRpY2VzLmxlbmd0aCYmKGM9bmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoNCpcbmEuc2tpbkluZGljZXMubGVuZ3RoLDQpLHRoaXMuYWRkQXR0cmlidXRlKFwic2tpbkluZGV4XCIsYy5jb3B5VmVjdG9yNHNBcnJheShhLnNraW5JbmRpY2VzKSkpOzA8YS5za2luV2VpZ2h0cy5sZW5ndGgmJihjPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKDQqYS5za2luV2VpZ2h0cy5sZW5ndGgsNCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJza2luV2VpZ2h0XCIsYy5jb3B5VmVjdG9yNHNBcnJheShhLnNraW5XZWlnaHRzKSkpO251bGwhPT1hLmJvdW5kaW5nU3BoZXJlJiYodGhpcy5ib3VuZGluZ1NwaGVyZT1hLmJvdW5kaW5nU3BoZXJlLmNsb25lKCkpO251bGwhPT1hLmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD1hLmJvdW5kaW5nQm94LmNsb25lKCkpO3JldHVybiB0aGlzfSxjb21wdXRlQm91bmRpbmdCb3g6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9bmV3IFRIUkVFLkJveDMpO3ZhciBhPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcbnZvaWQgMCE9PWE/dGhpcy5ib3VuZGluZ0JveC5zZXRGcm9tQXJyYXkoYSk6dGhpcy5ib3VuZGluZ0JveC5tYWtlRW1wdHkoKTsoaXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueCl8fGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLnkpfHxpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi56KSkmJmNvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveDogQ29tcHV0ZWQgbWluL21heCBoYXZlIE5hTiB2YWx1ZXMuIFRoZSBcInBvc2l0aW9uXCIgYXR0cmlidXRlIGlzIGxpa2VseSB0byBoYXZlIE5hTiB2YWx1ZXMuJyx0aGlzKX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkJveDMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZSk7dmFyIGM9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO1xuaWYoYyl7dmFyIGM9Yy5hcnJheSxkPXRoaXMuYm91bmRpbmdTcGhlcmUuY2VudGVyO2Euc2V0RnJvbUFycmF5KGMpO2EuY2VudGVyKGQpO2Zvcih2YXIgZT0wLGY9MCxnPWMubGVuZ3RoO2Y8ZztmKz0zKWIuZnJvbUFycmF5KGMsZiksZT1NYXRoLm1heChlLGQuZGlzdGFuY2VUb1NxdWFyZWQoYikpO3RoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzPU1hdGguc3FydChlKTtpc05hTih0aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cykmJmNvbnNvbGUuZXJyb3IoJ1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpOiBDb21wdXRlZCByYWRpdXMgaXMgTmFOLiBUaGUgXCJwb3NpdGlvblwiIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyl9fX0oKSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXt9LGNvbXB1dGVWZXJ0ZXhOb3JtYWxzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbmRleCxiPXRoaXMuYXR0cmlidXRlcyxjPXRoaXMuZ3JvdXBzO1xuaWYoYi5wb3NpdGlvbil7dmFyIGQ9Yi5wb3NpdGlvbi5hcnJheTtpZih2b2lkIDA9PT1iLm5vcm1hbCl0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheShkLmxlbmd0aCksMykpO2Vsc2UgZm9yKHZhciBlPWIubm9ybWFsLmFycmF5LGY9MCxnPWUubGVuZ3RoO2Y8ZztmKyspZVtmXT0wO3ZhciBlPWIubm9ybWFsLmFycmF5LGgsayxsLG09bmV3IFRIUkVFLlZlY3RvcjMscD1uZXcgVEhSRUUuVmVjdG9yMyxuPW5ldyBUSFJFRS5WZWN0b3IzLHE9bmV3IFRIUkVFLlZlY3RvcjMscj1uZXcgVEhSRUUuVmVjdG9yMztpZihhKXthPWEuYXJyYXk7MD09PWMubGVuZ3RoJiZ0aGlzLmFkZEdyb3VwKDAsYS5sZW5ndGgpO2Zvcih2YXIgcz0wLHY9Yy5sZW5ndGg7czx2Oysrcylmb3IoZj1jW3NdLGc9Zi5zdGFydCxoPWYuY291bnQsZj1nLGcrPWg7ZjxnO2YrPTMpaD0zKmFbZiswXSxrPTMqYVtmKzFdLGw9MyphW2YrMl0sbS5mcm9tQXJyYXkoZCxcbmgpLHAuZnJvbUFycmF5KGQsayksbi5mcm9tQXJyYXkoZCxsKSxxLnN1YlZlY3RvcnMobixwKSxyLnN1YlZlY3RvcnMobSxwKSxxLmNyb3NzKHIpLGVbaF0rPXEueCxlW2grMV0rPXEueSxlW2grMl0rPXEueixlW2tdKz1xLngsZVtrKzFdKz1xLnksZVtrKzJdKz1xLnosZVtsXSs9cS54LGVbbCsxXSs9cS55LGVbbCsyXSs9cS56fWVsc2UgZm9yKGY9MCxnPWQubGVuZ3RoO2Y8ZztmKz05KW0uZnJvbUFycmF5KGQsZikscC5mcm9tQXJyYXkoZCxmKzMpLG4uZnJvbUFycmF5KGQsZis2KSxxLnN1YlZlY3RvcnMobixwKSxyLnN1YlZlY3RvcnMobSxwKSxxLmNyb3NzKHIpLGVbZl09cS54LGVbZisxXT1xLnksZVtmKzJdPXEueixlW2YrM109cS54LGVbZis0XT1xLnksZVtmKzVdPXEueixlW2YrNl09cS54LGVbZis3XT1xLnksZVtmKzhdPXEuejt0aGlzLm5vcm1hbGl6ZU5vcm1hbHMoKTtiLm5vcm1hbC5uZWVkc1VwZGF0ZT0hMH19LG1lcmdlOmZ1bmN0aW9uKGEsYil7aWYoITE9PT1hIGluc3RhbmNlb2ZcblRIUkVFLkJ1ZmZlckdlb21ldHJ5KWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS5tZXJnZSgpOiBnZW9tZXRyeSBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkuXCIsYSk7ZWxzZXt2b2lkIDA9PT1iJiYoYj0wKTt2YXIgYz10aGlzLmF0dHJpYnV0ZXMsZDtmb3IoZCBpbiBjKWlmKHZvaWQgMCE9PWEuYXR0cmlidXRlc1tkXSlmb3IodmFyIGU9Y1tkXS5hcnJheSxmPWEuYXR0cmlidXRlc1tkXSxnPWYuYXJyYXksaD0wLGY9Zi5pdGVtU2l6ZSpiO2g8Zy5sZW5ndGg7aCsrLGYrKyllW2ZdPWdbaF07cmV0dXJuIHRoaXN9fSxub3JtYWxpemVOb3JtYWxzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXksYixjLGQsZT0wLGY9YS5sZW5ndGg7ZTxmO2UrPTMpYj1hW2VdLGM9YVtlKzFdLGQ9YVtlKzJdLGI9MS9NYXRoLnNxcnQoYipiK2MqYytkKmQpLGFbZV0qPWIsYVtlKzFdKj1iLGFbZSsyXSo9Yn0sdG9Ob25JbmRleGVkOmZ1bmN0aW9uKCl7aWYobnVsbD09PVxudGhpcy5pbmRleClyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkudG9Ob25JbmRleGVkKCk6IEdlb21ldHJ5IGlzIGFscmVhZHkgbm9uLWluZGV4ZWQuXCIpLHRoaXM7dmFyIGE9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5LGI9dGhpcy5pbmRleC5hcnJheSxjPXRoaXMuYXR0cmlidXRlcyxkO2ZvcihkIGluIGMpe2Zvcih2YXIgZT1jW2RdLGY9ZS5hcnJheSxlPWUuaXRlbVNpemUsZz1uZXcgZi5jb25zdHJ1Y3RvcihiLmxlbmd0aCplKSxoPTAsaz0wLGw9MCxtPWIubGVuZ3RoO2w8bTtsKyspZm9yKHZhciBoPWJbbF0qZSxwPTA7cDxlO3ArKylnW2srK109ZltoKytdO2EuYWRkQXR0cmlidXRlKGQsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShnLGUpKX1yZXR1cm4gYX0sdG9KU09OOmZ1bmN0aW9uKCl7dmFyIGE9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNCx0eXBlOlwiQnVmZmVyR2VvbWV0cnlcIixnZW5lcmF0b3I6XCJCdWZmZXJHZW9tZXRyeS50b0pTT05cIn19O2EudXVpZD1cbnRoaXMudXVpZDthLnR5cGU9dGhpcy50eXBlO1wiXCIhPT10aGlzLm5hbWUmJihhLm5hbWU9dGhpcy5uYW1lKTtpZih2b2lkIDAhPT10aGlzLnBhcmFtZXRlcnMpe3ZhciBiPXRoaXMucGFyYW1ldGVycyxjO2ZvcihjIGluIGIpdm9pZCAwIT09YltjXSYmKGFbY109YltjXSk7cmV0dXJuIGF9YS5kYXRhPXthdHRyaWJ1dGVzOnt9fTt2YXIgZD10aGlzLmluZGV4O251bGwhPT1kJiYoYj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkLmFycmF5KSxhLmRhdGEuaW5kZXg9e3R5cGU6ZC5hcnJheS5jb25zdHJ1Y3Rvci5uYW1lLGFycmF5OmJ9KTtkPXRoaXMuYXR0cmlidXRlcztmb3IoYyBpbiBkKXt2YXIgZT1kW2NdLGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5hcnJheSk7YS5kYXRhLmF0dHJpYnV0ZXNbY109e2l0ZW1TaXplOmUuaXRlbVNpemUsdHlwZTplLmFycmF5LmNvbnN0cnVjdG9yLm5hbWUsYXJyYXk6Yixub3JtYWxpemVkOmUubm9ybWFsaXplZH19Yz10aGlzLmdyb3VwcztcbjA8Yy5sZW5ndGgmJihhLmRhdGEuZ3JvdXBzPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpKTtjPXRoaXMuYm91bmRpbmdTcGhlcmU7bnVsbCE9PWMmJihhLmRhdGEuYm91bmRpbmdTcGhlcmU9e2NlbnRlcjpjLmNlbnRlci50b0FycmF5KCkscmFkaXVzOmMucmFkaXVzfSk7cmV0dXJuIGF9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSkuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt2YXIgYj1hLmluZGV4O251bGwhPT1iJiZ0aGlzLnNldEluZGV4KGIuY2xvbmUoKSk7dmFyIGI9YS5hdHRyaWJ1dGVzLGM7Zm9yKGMgaW4gYil0aGlzLmFkZEF0dHJpYnV0ZShjLGJbY10uY2xvbmUoKSk7YT1hLmdyb3VwcztjPTA7Zm9yKGI9YS5sZW5ndGg7YzxiO2MrKyl7dmFyIGQ9YVtjXTt0aGlzLmFkZEdyb3VwKGQuc3RhcnQsZC5jb3VudCxkLm1hdGVyaWFsSW5kZXgpfXJldHVybiB0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7XG5USFJFRS5CdWZmZXJHZW9tZXRyeS5NYXhJbmRleD02NTUzNTtUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbigpe1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnlcIjt0aGlzLm1heEluc3RhbmNlZENvdW50PXZvaWQgMH07VEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk7VEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmFkZEdyb3VwPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmdyb3Vwcy5wdXNoKHtzdGFydDphLGNvdW50OmIsaW5zdGFuY2VzOmN9KX07XG5USFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXt2YXIgYj1hLmluZGV4O251bGwhPT1iJiZ0aGlzLnNldEluZGV4KGIuY2xvbmUoKSk7dmFyIGI9YS5hdHRyaWJ1dGVzLGM7Zm9yKGMgaW4gYil0aGlzLmFkZEF0dHJpYnV0ZShjLGJbY10uY2xvbmUoKSk7YT1hLmdyb3VwcztjPTA7Zm9yKGI9YS5sZW5ndGg7YzxiO2MrKyl7dmFyIGQ9YVtjXTt0aGlzLmFkZEdyb3VwKGQuc3RhcnQsZC5jb3VudCxkLmluc3RhbmNlcyl9cmV0dXJuIHRoaXN9O1RIUkVFLlVuaWZvcm09ZnVuY3Rpb24oYSxiKXtcInN0cmluZ1wiPT09dHlwZW9mIGEmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Vbmlmb3JtOiBUeXBlIHBhcmFtZXRlciBpcyBubyBsb25nZXIgbmVlZGVkLlwiKSxhPWIpO3RoaXMudmFsdWU9YTt0aGlzLmR5bmFtaWM9ITF9O1xuVEhSRUUuVW5pZm9ybS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlVuaWZvcm0sb25VcGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5keW5hbWljPSEwO3RoaXMub25VcGRhdGVDYWxsYmFjaz1hO3JldHVybiB0aGlzfX07VEhSRUUuQW5pbWF0aW9uQWN0aW9uPWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJUSFJFRS5BbmltYXRpb25BY3Rpb246IFVzZSBtaXhlci5jbGlwQWN0aW9uIGZvciBjb25zdHJ1Y3Rpb24uXCIpO307XG5USFJFRS5BbmltYXRpb25BY3Rpb24uX25ldz1mdW5jdGlvbihhLGIsYyl7dGhpcy5fbWl4ZXI9YTt0aGlzLl9jbGlwPWI7dGhpcy5fbG9jYWxSb290PWN8fG51bGw7YT1iLnRyYWNrcztiPWEubGVuZ3RoO2M9QXJyYXkoYik7Zm9yKHZhciBkPXtlbmRpbmdTdGFydDpUSFJFRS5aZXJvQ3VydmF0dXJlRW5kaW5nLGVuZGluZ0VuZDpUSFJFRS5aZXJvQ3VydmF0dXJlRW5kaW5nfSxlPTA7ZSE9PWI7KytlKXt2YXIgZj1hW2VdLmNyZWF0ZUludGVycG9sYW50KG51bGwpO2NbZV09ZjtmLnNldHRpbmdzPWR9dGhpcy5faW50ZXJwb2xhbnRTZXR0aW5ncz1kO3RoaXMuX2ludGVycG9sYW50cz1jO3RoaXMuX3Byb3BlcnR5QmluZGluZ3M9QXJyYXkoYik7dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ9dGhpcy5fYnlDbGlwQ2FjaGVJbmRleD10aGlzLl9jYWNoZUluZGV4PW51bGw7dGhpcy5sb29wPVRIUkVFLkxvb3BSZXBlYXQ7dGhpcy5fbG9vcENvdW50PVxuLTE7dGhpcy5fc3RhcnRUaW1lPW51bGw7dGhpcy50aW1lPTA7dGhpcy5fZWZmZWN0aXZlV2VpZ2h0PXRoaXMud2VpZ2h0PXRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT10aGlzLnRpbWVTY2FsZT0xO3RoaXMucmVwZXRpdGlvbnM9SW5maW5pdHk7dGhpcy5wYXVzZWQ9ITE7dGhpcy5lbmFibGVkPSEwO3RoaXMuY2xhbXBXaGVuRmluaXNoZWQ9ITE7dGhpcy56ZXJvU2xvcGVBdEVuZD10aGlzLnplcm9TbG9wZUF0U3RhcnQ9ITB9O1xuVEhSRUUuQW5pbWF0aW9uQWN0aW9uLl9uZXcucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5BbmltYXRpb25BY3Rpb24uX25ldyxwbGF5OmZ1bmN0aW9uKCl7dGhpcy5fbWl4ZXIuX2FjdGl2YXRlQWN0aW9uKHRoaXMpO3JldHVybiB0aGlzfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5fbWl4ZXIuX2RlYWN0aXZhdGVBY3Rpb24odGhpcyk7cmV0dXJuIHRoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnBhdXNlZD0hMTt0aGlzLmVuYWJsZWQ9ITA7dGhpcy50aW1lPTA7dGhpcy5fbG9vcENvdW50PS0xO3RoaXMuX3N0YXJ0VGltZT1udWxsO3JldHVybiB0aGlzLnN0b3BGYWRpbmcoKS5zdG9wV2FycGluZygpfSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmFibGVkJiYhdGhpcy5wYXVzZWQmJjAhPT10aGlzLnRpbWVTY2FsZSYmbnVsbD09PXRoaXMuX3N0YXJ0VGltZSYmdGhpcy5fbWl4ZXIuX2lzQWN0aXZlQWN0aW9uKHRoaXMpfSxpc1NjaGVkdWxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9taXhlci5faXNBY3RpdmVBY3Rpb24odGhpcyl9LFxuc3RhcnRBdDpmdW5jdGlvbihhKXt0aGlzLl9zdGFydFRpbWU9YTtyZXR1cm4gdGhpc30sc2V0TG9vcDpmdW5jdGlvbihhLGIpe3RoaXMubG9vcD1hO3RoaXMucmVwZXRpdGlvbnM9YjtyZXR1cm4gdGhpc30sc2V0RWZmZWN0aXZlV2VpZ2h0OmZ1bmN0aW9uKGEpe3RoaXMud2VpZ2h0PWE7dGhpcy5fZWZmZWN0aXZlV2VpZ2h0PXRoaXMuZW5hYmxlZD9hOjA7cmV0dXJuIHRoaXMuc3RvcEZhZGluZygpfSxnZXRFZmZlY3RpdmVXZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWZmZWN0aXZlV2VpZ2h0fSxmYWRlSW46ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3NjaGVkdWxlRmFkaW5nKGEsMCwxKX0sZmFkZU91dDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVGYWRpbmcoYSwxLDApfSxjcm9zc0ZhZGVGcm9tOmZ1bmN0aW9uKGEsYixjKXthLmZhZGVPdXQoYik7dGhpcy5mYWRlSW4oYik7aWYoYyl7Yz10aGlzLl9jbGlwLmR1cmF0aW9uO3ZhciBkPWEuX2NsaXAuZHVyYXRpb24sXG5lPWMvZDthLndhcnAoMSxkL2MsYik7dGhpcy53YXJwKGUsMSxiKX1yZXR1cm4gdGhpc30sY3Jvc3NGYWRlVG86ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLmNyb3NzRmFkZUZyb20odGhpcyxiLGMpfSxzdG9wRmFkaW5nOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7bnVsbCE9PWEmJih0aGlzLl93ZWlnaHRJbnRlcnBvbGFudD1udWxsLHRoaXMuX21peGVyLl90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudChhKSk7cmV0dXJuIHRoaXN9LHNldEVmZmVjdGl2ZVRpbWVTY2FsZTpmdW5jdGlvbihhKXt0aGlzLnRpbWVTY2FsZT1hO3RoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT10aGlzLnBhdXNlZD8wOmE7cmV0dXJuIHRoaXMuc3RvcFdhcnBpbmcoKX0sZ2V0RWZmZWN0aXZlVGltZVNjYWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZX0sc2V0RHVyYXRpb246ZnVuY3Rpb24oYSl7dGhpcy50aW1lU2NhbGU9dGhpcy5fY2xpcC5kdXJhdGlvbi9cbmE7cmV0dXJuIHRoaXMuc3RvcFdhcnBpbmcoKX0sc3luY1dpdGg6ZnVuY3Rpb24oYSl7dGhpcy50aW1lPWEudGltZTt0aGlzLnRpbWVTY2FsZT1hLnRpbWVTY2FsZTtyZXR1cm4gdGhpcy5zdG9wV2FycGluZygpfSxoYWx0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndhcnAodGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlLDAsYSl9LHdhcnA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuX21peGVyLGU9ZC50aW1lLGY9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQsZz10aGlzLnRpbWVTY2FsZTtudWxsPT09ZiYmKHRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PWY9ZC5fbGVuZENvbnRyb2xJbnRlcnBvbGFudCgpKTtkPWYucGFyYW1ldGVyUG9zaXRpb25zO2Y9Zi5zYW1wbGVWYWx1ZXM7ZFswXT1lO2RbMV09ZStjO2ZbMF09YS9nO2ZbMV09Yi9nO3JldHVybiB0aGlzfSxzdG9wV2FycGluZzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50O251bGwhPT1hJiZcbih0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1udWxsLHRoaXMuX21peGVyLl90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudChhKSk7cmV0dXJuIHRoaXN9LGdldE1peGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21peGVyfSxnZXRDbGlwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NsaXB9LGdldFJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxSb290fHx0aGlzLl9taXhlci5fcm9vdH0sX3VwZGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLl9zdGFydFRpbWU7aWYobnVsbCE9PWUpe2I9KGEtZSkqYztpZigwPmJ8fDA9PT1jKXJldHVybjt0aGlzLl9zdGFydFRpbWU9bnVsbDtiKj1jfWIqPXRoaXMuX3VwZGF0ZVRpbWVTY2FsZShhKTtjPXRoaXMuX3VwZGF0ZVRpbWUoYik7YT10aGlzLl91cGRhdGVXZWlnaHQoYSk7aWYoMDxhKXtiPXRoaXMuX2ludGVycG9sYW50cztmb3IodmFyIGU9dGhpcy5fcHJvcGVydHlCaW5kaW5ncyxmPTAsZz1iLmxlbmd0aDtmIT09XG5nOysrZiliW2ZdLmV2YWx1YXRlKGMpLGVbZl0uYWNjdW11bGF0ZShkLGEpfX0sX3VwZGF0ZVdlaWdodDpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKHRoaXMuZW5hYmxlZCl7dmFyIGI9dGhpcy53ZWlnaHQsYz10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtpZihudWxsIT09Yyl7dmFyIGQ9Yy5ldmFsdWF0ZShhKVswXSxiPWIqZDthPmMucGFyYW1ldGVyUG9zaXRpb25zWzFdJiYodGhpcy5zdG9wRmFkaW5nKCksMD09PWQmJih0aGlzLmVuYWJsZWQ9ITEpKX19cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVdlaWdodD1ifSxfdXBkYXRlVGltZVNjYWxlOmZ1bmN0aW9uKGEpe3ZhciBiPTA7aWYoIXRoaXMucGF1c2VkKXt2YXIgYj10aGlzLnRpbWVTY2FsZSxjPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50O2lmKG51bGwhPT1jKXt2YXIgZD1jLmV2YWx1YXRlKGEpWzBdLGI9YipkO2E+Yy5wYXJhbWV0ZXJQb3NpdGlvbnNbMV0mJih0aGlzLnN0b3BXYXJwaW5nKCksMD09PWI/dGhpcy5wYXVzZWQ9ITA6XG50aGlzLnRpbWVTY2FsZT1iKX19cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT1ifSxfdXBkYXRlVGltZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnRpbWUrYTtpZigwPT09YSlyZXR1cm4gYjt2YXIgYz10aGlzLl9jbGlwLmR1cmF0aW9uLGQ9dGhpcy5sb29wLGU9dGhpcy5fbG9vcENvdW50O2lmKGQ9PT1USFJFRS5Mb29wT25jZSlhOntpZigtMT09PWUmJih0aGlzLmxvb3BDb3VudD0wLHRoaXMuX3NldEVuZGluZ3MoITAsITAsITEpKSxiPj1jKWI9YztlbHNlIGlmKDA+YiliPTA7ZWxzZSBicmVhayBhO3RoaXMuY2xhbXBXaGVuRmluaXNoZWQ/dGhpcy5wYXVzZWQ9ITA6dGhpcy5lbmFibGVkPSExO3RoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJmaW5pc2hlZFwiLGFjdGlvbjp0aGlzLGRpcmVjdGlvbjowPmE/LTE6MX0pfWVsc2V7ZD1kPT09VEhSRUUuTG9vcFBpbmdQb25nOy0xPT09ZSYmKDA8PWE/KGU9MCx0aGlzLl9zZXRFbmRpbmdzKCEwLDA9PT10aGlzLnJlcGV0aXRpb25zLFxuZCkpOnRoaXMuX3NldEVuZGluZ3MoMD09PXRoaXMucmVwZXRpdGlvbnMsITAsZCkpO2lmKGI+PWN8fDA+Yil7dmFyIGY9TWF0aC5mbG9vcihiL2MpLGI9Yi1jKmYsZT1lK01hdGguYWJzKGYpLGc9dGhpcy5yZXBldGl0aW9ucy1lOzA+Zz8odGhpcy5jbGFtcFdoZW5GaW5pc2hlZD90aGlzLnBhdXNlZD0hMDp0aGlzLmVuYWJsZWQ9ITEsYj0wPGE/YzowLHRoaXMuX21peGVyLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJmaW5pc2hlZFwiLGFjdGlvbjp0aGlzLGRpcmVjdGlvbjowPGE/MTotMX0pKTooMD09PWc/KGE9MD5hLHRoaXMuX3NldEVuZGluZ3MoYSwhYSxkKSk6dGhpcy5fc2V0RW5kaW5ncyghMSwhMSxkKSx0aGlzLl9sb29wQ291bnQ9ZSx0aGlzLl9taXhlci5kaXNwYXRjaEV2ZW50KHt0eXBlOlwibG9vcFwiLGFjdGlvbjp0aGlzLGxvb3BEZWx0YTpmfSkpfWlmKGQmJjE9PT0oZSYxKSlyZXR1cm4gdGhpcy50aW1lPWIsYy1ifXJldHVybiB0aGlzLnRpbWU9Yn0sX3NldEVuZGluZ3M6ZnVuY3Rpb24oYSxcbmIsYyl7dmFyIGQ9dGhpcy5faW50ZXJwb2xhbnRTZXR0aW5ncztjPyhkLmVuZGluZ1N0YXJ0PVRIUkVFLlplcm9TbG9wZUVuZGluZyxkLmVuZGluZ0VuZD1USFJFRS5aZXJvU2xvcGVFbmRpbmcpOihkLmVuZGluZ1N0YXJ0PWE/dGhpcy56ZXJvU2xvcGVBdFN0YXJ0P1RIUkVFLlplcm9TbG9wZUVuZGluZzpUSFJFRS5aZXJvQ3VydmF0dXJlRW5kaW5nOlRIUkVFLldyYXBBcm91bmRFbmRpbmcsZC5lbmRpbmdFbmQ9Yj90aGlzLnplcm9TbG9wZUF0RW5kP1RIUkVFLlplcm9TbG9wZUVuZGluZzpUSFJFRS5aZXJvQ3VydmF0dXJlRW5kaW5nOlRIUkVFLldyYXBBcm91bmRFbmRpbmcpfSxfc2NoZWR1bGVGYWRpbmc6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuX21peGVyLGU9ZC50aW1lLGY9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7bnVsbD09PWYmJih0aGlzLl93ZWlnaHRJbnRlcnBvbGFudD1mPWQuX2xlbmRDb250cm9sSW50ZXJwb2xhbnQoKSk7ZD1mLnBhcmFtZXRlclBvc2l0aW9ucztcbmY9Zi5zYW1wbGVWYWx1ZXM7ZFswXT1lO2ZbMF09YjtkWzFdPWUrYTtmWzFdPWM7cmV0dXJuIHRoaXN9fTtUSFJFRS5BbmltYXRpb25DbGlwPWZ1bmN0aW9uKGEsYixjKXt0aGlzLm5hbWU9YTt0aGlzLnRyYWNrcz1jO3RoaXMuZHVyYXRpb249dm9pZCAwIT09Yj9iOi0xO3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpOzA+dGhpcy5kdXJhdGlvbiYmdGhpcy5yZXNldER1cmF0aW9uKCk7dGhpcy50cmltKCk7dGhpcy5vcHRpbWl6ZSgpfTtcblRIUkVFLkFuaW1hdGlvbkNsaXAucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5BbmltYXRpb25DbGlwLHJlc2V0RHVyYXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz10aGlzLnRyYWNrcy5sZW5ndGg7YiE9PWM7KytiKXZhciBkPXRoaXMudHJhY2tzW2JdLGE9TWF0aC5tYXgoYSxkLnRpbWVzW2QudGltZXMubGVuZ3RoLTFdKTt0aGlzLmR1cmF0aW9uPWF9LHRyaW06ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMudHJhY2tzLmxlbmd0aDthKyspdGhpcy50cmFja3NbYV0udHJpbSgwLHRoaXMuZHVyYXRpb24pO3JldHVybiB0aGlzfSxvcHRpbWl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy50cmFja3MubGVuZ3RoO2ErKyl0aGlzLnRyYWNrc1thXS5vcHRpbWl6ZSgpO3JldHVybiB0aGlzfX07XG5PYmplY3QuYXNzaWduKFRIUkVFLkFuaW1hdGlvbkNsaXAse3BhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPWEudHJhY2tzLGQ9MS8oYS5mcHN8fDEpLGU9MCxmPWMubGVuZ3RoO2UhPT1mOysrZSliLnB1c2goVEhSRUUuS2V5ZnJhbWVUcmFjay5wYXJzZShjW2VdKS5zY2FsZShkKSk7cmV0dXJuIG5ldyBUSFJFRS5BbmltYXRpb25DbGlwKGEubmFtZSxhLmR1cmF0aW9uLGIpfSx0b0pTT046ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1hLnRyYWNrczthPXtuYW1lOmEubmFtZSxkdXJhdGlvbjphLmR1cmF0aW9uLHRyYWNrczpifTtmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2QhPT1lOysrZCliLnB1c2goVEhSRUUuS2V5ZnJhbWVUcmFjay50b0pTT04oY1tkXSkpO3JldHVybiBhfSxDcmVhdGVGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZTpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGU9Yi5sZW5ndGgsZj1bXSxnPTA7ZzxlO2crKyl7dmFyIGg9W10saz1bXTtoLnB1c2goKGcrZS0xKSVcbmUsZywoZysxKSVlKTtrLnB1c2goMCwxLDApO3ZhciBsPVRIUkVFLkFuaW1hdGlvblV0aWxzLmdldEtleWZyYW1lT3JkZXIoaCksaD1USFJFRS5BbmltYXRpb25VdGlscy5zb3J0ZWRBcnJheShoLDEsbCksaz1USFJFRS5BbmltYXRpb25VdGlscy5zb3J0ZWRBcnJheShrLDEsbCk7ZHx8MCE9PWhbMF18fChoLnB1c2goZSksay5wdXNoKGtbMF0pKTtmLnB1c2goKG5ldyBUSFJFRS5OdW1iZXJLZXlmcmFtZVRyYWNrKFwiLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tcIitiW2ddLm5hbWUrXCJdXCIsaCxrKSkuc2NhbGUoMS9jKSl9cmV0dXJuIG5ldyBUSFJFRS5BbmltYXRpb25DbGlwKGEsLTEsZil9LGZpbmRCeU5hbWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hO0FycmF5LmlzQXJyYXkoYSl8fChjPWEuZ2VvbWV0cnkmJmEuZ2VvbWV0cnkuYW5pbWF0aW9uc3x8YS5hbmltYXRpb25zKTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKylpZihjW2RdLm5hbWU9PT1iKXJldHVybiBjW2RdO3JldHVybiBudWxsfSxcbkNyZWF0ZUNsaXBzRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2VzOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9e30sZT0vXihbXFx3LV0qPykoW1xcZF0rKSQvLGY9MCxnPWEubGVuZ3RoO2Y8ZztmKyspe3ZhciBoPWFbZl0saz1oLm5hbWUubWF0Y2goZSk7aWYoayYmMTxrLmxlbmd0aCl7dmFyIGw9a1sxXTsoaz1kW2xdKXx8KGRbbF09az1bXSk7ay5wdXNoKGgpfX1hPVtdO2ZvcihsIGluIGQpYS5wdXNoKFRIUkVFLkFuaW1hdGlvbkNsaXAuQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2UobCxkW2xdLGIsYykpO3JldHVybiBhfSxwYXJzZUFuaW1hdGlvbjpmdW5jdGlvbihhLGIsYyl7aWYoIWEpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCIgIG5vIGFuaW1hdGlvbiBpbiBKU09OTG9hZGVyIGRhdGFcIiksbnVsbDtjPWZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoMCE9PWMubGVuZ3RoKXt2YXIgZj1bXSxnPVtdO1RIUkVFLkFuaW1hdGlvblV0aWxzLmZsYXR0ZW5KU09OKGMsZixnLGQpOzAhPT1mLmxlbmd0aCYmXG5lLnB1c2gobmV3IGEoYixmLGcpKX19O3ZhciBkPVtdLGU9YS5uYW1lfHxcImRlZmF1bHRcIixmPWEubGVuZ3RofHwtMSxnPWEuZnBzfHwzMDthPWEuaGllcmFyY2h5fHxbXTtmb3IodmFyIGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGs9YVtoXS5rZXlzO2lmKGsmJjAhPT1rLmxlbmd0aClpZihrWzBdLm1vcnBoVGFyZ2V0cyl7Zm9yKHZhciBmPXt9LGw9MDtsPGsubGVuZ3RoO2wrKylpZihrW2xdLm1vcnBoVGFyZ2V0cylmb3IodmFyIG09MDttPGtbbF0ubW9ycGhUYXJnZXRzLmxlbmd0aDttKyspZltrW2xdLm1vcnBoVGFyZ2V0c1ttXV09LTE7Zm9yKHZhciBwIGluIGYpe2Zvcih2YXIgbj1bXSxxPVtdLG09MDttIT09a1tsXS5tb3JwaFRhcmdldHMubGVuZ3RoOysrbSl7dmFyIHI9a1tsXTtuLnB1c2goci50aW1lKTtxLnB1c2goci5tb3JwaFRhcmdldD09PXA/MTowKX1kLnB1c2gobmV3IFRIUkVFLk51bWJlcktleWZyYW1lVHJhY2soXCIubW9ycGhUYXJnZXRJbmZsdWVuY2VbXCIrcCtcIl1cIixcbm4scSkpfWY9Zi5sZW5ndGgqKGd8fDEpfWVsc2UgbD1cIi5ib25lc1tcIitiW2hdLm5hbWUrXCJdXCIsYyhUSFJFRS5WZWN0b3JLZXlmcmFtZVRyYWNrLGwrXCIucG9zaXRpb25cIixrLFwicG9zXCIsZCksYyhUSFJFRS5RdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjayxsK1wiLnF1YXRlcm5pb25cIixrLFwicm90XCIsZCksYyhUSFJFRS5WZWN0b3JLZXlmcmFtZVRyYWNrLGwrXCIuc2NhbGVcIixrLFwic2NsXCIsZCl9cmV0dXJuIDA9PT1kLmxlbmd0aD9udWxsOm5ldyBUSFJFRS5BbmltYXRpb25DbGlwKGUsZixkKX19KTtUSFJFRS5BbmltYXRpb25NaXhlcj1mdW5jdGlvbihhKXt0aGlzLl9yb290PWE7dGhpcy5faW5pdE1lbW9yeU1hbmFnZXIoKTt0aGlzLnRpbWU9dGhpcy5fYWNjdUluZGV4PTA7dGhpcy50aW1lU2NhbGU9MX07XG5PYmplY3QuYXNzaWduKFRIUkVFLkFuaW1hdGlvbk1peGVyLnByb3RvdHlwZSxUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLHtjbGlwQWN0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy5fcm9vdCxkPWMudXVpZCxlPVwic3RyaW5nXCI9PT10eXBlb2YgYT9USFJFRS5BbmltYXRpb25DbGlwLmZpbmRCeU5hbWUoYyxhKTphLGM9bnVsbCE9PWU/ZS51dWlkOmEsZj10aGlzLl9hY3Rpb25zQnlDbGlwW2NdLGc9bnVsbDtpZih2b2lkIDAhPT1mKXtnPWYuYWN0aW9uQnlSb290W2RdO2lmKHZvaWQgMCE9PWcpcmV0dXJuIGc7Zz1mLmtub3duQWN0aW9uc1swXTtudWxsPT09ZSYmKGU9Zy5fY2xpcCl9aWYobnVsbD09PWUpcmV0dXJuIG51bGw7ZT1uZXcgVEhSRUUuQW5pbWF0aW9uTWl4ZXIuX0FjdGlvbih0aGlzLGUsYik7dGhpcy5fYmluZEFjdGlvbihlLGcpO3RoaXMuX2FkZEluYWN0aXZlQWN0aW9uKGUsYyxkKTtyZXR1cm4gZX0sZXhpc3RpbmdBY3Rpb246ZnVuY3Rpb24oYSxcbmIpe3ZhciBjPWJ8fHRoaXMuX3Jvb3QsZD1jLnV1aWQsYz1cInN0cmluZ1wiPT09dHlwZW9mIGE/VEhSRUUuQW5pbWF0aW9uQ2xpcC5maW5kQnlOYW1lKGMsYSk6YSxjPXRoaXMuX2FjdGlvbnNCeUNsaXBbYz9jLnV1aWQ6YV07cmV0dXJuIHZvaWQgMCE9PWM/Yy5hY3Rpb25CeVJvb3RbZF18fG51bGw6bnVsbH0sc3RvcEFsbEFjdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLl9hY3Rpb25zLGI9dGhpcy5fbkFjdGl2ZUFjdGlvbnMsYz10aGlzLl9iaW5kaW5ncyxkPXRoaXMuX25BY3RpdmVCaW5kaW5ncyxlPXRoaXMuX25BY3RpdmVCaW5kaW5ncz10aGlzLl9uQWN0aXZlQWN0aW9ucz0wO2UhPT1iOysrZSlhW2VdLnJlc2V0KCk7Zm9yKGU9MDtlIT09ZDsrK2UpY1tlXS51c2VDb3VudD0wO3JldHVybiB0aGlzfSx1cGRhdGU6ZnVuY3Rpb24oYSl7YSo9dGhpcy50aW1lU2NhbGU7Zm9yKHZhciBiPXRoaXMuX2FjdGlvbnMsYz10aGlzLl9uQWN0aXZlQWN0aW9ucyxkPXRoaXMudGltZSs9XG5hLGU9TWF0aC5zaWduKGEpLGY9dGhpcy5fYWNjdUluZGV4Xj0xLGc9MDtnIT09YzsrK2cpe3ZhciBoPWJbZ107aC5lbmFibGVkJiZoLl91cGRhdGUoZCxhLGUsZil9YT10aGlzLl9iaW5kaW5ncztiPXRoaXMuX25BY3RpdmVCaW5kaW5ncztmb3IoZz0wO2chPT1iOysrZylhW2ddLmFwcGx5KGYpO3JldHVybiB0aGlzfSxnZXRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jvb3R9LHVuY2FjaGVDbGlwOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2FjdGlvbnM7YT1hLnV1aWQ7dmFyIGM9dGhpcy5fYWN0aW9uc0J5Q2xpcCxkPWNbYV07aWYodm9pZCAwIT09ZCl7Zm9yKHZhciBkPWQua25vd25BY3Rpb25zLGU9MCxmPWQubGVuZ3RoO2UhPT1mOysrZSl7dmFyIGc9ZFtlXTt0aGlzLl9kZWFjdGl2YXRlQWN0aW9uKGcpO3ZhciBoPWcuX2NhY2hlSW5kZXgsaz1iW2IubGVuZ3RoLTFdO2cuX2NhY2hlSW5kZXg9bnVsbDtnLl9ieUNsaXBDYWNoZUluZGV4PW51bGw7ay5fY2FjaGVJbmRleD1cbmg7YltoXT1rO2IucG9wKCk7dGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbihnKX1kZWxldGUgY1thXX19LHVuY2FjaGVSb290OmZ1bmN0aW9uKGEpe2E9YS51dWlkO3ZhciBiPXRoaXMuX2FjdGlvbnNCeUNsaXAsYztmb3IoYyBpbiBiKXt2YXIgZD1iW2NdLmFjdGlvbkJ5Um9vdFthXTt2b2lkIDAhPT1kJiYodGhpcy5fZGVhY3RpdmF0ZUFjdGlvbihkKSx0aGlzLl9yZW1vdmVJbmFjdGl2ZUFjdGlvbihkKSl9Yz10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWVbYV07aWYodm9pZCAwIT09Yylmb3IodmFyIGUgaW4gYylhPWNbZV0sYS5yZXN0b3JlT3JpZ2luYWxTdGF0ZSgpLHRoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZyhhKX0sdW5jYWNoZUFjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZXhpc3RpbmdBY3Rpb24oYSxiKTtudWxsIT09YyYmKHRoaXMuX2RlYWN0aXZhdGVBY3Rpb24oYyksdGhpcy5fcmVtb3ZlSW5hY3RpdmVBY3Rpb24oYykpfX0pO1xuVEhSRUUuQW5pbWF0aW9uTWl4ZXIuX0FjdGlvbj1USFJFRS5BbmltYXRpb25BY3Rpb24uX25ldztcbk9iamVjdC5hc3NpZ24oVEhSRUUuQW5pbWF0aW9uTWl4ZXIucHJvdG90eXBlLHtfYmluZEFjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPWEuX2xvY2FsUm9vdHx8dGhpcy5fcm9vdCxkPWEuX2NsaXAudHJhY2tzLGU9ZC5sZW5ndGgsZj1hLl9wcm9wZXJ0eUJpbmRpbmdzLGc9YS5faW50ZXJwb2xhbnRzLGg9Yy51dWlkLGs9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLGw9a1toXTt2b2lkIDA9PT1sJiYobD17fSxrW2hdPWwpO2ZvcihrPTA7ayE9PWU7KytrKXt2YXIgbT1kW2tdLHA9bS5uYW1lLG49bFtwXTtpZih2b2lkIDA9PT1uKXtuPWZba107aWYodm9pZCAwIT09bil7bnVsbD09PW4uX2NhY2hlSW5kZXgmJigrK24ucmVmZXJlbmNlQ291bnQsdGhpcy5fYWRkSW5hY3RpdmVCaW5kaW5nKG4saCxwKSk7Y29udGludWV9bj1uZXcgVEhSRUUuUHJvcGVydHlNaXhlcihUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcuY3JlYXRlKGMscCxiJiZiLl9wcm9wZXJ0eUJpbmRpbmdzW2tdLmJpbmRpbmcucGFyc2VkUGF0aCksXG5tLlZhbHVlVHlwZU5hbWUsbS5nZXRWYWx1ZVNpemUoKSk7KytuLnJlZmVyZW5jZUNvdW50O3RoaXMuX2FkZEluYWN0aXZlQmluZGluZyhuLGgscCl9ZltrXT1uO2dba10ucmVzdWx0QnVmZmVyPW4uYnVmZmVyfX0sX2FjdGl2YXRlQWN0aW9uOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9pc0FjdGl2ZUFjdGlvbihhKSl7aWYobnVsbD09PWEuX2NhY2hlSW5kZXgpe3ZhciBiPShhLl9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QpLnV1aWQsYz1hLl9jbGlwLnV1aWQsZD10aGlzLl9hY3Rpb25zQnlDbGlwW2NdO3RoaXMuX2JpbmRBY3Rpb24oYSxkJiZkLmtub3duQWN0aW9uc1swXSk7dGhpcy5fYWRkSW5hY3RpdmVBY3Rpb24oYSxjLGIpfWI9YS5fcHJvcGVydHlCaW5kaW5ncztjPTA7Zm9yKGQ9Yi5sZW5ndGg7YyE9PWQ7KytjKXt2YXIgZT1iW2NdOzA9PT1lLnVzZUNvdW50KysmJih0aGlzLl9sZW5kQmluZGluZyhlKSxlLnNhdmVPcmlnaW5hbFN0YXRlKCkpfXRoaXMuX2xlbmRBY3Rpb24oYSl9fSxcbl9kZWFjdGl2YXRlQWN0aW9uOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2lzQWN0aXZlQWN0aW9uKGEpKXtmb3IodmFyIGI9YS5fcHJvcGVydHlCaW5kaW5ncyxjPTAsZD1iLmxlbmd0aDtjIT09ZDsrK2Mpe3ZhciBlPWJbY107MD09PS0tZS51c2VDb3VudCYmKGUucmVzdG9yZU9yaWdpbmFsU3RhdGUoKSx0aGlzLl90YWtlQmFja0JpbmRpbmcoZSkpfXRoaXMuX3Rha2VCYWNrQWN0aW9uKGEpfX0sX2luaXRNZW1vcnlNYW5hZ2VyOmZ1bmN0aW9uKCl7dGhpcy5fYWN0aW9ucz1bXTt0aGlzLl9uQWN0aXZlQWN0aW9ucz0wO3RoaXMuX2FjdGlvbnNCeUNsaXA9e307dGhpcy5fYmluZGluZ3M9W107dGhpcy5fbkFjdGl2ZUJpbmRpbmdzPTA7dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lPXt9O3RoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHM9W107dGhpcy5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHM9MDt2YXIgYT10aGlzO3RoaXMuc3RhdHM9e2FjdGlvbnM6e2dldCB0b3RhbCgpe3JldHVybiBhLl9hY3Rpb25zLmxlbmd0aH0sXG5nZXQgaW5Vc2UoKXtyZXR1cm4gYS5fbkFjdGl2ZUFjdGlvbnN9fSxiaW5kaW5nczp7Z2V0IHRvdGFsKCl7cmV0dXJuIGEuX2JpbmRpbmdzLmxlbmd0aH0sZ2V0IGluVXNlKCl7cmV0dXJuIGEuX25BY3RpdmVCaW5kaW5nc319LGNvbnRyb2xJbnRlcnBvbGFudHM6e2dldCB0b3RhbCgpe3JldHVybiBhLl9jb250cm9sSW50ZXJwb2xhbnRzLmxlbmd0aH0sZ2V0IGluVXNlKCl7cmV0dXJuIGEuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzfX19fSxfaXNBY3RpdmVBY3Rpb246ZnVuY3Rpb24oYSl7YT1hLl9jYWNoZUluZGV4O3JldHVybiBudWxsIT09YSYmYTx0aGlzLl9uQWN0aXZlQWN0aW9uc30sX2FkZEluYWN0aXZlQWN0aW9uOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9hY3Rpb25zLGU9dGhpcy5fYWN0aW9uc0J5Q2xpcCxmPWVbYl07dm9pZCAwPT09Zj8oZj17a25vd25BY3Rpb25zOlthXSxhY3Rpb25CeVJvb3Q6e319LGEuX2J5Q2xpcENhY2hlSW5kZXg9MCxlW2JdPWYpOihiPVxuZi5rbm93bkFjdGlvbnMsYS5fYnlDbGlwQ2FjaGVJbmRleD1iLmxlbmd0aCxiLnB1c2goYSkpO2EuX2NhY2hlSW5kZXg9ZC5sZW5ndGg7ZC5wdXNoKGEpO2YuYWN0aW9uQnlSb290W2NdPWF9LF9yZW1vdmVJbmFjdGl2ZUFjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9hY3Rpb25zLGM9YltiLmxlbmd0aC0xXSxkPWEuX2NhY2hlSW5kZXg7Yy5fY2FjaGVJbmRleD1kO2JbZF09YztiLnBvcCgpO2EuX2NhY2hlSW5kZXg9bnVsbDt2YXIgYz1hLl9jbGlwLnV1aWQsZD10aGlzLl9hY3Rpb25zQnlDbGlwLGU9ZFtjXSxmPWUua25vd25BY3Rpb25zLGc9ZltmLmxlbmd0aC0xXSxoPWEuX2J5Q2xpcENhY2hlSW5kZXg7Zy5fYnlDbGlwQ2FjaGVJbmRleD1oO2ZbaF09ZztmLnBvcCgpO2EuX2J5Q2xpcENhY2hlSW5kZXg9bnVsbDtkZWxldGUgZS5hY3Rpb25CeVJvb3RbKGIuX2xvY2FsUm9vdHx8dGhpcy5fcm9vdCkudXVpZF07MD09PWYubGVuZ3RoJiZkZWxldGUgZFtjXTt0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmdzRm9yQWN0aW9uKGEpfSxcbl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmdzRm9yQWN0aW9uOmZ1bmN0aW9uKGEpe2E9YS5fcHJvcGVydHlCaW5kaW5ncztmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2IhPT1jOysrYil7dmFyIGQ9YVtiXTswPT09LS1kLnJlZmVyZW5jZUNvdW50JiZ0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmcoZCl9fSxfbGVuZEFjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9hY3Rpb25zLGM9YS5fY2FjaGVJbmRleCxkPXRoaXMuX25BY3RpdmVBY3Rpb25zKyssZT1iW2RdO2EuX2NhY2hlSW5kZXg9ZDtiW2RdPWE7ZS5fY2FjaGVJbmRleD1jO2JbY109ZX0sX3Rha2VCYWNrQWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2FjdGlvbnMsYz1hLl9jYWNoZUluZGV4LGQ9LS10aGlzLl9uQWN0aXZlQWN0aW9ucyxlPWJbZF07YS5fY2FjaGVJbmRleD1kO2JbZF09YTtlLl9jYWNoZUluZGV4PWM7YltjXT1lfSxfYWRkSW5hY3RpdmVCaW5kaW5nOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWUsXG5lPWRbYl0sZj10aGlzLl9iaW5kaW5nczt2b2lkIDA9PT1lJiYoZT17fSxkW2JdPWUpO2VbY109YTthLl9jYWNoZUluZGV4PWYubGVuZ3RoO2YucHVzaChhKX0sX3JlbW92ZUluYWN0aXZlQmluZGluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9iaW5kaW5ncyxjPWEuYmluZGluZyxkPWMucm9vdE5vZGUudXVpZCxjPWMucGF0aCxlPXRoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZSxmPWVbZF0sZz1iW2IubGVuZ3RoLTFdO2E9YS5fY2FjaGVJbmRleDtnLl9jYWNoZUluZGV4PWE7YlthXT1nO2IucG9wKCk7ZGVsZXRlIGZbY107YTp7Zm9yKHZhciBoIGluIGYpYnJlYWsgYTtkZWxldGUgZVtkXX19LF9sZW5kQmluZGluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9iaW5kaW5ncyxjPWEuX2NhY2hlSW5kZXgsZD10aGlzLl9uQWN0aXZlQmluZGluZ3MrKyxlPWJbZF07YS5fY2FjaGVJbmRleD1kO2JbZF09YTtlLl9jYWNoZUluZGV4PWM7YltjXT1lfSxfdGFrZUJhY2tCaW5kaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPVxudGhpcy5fYmluZGluZ3MsYz1hLl9jYWNoZUluZGV4LGQ9LS10aGlzLl9uQWN0aXZlQmluZGluZ3MsZT1iW2RdO2EuX2NhY2hlSW5kZXg9ZDtiW2RdPWE7ZS5fY2FjaGVJbmRleD1jO2JbY109ZX0sX2xlbmRDb250cm9sSW50ZXJwb2xhbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzLGI9dGhpcy5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHMrKyxjPWFbYl07dm9pZCAwPT09YyYmKGM9bmV3IFRIUkVFLkxpbmVhckludGVycG9sYW50KG5ldyBGbG9hdDMyQXJyYXkoMiksbmV3IEZsb2F0MzJBcnJheSgyKSwxLHRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHNSZXN1bHRCdWZmZXIpLGMuX19jYWNoZUluZGV4PWIsYVtiXT1jKTtyZXR1cm4gY30sX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHMsYz1hLl9fY2FjaGVJbmRleCxkPS0tdGhpcy5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHMsXG5lPWJbZF07YS5fX2NhY2hlSW5kZXg9ZDtiW2RdPWE7ZS5fX2NhY2hlSW5kZXg9YztiW2NdPWV9LF9jb250cm9sSW50ZXJwb2xhbnRzUmVzdWx0QnVmZmVyOm5ldyBGbG9hdDMyQXJyYXkoMSl9KTtcblRIUkVFLkFuaW1hdGlvbk9iamVjdEdyb3VwPWZ1bmN0aW9uKGEpe3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMuX29iamVjdHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTt0aGlzLm5DYWNoZWRPYmplY3RzXz0wO3ZhciBiPXt9O3RoaXMuX2luZGljZXNCeVVVSUQ9Yjtmb3IodmFyIGM9MCxkPWFyZ3VtZW50cy5sZW5ndGg7YyE9PWQ7KytjKWJbYXJndW1lbnRzW2NdLnV1aWRdPWM7dGhpcy5fcGF0aHM9W107dGhpcy5fcGFyc2VkUGF0aHM9W107dGhpcy5fYmluZGluZ3M9W107dGhpcy5fYmluZGluZ3NJbmRpY2VzQnlQYXRoPXt9O3ZhciBlPXRoaXM7dGhpcy5zdGF0cz17b2JqZWN0czp7Z2V0IHRvdGFsKCl7cmV0dXJuIGUuX29iamVjdHMubGVuZ3RofSxnZXQgaW5Vc2UoKXtyZXR1cm4gdGhpcy50b3RhbC1lLm5DYWNoZWRPYmplY3RzX319LGdldCBiaW5kaW5nc1Blck9iamVjdCgpe3JldHVybiBlLl9iaW5kaW5ncy5sZW5ndGh9fX07XG5USFJFRS5BbmltYXRpb25PYmplY3RHcm91cC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkFuaW1hdGlvbk9iamVjdEdyb3VwLGFkZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5fb2JqZWN0cyxjPWIubGVuZ3RoLGQ9dGhpcy5uQ2FjaGVkT2JqZWN0c18sZT10aGlzLl9pbmRpY2VzQnlVVUlELGY9dGhpcy5fcGF0aHMsZz10aGlzLl9wYXJzZWRQYXRocyxoPXRoaXMuX2JpbmRpbmdzLGs9aC5sZW5ndGgsbD0wLG09YXJndW1lbnRzLmxlbmd0aDtsIT09bTsrK2wpe3ZhciBwPWFyZ3VtZW50c1tsXSxuPXAudXVpZCxxPWVbbl07aWYodm9pZCAwPT09cSl7cT1jKys7ZVtuXT1xO2IucHVzaChwKTtmb3IodmFyIG49MCxyPWs7biE9PXI7KytuKWhbbl0ucHVzaChuZXcgVEhSRUUuUHJvcGVydHlCaW5kaW5nKHAsZltuXSxnW25dKSl9ZWxzZSBpZihxPGQpe3ZhciBzPWJbcV0sdj0tLWQscj1iW3ZdO2Vbci51dWlkXT1xO2JbcV09cjtlW25dPXY7Ylt2XT1wO249MDtmb3Iocj1rO24hPT1cbnI7KytuKXt2YXIgdD1oW25dLHU9dFtxXTt0W3FdPXRbdl07dm9pZCAwPT09dSYmKHU9bmV3IFRIUkVFLlByb3BlcnR5QmluZGluZyhwLGZbbl0sZ1tuXSkpO3Rbdl09dX19ZWxzZSBiW3FdIT09cyYmY29uc29sZS5lcnJvcihcIkRpZmZlcmVudCBvYmplY3RzIHdpdGggdGhlIHNhbWUgVVVJRCBkZXRlY3RlZC4gQ2xlYW4gdGhlIGNhY2hlcyBvciByZWNyZWF0ZSB5b3VyIGluZnJhc3RydWN0dXJlIHdoZW4gcmVsb2FkaW5nIHNjZW5lcy4uLlwiKX10aGlzLm5DYWNoZWRPYmplY3RzXz1kfSxyZW1vdmU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuX29iamVjdHMsYz10aGlzLm5DYWNoZWRPYmplY3RzXyxkPXRoaXMuX2luZGljZXNCeVVVSUQsZT10aGlzLl9iaW5kaW5ncyxmPWUubGVuZ3RoLGc9MCxoPWFyZ3VtZW50cy5sZW5ndGg7ZyE9PWg7KytnKXt2YXIgaz1hcmd1bWVudHNbZ10sbD1rLnV1aWQsbT1kW2xdO2lmKHZvaWQgMCE9PW0mJm0+PWMpe3ZhciBwPWMrKyxuPWJbcF07ZFtuLnV1aWRdPVxubTtiW21dPW47ZFtsXT1wO2JbcF09aztrPTA7Zm9yKGw9ZjtrIT09bDsrK2spe3ZhciBuPWVba10scT1uW21dO25bbV09bltwXTtuW3BdPXF9fX10aGlzLm5DYWNoZWRPYmplY3RzXz1jfSx1bmNhY2hlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLl9vYmplY3RzLGM9Yi5sZW5ndGgsZD10aGlzLm5DYWNoZWRPYmplY3RzXyxlPXRoaXMuX2luZGljZXNCeVVVSUQsZj10aGlzLl9iaW5kaW5ncyxnPWYubGVuZ3RoLGg9MCxrPWFyZ3VtZW50cy5sZW5ndGg7aCE9PWs7KytoKXt2YXIgbD1hcmd1bWVudHNbaF0udXVpZCxtPWVbbF07aWYodm9pZCAwIT09bSlpZihkZWxldGUgZVtsXSxtPGQpe3ZhciBsPS0tZCxwPWJbbF0sbj0tLWMscT1iW25dO2VbcC51dWlkXT1tO2JbbV09cDtlW3EudXVpZF09bDtiW2xdPXE7Yi5wb3AoKTtwPTA7Zm9yKHE9ZztwIT09cTsrK3Ape3ZhciByPWZbcF0scz1yW25dO3JbbV09cltsXTtyW2xdPXM7ci5wb3AoKX19ZWxzZSBmb3Iobj0tLWMscT1iW25dLGVbcS51dWlkXT1cbm0sYlttXT1xLGIucG9wKCkscD0wLHE9ZztwIT09cTsrK3Apcj1mW3BdLHJbbV09cltuXSxyLnBvcCgpfXRoaXMubkNhY2hlZE9iamVjdHNfPWR9LHN1YnNjcmliZV86ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGgsZD1jW2FdLGU9dGhpcy5fYmluZGluZ3M7aWYodm9pZCAwIT09ZClyZXR1cm4gZVtkXTt2YXIgZj10aGlzLl9wYXRocyxnPXRoaXMuX3BhcnNlZFBhdGhzLGg9dGhpcy5fb2JqZWN0cyxrPXRoaXMubkNhY2hlZE9iamVjdHNfLGw9QXJyYXkoaC5sZW5ndGgpLGQ9ZS5sZW5ndGg7Y1thXT1kO2YucHVzaChhKTtnLnB1c2goYik7ZS5wdXNoKGwpO2M9aztmb3IoZD1oLmxlbmd0aDtjIT09ZDsrK2MpbFtjXT1uZXcgVEhSRUUuUHJvcGVydHlCaW5kaW5nKGhbY10sYSxiKTtyZXR1cm4gbH0sdW5zdWJzY3JpYmVfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2JpbmRpbmdzSW5kaWNlc0J5UGF0aCxjPWJbYV07aWYodm9pZCAwIT09Yyl7dmFyIGQ9XG50aGlzLl9wYXRocyxlPXRoaXMuX3BhcnNlZFBhdGhzLGY9dGhpcy5fYmluZGluZ3MsZz1mLmxlbmd0aC0xLGg9ZltnXTtiW2FbZ11dPWM7ZltjXT1oO2YucG9wKCk7ZVtjXT1lW2ddO2UucG9wKCk7ZFtjXT1kW2ddO2QucG9wKCl9fX07XG5USFJFRS5BbmltYXRpb25VdGlscz17YXJyYXlTbGljZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFRIUkVFLkFuaW1hdGlvblV0aWxzLmlzVHlwZWRBcnJheShhKT9uZXcgYS5jb25zdHJ1Y3RvcihhLnN1YmFycmF5KGIsYykpOmEuc2xpY2UoYixjKX0sY29udmVydEFycmF5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4hYXx8IWMmJmEuY29uc3RydWN0b3I9PT1iP2E6XCJudW1iZXJcIj09PXR5cGVvZiBiLkJZVEVTX1BFUl9FTEVNRU5UP25ldyBiKGEpOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEpfSxpc1R5cGVkQXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyhhKSYmIShhIGluc3RhbmNlb2YgRGF0YVZpZXcpfSxnZXRLZXlmcmFtZU9yZGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPUFycmF5KGIpLGQ9MDtkIT09YjsrK2QpY1tkXT1kO2Muc29ydChmdW5jdGlvbihiLGMpe3JldHVybiBhW2JdLWFbY119KTtyZXR1cm4gY30sc29ydGVkQXJyYXk6ZnVuY3Rpb24oYSxcbmIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9bmV3IGEuY29uc3RydWN0b3IoZCksZj0wLGc9MDtnIT09ZDsrK2YpZm9yKHZhciBoPWNbZl0qYixrPTA7ayE9PWI7KytrKWVbZysrXT1hW2gra107cmV0dXJuIGV9LGZsYXR0ZW5KU09OOmZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZT0xLGY9YVswXTt2b2lkIDAhPT1mJiZ2b2lkIDA9PT1mW2RdOylmPWFbZSsrXTtpZih2b2lkIDAhPT1mKXt2YXIgZz1mW2RdO2lmKHZvaWQgMCE9PWcpaWYoQXJyYXkuaXNBcnJheShnKSl7ZG8gZz1mW2RdLHZvaWQgMCE9PWcmJihiLnB1c2goZi50aW1lKSxjLnB1c2guYXBwbHkoYyxnKSksZj1hW2UrK107d2hpbGUodm9pZCAwIT09Zil9ZWxzZSBpZih2b2lkIDAhPT1nLnRvQXJyYXkpe2RvIGc9ZltkXSx2b2lkIDAhPT1nJiYoYi5wdXNoKGYudGltZSksZy50b0FycmF5KGMsYy5sZW5ndGgpKSxmPWFbZSsrXTt3aGlsZSh2b2lkIDAhPT1mKX1lbHNle2RvIGc9ZltkXSx2b2lkIDAhPT1nJiYoYi5wdXNoKGYudGltZSksXG5jLnB1c2goZykpLGY9YVtlKytdO3doaWxlKHZvaWQgMCE9PWYpfX19fTtUSFJFRS5LZXlmcmFtZVRyYWNrPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHZvaWQgMD09PWEpdGhyb3cgRXJyb3IoXCJ0cmFjayBuYW1lIGlzIHVuZGVmaW5lZFwiKTtpZih2b2lkIDA9PT1ifHwwPT09Yi5sZW5ndGgpdGhyb3cgRXJyb3IoXCJubyBrZXlmcmFtZXMgaW4gdHJhY2sgbmFtZWQgXCIrYSk7dGhpcy5uYW1lPWE7dGhpcy50aW1lcz1USFJFRS5BbmltYXRpb25VdGlscy5jb252ZXJ0QXJyYXkoYix0aGlzLlRpbWVCdWZmZXJUeXBlKTt0aGlzLnZhbHVlcz1USFJFRS5BbmltYXRpb25VdGlscy5jb252ZXJ0QXJyYXkoYyx0aGlzLlZhbHVlQnVmZmVyVHlwZSk7dGhpcy5zZXRJbnRlcnBvbGF0aW9uKGR8fHRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pO3RoaXMudmFsaWRhdGUoKTt0aGlzLm9wdGltaXplKCl9O1xuVEhSRUUuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLktleWZyYW1lVHJhY2ssVGltZUJ1ZmZlclR5cGU6RmxvYXQzMkFycmF5LFZhbHVlQnVmZmVyVHlwZTpGbG9hdDMyQXJyYXksRGVmYXVsdEludGVycG9sYXRpb246VEhSRUUuSW50ZXJwb2xhdGVMaW5lYXIsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBUSFJFRS5EaXNjcmV0ZUludGVycG9sYW50KHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSxhKX0sSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVEhSRUUuTGluZWFySW50ZXJwb2xhbnQodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLGEpfSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBUSFJFRS5DdWJpY0ludGVycG9sYW50KHRoaXMudGltZXMsXG50aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLGEpfSxzZXRJbnRlcnBvbGF0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiO3N3aXRjaChhKXtjYXNlIFRIUkVFLkludGVycG9sYXRlRGlzY3JldGU6Yj10aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZERpc2NyZXRlO2JyZWFrO2Nhc2UgVEhSRUUuSW50ZXJwb2xhdGVMaW5lYXI6Yj10aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjticmVhaztjYXNlIFRIUkVFLkludGVycG9sYXRlU21vb3RoOmI9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGh9aWYodm9pZCAwPT09Yil7Yj1cInVuc3VwcG9ydGVkIGludGVycG9sYXRpb24gZm9yIFwiK3RoaXMuVmFsdWVUeXBlTmFtZStcIiBrZXlmcmFtZSB0cmFjayBuYW1lZCBcIit0aGlzLm5hbWU7aWYodm9pZCAwPT09dGhpcy5jcmVhdGVJbnRlcnBvbGFudClpZihhIT09dGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbil0aGlzLnNldEludGVycG9sYXRpb24odGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbik7XG5lbHNlIHRocm93IEVycm9yKGIpO2NvbnNvbGUud2FybihiKX1lbHNlIHRoaXMuY3JlYXRlSW50ZXJwb2xhbnQ9Yn0sZ2V0SW50ZXJwb2xhdGlvbjpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmNyZWF0ZUludGVycG9sYW50KXtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU6cmV0dXJuIFRIUkVFLkludGVycG9sYXRlRGlzY3JldGU7Y2FzZSB0aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpyZXR1cm4gVEhSRUUuSW50ZXJwb2xhdGVMaW5lYXI7Y2FzZSB0aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDpyZXR1cm4gVEhSRUUuSW50ZXJwb2xhdGVTbW9vdGh9fSxnZXRWYWx1ZVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXMubGVuZ3RoL3RoaXMudGltZXMubGVuZ3RofSxzaGlmdDpmdW5jdGlvbihhKXtpZigwIT09YSlmb3IodmFyIGI9dGhpcy50aW1lcyxjPTAsZD1iLmxlbmd0aDtjIT09ZDsrK2MpYltjXSs9YTtyZXR1cm4gdGhpc30sXG5zY2FsZTpmdW5jdGlvbihhKXtpZigxIT09YSlmb3IodmFyIGI9dGhpcy50aW1lcyxjPTAsZD1iLmxlbmd0aDtjIT09ZDsrK2MpYltjXSo9YTtyZXR1cm4gdGhpc30sdHJpbTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnRpbWVzLGQ9Yy5sZW5ndGgsZT0wLGY9ZC0xO2UhPT1kJiZjW2VdPGE7KSsrZTtmb3IoOy0xIT09ZiYmY1tmXT5iOyktLWY7KytmO2lmKDAhPT1lfHxmIT09ZCllPj1mJiYoZj1NYXRoLm1heChmLDEpLGU9Zi0xKSxkPXRoaXMuZ2V0VmFsdWVTaXplKCksdGhpcy50aW1lcz1USFJFRS5BbmltYXRpb25VdGlscy5hcnJheVNsaWNlKGMsZSxmKSx0aGlzLnZhbHVlcz1USFJFRS5BbmltYXRpb25VdGlscy5hcnJheVNsaWNlKHRoaXMudmFsdWVzLGUqZCxmKmQpO3JldHVybiB0aGlzfSx2YWxpZGF0ZTpmdW5jdGlvbigpe3ZhciBhPSEwLGI9dGhpcy5nZXRWYWx1ZVNpemUoKTswIT09Yi1NYXRoLmZsb29yKGIpJiYoY29uc29sZS5lcnJvcihcImludmFsaWQgdmFsdWUgc2l6ZSBpbiB0cmFja1wiLFxudGhpcyksYT0hMSk7dmFyIGM9dGhpcy50aW1lcyxiPXRoaXMudmFsdWVzLGQ9Yy5sZW5ndGg7MD09PWQmJihjb25zb2xlLmVycm9yKFwidHJhY2sgaXMgZW1wdHlcIix0aGlzKSxhPSExKTtmb3IodmFyIGU9bnVsbCxmPTA7ZiE9PWQ7ZisrKXt2YXIgZz1jW2ZdO2lmKFwibnVtYmVyXCI9PT10eXBlb2YgZyYmaXNOYU4oZykpe2NvbnNvbGUuZXJyb3IoXCJ0aW1lIGlzIG5vdCBhIHZhbGlkIG51bWJlclwiLHRoaXMsZixnKTthPSExO2JyZWFrfWlmKG51bGwhPT1lJiZlPmcpe2NvbnNvbGUuZXJyb3IoXCJvdXQgb2Ygb3JkZXIga2V5c1wiLHRoaXMsZixnLGUpO2E9ITE7YnJlYWt9ZT1nfWlmKHZvaWQgMCE9PWImJlRIUkVFLkFuaW1hdGlvblV0aWxzLmlzVHlwZWRBcnJheShiKSlmb3IoZj0wLGM9Yi5sZW5ndGg7ZiE9PWM7KytmKWlmKGQ9YltmXSxpc05hTihkKSl7Y29uc29sZS5lcnJvcihcInZhbHVlIGlzIG5vdCBhIHZhbGlkIG51bWJlclwiLHRoaXMsZixkKTthPSExO2JyZWFrfXJldHVybiBhfSxvcHRpbWl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1cbnRoaXMudGltZXMsYj10aGlzLnZhbHVlcyxjPXRoaXMuZ2V0VmFsdWVTaXplKCksZD0xLGU9MSxmPWEubGVuZ3RoLTE7ZTw9ZjsrK2Upe3ZhciBnPSExLGg9YVtlXTtpZihoIT09YVtlKzFdJiYoMSE9PWV8fGghPT1oWzBdKSlmb3IodmFyIGs9ZSpjLGw9ay1jLG09aytjLGg9MDtoIT09YzsrK2gpe3ZhciBwPWJbaytoXTtpZihwIT09YltsK2hdfHxwIT09YlttK2hdKXtnPSEwO2JyZWFrfX1pZihnKXtpZihlIT09ZClmb3IoYVtkXT1hW2VdLGc9ZSpjLGs9ZCpjLGg9MDtoIT09YzsrK2gpYltrK2hdPWJbZytoXTsrK2R9fWQhPT1hLmxlbmd0aCYmKHRoaXMudGltZXM9VEhSRUUuQW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZShhLDAsZCksdGhpcy52YWx1ZXM9VEhSRUUuQW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZShiLDAsZCpjKSk7cmV0dXJuIHRoaXN9fTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuS2V5ZnJhbWVUcmFjayx7cGFyc2U6ZnVuY3Rpb24oYSl7aWYodm9pZCAwPT09YS50eXBlKXRocm93IEVycm9yKFwidHJhY2sgdHlwZSB1bmRlZmluZWQsIGNhbiBub3QgcGFyc2VcIik7dmFyIGI9VEhSRUUuS2V5ZnJhbWVUcmFjay5fZ2V0VHJhY2tUeXBlRm9yVmFsdWVUeXBlTmFtZShhLnR5cGUpO2lmKHZvaWQgMD09PWEudGltZXMpe3ZhciBjPVtdLGQ9W107VEhSRUUuQW5pbWF0aW9uVXRpbHMuZmxhdHRlbkpTT04oYS5rZXlzLGMsZCxcInZhbHVlXCIpO2EudGltZXM9YzthLnZhbHVlcz1kfXJldHVybiB2b2lkIDAhPT1iLnBhcnNlP2IucGFyc2UoYSk6bmV3IGIoYS5uYW1lLGEudGltZXMsYS52YWx1ZXMsYS5pbnRlcnBvbGF0aW9uKX0sdG9KU09OOmZ1bmN0aW9uKGEpe3ZhciBiPWEuY29uc3RydWN0b3I7aWYodm9pZCAwIT09Yi50b0pTT04pYj1iLnRvSlNPTihhKTtlbHNle3ZhciBiPXtuYW1lOmEubmFtZSx0aW1lczpUSFJFRS5BbmltYXRpb25VdGlscy5jb252ZXJ0QXJyYXkoYS50aW1lcyxcbkFycmF5KSx2YWx1ZXM6VEhSRUUuQW5pbWF0aW9uVXRpbHMuY29udmVydEFycmF5KGEudmFsdWVzLEFycmF5KX0sYz1hLmdldEludGVycG9sYXRpb24oKTtjIT09YS5EZWZhdWx0SW50ZXJwb2xhdGlvbiYmKGIuaW50ZXJwb2xhdGlvbj1jKX1iLnR5cGU9YS5WYWx1ZVR5cGVOYW1lO3JldHVybiBifSxfZ2V0VHJhY2tUeXBlRm9yVmFsdWVUeXBlTmFtZTpmdW5jdGlvbihhKXtzd2l0Y2goYS50b0xvd2VyQ2FzZSgpKXtjYXNlIFwic2NhbGFyXCI6Y2FzZSBcImRvdWJsZVwiOmNhc2UgXCJmbG9hdFwiOmNhc2UgXCJudW1iZXJcIjpjYXNlIFwiaW50ZWdlclwiOnJldHVybiBUSFJFRS5OdW1iZXJLZXlmcmFtZVRyYWNrO2Nhc2UgXCJ2ZWN0b3JcIjpjYXNlIFwidmVjdG9yMlwiOmNhc2UgXCJ2ZWN0b3IzXCI6Y2FzZSBcInZlY3RvcjRcIjpyZXR1cm4gVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjaztjYXNlIFwiY29sb3JcIjpyZXR1cm4gVEhSRUUuQ29sb3JLZXlmcmFtZVRyYWNrO2Nhc2UgXCJxdWF0ZXJuaW9uXCI6cmV0dXJuIFRIUkVFLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrO1xuY2FzZSBcImJvb2xcIjpjYXNlIFwiYm9vbGVhblwiOnJldHVybiBUSFJFRS5Cb29sZWFuS2V5ZnJhbWVUcmFjaztjYXNlIFwic3RyaW5nXCI6cmV0dXJuIFRIUkVFLlN0cmluZ0tleWZyYW1lVHJhY2t9dGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCB0eXBlTmFtZTogXCIrYSk7fX0pO1RIUkVFLlByb3BlcnR5QmluZGluZz1mdW5jdGlvbihhLGIsYyl7dGhpcy5wYXRoPWI7dGhpcy5wYXJzZWRQYXRoPWN8fFRIUkVFLlByb3BlcnR5QmluZGluZy5wYXJzZVRyYWNrTmFtZShiKTt0aGlzLm5vZGU9VEhSRUUuUHJvcGVydHlCaW5kaW5nLmZpbmROb2RlKGEsdGhpcy5wYXJzZWRQYXRoLm5vZGVOYW1lKXx8YTt0aGlzLnJvb3ROb2RlPWF9O1xuVEhSRUUuUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuUHJvcGVydHlCaW5kaW5nLGdldFZhbHVlOmZ1bmN0aW9uKGEsYil7dGhpcy5iaW5kKCk7dGhpcy5nZXRWYWx1ZShhLGIpfSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3RoaXMuYmluZCgpO3RoaXMuc2V0VmFsdWUoYSxiKX0sYmluZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubm9kZSxiPXRoaXMucGFyc2VkUGF0aCxjPWIub2JqZWN0TmFtZSxkPWIucHJvcGVydHlOYW1lLGU9Yi5wcm9wZXJ0eUluZGV4O2F8fCh0aGlzLm5vZGU9YT1USFJFRS5Qcm9wZXJ0eUJpbmRpbmcuZmluZE5vZGUodGhpcy5yb290Tm9kZSxiLm5vZGVOYW1lKXx8dGhpcy5yb290Tm9kZSk7dGhpcy5nZXRWYWx1ZT10aGlzLl9nZXRWYWx1ZV91bmF2YWlsYWJsZTt0aGlzLnNldFZhbHVlPXRoaXMuX3NldFZhbHVlX3VuYXZhaWxhYmxlO2lmKGEpe2lmKGMpe3ZhciBmPWIub2JqZWN0SW5kZXg7c3dpdGNoKGMpe2Nhc2UgXCJtYXRlcmlhbHNcIjppZighYS5tYXRlcmlhbCl7Y29uc29sZS5lcnJvcihcIiAgY2FuIG5vdCBiaW5kIHRvIG1hdGVyaWFsIGFzIG5vZGUgZG9lcyBub3QgaGF2ZSBhIG1hdGVyaWFsXCIsXG50aGlzKTtyZXR1cm59aWYoIWEubWF0ZXJpYWwubWF0ZXJpYWxzKXtjb25zb2xlLmVycm9yKFwiICBjYW4gbm90IGJpbmQgdG8gbWF0ZXJpYWwubWF0ZXJpYWxzIGFzIG5vZGUubWF0ZXJpYWwgZG9lcyBub3QgaGF2ZSBhIG1hdGVyaWFscyBhcnJheVwiLHRoaXMpO3JldHVybn1hPWEubWF0ZXJpYWwubWF0ZXJpYWxzO2JyZWFrO2Nhc2UgXCJib25lc1wiOmlmKCFhLnNrZWxldG9uKXtjb25zb2xlLmVycm9yKFwiICBjYW4gbm90IGJpbmQgdG8gYm9uZXMgYXMgbm9kZSBkb2VzIG5vdCBoYXZlIGEgc2tlbGV0b25cIix0aGlzKTtyZXR1cm59YT1hLnNrZWxldG9uLmJvbmVzO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspaWYoYVtjXS5uYW1lPT09Zil7Zj1jO2JyZWFrfWJyZWFrO2RlZmF1bHQ6aWYodm9pZCAwPT09YVtjXSl7Y29uc29sZS5lcnJvcihcIiAgY2FuIG5vdCBiaW5kIHRvIG9iamVjdE5hbWUgb2Ygbm9kZSwgdW5kZWZpbmVkXCIsdGhpcyk7cmV0dXJufWE9YVtjXX1pZih2b2lkIDAhPT1mKXtpZih2b2lkIDA9PT1cbmFbZl0pe2NvbnNvbGUuZXJyb3IoXCIgIHRyeWluZyB0byBiaW5kIHRvIG9iamVjdEluZGV4IG9mIG9iamVjdE5hbWUsIGJ1dCBpcyB1bmRlZmluZWQ6XCIsdGhpcyxhKTtyZXR1cm59YT1hW2ZdfX1mPWFbZF07aWYodm9pZCAwPT09Ziljb25zb2xlLmVycm9yKFwiICB0cnlpbmcgdG8gdXBkYXRlIHByb3BlcnR5IGZvciB0cmFjazogXCIrYi5ub2RlTmFtZStcIi5cIitkK1wiIGJ1dCBpdCB3YXNuJ3QgZm91bmQuXCIsYSk7ZWxzZXtiPXRoaXMuVmVyc2lvbmluZy5Ob25lO3ZvaWQgMCE9PWEubmVlZHNVcGRhdGU/KGI9dGhpcy5WZXJzaW9uaW5nLk5lZWRzVXBkYXRlLHRoaXMudGFyZ2V0T2JqZWN0PWEpOnZvaWQgMCE9PWEubWF0cml4V29ybGROZWVkc1VwZGF0ZSYmKGI9dGhpcy5WZXJzaW9uaW5nLk1hdHJpeFdvcmxkTmVlZHNVcGRhdGUsdGhpcy50YXJnZXRPYmplY3Q9YSk7Yz10aGlzLkJpbmRpbmdUeXBlLkRpcmVjdDtpZih2b2lkIDAhPT1lKXtpZihcIm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1wiPT09XG5kKXtpZighYS5nZW9tZXRyeSl7Y29uc29sZS5lcnJvcihcIiAgY2FuIG5vdCBiaW5kIHRvIG1vcnBoVGFyZ2V0SW5mbHVlbmNlcyBiZWNhc3VzZSBub2RlIGRvZXMgbm90IGhhdmUgYSBnZW9tZXRyeVwiLHRoaXMpO3JldHVybn1pZighYS5nZW9tZXRyeS5tb3JwaFRhcmdldHMpe2NvbnNvbGUuZXJyb3IoXCIgIGNhbiBub3QgYmluZCB0byBtb3JwaFRhcmdldEluZmx1ZW5jZXMgYmVjYXN1c2Ugbm9kZSBkb2VzIG5vdCBoYXZlIGEgZ2VvbWV0cnkubW9ycGhUYXJnZXRzXCIsdGhpcyk7cmV0dXJufWZvcihjPTA7Yzx0aGlzLm5vZGUuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aDtjKyspaWYoYS5nZW9tZXRyeS5tb3JwaFRhcmdldHNbY10ubmFtZT09PWUpe2U9YzticmVha319Yz10aGlzLkJpbmRpbmdUeXBlLkFycmF5RWxlbWVudDt0aGlzLnJlc29sdmVkUHJvcGVydHk9Zjt0aGlzLnByb3BlcnR5SW5kZXg9ZX1lbHNlIHZvaWQgMCE9PWYuZnJvbUFycmF5JiZ2b2lkIDAhPT1mLnRvQXJyYXk/XG4oYz10aGlzLkJpbmRpbmdUeXBlLkhhc0Zyb21Ub0FycmF5LHRoaXMucmVzb2x2ZWRQcm9wZXJ0eT1mKTp2b2lkIDAhPT1mLmxlbmd0aD8oYz10aGlzLkJpbmRpbmdUeXBlLkVudGlyZUFycmF5LHRoaXMucmVzb2x2ZWRQcm9wZXJ0eT1mKTp0aGlzLnByb3BlcnR5TmFtZT1kO3RoaXMuZ2V0VmFsdWU9dGhpcy5HZXR0ZXJCeUJpbmRpbmdUeXBlW2NdO3RoaXMuc2V0VmFsdWU9dGhpcy5TZXR0ZXJCeUJpbmRpbmdUeXBlQW5kVmVyc2lvbmluZ1tjXVtiXX19ZWxzZSBjb25zb2xlLmVycm9yKFwiICB0cnlpbmcgdG8gdXBkYXRlIG5vZGUgZm9yIHRyYWNrOiBcIit0aGlzLnBhdGgrXCIgYnV0IGl0IHdhc24ndCBmb3VuZC5cIil9LHVuYmluZDpmdW5jdGlvbigpe3RoaXMubm9kZT1udWxsO3RoaXMuZ2V0VmFsdWU9dGhpcy5fZ2V0VmFsdWVfdW5ib3VuZDt0aGlzLnNldFZhbHVlPXRoaXMuX3NldFZhbHVlX3VuYm91bmR9fTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZSx7X2dldFZhbHVlX3VuYXZhaWxhYmxlOmZ1bmN0aW9uKCl7fSxfc2V0VmFsdWVfdW5hdmFpbGFibGU6ZnVuY3Rpb24oKXt9LF9nZXRWYWx1ZV91bmJvdW5kOlRIUkVFLlByb3BlcnR5QmluZGluZy5wcm90b3R5cGUuZ2V0VmFsdWUsX3NldFZhbHVlX3VuYm91bmQ6VEhSRUUuUHJvcGVydHlCaW5kaW5nLnByb3RvdHlwZS5zZXRWYWx1ZSxCaW5kaW5nVHlwZTp7RGlyZWN0OjAsRW50aXJlQXJyYXk6MSxBcnJheUVsZW1lbnQ6MixIYXNGcm9tVG9BcnJheTozfSxWZXJzaW9uaW5nOntOb25lOjAsTmVlZHNVcGRhdGU6MSxNYXRyaXhXb3JsZE5lZWRzVXBkYXRlOjJ9LEdldHRlckJ5QmluZGluZ1R5cGU6W2Z1bmN0aW9uKGEsYil7YVtiXT10aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eU5hbWVdfSxmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnJlc29sdmVkUHJvcGVydHksZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWFbYisrXT1cbmNbZF19LGZ1bmN0aW9uKGEsYil7YVtiXT10aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XX0sZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHkudG9BcnJheShhLGIpfV0sU2V0dGVyQnlCaW5kaW5nVHlwZUFuZFZlcnNpb25pbmc6W1tmdW5jdGlvbihhLGIpe3RoaXMubm9kZVt0aGlzLnByb3BlcnR5TmFtZV09YVtiXX0sZnVuY3Rpb24oYSxiKXt0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eU5hbWVdPWFbYl07dGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9ITB9LGZ1bmN0aW9uKGEsYil7dGhpcy5ub2RlW3RoaXMucHJvcGVydHlOYW1lXT1hW2JdO3RoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9XSxbZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5yZXNvbHZlZFByb3BlcnR5LGQ9MCxlPWMubGVuZ3RoO2QhPT1lOysrZCljW2RdPWFbYisrXX0sZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5yZXNvbHZlZFByb3BlcnR5LFxuZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWNbZF09YVtiKytdO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnJlc29sdmVkUHJvcGVydHksZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWNbZF09YVtiKytdO3RoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9XSxbZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XT1hW2JdfSxmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPWFbYl07dGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9ITB9LGZ1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF09YVtiXTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV0sW2Z1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5LmZyb21BcnJheShhLFxuYil9LGZ1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5LmZyb21BcnJheShhLGIpO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkoYSxiKTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV1dfSk7VEhSRUUuUHJvcGVydHlCaW5kaW5nLkNvbXBvc2l0ZT1mdW5jdGlvbihhLGIsYyl7Yz1jfHxUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcucGFyc2VUcmFja05hbWUoYik7dGhpcy5fdGFyZ2V0R3JvdXA9YTt0aGlzLl9iaW5kaW5ncz1hLnN1YnNjcmliZV8oYixjKX07XG5USFJFRS5Qcm9wZXJ0eUJpbmRpbmcuQ29tcG9zaXRlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuUHJvcGVydHlCaW5kaW5nLkNvbXBvc2l0ZSxnZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3RoaXMuYmluZCgpO3ZhciBjPXRoaXMuX2JpbmRpbmdzW3RoaXMuX3RhcmdldEdyb3VwLm5DYWNoZWRPYmplY3RzX107dm9pZCAwIT09YyYmYy5nZXRWYWx1ZShhLGIpfSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLl9iaW5kaW5ncyxkPXRoaXMuX3RhcmdldEdyb3VwLm5DYWNoZWRPYmplY3RzXyxlPWMubGVuZ3RoO2QhPT1lOysrZCljW2RdLnNldFZhbHVlKGEsYil9LGJpbmQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5fYmluZGluZ3MsYj10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sYz1hLmxlbmd0aDtiIT09YzsrK2IpYVtiXS5iaW5kKCl9LHVuYmluZDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLl9iaW5kaW5ncyxiPXRoaXMuX3RhcmdldEdyb3VwLm5DYWNoZWRPYmplY3RzXyxcbmM9YS5sZW5ndGg7YiE9PWM7KytiKWFbYl0udW5iaW5kKCl9fTtUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcuY3JlYXRlPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFRIUkVFLkFuaW1hdGlvbk9iamVjdEdyb3VwP25ldyBUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcuQ29tcG9zaXRlKGEsYixjKTpuZXcgVEhSRUUuUHJvcGVydHlCaW5kaW5nKGEsYixjKX07XG5USFJFRS5Qcm9wZXJ0eUJpbmRpbmcucGFyc2VUcmFja05hbWU9ZnVuY3Rpb24oYSl7dmFyIGI9L14oKFtcXHddK1xcLykqKShbXFx3LVxcZF0rKT8oXFwuKFtcXHddKykoXFxbKFtcXHdcXGRcXFtcXF1cXF8uOlxcLSBdKylcXF0pPyk/KFxcLihbXFx3Ll0rKShcXFsoW1xcd1xcZFxcW1xcXVxcXy4gXSspXFxdKT8pJC8sYz1iLmV4ZWMoYSk7aWYoIWMpdGhyb3cgRXJyb3IoXCJjYW5ub3QgcGFyc2UgdHJhY2tOYW1lIGF0IGFsbDogXCIrYSk7Yy5pbmRleD09PWIubGFzdEluZGV4JiZiLmxhc3RJbmRleCsrO2I9e25vZGVOYW1lOmNbM10sb2JqZWN0TmFtZTpjWzVdLG9iamVjdEluZGV4OmNbN10scHJvcGVydHlOYW1lOmNbOV0scHJvcGVydHlJbmRleDpjWzExXX07aWYobnVsbD09PWIucHJvcGVydHlOYW1lfHwwPT09Yi5wcm9wZXJ0eU5hbWUubGVuZ3RoKXRocm93IEVycm9yKFwiY2FuIG5vdCBwYXJzZSBwcm9wZXJ0eU5hbWUgZnJvbSB0cmFja05hbWU6IFwiK2EpO3JldHVybiBifTtcblRIUkVFLlByb3BlcnR5QmluZGluZy5maW5kTm9kZT1mdW5jdGlvbihhLGIpe2lmKCFifHxcIlwiPT09Ynx8XCJyb290XCI9PT1ifHxcIi5cIj09PWJ8fC0xPT09Ynx8Yj09PWEubmFtZXx8Yj09PWEudXVpZClyZXR1cm4gYTtpZihhLnNrZWxldG9uKXt2YXIgYz1mdW5jdGlvbihhKXtmb3IodmFyIGM9MDtjPGEuYm9uZXMubGVuZ3RoO2MrKyl7dmFyIGQ9YS5ib25lc1tjXTtpZihkLm5hbWU9PT1iKXJldHVybiBkfXJldHVybiBudWxsfShhLnNrZWxldG9uKTtpZihjKXJldHVybiBjfWlmKGEuY2hpbGRyZW4pe3ZhciBkPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZz1hW2NdO2lmKGcubmFtZT09PWJ8fGcudXVpZD09PWJ8fChnPWQoZy5jaGlsZHJlbikpKXJldHVybiBnfXJldHVybiBudWxsfTtpZihjPWQoYS5jaGlsZHJlbikpcmV0dXJuIGN9cmV0dXJuIG51bGx9O1xuVEhSRUUuUHJvcGVydHlNaXhlcj1mdW5jdGlvbihhLGIsYyl7dGhpcy5iaW5kaW5nPWE7dGhpcy52YWx1ZVNpemU9YzthPUZsb2F0NjRBcnJheTtzd2l0Y2goYil7Y2FzZSBcInF1YXRlcm5pb25cIjpiPXRoaXMuX3NsZXJwO2JyZWFrO2Nhc2UgXCJzdHJpbmdcIjpjYXNlIFwiYm9vbFwiOmE9QXJyYXk7Yj10aGlzLl9zZWxlY3Q7YnJlYWs7ZGVmYXVsdDpiPXRoaXMuX2xlcnB9dGhpcy5idWZmZXI9bmV3IGEoNCpjKTt0aGlzLl9taXhCdWZmZXJSZWdpb249Yjt0aGlzLnJlZmVyZW5jZUNvdW50PXRoaXMudXNlQ291bnQ9dGhpcy5jdW11bGF0aXZlV2VpZ2h0PTB9O1xuVEhSRUUuUHJvcGVydHlNaXhlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlByb3BlcnR5TWl4ZXIsYWNjdW11bGF0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYnVmZmVyLGQ9dGhpcy52YWx1ZVNpemUsZT1hKmQrZCxmPXRoaXMuY3VtdWxhdGl2ZVdlaWdodDtpZigwPT09Zil7Zm9yKGY9MDtmIT09ZDsrK2YpY1tlK2ZdPWNbZl07Zj1ifWVsc2UgZis9Yix0aGlzLl9taXhCdWZmZXJSZWdpb24oYyxlLDAsYi9mLGQpO3RoaXMuY3VtdWxhdGl2ZVdlaWdodD1mfSxhcHBseTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnZhbHVlU2l6ZSxjPXRoaXMuYnVmZmVyO2E9YSpiK2I7dmFyIGQ9dGhpcy5jdW11bGF0aXZlV2VpZ2h0LGU9dGhpcy5iaW5kaW5nO3RoaXMuY3VtdWxhdGl2ZVdlaWdodD0wOzE+ZCYmdGhpcy5fbWl4QnVmZmVyUmVnaW9uKGMsYSwzKmIsMS1kLGIpO2Zvcih2YXIgZD1iLGY9YitiO2QhPT1mOysrZClpZihjW2RdIT09Y1tkK2JdKXtlLnNldFZhbHVlKGMsYSk7XG5icmVha319LHNhdmVPcmlnaW5hbFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5idWZmZXIsYj10aGlzLnZhbHVlU2l6ZSxjPTMqYjt0aGlzLmJpbmRpbmcuZ2V0VmFsdWUoYSxjKTtmb3IodmFyIGQ9YjtkIT09YzsrK2QpYVtkXT1hW2MrZCViXTt0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MH0scmVzdG9yZU9yaWdpbmFsU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLmJpbmRpbmcuc2V0VmFsdWUodGhpcy5idWZmZXIsMyp0aGlzLnZhbHVlU2l6ZSl9LF9zZWxlY3Q6ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZiguNTw9ZClmb3IoZD0wO2QhPT1lOysrZClhW2IrZF09YVtjK2RdfSxfc2xlcnA6ZnVuY3Rpb24oYSxiLGMsZCxlKXtUSFJFRS5RdWF0ZXJuaW9uLnNsZXJwRmxhdChhLGIsYSxiLGEsYyxkKX0sX2xlcnA6ZnVuY3Rpb24oYSxiLGMsZCxlKXtmb3IodmFyIGY9MS1kLGc9MDtnIT09ZTsrK2cpe3ZhciBoPWIrZzthW2hdPWFbaF0qZithW2MrZ10qZH19fTtcblRIUkVFLkJvb2xlYW5LZXlmcmFtZVRyYWNrPWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5LZXlmcmFtZVRyYWNrLmNhbGwodGhpcyxhLGIsYyl9O1RIUkVFLkJvb2xlYW5LZXlmcmFtZVRyYWNrLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5Cb29sZWFuS2V5ZnJhbWVUcmFjayxWYWx1ZVR5cGVOYW1lOlwiYm9vbFwiLFZhbHVlQnVmZmVyVHlwZTpBcnJheSxEZWZhdWx0SW50ZXJwb2xhdGlvbjpUSFJFRS5JbnRlcnBvbGF0ZURpc2NyZXRlLEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjp2b2lkIDAsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOnZvaWQgMH0pO1RIUkVFLkNvbG9yS2V5ZnJhbWVUcmFjaz1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5LZXlmcmFtZVRyYWNrLmNhbGwodGhpcyxhLGIsYyxkKX07XG5USFJFRS5Db2xvcktleWZyYW1lVHJhY2sucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5LZXlmcmFtZVRyYWNrLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkNvbG9yS2V5ZnJhbWVUcmFjayxWYWx1ZVR5cGVOYW1lOlwiY29sb3JcIn0pO1RIUkVFLk51bWJlcktleWZyYW1lVHJhY2s9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuS2V5ZnJhbWVUcmFjay5jYWxsKHRoaXMsYSxiLGMsZCl9O1RIUkVFLk51bWJlcktleWZyYW1lVHJhY2sucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5LZXlmcmFtZVRyYWNrLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLk51bWJlcktleWZyYW1lVHJhY2ssVmFsdWVUeXBlTmFtZTpcIm51bWJlclwifSk7VEhSRUUuUXVhdGVybmlvbktleWZyYW1lVHJhY2s9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuS2V5ZnJhbWVUcmFjay5jYWxsKHRoaXMsYSxiLGMsZCl9O1xuVEhSRUUuUXVhdGVybmlvbktleWZyYW1lVHJhY2sucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5LZXlmcmFtZVRyYWNrLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrLFZhbHVlVHlwZU5hbWU6XCJxdWF0ZXJuaW9uXCIsRGVmYXVsdEludGVycG9sYXRpb246VEhSRUUuSW50ZXJwb2xhdGVMaW5lYXIsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVEhSRUUuUXVhdGVybmlvbkxpbmVhckludGVycG9sYW50KHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSxhKX0sSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOnZvaWQgMH0pO1RIUkVFLlN0cmluZ0tleWZyYW1lVHJhY2s9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuS2V5ZnJhbWVUcmFjay5jYWxsKHRoaXMsYSxiLGMsZCl9O1xuVEhSRUUuU3RyaW5nS2V5ZnJhbWVUcmFjay5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLktleWZyYW1lVHJhY2sucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuU3RyaW5nS2V5ZnJhbWVUcmFjayxWYWx1ZVR5cGVOYW1lOlwic3RyaW5nXCIsVmFsdWVCdWZmZXJUeXBlOkFycmF5LERlZmF1bHRJbnRlcnBvbGF0aW9uOlRIUkVFLkludGVycG9sYXRlRGlzY3JldGUsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnZvaWQgMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6dm9pZCAwfSk7VEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjaz1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5LZXlmcmFtZVRyYWNrLmNhbGwodGhpcyxhLGIsYyxkKX07XG5USFJFRS5WZWN0b3JLZXlmcmFtZVRyYWNrLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5WZWN0b3JLZXlmcmFtZVRyYWNrLFZhbHVlVHlwZU5hbWU6XCJ2ZWN0b3JcIn0pO1xuVEhSRUUuQXVkaW89ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJBdWRpb1wiO3RoaXMuY29udGV4dD1hLmNvbnRleHQ7dGhpcy5zb3VyY2U9dGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO3RoaXMuc291cmNlLm9uZW5kZWQ9dGhpcy5vbkVuZGVkLmJpbmQodGhpcyk7dGhpcy5nYWluPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7dGhpcy5nYWluLmNvbm5lY3QoYS5nZXRJbnB1dCgpKTt0aGlzLmF1dG9wbGF5PSExO3RoaXMuc3RhcnRUaW1lPTA7dGhpcy5wbGF5YmFja1JhdGU9MTt0aGlzLmlzUGxheWluZz0hMTt0aGlzLmhhc1BsYXliYWNrQ29udHJvbD0hMDt0aGlzLnNvdXJjZVR5cGU9XCJlbXB0eVwiO3RoaXMuZmlsdGVycz1bXX07XG5USFJFRS5BdWRpby5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkF1ZGlvLGdldE91dHB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW59LHNldE5vZGVTb3VyY2U6ZnVuY3Rpb24oYSl7dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9ITE7dGhpcy5zb3VyY2VUeXBlPVwiYXVkaW9Ob2RlXCI7dGhpcy5zb3VyY2U9YTt0aGlzLmNvbm5lY3QoKTtyZXR1cm4gdGhpc30sc2V0QnVmZmVyOmZ1bmN0aW9uKGEpe3RoaXMuc291cmNlLmJ1ZmZlcj1hO3RoaXMuc291cmNlVHlwZT1cImJ1ZmZlclwiO3RoaXMuYXV0b3BsYXkmJnRoaXMucGxheSgpO3JldHVybiB0aGlzfSxwbGF5OmZ1bmN0aW9uKCl7aWYoITA9PT10aGlzLmlzUGxheWluZyljb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogQXVkaW8gaXMgYWxyZWFkeSBwbGF5aW5nLlwiKTtlbHNlIGlmKCExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpO1xuZWxzZXt2YXIgYT10aGlzLmNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7YS5idWZmZXI9dGhpcy5zb3VyY2UuYnVmZmVyO2EubG9vcD10aGlzLnNvdXJjZS5sb29wO2Eub25lbmRlZD10aGlzLnNvdXJjZS5vbmVuZGVkO2Euc3RhcnQoMCx0aGlzLnN0YXJ0VGltZSk7YS5wbGF5YmFja1JhdGUudmFsdWU9dGhpcy5wbGF5YmFja1JhdGU7dGhpcy5pc1BsYXlpbmc9ITA7dGhpcy5zb3VyY2U9YTtyZXR1cm4gdGhpcy5jb25uZWN0KCl9fSxwYXVzZTpmdW5jdGlvbigpe2lmKCExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpO2Vsc2UgcmV0dXJuIHRoaXMuc291cmNlLnN0b3AoKSx0aGlzLnN0YXJ0VGltZT10aGlzLmNvbnRleHQuY3VycmVudFRpbWUsdGhpcy5pc1BsYXlpbmc9ITEsdGhpc30sc3RvcDpmdW5jdGlvbigpe2lmKCExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpO1xuZWxzZSByZXR1cm4gdGhpcy5zb3VyY2Uuc3RvcCgpLHRoaXMuc3RhcnRUaW1lPTAsdGhpcy5pc1BsYXlpbmc9ITEsdGhpc30sY29ubmVjdDpmdW5jdGlvbigpe2lmKDA8dGhpcy5maWx0ZXJzLmxlbmd0aCl7dGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmZpbHRlcnNbMF0pO2Zvcih2YXIgYT0xLGI9dGhpcy5maWx0ZXJzLmxlbmd0aDthPGI7YSsrKXRoaXMuZmlsdGVyc1thLTFdLmNvbm5lY3QodGhpcy5maWx0ZXJzW2FdKTt0aGlzLmZpbHRlcnNbdGhpcy5maWx0ZXJzLmxlbmd0aC0xXS5jb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpfWVsc2UgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKTtyZXR1cm4gdGhpc30sZGlzY29ubmVjdDpmdW5jdGlvbigpe2lmKDA8dGhpcy5maWx0ZXJzLmxlbmd0aCl7dGhpcy5zb3VyY2UuZGlzY29ubmVjdCh0aGlzLmZpbHRlcnNbMF0pO2Zvcih2YXIgYT0xLGI9dGhpcy5maWx0ZXJzLmxlbmd0aDthPGI7YSsrKXRoaXMuZmlsdGVyc1thLVxuMV0uZGlzY29ubmVjdCh0aGlzLmZpbHRlcnNbYV0pO3RoaXMuZmlsdGVyc1t0aGlzLmZpbHRlcnMubGVuZ3RoLTFdLmRpc2Nvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSl9ZWxzZSB0aGlzLnNvdXJjZS5kaXNjb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpO3JldHVybiB0aGlzfSxnZXRGaWx0ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyc30sc2V0RmlsdGVyczpmdW5jdGlvbihhKXthfHwoYT1bXSk7ITA9PT10aGlzLmlzUGxheWluZz8odGhpcy5kaXNjb25uZWN0KCksdGhpcy5maWx0ZXJzPWEsdGhpcy5jb25uZWN0KCkpOnRoaXMuZmlsdGVycz1hO3JldHVybiB0aGlzfSxnZXRGaWx0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRGaWx0ZXJzKClbMF19LHNldEZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZXRGaWx0ZXJzKGE/W2FdOltdKX0sc2V0UGxheWJhY2tSYXRlOmZ1bmN0aW9uKGEpe2lmKCExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2wpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpO1xuZWxzZSByZXR1cm4gdGhpcy5wbGF5YmFja1JhdGU9YSwhMD09PXRoaXMuaXNQbGF5aW5nJiYodGhpcy5zb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlPXRoaXMucGxheWJhY2tSYXRlKSx0aGlzfSxnZXRQbGF5YmFja1JhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wbGF5YmFja1JhdGV9LG9uRW5kZWQ6ZnVuY3Rpb24oKXt0aGlzLmlzUGxheWluZz0hMX0sZ2V0TG9vcDpmdW5jdGlvbigpe3JldHVybiExPT09dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w/KGNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKSwhMSk6dGhpcy5zb3VyY2UubG9vcH0sc2V0TG9vcDpmdW5jdGlvbihhKXshMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sP2NvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTp0aGlzLnNvdXJjZS5sb29wPWF9LGdldFZvbHVtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW4uZ2Fpbi52YWx1ZX0sXG5zZXRWb2x1bWU6ZnVuY3Rpb24oYSl7dGhpcy5nYWluLmdhaW4udmFsdWU9YTtyZXR1cm4gdGhpc319KTtUSFJFRS5BdWRpb0FuYWx5c2VyPWZ1bmN0aW9uKGEsYil7dGhpcy5hbmFseXNlcj1hLmNvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTt0aGlzLmFuYWx5c2VyLmZmdFNpemU9dm9pZCAwIT09Yj9iOjIwNDg7dGhpcy5kYXRhPW5ldyBVaW50OEFycmF5KHRoaXMuYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQpO2EuZ2V0T3V0cHV0KCkuY29ubmVjdCh0aGlzLmFuYWx5c2VyKX07XG5PYmplY3QuYXNzaWduKFRIUkVFLkF1ZGlvQW5hbHlzZXIucHJvdG90eXBlLHtnZXRGcmVxdWVuY3lEYXRhOmZ1bmN0aW9uKCl7dGhpcy5hbmFseXNlci5nZXRCeXRlRnJlcXVlbmN5RGF0YSh0aGlzLmRhdGEpO3JldHVybiB0aGlzLmRhdGF9LGdldEF2ZXJhZ2VGcmVxdWVuY3k6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMuZ2V0RnJlcXVlbmN5RGF0YSgpLGM9MDtjPGIubGVuZ3RoO2MrKylhKz1iW2NdO3JldHVybiBhL2IubGVuZ3RofX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShUSFJFRSxcIkF1ZGlvQ29udGV4dFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oKXt2b2lkIDA9PT1hJiYoYT1uZXcgKHdpbmRvdy5BdWRpb0NvbnRleHR8fHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKTtyZXR1cm4gYX19KCl9KTtcblRIUkVFLlBvc2l0aW9uYWxBdWRpbz1mdW5jdGlvbihhKXtUSFJFRS5BdWRpby5jYWxsKHRoaXMsYSk7dGhpcy5wYW5uZXI9dGhpcy5jb250ZXh0LmNyZWF0ZVBhbm5lcigpO3RoaXMucGFubmVyLmNvbm5lY3QodGhpcy5nYWluKX07XG5USFJFRS5Qb3NpdGlvbmFsQXVkaW8ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5BdWRpby5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5Qb3NpdGlvbmFsQXVkaW8sZ2V0T3V0cHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFubmVyfSxnZXRSZWZEaXN0YW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5yZWZEaXN0YW5jZX0sc2V0UmVmRGlzdGFuY2U6ZnVuY3Rpb24oYSl7dGhpcy5wYW5uZXIucmVmRGlzdGFuY2U9YX0sZ2V0Um9sbG9mZkZhY3RvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5yb2xsb2ZmRmFjdG9yfSxzZXRSb2xsb2ZmRmFjdG9yOmZ1bmN0aW9uKGEpe3RoaXMucGFubmVyLnJvbGxvZmZGYWN0b3I9YX0sZ2V0RGlzdGFuY2VNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5kaXN0YW5jZU1vZGVsfSxzZXREaXN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEpe3RoaXMucGFubmVyLmRpc3RhbmNlTW9kZWw9XG5hfSxnZXRNYXhEaXN0YW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5tYXhEaXN0YW5jZX0sc2V0TWF4RGlzdGFuY2U6ZnVuY3Rpb24oYSl7dGhpcy5wYW5uZXIubWF4RGlzdGFuY2U9YX0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxiKTthLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTt0aGlzLnBhbm5lci5zZXRQb3NpdGlvbihhLngsYS55LGEueil9fSgpfSk7XG5USFJFRS5BdWRpb0xpc3RlbmVyPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJBdWRpb0xpc3RlbmVyXCI7dGhpcy5jb250ZXh0PVRIUkVFLkF1ZGlvQ29udGV4dDt0aGlzLmdhaW49dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTt0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO3RoaXMuZmlsdGVyPW51bGx9O1xuVEhSRUUuQXVkaW9MaXN0ZW5lci5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkF1ZGlvTGlzdGVuZXIsZ2V0SW5wdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nYWlufSxyZW1vdmVGaWx0ZXI6ZnVuY3Rpb24oKXtudWxsIT09dGhpcy5maWx0ZXImJih0aGlzLmdhaW4uZGlzY29ubmVjdCh0aGlzLmZpbHRlciksdGhpcy5maWx0ZXIuZGlzY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pLHRoaXMuZ2Fpbi5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbiksdGhpcy5maWx0ZXI9bnVsbCl9LGdldEZpbHRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcn0sc2V0RmlsdGVyOmZ1bmN0aW9uKGEpe251bGwhPT10aGlzLmZpbHRlcj8odGhpcy5nYWluLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXIpLHRoaXMuZmlsdGVyLmRpc2Nvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSk6XG50aGlzLmdhaW4uZGlzY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO3RoaXMuZmlsdGVyPWE7dGhpcy5nYWluLmNvbm5lY3QodGhpcy5maWx0ZXIpO3RoaXMuZmlsdGVyLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKX0sZ2V0TWFzdGVyVm9sdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnZhbHVlfSxzZXRNYXN0ZXJWb2x1bWU6ZnVuY3Rpb24oYSl7dGhpcy5nYWluLmdhaW4udmFsdWU9YX0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5RdWF0ZXJuaW9uLGM9bmV3IFRIUkVFLlZlY3RvcjMsZD1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oZSl7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxlKTtlPXRoaXMuY29udGV4dC5saXN0ZW5lcjt2YXIgZj10aGlzLnVwO3RoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKGEsXG5iLGMpO2Quc2V0KDAsMCwtMSkuYXBwbHlRdWF0ZXJuaW9uKGIpO2Uuc2V0UG9zaXRpb24oYS54LGEueSxhLnopO2Uuc2V0T3JpZW50YXRpb24oZC54LGQueSxkLnosZi54LGYueSxmLnopfX0oKX0pO1RIUkVFLkNhbWVyYT1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ2FtZXJhXCI7dGhpcy5tYXRyaXhXb3JsZEludmVyc2U9bmV3IFRIUkVFLk1hdHJpeDQ7dGhpcy5wcm9qZWN0aW9uTWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0fTtUSFJFRS5DYW1lcmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkNhbWVyYTtcblRIUkVFLkNhbWVyYS5wcm90b3R5cGUuZ2V0V29ybGREaXJlY3Rpb249ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuUXVhdGVybmlvbjtyZXR1cm4gZnVuY3Rpb24oYil7Yj1ifHxuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLmdldFdvcmxkUXVhdGVybmlvbihhKTtyZXR1cm4gYi5zZXQoMCwwLC0xKS5hcHBseVF1YXRlcm5pb24oYSl9fSgpO1RIUkVFLkNhbWVyYS5wcm90b3R5cGUubG9va0F0PWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKGIpe2EubG9va0F0KHRoaXMucG9zaXRpb24sYix0aGlzLnVwKTt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KGEpfX0oKTtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfTtcblRIUkVFLkNhbWVyYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5tYXRyaXhXb3JsZEludmVyc2UuY29weShhLm1hdHJpeFdvcmxkSW52ZXJzZSk7dGhpcy5wcm9qZWN0aW9uTWF0cml4LmNvcHkoYS5wcm9qZWN0aW9uTWF0cml4KTtyZXR1cm4gdGhpc307XG5USFJFRS5DdWJlQ2FtZXJhPWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkN1YmVDYW1lcmFcIjt2YXIgZD1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSxhLGIpO2QudXAuc2V0KDAsLTEsMCk7ZC5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMSwwLDApKTt0aGlzLmFkZChkKTt2YXIgZT1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSxhLGIpO2UudXAuc2V0KDAsLTEsMCk7ZS5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoLTEsMCwwKSk7dGhpcy5hZGQoZSk7dmFyIGY9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtmLnVwLnNldCgwLDAsMSk7Zi5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApKTt0aGlzLmFkZChmKTt2YXIgZz1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSxhLGIpO2cudXAuc2V0KDAsMCwtMSk7Zy5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwtMSwwKSk7XG50aGlzLmFkZChnKTt2YXIgaD1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSxhLGIpO2gudXAuc2V0KDAsLTEsMCk7aC5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpKTt0aGlzLmFkZChoKTt2YXIgaz1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoOTAsMSxhLGIpO2sudXAuc2V0KDAsLTEsMCk7ay5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwwLC0xKSk7dGhpcy5hZGQoayk7dGhpcy5yZW5kZXJUYXJnZXQ9bmV3IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZShjLGMse2Zvcm1hdDpUSFJFRS5SR0JGb3JtYXQsbWFnRmlsdGVyOlRIUkVFLkxpbmVhckZpbHRlcixtaW5GaWx0ZXI6VEhSRUUuTGluZWFyRmlsdGVyfSk7dGhpcy51cGRhdGVDdWJlTWFwPWZ1bmN0aW9uKGEsYil7bnVsbD09PXRoaXMucGFyZW50JiZ0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCk7dmFyIGM9dGhpcy5yZW5kZXJUYXJnZXQsbj1jLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzO2MudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9XG4hMTtjLmFjdGl2ZUN1YmVGYWNlPTA7YS5yZW5kZXIoYixkLGMpO2MuYWN0aXZlQ3ViZUZhY2U9MTthLnJlbmRlcihiLGUsYyk7Yy5hY3RpdmVDdWJlRmFjZT0yO2EucmVuZGVyKGIsZixjKTtjLmFjdGl2ZUN1YmVGYWNlPTM7YS5yZW5kZXIoYixnLGMpO2MuYWN0aXZlQ3ViZUZhY2U9NDthLnJlbmRlcihiLGgsYyk7Yy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz1uO2MuYWN0aXZlQ3ViZUZhY2U9NTthLnJlbmRlcihiLGssYyk7YS5zZXRSZW5kZXJUYXJnZXQobnVsbCl9fTtUSFJFRS5DdWJlQ2FtZXJhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuQ3ViZUNhbWVyYS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ3ViZUNhbWVyYTtcblRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYT1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuQ2FtZXJhLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiT3J0aG9ncmFwaGljQ2FtZXJhXCI7dGhpcy56b29tPTE7dGhpcy52aWV3PW51bGw7dGhpcy5sZWZ0PWE7dGhpcy5yaWdodD1iO3RoaXMudG9wPWM7dGhpcy5ib3R0b209ZDt0aGlzLm5lYXI9dm9pZCAwIT09ZT9lOi4xO3RoaXMuZmFyPXZvaWQgMCE9PWY/ZjoyRTM7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9O1xuVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuQ2FtZXJhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSxjb3B5OmZ1bmN0aW9uKGEpe1RIUkVFLkNhbWVyYS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5sZWZ0PWEubGVmdDt0aGlzLnJpZ2h0PWEucmlnaHQ7dGhpcy50b3A9YS50b3A7dGhpcy5ib3R0b209YS5ib3R0b207dGhpcy5uZWFyPWEubmVhcjt0aGlzLmZhcj1hLmZhcjt0aGlzLnpvb209YS56b29tO3RoaXMudmlldz1udWxsPT09YS52aWV3P251bGw6T2JqZWN0LmFzc2lnbih7fSxhLnZpZXcpO3JldHVybiB0aGlzfSxzZXRWaWV3T2Zmc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLnZpZXc9e2Z1bGxXaWR0aDphLGZ1bGxIZWlnaHQ6YixvZmZzZXRYOmMsb2Zmc2V0WTpkLHdpZHRoOmUsaGVpZ2h0OmZ9O3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSxcbmNsZWFyVmlld09mZnNldDpmdW5jdGlvbigpe3RoaXMudmlldz1udWxsO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7dmFyIGE9KHRoaXMucmlnaHQtdGhpcy5sZWZ0KS8oMip0aGlzLnpvb20pLGI9KHRoaXMudG9wLXRoaXMuYm90dG9tKS8oMip0aGlzLnpvb20pLGM9KHRoaXMucmlnaHQrdGhpcy5sZWZ0KS8yLGQ9KHRoaXMudG9wK3RoaXMuYm90dG9tKS8yLGU9Yy1hLGM9YythLGE9ZCtiLGI9ZC1iO2lmKG51bGwhPT10aGlzLnZpZXcpdmFyIGM9dGhpcy56b29tLyh0aGlzLnZpZXcud2lkdGgvdGhpcy52aWV3LmZ1bGxXaWR0aCksYj10aGlzLnpvb20vKHRoaXMudmlldy5oZWlnaHQvdGhpcy52aWV3LmZ1bGxIZWlnaHQpLGY9KHRoaXMucmlnaHQtdGhpcy5sZWZ0KS90aGlzLnZpZXcud2lkdGgsZD0odGhpcy50b3AtdGhpcy5ib3R0b20pL3RoaXMudmlldy5oZWlnaHQsZT1lK3RoaXMudmlldy5vZmZzZXRYL2MqZixcbmM9ZSt0aGlzLnZpZXcud2lkdGgvYypmLGE9YS10aGlzLnZpZXcub2Zmc2V0WS9iKmQsYj1hLXRoaXMudmlldy5oZWlnaHQvYipkO3RoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlT3J0aG9ncmFwaGljKGUsYyxhLGIsdGhpcy5uZWFyLHRoaXMuZmFyKX0sdG9KU09OOmZ1bmN0aW9uKGEpe2E9VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7YS5vYmplY3Quem9vbT10aGlzLnpvb207YS5vYmplY3QubGVmdD10aGlzLmxlZnQ7YS5vYmplY3QucmlnaHQ9dGhpcy5yaWdodDthLm9iamVjdC50b3A9dGhpcy50b3A7YS5vYmplY3QuYm90dG9tPXRoaXMuYm90dG9tO2Eub2JqZWN0Lm5lYXI9dGhpcy5uZWFyO2Eub2JqZWN0LmZhcj10aGlzLmZhcjtudWxsIT09dGhpcy52aWV3JiYoYS5vYmplY3Qudmlldz1PYmplY3QuYXNzaWduKHt9LHRoaXMudmlldykpO3JldHVybiBhfX0pO1xuVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmE9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuQ2FtZXJhLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUGVyc3BlY3RpdmVDYW1lcmFcIjt0aGlzLmZvdj12b2lkIDAhPT1hP2E6NTA7dGhpcy56b29tPTE7dGhpcy5uZWFyPXZvaWQgMCE9PWM/YzouMTt0aGlzLmZhcj12b2lkIDAhPT1kP2Q6MkUzO3RoaXMuZm9jdXM9MTA7dGhpcy5hc3BlY3Q9dm9pZCAwIT09Yj9iOjE7dGhpcy52aWV3PW51bGw7dGhpcy5maWxtR2F1Z2U9MzU7dGhpcy5maWxtT2Zmc2V0PTA7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9O1xuVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5DYW1lcmEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEsY29weTpmdW5jdGlvbihhKXtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZm92PWEuZm92O3RoaXMuem9vbT1hLnpvb207dGhpcy5uZWFyPWEubmVhcjt0aGlzLmZhcj1hLmZhcjt0aGlzLmZvY3VzPWEuZm9jdXM7dGhpcy5hc3BlY3Q9YS5hc3BlY3Q7dGhpcy52aWV3PW51bGw9PT1hLnZpZXc/bnVsbDpPYmplY3QuYXNzaWduKHt9LGEudmlldyk7dGhpcy5maWxtR2F1Z2U9YS5maWxtR2F1Z2U7dGhpcy5maWxtT2Zmc2V0PWEuZmlsbU9mZnNldDtyZXR1cm4gdGhpc30sc2V0Rm9jYWxMZW5ndGg6ZnVuY3Rpb24oYSl7YT0uNSp0aGlzLmdldEZpbG1IZWlnaHQoKS9hO3RoaXMuZm92PTIqVEhSRUUuTWF0aC5SQUQyREVHKk1hdGguYXRhbihhKTtcbnRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSxnZXRGb2NhbExlbmd0aDpmdW5jdGlvbigpe3ZhciBhPU1hdGgudGFuKC41KlRIUkVFLk1hdGguREVHMlJBRCp0aGlzLmZvdik7cmV0dXJuLjUqdGhpcy5nZXRGaWxtSGVpZ2h0KCkvYX0sZ2V0RWZmZWN0aXZlRk9WOmZ1bmN0aW9uKCl7cmV0dXJuIDIqVEhSRUUuTWF0aC5SQUQyREVHKk1hdGguYXRhbihNYXRoLnRhbiguNSpUSFJFRS5NYXRoLkRFRzJSQUQqdGhpcy5mb3YpL3RoaXMuem9vbSl9LGdldEZpbG1XaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbG1HYXVnZSpNYXRoLm1pbih0aGlzLmFzcGVjdCwxKX0sZ2V0RmlsbUhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbG1HYXVnZS9NYXRoLm1heCh0aGlzLmFzcGVjdCwxKX0sc2V0Vmlld09mZnNldDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5hc3BlY3Q9YS9iO3RoaXMudmlldz17ZnVsbFdpZHRoOmEsZnVsbEhlaWdodDpiLG9mZnNldFg6YyxvZmZzZXRZOmQsXG53aWR0aDplLGhlaWdodDpmfTt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sY2xlYXJWaWV3T2Zmc2V0OmZ1bmN0aW9uKCl7dGhpcy52aWV3PW51bGw7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LHVwZGF0ZVByb2plY3Rpb25NYXRyaXg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5lYXIsYj1hKk1hdGgudGFuKC41KlRIUkVFLk1hdGguREVHMlJBRCp0aGlzLmZvdikvdGhpcy56b29tLGM9MipiLGQ9dGhpcy5hc3BlY3QqYyxlPS0uNSpkLGY9dGhpcy52aWV3O2lmKG51bGwhPT1mKXZhciBnPWYuZnVsbFdpZHRoLGg9Zi5mdWxsSGVpZ2h0LGU9ZStmLm9mZnNldFgqZC9nLGI9Yi1mLm9mZnNldFkqYy9oLGQ9Zi53aWR0aC9nKmQsYz1mLmhlaWdodC9oKmM7Zj10aGlzLmZpbG1PZmZzZXQ7MCE9PWYmJihlKz1hKmYvdGhpcy5nZXRGaWxtV2lkdGgoKSk7dGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VGcnVzdHVtKGUsZStkLGItYyxiLGEsdGhpcy5mYXIpfSx0b0pTT046ZnVuY3Rpb24oYSl7YT1cblRIUkVFLk9iamVjdDNELnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2Eub2JqZWN0LmZvdj10aGlzLmZvdjthLm9iamVjdC56b29tPXRoaXMuem9vbTthLm9iamVjdC5uZWFyPXRoaXMubmVhcjthLm9iamVjdC5mYXI9dGhpcy5mYXI7YS5vYmplY3QuZm9jdXM9dGhpcy5mb2N1czthLm9iamVjdC5hc3BlY3Q9dGhpcy5hc3BlY3Q7bnVsbCE9PXRoaXMudmlldyYmKGEub2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnZpZXcpKTthLm9iamVjdC5maWxtR2F1Z2U9dGhpcy5maWxtR2F1Z2U7YS5vYmplY3QuZmlsbU9mZnNldD10aGlzLmZpbG1PZmZzZXQ7cmV0dXJuIGF9fSk7XG5USFJFRS5TdGVyZW9DYW1lcmE9ZnVuY3Rpb24oKXt0aGlzLnR5cGU9XCJTdGVyZW9DYW1lcmFcIjt0aGlzLmFzcGVjdD0xO3RoaXMuY2FtZXJhTD1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmE7dGhpcy5jYW1lcmFMLmxheWVycy5lbmFibGUoMSk7dGhpcy5jYW1lcmFMLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5jYW1lcmFSPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYTt0aGlzLmNhbWVyYVIubGF5ZXJzLmVuYWJsZSgyKTt0aGlzLmNhbWVyYVIubWF0cml4QXV0b1VwZGF0ZT0hMX07XG5PYmplY3QuYXNzaWduKFRIUkVFLlN0ZXJlb0NhbWVyYS5wcm90b3R5cGUse3VwZGF0ZTpmdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZj1uZXcgVEhSRUUuTWF0cml4NCxnPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihoKXtpZihhIT09aC5mb2N1c3x8YiE9PWguZm92fHxjIT09aC5hc3BlY3QqdGhpcy5hc3BlY3R8fGQhPT1oLm5lYXJ8fGUhPT1oLmZhcil7YT1oLmZvY3VzO2I9aC5mb3Y7Yz1oLmFzcGVjdCp0aGlzLmFzcGVjdDtkPWgubmVhcjtlPWguZmFyO3ZhciBrPWgucHJvamVjdGlvbk1hdHJpeC5jbG9uZSgpLGw9LjAzMipkL2EsbT1kKk1hdGgudGFuKFRIUkVFLk1hdGguREVHMlJBRCpiKi41KSxwLG47Zy5lbGVtZW50c1sxMl09LS4wMzI7Zi5lbGVtZW50c1sxMl09LjAzMjtwPS1tKmMrbDtuPW0qYytsO2suZWxlbWVudHNbMF09MipkLyhuLXApO2suZWxlbWVudHNbOF09KG4rcCkvKG4tcCk7dGhpcy5jYW1lcmFMLnByb2plY3Rpb25NYXRyaXguY29weShrKTtcbnA9LW0qYy1sO249bSpjLWw7ay5lbGVtZW50c1swXT0yKmQvKG4tcCk7ay5lbGVtZW50c1s4XT0obitwKS8obi1wKTt0aGlzLmNhbWVyYVIucHJvamVjdGlvbk1hdHJpeC5jb3B5KGspfXRoaXMuY2FtZXJhTC5tYXRyaXhXb3JsZC5jb3B5KGgubWF0cml4V29ybGQpLm11bHRpcGx5KGcpO3RoaXMuY2FtZXJhUi5tYXRyaXhXb3JsZC5jb3B5KGgubWF0cml4V29ybGQpLm11bHRpcGx5KGYpfX0oKX0pO1RIUkVFLkxpZ2h0PWZ1bmN0aW9uKGEsYil7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMaWdodFwiO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKGEpO3RoaXMuaW50ZW5zaXR5PXZvaWQgMCE9PWI/YjoxO3RoaXMucmVjZWl2ZVNoYWRvdz12b2lkIDB9O1xuVEhSRUUuTGlnaHQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5MaWdodCxjb3B5OmZ1bmN0aW9uKGEpe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5pbnRlbnNpdHk9YS5pbnRlbnNpdHk7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihhKXthPVRIUkVFLk9iamVjdDNELnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2Eub2JqZWN0LmNvbG9yPXRoaXMuY29sb3IuZ2V0SGV4KCk7YS5vYmplY3QuaW50ZW5zaXR5PXRoaXMuaW50ZW5zaXR5O3ZvaWQgMCE9PXRoaXMuZ3JvdW5kQ29sb3ImJihhLm9iamVjdC5ncm91bmRDb2xvcj10aGlzLmdyb3VuZENvbG9yLmdldEhleCgpKTt2b2lkIDAhPT10aGlzLmRpc3RhbmNlJiYoYS5vYmplY3QuZGlzdGFuY2U9dGhpcy5kaXN0YW5jZSk7dm9pZCAwIT09XG50aGlzLmFuZ2xlJiYoYS5vYmplY3QuYW5nbGU9dGhpcy5hbmdsZSk7dm9pZCAwIT09dGhpcy5kZWNheSYmKGEub2JqZWN0LmRlY2F5PXRoaXMuZGVjYXkpO3ZvaWQgMCE9PXRoaXMucGVudW1icmEmJihhLm9iamVjdC5wZW51bWJyYT10aGlzLnBlbnVtYnJhKTtyZXR1cm4gYX19KTtUSFJFRS5MaWdodFNoYWRvdz1mdW5jdGlvbihhKXt0aGlzLmNhbWVyYT1hO3RoaXMuYmlhcz0wO3RoaXMucmFkaXVzPTE7dGhpcy5tYXBTaXplPW5ldyBUSFJFRS5WZWN0b3IyKDUxMiw1MTIpO3RoaXMubWFwPW51bGw7dGhpcy5tYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDR9O09iamVjdC5hc3NpZ24oVEhSRUUuTGlnaHRTaGFkb3cucHJvdG90eXBlLHtjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuY2FtZXJhPWEuY2FtZXJhLmNsb25lKCk7dGhpcy5iaWFzPWEuYmlhczt0aGlzLnJhZGl1cz1hLnJhZGl1czt0aGlzLm1hcFNpemUuY29weShhLm1hcFNpemUpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX19KTtcblRIUkVFLkFtYmllbnRMaWdodD1mdW5jdGlvbihhLGIpe1RIUkVFLkxpZ2h0LmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIkFtYmllbnRMaWdodFwiO3RoaXMuY2FzdFNoYWRvdz12b2lkIDB9O1RIUkVFLkFtYmllbnRMaWdodC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkFtYmllbnRMaWdodH0pO1RIUkVFLkRpcmVjdGlvbmFsTGlnaHQ9ZnVuY3Rpb24oYSxiKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJEaXJlY3Rpb25hbExpZ2h0XCI7dGhpcy5wb3NpdGlvbi5jb3B5KFRIUkVFLk9iamVjdDNELkRlZmF1bHRVcCk7dGhpcy51cGRhdGVNYXRyaXgoKTt0aGlzLnRhcmdldD1uZXcgVEhSRUUuT2JqZWN0M0Q7dGhpcy5zaGFkb3c9bmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHRTaGFkb3d9O1xuVEhSRUUuRGlyZWN0aW9uYWxMaWdodC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkRpcmVjdGlvbmFsTGlnaHQsY29weTpmdW5jdGlvbihhKXtUSFJFRS5MaWdodC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy50YXJnZXQ9YS50YXJnZXQuY2xvbmUoKTt0aGlzLnNoYWRvdz1hLnNoYWRvdy5jbG9uZSgpO3JldHVybiB0aGlzfX0pO1RIUkVFLkRpcmVjdGlvbmFsTGlnaHRTaGFkb3c9ZnVuY3Rpb24oYSl7VEhSRUUuTGlnaHRTaGFkb3cuY2FsbCh0aGlzLG5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoLTUsNSw1LC01LC41LDUwMCkpfTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0U2hhZG93LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHRTaGFkb3cucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuRGlyZWN0aW9uYWxMaWdodFNoYWRvd30pO1xuVEhSRUUuSGVtaXNwaGVyZUxpZ2h0PWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSxjKTt0aGlzLnR5cGU9XCJIZW1pc3BoZXJlTGlnaHRcIjt0aGlzLmNhc3RTaGFkb3c9dm9pZCAwO3RoaXMucG9zaXRpb24uY29weShUSFJFRS5PYmplY3QzRC5EZWZhdWx0VXApO3RoaXMudXBkYXRlTWF0cml4KCk7dGhpcy5ncm91bmRDb2xvcj1uZXcgVEhSRUUuQ29sb3IoYil9O1RIUkVFLkhlbWlzcGhlcmVMaWdodC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkhlbWlzcGhlcmVMaWdodCxjb3B5OmZ1bmN0aW9uKGEpe1RIUkVFLkxpZ2h0LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmdyb3VuZENvbG9yLmNvcHkoYS5ncm91bmRDb2xvcik7cmV0dXJuIHRoaXN9fSk7XG5USFJFRS5Qb2ludExpZ2h0PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkxpZ2h0LmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIlBvaW50TGlnaHRcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInBvd2VyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA0KnRoaXMuaW50ZW5zaXR5Kk1hdGguUEl9LHNldDpmdW5jdGlvbihhKXt0aGlzLmludGVuc2l0eT1hLyg0Kk1hdGguUEkpfX0pO3RoaXMuZGlzdGFuY2U9dm9pZCAwIT09Yz9jOjA7dGhpcy5kZWNheT12b2lkIDAhPT1kP2Q6MTt0aGlzLnNoYWRvdz1uZXcgVEhSRUUuTGlnaHRTaGFkb3cobmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsLjUsNTAwKSl9O1xuVEhSRUUuUG9pbnRMaWdodC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlBvaW50TGlnaHQsY29weTpmdW5jdGlvbihhKXtUSFJFRS5MaWdodC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5kaXN0YW5jZT1hLmRpc3RhbmNlO3RoaXMuZGVjYXk9YS5kZWNheTt0aGlzLnNoYWRvdz1hLnNoYWRvdy5jbG9uZSgpO3JldHVybiB0aGlzfX0pO1xuVEhSRUUuU3BvdExpZ2h0PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJTcG90TGlnaHRcIjt0aGlzLnBvc2l0aW9uLmNvcHkoVEhSRUUuT2JqZWN0M0QuRGVmYXVsdFVwKTt0aGlzLnVwZGF0ZU1hdHJpeCgpO3RoaXMudGFyZ2V0PW5ldyBUSFJFRS5PYmplY3QzRDtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInBvd2VyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVuc2l0eSpNYXRoLlBJfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5pbnRlbnNpdHk9YS9NYXRoLlBJfX0pO3RoaXMuZGlzdGFuY2U9dm9pZCAwIT09Yz9jOjA7dGhpcy5hbmdsZT12b2lkIDAhPT1kP2Q6TWF0aC5QSS8zO3RoaXMucGVudW1icmE9dm9pZCAwIT09ZT9lOjA7dGhpcy5kZWNheT12b2lkIDAhPT1mP2Y6MTt0aGlzLnNoYWRvdz1uZXcgVEhSRUUuU3BvdExpZ2h0U2hhZG93fTtcblRIUkVFLlNwb3RMaWdodC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlNwb3RMaWdodCxjb3B5OmZ1bmN0aW9uKGEpe1RIUkVFLkxpZ2h0LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmRpc3RhbmNlPWEuZGlzdGFuY2U7dGhpcy5hbmdsZT1hLmFuZ2xlO3RoaXMucGVudW1icmE9YS5wZW51bWJyYTt0aGlzLmRlY2F5PWEuZGVjYXk7dGhpcy50YXJnZXQ9YS50YXJnZXQuY2xvbmUoKTt0aGlzLnNoYWRvdz1hLnNoYWRvdy5jbG9uZSgpO3JldHVybiB0aGlzfX0pO1RIUkVFLlNwb3RMaWdodFNoYWRvdz1mdW5jdGlvbigpe1RIUkVFLkxpZ2h0U2hhZG93LmNhbGwodGhpcyxuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNTAsMSwuNSw1MDApKX07XG5USFJFRS5TcG90TGlnaHRTaGFkb3cucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodFNoYWRvdy5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5TcG90TGlnaHRTaGFkb3csdXBkYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPTIqVEhSRUUuTWF0aC5SQUQyREVHKmEuYW5nbGUsYz10aGlzLm1hcFNpemUud2lkdGgvdGhpcy5tYXBTaXplLmhlaWdodDthPWEuZGlzdGFuY2V8fDUwMDt2YXIgZD10aGlzLmNhbWVyYTtpZihiIT09ZC5mb3Z8fGMhPT1kLmFzcGVjdHx8YSE9PWQuZmFyKWQuZm92PWIsZC5hc3BlY3Q9YyxkLmZhcj1hLGQudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfX0pO1RIUkVFLkF1ZGlvTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuQXVkaW9Mb2FkZXIucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW5ldyBUSFJFRS5YSFJMb2FkZXIodGhpcy5tYW5hZ2VyKTtlLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpO2UubG9hZChhLGZ1bmN0aW9uKGEpe1RIUkVFLkF1ZGlvQ29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYSxmdW5jdGlvbihhKXtiKGEpfSl9LGMsZCl9fSk7VEhSRUUuQ2FjaGU9e2VuYWJsZWQ6ITEsZmlsZXM6e30sYWRkOmZ1bmN0aW9uKGEsYil7ITEhPT10aGlzLmVuYWJsZWQmJih0aGlzLmZpbGVzW2FdPWIpfSxnZXQ6ZnVuY3Rpb24oYSl7aWYoITEhPT10aGlzLmVuYWJsZWQpcmV0dXJuIHRoaXMuZmlsZXNbYV19LHJlbW92ZTpmdW5jdGlvbihhKXtkZWxldGUgdGhpcy5maWxlc1thXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmZpbGVzPXt9fX07XG5USFJFRS5Mb2FkZXI9ZnVuY3Rpb24oKXt0aGlzLm9uTG9hZFN0YXJ0PWZ1bmN0aW9uKCl7fTt0aGlzLm9uTG9hZFByb2dyZXNzPWZ1bmN0aW9uKCl7fTt0aGlzLm9uTG9hZENvbXBsZXRlPWZ1bmN0aW9uKCl7fX07XG5USFJFRS5Mb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Mb2FkZXIsY3Jvc3NPcmlnaW46dm9pZCAwLGV4dHJhY3RVcmxCYXNlOmZ1bmN0aW9uKGEpe2E9YS5zcGxpdChcIi9cIik7aWYoMT09PWEubGVuZ3RoKXJldHVyblwiLi9cIjthLnBvcCgpO3JldHVybiBhLmpvaW4oXCIvXCIpK1wiL1wifSxpbml0TWF0ZXJpYWxzOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9W10sZT0wO2U8YS5sZW5ndGg7KytlKWRbZV09dGhpcy5jcmVhdGVNYXRlcmlhbChhW2VdLGIsYyk7cmV0dXJuIGR9LGNyZWF0ZU1hdGVyaWFsOmZ1bmN0aW9uKCl7dmFyIGEsYixjO3JldHVybiBmdW5jdGlvbihkLGUsZil7ZnVuY3Rpb24gZyhhLGMsZCxnLGspe2E9ZSthO3ZhciBsPVRIUkVFLkxvYWRlci5IYW5kbGVycy5nZXQoYSk7bnVsbCE9PWw/YT1sLmxvYWQoYSk6KGIuc2V0Q3Jvc3NPcmlnaW4oZiksYT1iLmxvYWQoYSkpO3ZvaWQgMCE9PWMmJihhLnJlcGVhdC5mcm9tQXJyYXkoYyksMSE9PWNbMF0mJihhLndyYXBTPVxuVEhSRUUuUmVwZWF0V3JhcHBpbmcpLDEhPT1jWzFdJiYoYS53cmFwVD1USFJFRS5SZXBlYXRXcmFwcGluZykpO3ZvaWQgMCE9PWQmJmEub2Zmc2V0LmZyb21BcnJheShkKTt2b2lkIDAhPT1nJiYoXCJyZXBlYXRcIj09PWdbMF0mJihhLndyYXBTPVRIUkVFLlJlcGVhdFdyYXBwaW5nKSxcIm1pcnJvclwiPT09Z1swXSYmKGEud3JhcFM9VEhSRUUuTWlycm9yZWRSZXBlYXRXcmFwcGluZyksXCJyZXBlYXRcIj09PWdbMV0mJihhLndyYXBUPVRIUkVFLlJlcGVhdFdyYXBwaW5nKSxcIm1pcnJvclwiPT09Z1sxXSYmKGEud3JhcFQ9VEhSRUUuTWlycm9yZWRSZXBlYXRXcmFwcGluZykpO3ZvaWQgMCE9PWsmJihhLmFuaXNvdHJvcHk9ayk7Yz1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO2hbY109YTtyZXR1cm4gY312b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuQ29sb3IpO3ZvaWQgMD09PWImJihiPW5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKTt2b2lkIDA9PT1jJiYoYz1uZXcgVEhSRUUuTWF0ZXJpYWxMb2FkZXIpO1xudmFyIGg9e30saz17dXVpZDpUSFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpLHR5cGU6XCJNZXNoTGFtYmVydE1hdGVyaWFsXCJ9LGw7Zm9yKGwgaW4gZCl7dmFyIG09ZFtsXTtzd2l0Y2gobCl7Y2FzZSBcIkRiZ0NvbG9yXCI6Y2FzZSBcIkRiZ0luZGV4XCI6Y2FzZSBcIm9wdGljYWxEZW5zaXR5XCI6Y2FzZSBcImlsbHVtaW5hdGlvblwiOmJyZWFrO2Nhc2UgXCJEYmdOYW1lXCI6ay5uYW1lPW07YnJlYWs7Y2FzZSBcImJsZW5kaW5nXCI6ay5ibGVuZGluZz1USFJFRVttXTticmVhaztjYXNlIFwiY29sb3JBbWJpZW50XCI6Y2FzZSBcIm1hcEFtYmllbnRcIjpjb25zb2xlLndhcm4oXCJUSFJFRS5Mb2FkZXIuY3JlYXRlTWF0ZXJpYWw6XCIsbCxcImlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuXCIpO2JyZWFrO2Nhc2UgXCJjb2xvckRpZmZ1c2VcIjprLmNvbG9yPWEuZnJvbUFycmF5KG0pLmdldEhleCgpO2JyZWFrO2Nhc2UgXCJjb2xvclNwZWN1bGFyXCI6ay5zcGVjdWxhcj1hLmZyb21BcnJheShtKS5nZXRIZXgoKTticmVhaztjYXNlIFwiY29sb3JFbWlzc2l2ZVwiOmsuZW1pc3NpdmU9XG5hLmZyb21BcnJheShtKS5nZXRIZXgoKTticmVhaztjYXNlIFwic3BlY3VsYXJDb2VmXCI6ay5zaGluaW5lc3M9bTticmVhaztjYXNlIFwic2hhZGluZ1wiOlwiYmFzaWNcIj09PW0udG9Mb3dlckNhc2UoKSYmKGsudHlwZT1cIk1lc2hCYXNpY01hdGVyaWFsXCIpO1wicGhvbmdcIj09PW0udG9Mb3dlckNhc2UoKSYmKGsudHlwZT1cIk1lc2hQaG9uZ01hdGVyaWFsXCIpO1wic3RhbmRhcmRcIj09PW0udG9Mb3dlckNhc2UoKSYmKGsudHlwZT1cIk1lc2hTdGFuZGFyZE1hdGVyaWFsXCIpO2JyZWFrO2Nhc2UgXCJtYXBEaWZmdXNlXCI6ay5tYXA9ZyhtLGQubWFwRGlmZnVzZVJlcGVhdCxkLm1hcERpZmZ1c2VPZmZzZXQsZC5tYXBEaWZmdXNlV3JhcCxkLm1hcERpZmZ1c2VBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwRGlmZnVzZVJlcGVhdFwiOmNhc2UgXCJtYXBEaWZmdXNlT2Zmc2V0XCI6Y2FzZSBcIm1hcERpZmZ1c2VXcmFwXCI6Y2FzZSBcIm1hcERpZmZ1c2VBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcEVtaXNzaXZlXCI6ay5lbWlzc2l2ZU1hcD1cbmcobSxkLm1hcEVtaXNzaXZlUmVwZWF0LGQubWFwRW1pc3NpdmVPZmZzZXQsZC5tYXBFbWlzc2l2ZVdyYXAsZC5tYXBFbWlzc2l2ZUFuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBFbWlzc2l2ZVJlcGVhdFwiOmNhc2UgXCJtYXBFbWlzc2l2ZU9mZnNldFwiOmNhc2UgXCJtYXBFbWlzc2l2ZVdyYXBcIjpjYXNlIFwibWFwRW1pc3NpdmVBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcExpZ2h0XCI6ay5saWdodE1hcD1nKG0sZC5tYXBMaWdodFJlcGVhdCxkLm1hcExpZ2h0T2Zmc2V0LGQubWFwTGlnaHRXcmFwLGQubWFwTGlnaHRBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwTGlnaHRSZXBlYXRcIjpjYXNlIFwibWFwTGlnaHRPZmZzZXRcIjpjYXNlIFwibWFwTGlnaHRXcmFwXCI6Y2FzZSBcIm1hcExpZ2h0QW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBBT1wiOmsuYW9NYXA9ZyhtLGQubWFwQU9SZXBlYXQsZC5tYXBBT09mZnNldCxkLm1hcEFPV3JhcCxkLm1hcEFPQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcEFPUmVwZWF0XCI6Y2FzZSBcIm1hcEFPT2Zmc2V0XCI6Y2FzZSBcIm1hcEFPV3JhcFwiOmNhc2UgXCJtYXBBT0FuaXNvdHJvcHlcIjpicmVhaztcbmNhc2UgXCJtYXBCdW1wXCI6ay5idW1wTWFwPWcobSxkLm1hcEJ1bXBSZXBlYXQsZC5tYXBCdW1wT2Zmc2V0LGQubWFwQnVtcFdyYXAsZC5tYXBCdW1wQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcEJ1bXBTY2FsZVwiOmsuYnVtcFNjYWxlPW07YnJlYWs7Y2FzZSBcIm1hcEJ1bXBSZXBlYXRcIjpjYXNlIFwibWFwQnVtcE9mZnNldFwiOmNhc2UgXCJtYXBCdW1wV3JhcFwiOmNhc2UgXCJtYXBCdW1wQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBOb3JtYWxcIjprLm5vcm1hbE1hcD1nKG0sZC5tYXBOb3JtYWxSZXBlYXQsZC5tYXBOb3JtYWxPZmZzZXQsZC5tYXBOb3JtYWxXcmFwLGQubWFwTm9ybWFsQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcE5vcm1hbEZhY3RvclwiOmsubm9ybWFsU2NhbGU9W20sbV07YnJlYWs7Y2FzZSBcIm1hcE5vcm1hbFJlcGVhdFwiOmNhc2UgXCJtYXBOb3JtYWxPZmZzZXRcIjpjYXNlIFwibWFwTm9ybWFsV3JhcFwiOmNhc2UgXCJtYXBOb3JtYWxBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcFNwZWN1bGFyXCI6ay5zcGVjdWxhck1hcD1cbmcobSxkLm1hcFNwZWN1bGFyUmVwZWF0LGQubWFwU3BlY3VsYXJPZmZzZXQsZC5tYXBTcGVjdWxhcldyYXAsZC5tYXBTcGVjdWxhckFuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBTcGVjdWxhclJlcGVhdFwiOmNhc2UgXCJtYXBTcGVjdWxhck9mZnNldFwiOmNhc2UgXCJtYXBTcGVjdWxhcldyYXBcIjpjYXNlIFwibWFwU3BlY3VsYXJBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcE1ldGFsbmVzc1wiOmsubWV0YWxuZXNzTWFwPWcobSxkLm1hcE1ldGFsbmVzc1JlcGVhdCxkLm1hcE1ldGFsbmVzc09mZnNldCxkLm1hcE1ldGFsbmVzc1dyYXAsZC5tYXBNZXRhbG5lc3NBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwTWV0YWxuZXNzUmVwZWF0XCI6Y2FzZSBcIm1hcE1ldGFsbmVzc09mZnNldFwiOmNhc2UgXCJtYXBNZXRhbG5lc3NXcmFwXCI6Y2FzZSBcIm1hcE1ldGFsbmVzc0FuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwibWFwUm91Z2huZXNzXCI6ay5yb3VnaG5lc3NNYXA9ZyhtLGQubWFwUm91Z2huZXNzUmVwZWF0LFxuZC5tYXBSb3VnaG5lc3NPZmZzZXQsZC5tYXBSb3VnaG5lc3NXcmFwLGQubWFwUm91Z2huZXNzQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcFJvdWdobmVzc1JlcGVhdFwiOmNhc2UgXCJtYXBSb3VnaG5lc3NPZmZzZXRcIjpjYXNlIFwibWFwUm91Z2huZXNzV3JhcFwiOmNhc2UgXCJtYXBSb3VnaG5lc3NBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcEFscGhhXCI6ay5hbHBoYU1hcD1nKG0sZC5tYXBBbHBoYVJlcGVhdCxkLm1hcEFscGhhT2Zmc2V0LGQubWFwQWxwaGFXcmFwLGQubWFwQWxwaGFBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwQWxwaGFSZXBlYXRcIjpjYXNlIFwibWFwQWxwaGFPZmZzZXRcIjpjYXNlIFwibWFwQWxwaGFXcmFwXCI6Y2FzZSBcIm1hcEFscGhhQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJmbGlwU2lkZWRcIjprLnNpZGU9VEhSRUUuQmFja1NpZGU7YnJlYWs7Y2FzZSBcImRvdWJsZVNpZGVkXCI6ay5zaWRlPVRIUkVFLkRvdWJsZVNpZGU7YnJlYWs7Y2FzZSBcInRyYW5zcGFyZW5jeVwiOmNvbnNvbGUud2FybihcIlRIUkVFLkxvYWRlci5jcmVhdGVNYXRlcmlhbDogdHJhbnNwYXJlbmN5IGhhcyBiZWVuIHJlbmFtZWQgdG8gb3BhY2l0eVwiKTtcbmsub3BhY2l0eT1tO2JyZWFrO2Nhc2UgXCJkZXB0aFRlc3RcIjpjYXNlIFwiZGVwdGhXcml0ZVwiOmNhc2UgXCJjb2xvcldyaXRlXCI6Y2FzZSBcIm9wYWNpdHlcIjpjYXNlIFwicmVmbGVjdGl2aXR5XCI6Y2FzZSBcInRyYW5zcGFyZW50XCI6Y2FzZSBcInZpc2libGVcIjpjYXNlIFwid2lyZWZyYW1lXCI6a1tsXT1tO2JyZWFrO2Nhc2UgXCJ2ZXJ0ZXhDb2xvcnNcIjohMD09PW0mJihrLnZlcnRleENvbG9ycz1USFJFRS5WZXJ0ZXhDb2xvcnMpO1wiZmFjZVwiPT09bSYmKGsudmVydGV4Q29sb3JzPVRIUkVFLkZhY2VDb2xvcnMpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcihcIlRIUkVFLkxvYWRlci5jcmVhdGVNYXRlcmlhbDogVW5zdXBwb3J0ZWRcIixsLG0pfX1cIk1lc2hCYXNpY01hdGVyaWFsXCI9PT1rLnR5cGUmJmRlbGV0ZSBrLmVtaXNzaXZlO1wiTWVzaFBob25nTWF0ZXJpYWxcIiE9PWsudHlwZSYmZGVsZXRlIGsuc3BlY3VsYXI7MT5rLm9wYWNpdHkmJihrLnRyYW5zcGFyZW50PSEwKTtjLnNldFRleHR1cmVzKGgpO1xucmV0dXJuIGMucGFyc2Uoayl9fSgpfTtUSFJFRS5Mb2FkZXIuSGFuZGxlcnM9e2hhbmRsZXJzOltdLGFkZDpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlcnMucHVzaChhLGIpfSxnZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuaGFuZGxlcnMsYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrPTIpe3ZhciBlPWJbYysxXTtpZihiW2NdLnRlc3QoYSkpcmV0dXJuIGV9cmV0dXJuIG51bGx9fTtUSFJFRS5YSFJMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXJ9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5YSFJMb2FkZXIucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZvaWQgMCE9PXRoaXMucGF0aCYmKGE9dGhpcy5wYXRoK2EpO3ZhciBlPXRoaXMsZj1USFJFRS5DYWNoZS5nZXQoYSk7aWYodm9pZCAwIT09ZilyZXR1cm4gZS5tYW5hZ2VyLml0ZW1TdGFydChhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YiYmYihmKTtlLm1hbmFnZXIuaXRlbUVuZChhKX0sMCksZjt2YXIgZz1uZXcgWE1MSHR0cFJlcXVlc3Q7Zy5vdmVycmlkZU1pbWVUeXBlKFwidGV4dC9wbGFpblwiKTtnLm9wZW4oXCJHRVRcIixhLCEwKTtnLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oYyl7dmFyIGY9Yy50YXJnZXQucmVzcG9uc2U7VEhSRUUuQ2FjaGUuYWRkKGEsZik7MjAwPT09dGhpcy5zdGF0dXM/KGImJmIoZiksZS5tYW5hZ2VyLml0ZW1FbmQoYSkpOjA9PT10aGlzLnN0YXR1cz8oY29uc29sZS53YXJuKFwiVEhSRUUuWEhSTG9hZGVyOiBIVFRQIFN0YXR1cyAwIHJlY2VpdmVkLlwiKSxcbmImJmIoZiksZS5tYW5hZ2VyLml0ZW1FbmQoYSkpOihkJiZkKGMpLGUubWFuYWdlci5pdGVtRXJyb3IoYSkpfSwhMSk7dm9pZCAwIT09YyYmZy5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixmdW5jdGlvbihhKXtjKGEpfSwhMSk7Zy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmdW5jdGlvbihiKXtkJiZkKGIpO2UubWFuYWdlci5pdGVtRXJyb3IoYSl9LCExKTt2b2lkIDAhPT10aGlzLnJlc3BvbnNlVHlwZSYmKGcucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUeXBlKTt2b2lkIDAhPT10aGlzLndpdGhDcmVkZW50aWFscyYmKGcud2l0aENyZWRlbnRpYWxzPXRoaXMud2l0aENyZWRlbnRpYWxzKTtnLnNlbmQobnVsbCk7ZS5tYW5hZ2VyLml0ZW1TdGFydChhKTtyZXR1cm4gZ30sc2V0UGF0aDpmdW5jdGlvbihhKXt0aGlzLnBhdGg9YTtyZXR1cm4gdGhpc30sc2V0UmVzcG9uc2VUeXBlOmZ1bmN0aW9uKGEpe3RoaXMucmVzcG9uc2VUeXBlPWE7cmV0dXJuIHRoaXN9LHNldFdpdGhDcmVkZW50aWFsczpmdW5jdGlvbihhKXt0aGlzLndpdGhDcmVkZW50aWFscz1cbmE7cmV0dXJuIHRoaXN9fSk7VEhSRUUuRm9udExvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07T2JqZWN0LmFzc2lnbihUSFJFRS5Gb250TG9hZGVyLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzOyhuZXcgVEhSRUUuWEhSTG9hZGVyKHRoaXMubWFuYWdlcikpLmxvYWQoYSxmdW5jdGlvbihhKXt2YXIgYzt0cnl7Yz1KU09OLnBhcnNlKGEpfWNhdGNoKGQpe2NvbnNvbGUud2FybihcIlRIUkVFLkZvbnRMb2FkZXI6IHR5cGVmYWNlLmpzIHN1cHBvcnQgaXMgYmVpbmcgZGVwcmVjYXRlZC4gVXNlIHR5cGVmYWNlLmpzb24gaW5zdGVhZC5cIiksYz1KU09OLnBhcnNlKGEuc3Vic3RyaW5nKDY1LGEubGVuZ3RoLTIpKX1hPWUucGFyc2UoYyk7YiYmYihhKX0sYyxkKX0scGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBUSFJFRS5Gb250KGEpfX0pO1xuVEhSRUUuSW1hZ2VMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXJ9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5JbWFnZUxvYWRlci5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcyxmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImltZ1wiKTtmLm9ubG9hZD1mdW5jdGlvbigpe1VSTC5yZXZva2VPYmplY3RVUkwoZi5zcmMpO2ImJmIoZik7ZS5tYW5hZ2VyLml0ZW1FbmQoYSl9O2lmKDA9PT1hLmluZGV4T2YoXCJkYXRhOlwiKSlmLnNyYz1hO2Vsc2V7dmFyIGc9bmV3IFRIUkVFLlhIUkxvYWRlcjtnLnNldFBhdGgodGhpcy5wYXRoKTtnLnNldFJlc3BvbnNlVHlwZShcImJsb2JcIik7Zy5sb2FkKGEsZnVuY3Rpb24oYSl7Zi5zcmM9VVJMLmNyZWF0ZU9iamVjdFVSTChhKX0sYyxkKX1lLm1hbmFnZXIuaXRlbVN0YXJ0KGEpO3JldHVybiBmfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWE7cmV0dXJuIHRoaXN9LHNldFBhdGg6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoPVxuYTtyZXR1cm4gdGhpc319KTtUSFJFRS5KU09OTG9hZGVyPWZ1bmN0aW9uKGEpe1wiYm9vbGVhblwiPT09dHlwZW9mIGEmJihjb25zb2xlLndhcm4oXCJUSFJFRS5KU09OTG9hZGVyOiBzaG93U3RhdHVzIHBhcmFtZXRlciBoYXMgYmVlbiByZW1vdmVkIGZyb20gY29uc3RydWN0b3IuXCIpLGE9dm9pZCAwKTt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt0aGlzLndpdGhDcmVkZW50aWFscz0hMX07XG5PYmplY3QuYXNzaWduKFRIUkVFLkpTT05Mb2FkZXIucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj10aGlzLnRleHR1cmVQYXRoJiZcInN0cmluZ1wiPT09dHlwZW9mIHRoaXMudGV4dHVyZVBhdGg/dGhpcy50ZXh0dXJlUGF0aDpUSFJFRS5Mb2FkZXIucHJvdG90eXBlLmV4dHJhY3RVcmxCYXNlKGEpLGc9bmV3IFRIUkVFLlhIUkxvYWRlcih0aGlzLm1hbmFnZXIpO2cuc2V0V2l0aENyZWRlbnRpYWxzKHRoaXMud2l0aENyZWRlbnRpYWxzKTtnLmxvYWQoYSxmdW5jdGlvbihjKXtjPUpTT04ucGFyc2UoYyk7dmFyIGQ9Yy5tZXRhZGF0YTtpZih2b2lkIDAhPT1kJiYoZD1kLnR5cGUsdm9pZCAwIT09ZCkpe2lmKFwib2JqZWN0XCI9PT1kLnRvTG93ZXJDYXNlKCkpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5KU09OTG9hZGVyOiBcIithK1wiIHNob3VsZCBiZSBsb2FkZWQgd2l0aCBUSFJFRS5PYmplY3RMb2FkZXIgaW5zdGVhZC5cIik7cmV0dXJufWlmKFwic2NlbmVcIj09PVxuZC50b0xvd2VyQ2FzZSgpKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSlNPTkxvYWRlcjogXCIrYStcIiBzaG91bGQgYmUgbG9hZGVkIHdpdGggVEhSRUUuU2NlbmVMb2FkZXIgaW5zdGVhZC5cIik7cmV0dXJufX1jPWUucGFyc2UoYyxmKTtiKGMuZ2VvbWV0cnksYy5tYXRlcmlhbHMpfSxjLGQpfSxzZXRUZXh0dXJlUGF0aDpmdW5jdGlvbihhKXt0aGlzLnRleHR1cmVQYXRoPWF9LHBhcnNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFRIUkVFLkdlb21ldHJ5LGQ9dm9pZCAwIT09YS5zY2FsZT8xL2Euc2NhbGU6MTsoZnVuY3Rpb24oYil7dmFyIGQsZyxoLGssbCxtLHAsbixxLHIscyx2LHQsdT1hLmZhY2VzO209YS52ZXJ0aWNlczt2YXIgRD1hLm5vcm1hbHMsdz1hLmNvbG9ycyxJPTA7aWYodm9pZCAwIT09YS51dnMpe2ZvcihkPTA7ZDxhLnV2cy5sZW5ndGg7ZCsrKWEudXZzW2RdLmxlbmd0aCYmSSsrO2ZvcihkPTA7ZDxJO2QrKyljLmZhY2VWZXJ0ZXhVdnNbZF09W119az0wO2ZvcihsPW0ubGVuZ3RoO2s8XG5sOylkPW5ldyBUSFJFRS5WZWN0b3IzLGQueD1tW2srK10qYixkLnk9bVtrKytdKmIsZC56PW1baysrXSpiLGMudmVydGljZXMucHVzaChkKTtrPTA7Zm9yKGw9dS5sZW5ndGg7azxsOylpZihiPXVbaysrXSxxPWImMSxoPWImMixkPWImOCxwPWImMTYscj1iJjMyLG09YiY2NCxiJj0xMjgscSl7cT1uZXcgVEhSRUUuRmFjZTM7cS5hPXVba107cS5iPXVbaysxXTtxLmM9dVtrKzNdO3M9bmV3IFRIUkVFLkZhY2UzO3MuYT11W2srMV07cy5iPXVbaysyXTtzLmM9dVtrKzNdO2srPTQ7aCYmKGg9dVtrKytdLHEubWF0ZXJpYWxJbmRleD1oLHMubWF0ZXJpYWxJbmRleD1oKTtoPWMuZmFjZXMubGVuZ3RoO2lmKGQpZm9yKGQ9MDtkPEk7ZCsrKWZvcih2PWEudXZzW2RdLGMuZmFjZVZlcnRleFV2c1tkXVtoXT1bXSxjLmZhY2VWZXJ0ZXhVdnNbZF1baCsxXT1bXSxnPTA7ND5nO2crKyluPXVbaysrXSx0PXZbMipuXSxuPXZbMipuKzFdLHQ9bmV3IFRIUkVFLlZlY3RvcjIodCxuKSwyIT09ZyYmYy5mYWNlVmVydGV4VXZzW2RdW2hdLnB1c2godCksXG4wIT09ZyYmYy5mYWNlVmVydGV4VXZzW2RdW2grMV0ucHVzaCh0KTtwJiYocD0zKnVbaysrXSxxLm5vcm1hbC5zZXQoRFtwKytdLERbcCsrXSxEW3BdKSxzLm5vcm1hbC5jb3B5KHEubm9ybWFsKSk7aWYocilmb3IoZD0wOzQ+ZDtkKyspcD0zKnVbaysrXSxyPW5ldyBUSFJFRS5WZWN0b3IzKERbcCsrXSxEW3ArK10sRFtwXSksMiE9PWQmJnEudmVydGV4Tm9ybWFscy5wdXNoKHIpLDAhPT1kJiZzLnZlcnRleE5vcm1hbHMucHVzaChyKTttJiYobT11W2srK10sbT13W21dLHEuY29sb3Iuc2V0SGV4KG0pLHMuY29sb3Iuc2V0SGV4KG0pKTtpZihiKWZvcihkPTA7ND5kO2QrKyltPXVbaysrXSxtPXdbbV0sMiE9PWQmJnEudmVydGV4Q29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKG0pKSwwIT09ZCYmcy52ZXJ0ZXhDb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IobSkpO2MuZmFjZXMucHVzaChxKTtjLmZhY2VzLnB1c2gocyl9ZWxzZXtxPW5ldyBUSFJFRS5GYWNlMztxLmE9dVtrKytdO3EuYj1cbnVbaysrXTtxLmM9dVtrKytdO2gmJihoPXVbaysrXSxxLm1hdGVyaWFsSW5kZXg9aCk7aD1jLmZhY2VzLmxlbmd0aDtpZihkKWZvcihkPTA7ZDxJO2QrKylmb3Iodj1hLnV2c1tkXSxjLmZhY2VWZXJ0ZXhVdnNbZF1baF09W10sZz0wOzM+ZztnKyspbj11W2srK10sdD12WzIqbl0sbj12WzIqbisxXSx0PW5ldyBUSFJFRS5WZWN0b3IyKHQsbiksYy5mYWNlVmVydGV4VXZzW2RdW2hdLnB1c2godCk7cCYmKHA9Myp1W2srK10scS5ub3JtYWwuc2V0KERbcCsrXSxEW3ArK10sRFtwXSkpO2lmKHIpZm9yKGQ9MDszPmQ7ZCsrKXA9Myp1W2srK10scj1uZXcgVEhSRUUuVmVjdG9yMyhEW3ArK10sRFtwKytdLERbcF0pLHEudmVydGV4Tm9ybWFscy5wdXNoKHIpO20mJihtPXVbaysrXSxxLmNvbG9yLnNldEhleCh3W21dKSk7aWYoYilmb3IoZD0wOzM+ZDtkKyspbT11W2srK10scS52ZXJ0ZXhDb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3Iod1ttXSkpO2MuZmFjZXMucHVzaChxKX19KShkKTsoZnVuY3Rpb24oKXt2YXIgYj1cbnZvaWQgMCE9PWEuaW5mbHVlbmNlc1BlclZlcnRleD9hLmluZmx1ZW5jZXNQZXJWZXJ0ZXg6MjtpZihhLnNraW5XZWlnaHRzKWZvcih2YXIgZD0wLGc9YS5za2luV2VpZ2h0cy5sZW5ndGg7ZDxnO2QrPWIpYy5za2luV2VpZ2h0cy5wdXNoKG5ldyBUSFJFRS5WZWN0b3I0KGEuc2tpbldlaWdodHNbZF0sMTxiP2Euc2tpbldlaWdodHNbZCsxXTowLDI8Yj9hLnNraW5XZWlnaHRzW2QrMl06MCwzPGI/YS5za2luV2VpZ2h0c1tkKzNdOjApKTtpZihhLnNraW5JbmRpY2VzKWZvcihkPTAsZz1hLnNraW5JbmRpY2VzLmxlbmd0aDtkPGc7ZCs9YiljLnNraW5JbmRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjQoYS5za2luSW5kaWNlc1tkXSwxPGI/YS5za2luSW5kaWNlc1tkKzFdOjAsMjxiP2Euc2tpbkluZGljZXNbZCsyXTowLDM8Yj9hLnNraW5JbmRpY2VzW2QrM106MCkpO2MuYm9uZXM9YS5ib25lcztjLmJvbmVzJiYwPGMuYm9uZXMubGVuZ3RoJiYoYy5za2luV2VpZ2h0cy5sZW5ndGghPT1cbmMuc2tpbkluZGljZXMubGVuZ3RofHxjLnNraW5JbmRpY2VzLmxlbmd0aCE9PWMudmVydGljZXMubGVuZ3RoKSYmY29uc29sZS53YXJuKFwiV2hlbiBza2lubmluZywgbnVtYmVyIG9mIHZlcnRpY2VzIChcIitjLnZlcnRpY2VzLmxlbmd0aCtcIiksIHNraW5JbmRpY2VzIChcIitjLnNraW5JbmRpY2VzLmxlbmd0aCtcIiksIGFuZCBza2luV2VpZ2h0cyAoXCIrYy5za2luV2VpZ2h0cy5sZW5ndGgrXCIpIHNob3VsZCBtYXRjaC5cIil9KSgpOyhmdW5jdGlvbihiKXtpZih2b2lkIDAhPT1hLm1vcnBoVGFyZ2V0cylmb3IodmFyIGQ9MCxnPWEubW9ycGhUYXJnZXRzLmxlbmd0aDtkPGc7ZCsrKXtjLm1vcnBoVGFyZ2V0c1tkXT17fTtjLm1vcnBoVGFyZ2V0c1tkXS5uYW1lPWEubW9ycGhUYXJnZXRzW2RdLm5hbWU7Yy5tb3JwaFRhcmdldHNbZF0udmVydGljZXM9W107Zm9yKHZhciBoPWMubW9ycGhUYXJnZXRzW2RdLnZlcnRpY2VzLGs9YS5tb3JwaFRhcmdldHNbZF0udmVydGljZXMsbD0wLG09ay5sZW5ndGg7bDxcbm07bCs9Myl7dmFyIHA9bmV3IFRIUkVFLlZlY3RvcjM7cC54PWtbbF0qYjtwLnk9a1tsKzFdKmI7cC56PWtbbCsyXSpiO2gucHVzaChwKX19aWYodm9pZCAwIT09YS5tb3JwaENvbG9ycyYmMDxhLm1vcnBoQ29sb3JzLmxlbmd0aClmb3IoY29uc29sZS53YXJuKCdUSFJFRS5KU09OTG9hZGVyOiBcIm1vcnBoQ29sb3JzXCIgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gVXNpbmcgdGhlbSBhcyBmYWNlIGNvbG9ycy4nKSxiPWMuZmFjZXMsaD1hLm1vcnBoQ29sb3JzWzBdLmNvbG9ycyxkPTAsZz1iLmxlbmd0aDtkPGc7ZCsrKWJbZF0uY29sb3IuZnJvbUFycmF5KGgsMypkKX0pKGQpOyhmdW5jdGlvbigpe3ZhciBiPVtdLGQ9W107dm9pZCAwIT09YS5hbmltYXRpb24mJmQucHVzaChhLmFuaW1hdGlvbik7dm9pZCAwIT09YS5hbmltYXRpb25zJiYoYS5hbmltYXRpb25zLmxlbmd0aD9kPWQuY29uY2F0KGEuYW5pbWF0aW9ucyk6ZC5wdXNoKGEuYW5pbWF0aW9ucykpO2Zvcih2YXIgZz0wO2c8ZC5sZW5ndGg7ZysrKXt2YXIgaD1cblRIUkVFLkFuaW1hdGlvbkNsaXAucGFyc2VBbmltYXRpb24oZFtnXSxjLmJvbmVzKTtoJiZiLnB1c2goaCl9Yy5tb3JwaFRhcmdldHMmJihkPVRIUkVFLkFuaW1hdGlvbkNsaXAuQ3JlYXRlQ2xpcHNGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZXMoYy5tb3JwaFRhcmdldHMsMTApLGI9Yi5jb25jYXQoZCkpOzA8Yi5sZW5ndGgmJihjLmFuaW1hdGlvbnM9Yil9KSgpO2MuY29tcHV0ZUZhY2VOb3JtYWxzKCk7Yy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtpZih2b2lkIDA9PT1hLm1hdGVyaWFsc3x8MD09PWEubWF0ZXJpYWxzLmxlbmd0aClyZXR1cm57Z2VvbWV0cnk6Y307ZD1USFJFRS5Mb2FkZXIucHJvdG90eXBlLmluaXRNYXRlcmlhbHMoYS5tYXRlcmlhbHMsYix0aGlzLmNyb3NzT3JpZ2luKTtyZXR1cm57Z2VvbWV0cnk6YyxtYXRlcmlhbHM6ZH19fSk7XG5USFJFRS5Mb2FkaW5nTWFuYWdlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcyxlPSExLGY9MCxnPTA7dGhpcy5vblN0YXJ0PXZvaWQgMDt0aGlzLm9uTG9hZD1hO3RoaXMub25Qcm9ncmVzcz1iO3RoaXMub25FcnJvcj1jO3RoaXMuaXRlbVN0YXJ0PWZ1bmN0aW9uKGEpe2crKztpZighMT09PWUmJnZvaWQgMCE9PWQub25TdGFydClkLm9uU3RhcnQoYSxmLGcpO2U9ITB9O3RoaXMuaXRlbUVuZD1mdW5jdGlvbihhKXtmKys7aWYodm9pZCAwIT09ZC5vblByb2dyZXNzKWQub25Qcm9ncmVzcyhhLGYsZyk7aWYoZj09PWcmJihlPSExLHZvaWQgMCE9PWQub25Mb2FkKSlkLm9uTG9hZCgpfTt0aGlzLml0ZW1FcnJvcj1mdW5jdGlvbihhKXtpZih2b2lkIDAhPT1kLm9uRXJyb3IpZC5vbkVycm9yKGEpfX07VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyPW5ldyBUSFJFRS5Mb2FkaW5nTWFuYWdlcjtcblRIUkVFLkJ1ZmZlckdlb21ldHJ5TG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuQnVmZmVyR2VvbWV0cnlMb2FkZXIucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXM7KG5ldyBUSFJFRS5YSFJMb2FkZXIoZS5tYW5hZ2VyKSkubG9hZChhLGZ1bmN0aW9uKGEpe2IoZS5wYXJzZShKU09OLnBhcnNlKGEpKSl9LGMsZCl9LHBhcnNlOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSxjPWEuZGF0YS5pbmRleCxkPXtJbnQ4QXJyYXk6SW50OEFycmF5LFVpbnQ4QXJyYXk6VWludDhBcnJheSxVaW50OENsYW1wZWRBcnJheTpVaW50OENsYW1wZWRBcnJheSxJbnQxNkFycmF5OkludDE2QXJyYXksVWludDE2QXJyYXk6VWludDE2QXJyYXksSW50MzJBcnJheTpJbnQzMkFycmF5LFVpbnQzMkFycmF5OlVpbnQzMkFycmF5LEZsb2F0MzJBcnJheTpGbG9hdDMyQXJyYXksRmxvYXQ2NEFycmF5OkZsb2F0NjRBcnJheX07dm9pZCAwIT09YyYmKGM9bmV3IGRbYy50eXBlXShjLmFycmF5KSxiLnNldEluZGV4KG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYyxcbjEpKSk7dmFyIGU9YS5kYXRhLmF0dHJpYnV0ZXMsZjtmb3IoZiBpbiBlKXt2YXIgZz1lW2ZdLGM9bmV3IGRbZy50eXBlXShnLmFycmF5KTtiLmFkZEF0dHJpYnV0ZShmLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYyxnLml0ZW1TaXplLGcubm9ybWFsaXplZCkpfWQ9YS5kYXRhLmdyb3Vwc3x8YS5kYXRhLmRyYXdjYWxsc3x8YS5kYXRhLm9mZnNldHM7aWYodm9pZCAwIT09ZClmb3IoZj0wLGM9ZC5sZW5ndGg7ZiE9PWM7KytmKWU9ZFtmXSxiLmFkZEdyb3VwKGUuc3RhcnQsZS5jb3VudCxlLm1hdGVyaWFsSW5kZXgpO2E9YS5kYXRhLmJvdW5kaW5nU3BoZXJlO3ZvaWQgMCE9PWEmJihkPW5ldyBUSFJFRS5WZWN0b3IzLHZvaWQgMCE9PWEuY2VudGVyJiZkLmZyb21BcnJheShhLmNlbnRlciksYi5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKGQsYS5yYWRpdXMpKTtyZXR1cm4gYn19KTtcblRIUkVFLk1hdGVyaWFsTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyO3RoaXMudGV4dHVyZXM9e319O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5NYXRlcmlhbExvYWRlci5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpczsobmV3IFRIUkVFLlhIUkxvYWRlcihlLm1hbmFnZXIpKS5sb2FkKGEsZnVuY3Rpb24oYSl7YihlLnBhcnNlKEpTT04ucGFyc2UoYSkpKX0sYyxkKX0sc2V0VGV4dHVyZXM6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0dXJlcz1hfSxnZXRUZXh0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudGV4dHVyZXM7dm9pZCAwPT09YlthXSYmY29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWxMb2FkZXI6IFVuZGVmaW5lZCB0ZXh0dXJlXCIsYSk7cmV0dXJuIGJbYV19LHBhcnNlOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBUSFJFRVthLnR5cGVdO3ZvaWQgMCE9PWEudXVpZCYmKGIudXVpZD1hLnV1aWQpO3ZvaWQgMCE9PWEubmFtZSYmKGIubmFtZT1hLm5hbWUpO3ZvaWQgMCE9PWEuY29sb3ImJmIuY29sb3Iuc2V0SGV4KGEuY29sb3IpO3ZvaWQgMCE9PWEucm91Z2huZXNzJiZcbihiLnJvdWdobmVzcz1hLnJvdWdobmVzcyk7dm9pZCAwIT09YS5tZXRhbG5lc3MmJihiLm1ldGFsbmVzcz1hLm1ldGFsbmVzcyk7dm9pZCAwIT09YS5lbWlzc2l2ZSYmYi5lbWlzc2l2ZS5zZXRIZXgoYS5lbWlzc2l2ZSk7dm9pZCAwIT09YS5zcGVjdWxhciYmYi5zcGVjdWxhci5zZXRIZXgoYS5zcGVjdWxhcik7dm9pZCAwIT09YS5zaGluaW5lc3MmJihiLnNoaW5pbmVzcz1hLnNoaW5pbmVzcyk7dm9pZCAwIT09YS51bmlmb3JtcyYmKGIudW5pZm9ybXM9YS51bmlmb3Jtcyk7dm9pZCAwIT09YS52ZXJ0ZXhTaGFkZXImJihiLnZlcnRleFNoYWRlcj1hLnZlcnRleFNoYWRlcik7dm9pZCAwIT09YS5mcmFnbWVudFNoYWRlciYmKGIuZnJhZ21lbnRTaGFkZXI9YS5mcmFnbWVudFNoYWRlcik7dm9pZCAwIT09YS52ZXJ0ZXhDb2xvcnMmJihiLnZlcnRleENvbG9ycz1hLnZlcnRleENvbG9ycyk7dm9pZCAwIT09YS5zaGFkaW5nJiYoYi5zaGFkaW5nPWEuc2hhZGluZyk7dm9pZCAwIT09YS5ibGVuZGluZyYmXG4oYi5ibGVuZGluZz1hLmJsZW5kaW5nKTt2b2lkIDAhPT1hLnNpZGUmJihiLnNpZGU9YS5zaWRlKTt2b2lkIDAhPT1hLm9wYWNpdHkmJihiLm9wYWNpdHk9YS5vcGFjaXR5KTt2b2lkIDAhPT1hLnRyYW5zcGFyZW50JiYoYi50cmFuc3BhcmVudD1hLnRyYW5zcGFyZW50KTt2b2lkIDAhPT1hLmFscGhhVGVzdCYmKGIuYWxwaGFUZXN0PWEuYWxwaGFUZXN0KTt2b2lkIDAhPT1hLmRlcHRoVGVzdCYmKGIuZGVwdGhUZXN0PWEuZGVwdGhUZXN0KTt2b2lkIDAhPT1hLmRlcHRoV3JpdGUmJihiLmRlcHRoV3JpdGU9YS5kZXB0aFdyaXRlKTt2b2lkIDAhPT1hLmNvbG9yV3JpdGUmJihiLmNvbG9yV3JpdGU9YS5jb2xvcldyaXRlKTt2b2lkIDAhPT1hLndpcmVmcmFtZSYmKGIud2lyZWZyYW1lPWEud2lyZWZyYW1lKTt2b2lkIDAhPT1hLndpcmVmcmFtZUxpbmV3aWR0aCYmKGIud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoKTt2b2lkIDAhPT1hLnNpemUmJihiLnNpemU9YS5zaXplKTtcbnZvaWQgMCE9PWEuc2l6ZUF0dGVudWF0aW9uJiYoYi5zaXplQXR0ZW51YXRpb249YS5zaXplQXR0ZW51YXRpb24pO3ZvaWQgMCE9PWEubWFwJiYoYi5tYXA9dGhpcy5nZXRUZXh0dXJlKGEubWFwKSk7dm9pZCAwIT09YS5hbHBoYU1hcCYmKGIuYWxwaGFNYXA9dGhpcy5nZXRUZXh0dXJlKGEuYWxwaGFNYXApLGIudHJhbnNwYXJlbnQ9ITApO3ZvaWQgMCE9PWEuYnVtcE1hcCYmKGIuYnVtcE1hcD10aGlzLmdldFRleHR1cmUoYS5idW1wTWFwKSk7dm9pZCAwIT09YS5idW1wU2NhbGUmJihiLmJ1bXBTY2FsZT1hLmJ1bXBTY2FsZSk7dm9pZCAwIT09YS5ub3JtYWxNYXAmJihiLm5vcm1hbE1hcD10aGlzLmdldFRleHR1cmUoYS5ub3JtYWxNYXApKTtpZih2b2lkIDAhPT1hLm5vcm1hbFNjYWxlKXt2YXIgYz1hLm5vcm1hbFNjYWxlOyExPT09QXJyYXkuaXNBcnJheShjKSYmKGM9W2MsY10pO2Iubm9ybWFsU2NhbGU9KG5ldyBUSFJFRS5WZWN0b3IyKS5mcm9tQXJyYXkoYyl9dm9pZCAwIT09YS5kaXNwbGFjZW1lbnRNYXAmJlxuKGIuZGlzcGxhY2VtZW50TWFwPXRoaXMuZ2V0VGV4dHVyZShhLmRpc3BsYWNlbWVudE1hcCkpO3ZvaWQgMCE9PWEuZGlzcGxhY2VtZW50U2NhbGUmJihiLmRpc3BsYWNlbWVudFNjYWxlPWEuZGlzcGxhY2VtZW50U2NhbGUpO3ZvaWQgMCE9PWEuZGlzcGxhY2VtZW50QmlhcyYmKGIuZGlzcGxhY2VtZW50Qmlhcz1hLmRpc3BsYWNlbWVudEJpYXMpO3ZvaWQgMCE9PWEucm91Z2huZXNzTWFwJiYoYi5yb3VnaG5lc3NNYXA9dGhpcy5nZXRUZXh0dXJlKGEucm91Z2huZXNzTWFwKSk7dm9pZCAwIT09YS5tZXRhbG5lc3NNYXAmJihiLm1ldGFsbmVzc01hcD10aGlzLmdldFRleHR1cmUoYS5tZXRhbG5lc3NNYXApKTt2b2lkIDAhPT1hLmVtaXNzaXZlTWFwJiYoYi5lbWlzc2l2ZU1hcD10aGlzLmdldFRleHR1cmUoYS5lbWlzc2l2ZU1hcCkpO3ZvaWQgMCE9PWEuZW1pc3NpdmVJbnRlbnNpdHkmJihiLmVtaXNzaXZlSW50ZW5zaXR5PWEuZW1pc3NpdmVJbnRlbnNpdHkpO3ZvaWQgMCE9PWEuc3BlY3VsYXJNYXAmJlxuKGIuc3BlY3VsYXJNYXA9dGhpcy5nZXRUZXh0dXJlKGEuc3BlY3VsYXJNYXApKTt2b2lkIDAhPT1hLmVudk1hcCYmKGIuZW52TWFwPXRoaXMuZ2V0VGV4dHVyZShhLmVudk1hcCksYi5jb21iaW5lPVRIUkVFLk11bHRpcGx5T3BlcmF0aW9uKTt2b2lkIDAhPT1hLnJlZmxlY3Rpdml0eSYmKGIucmVmbGVjdGl2aXR5PWEucmVmbGVjdGl2aXR5KTt2b2lkIDAhPT1hLmxpZ2h0TWFwJiYoYi5saWdodE1hcD10aGlzLmdldFRleHR1cmUoYS5saWdodE1hcCkpO3ZvaWQgMCE9PWEubGlnaHRNYXBJbnRlbnNpdHkmJihiLmxpZ2h0TWFwSW50ZW5zaXR5PWEubGlnaHRNYXBJbnRlbnNpdHkpO3ZvaWQgMCE9PWEuYW9NYXAmJihiLmFvTWFwPXRoaXMuZ2V0VGV4dHVyZShhLmFvTWFwKSk7dm9pZCAwIT09YS5hb01hcEludGVuc2l0eSYmKGIuYW9NYXBJbnRlbnNpdHk9YS5hb01hcEludGVuc2l0eSk7aWYodm9pZCAwIT09YS5tYXRlcmlhbHMpZm9yKHZhciBjPTAsZD1hLm1hdGVyaWFscy5sZW5ndGg7YzxcbmQ7YysrKWIubWF0ZXJpYWxzLnB1c2godGhpcy5wYXJzZShhLm1hdGVyaWFsc1tjXSkpO3JldHVybiBifX0pO1RIUkVFLk9iamVjdExvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt0aGlzLnRleHR1cmVQYXRoPVwiXCJ9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5PYmplY3RMb2FkZXIucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe1wiXCI9PT10aGlzLnRleHR1cmVQYXRoJiYodGhpcy50ZXh0dXJlUGF0aD1hLnN1YnN0cmluZygwLGEubGFzdEluZGV4T2YoXCIvXCIpKzEpKTt2YXIgZT10aGlzOyhuZXcgVEhSRUUuWEhSTG9hZGVyKGUubWFuYWdlcikpLmxvYWQoYSxmdW5jdGlvbihhKXtlLnBhcnNlKEpTT04ucGFyc2UoYSksYil9LGMsZCl9LHNldFRleHR1cmVQYXRoOmZ1bmN0aW9uKGEpe3RoaXMudGV4dHVyZVBhdGg9YX0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hfSxwYXJzZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucGFyc2VHZW9tZXRyaWVzKGEuZ2VvbWV0cmllcyksZD10aGlzLnBhcnNlSW1hZ2VzKGEuaW1hZ2VzLGZ1bmN0aW9uKCl7dm9pZCAwIT09YiYmYihlKX0pLGQ9dGhpcy5wYXJzZVRleHR1cmVzKGEudGV4dHVyZXMsZCksZD10aGlzLnBhcnNlTWF0ZXJpYWxzKGEubWF0ZXJpYWxzLFxuZCksZT10aGlzLnBhcnNlT2JqZWN0KGEub2JqZWN0LGMsZCk7YS5hbmltYXRpb25zJiYoZS5hbmltYXRpb25zPXRoaXMucGFyc2VBbmltYXRpb25zKGEuYW5pbWF0aW9ucykpO3ZvaWQgMCE9PWEuaW1hZ2VzJiYwIT09YS5pbWFnZXMubGVuZ3RofHx2b2lkIDA9PT1ifHxiKGUpO3JldHVybiBlfSxwYXJzZUdlb21ldHJpZXM6ZnVuY3Rpb24oYSl7dmFyIGI9e307aWYodm9pZCAwIT09YSlmb3IodmFyIGM9bmV3IFRIUkVFLkpTT05Mb2FkZXIsZD1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnlMb2FkZXIsZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKyl7dmFyIGcsaD1hW2VdO3N3aXRjaChoLnR5cGUpe2Nhc2UgXCJQbGFuZUdlb21ldHJ5XCI6Y2FzZSBcIlBsYW5lQnVmZmVyR2VvbWV0cnlcIjpnPW5ldyBUSFJFRVtoLnR5cGVdKGgud2lkdGgsaC5oZWlnaHQsaC53aWR0aFNlZ21lbnRzLGguaGVpZ2h0U2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJCb3hHZW9tZXRyeVwiOmNhc2UgXCJCb3hCdWZmZXJHZW9tZXRyeVwiOmNhc2UgXCJDdWJlR2VvbWV0cnlcIjpnPVxubmV3IFRIUkVFW2gudHlwZV0oaC53aWR0aCxoLmhlaWdodCxoLmRlcHRoLGgud2lkdGhTZWdtZW50cyxoLmhlaWdodFNlZ21lbnRzLGguZGVwdGhTZWdtZW50cyk7YnJlYWs7Y2FzZSBcIkNpcmNsZUdlb21ldHJ5XCI6Y2FzZSBcIkNpcmNsZUJ1ZmZlckdlb21ldHJ5XCI6Zz1uZXcgVEhSRUVbaC50eXBlXShoLnJhZGl1cyxoLnNlZ21lbnRzLGgudGhldGFTdGFydCxoLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlIFwiQ3lsaW5kZXJHZW9tZXRyeVwiOmNhc2UgXCJDeWxpbmRlckJ1ZmZlckdlb21ldHJ5XCI6Zz1uZXcgVEhSRUVbaC50eXBlXShoLnJhZGl1c1RvcCxoLnJhZGl1c0JvdHRvbSxoLmhlaWdodCxoLnJhZGlhbFNlZ21lbnRzLGguaGVpZ2h0U2VnbWVudHMsaC5vcGVuRW5kZWQsaC50aGV0YVN0YXJ0LGgudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2UgXCJDb25lR2VvbWV0cnlcIjpjYXNlIFwiQ29uZUJ1ZmZlckdlb21ldHJ5XCI6Zz1uZXcgVEhSRUVbaC50eXBlXShoLnJhZGl1cyxoLmhlaWdodCxoLnJhZGlhbFNlZ21lbnRzLFxuaC5oZWlnaHRTZWdtZW50cyxoLm9wZW5FbmRlZCxoLnRoZXRhU3RhcnQsaC50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSBcIlNwaGVyZUdlb21ldHJ5XCI6Y2FzZSBcIlNwaGVyZUJ1ZmZlckdlb21ldHJ5XCI6Zz1uZXcgVEhSRUVbaC50eXBlXShoLnJhZGl1cyxoLndpZHRoU2VnbWVudHMsaC5oZWlnaHRTZWdtZW50cyxoLnBoaVN0YXJ0LGgucGhpTGVuZ3RoLGgudGhldGFTdGFydCxoLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlIFwiRG9kZWNhaGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiSWNvc2FoZWRyb25HZW9tZXRyeVwiOmNhc2UgXCJPY3RhaGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiVGV0cmFoZWRyb25HZW9tZXRyeVwiOmc9bmV3IFRIUkVFW2gudHlwZV0oaC5yYWRpdXMsaC5kZXRhaWwpO2JyZWFrO2Nhc2UgXCJSaW5nR2VvbWV0cnlcIjpjYXNlIFwiUmluZ0J1ZmZlckdlb21ldHJ5XCI6Zz1uZXcgVEhSRUVbaC50eXBlXShoLmlubmVyUmFkaXVzLGgub3V0ZXJSYWRpdXMsaC50aGV0YVNlZ21lbnRzLGgucGhpU2VnbWVudHMsXG5oLnRoZXRhU3RhcnQsaC50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSBcIlRvcnVzR2VvbWV0cnlcIjpjYXNlIFwiVG9ydXNCdWZmZXJHZW9tZXRyeVwiOmc9bmV3IFRIUkVFW2gudHlwZV0oaC5yYWRpdXMsaC50dWJlLGgucmFkaWFsU2VnbWVudHMsaC50dWJ1bGFyU2VnbWVudHMsaC5hcmMpO2JyZWFrO2Nhc2UgXCJUb3J1c0tub3RHZW9tZXRyeVwiOmNhc2UgXCJUb3J1c0tub3RCdWZmZXJHZW9tZXRyeVwiOmc9bmV3IFRIUkVFW2gudHlwZV0oaC5yYWRpdXMsaC50dWJlLGgudHVidWxhclNlZ21lbnRzLGgucmFkaWFsU2VnbWVudHMsaC5wLGgucSk7YnJlYWs7Y2FzZSBcIkxhdGhlR2VvbWV0cnlcIjpjYXNlIFwiTGF0aGVCdWZmZXJHZW9tZXRyeVwiOmc9bmV3IFRIUkVFW2gudHlwZV0oaC5wb2ludHMsaC5zZWdtZW50cyxoLnBoaVN0YXJ0LGgucGhpTGVuZ3RoKTticmVhaztjYXNlIFwiQnVmZmVyR2VvbWV0cnlcIjpnPWQucGFyc2UoaCk7YnJlYWs7Y2FzZSBcIkdlb21ldHJ5XCI6Zz1jLnBhcnNlKGguZGF0YSx0aGlzLnRleHR1cmVQYXRoKS5nZW9tZXRyeTtcbmJyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IFVuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGUgXCInK2gudHlwZSsnXCInKTtjb250aW51ZX1nLnV1aWQ9aC51dWlkO3ZvaWQgMCE9PWgubmFtZSYmKGcubmFtZT1oLm5hbWUpO2JbaC51dWlkXT1nfXJldHVybiBifSxwYXJzZU1hdGVyaWFsczpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O2lmKHZvaWQgMCE9PWEpe3ZhciBkPW5ldyBUSFJFRS5NYXRlcmlhbExvYWRlcjtkLnNldFRleHR1cmVzKGIpO2Zvcih2YXIgZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKyl7dmFyIGc9ZC5wYXJzZShhW2VdKTtjW2cudXVpZF09Z319cmV0dXJuIGN9LHBhcnNlQW5pbWF0aW9uczpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1USFJFRS5BbmltYXRpb25DbGlwLnBhcnNlKGFbY10pO2IucHVzaChkKX1yZXR1cm4gYn0scGFyc2VJbWFnZXM6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2QubWFuYWdlci5pdGVtU3RhcnQoYSk7XG5yZXR1cm4gZy5sb2FkKGEsZnVuY3Rpb24oKXtkLm1hbmFnZXIuaXRlbUVuZChhKX0pfXZhciBkPXRoaXMsZT17fTtpZih2b2lkIDAhPT1hJiYwPGEubGVuZ3RoKXt2YXIgZj1uZXcgVEhSRUUuTG9hZGluZ01hbmFnZXIoYiksZz1uZXcgVEhSRUUuSW1hZ2VMb2FkZXIoZik7Zy5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtmb3IodmFyIGY9MCxoPWEubGVuZ3RoO2Y8aDtmKyspe3ZhciBrPWFbZl0sbD0vXihcXC9cXC8pfChbYS16XSs6KFxcL1xcLyk/KS9pLnRlc3Qoay51cmwpP2sudXJsOmQudGV4dHVyZVBhdGgray51cmw7ZVtrLnV1aWRdPWMobCl9fXJldHVybiBlfSxwYXJzZVRleHR1cmVzOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtpZihcIm51bWJlclwiPT09dHlwZW9mIGEpcmV0dXJuIGE7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyLnBhcnNlVGV4dHVyZTogQ29uc3RhbnQgc2hvdWxkIGJlIGluIG51bWVyaWMgZm9ybS5cIixhKTtyZXR1cm4gVEhSRUVbYV19XG52YXIgZD17fTtpZih2b2lkIDAhPT1hKWZvcih2YXIgZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKyl7dmFyIGc9YVtlXTt2b2lkIDA9PT1nLmltYWdlJiZjb25zb2xlLndhcm4oJ1RIUkVFLk9iamVjdExvYWRlcjogTm8gXCJpbWFnZVwiIHNwZWNpZmllZCBmb3InLGcudXVpZCk7dm9pZCAwPT09YltnLmltYWdlXSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgaW1hZ2VcIixnLmltYWdlKTt2YXIgaD1uZXcgVEhSRUUuVGV4dHVyZShiW2cuaW1hZ2VdKTtoLm5lZWRzVXBkYXRlPSEwO2gudXVpZD1nLnV1aWQ7dm9pZCAwIT09Zy5uYW1lJiYoaC5uYW1lPWcubmFtZSk7dm9pZCAwIT09Zy5tYXBwaW5nJiYoaC5tYXBwaW5nPWMoZy5tYXBwaW5nKSk7dm9pZCAwIT09Zy5vZmZzZXQmJmgub2Zmc2V0LmZyb21BcnJheShnLm9mZnNldCk7dm9pZCAwIT09Zy5yZXBlYXQmJmgucmVwZWF0LmZyb21BcnJheShnLnJlcGVhdCk7dm9pZCAwIT09Zy53cmFwJiYoaC53cmFwUz1jKGcud3JhcFswXSksXG5oLndyYXBUPWMoZy53cmFwWzFdKSk7dm9pZCAwIT09Zy5taW5GaWx0ZXImJihoLm1pbkZpbHRlcj1jKGcubWluRmlsdGVyKSk7dm9pZCAwIT09Zy5tYWdGaWx0ZXImJihoLm1hZ0ZpbHRlcj1jKGcubWFnRmlsdGVyKSk7dm9pZCAwIT09Zy5hbmlzb3Ryb3B5JiYoaC5hbmlzb3Ryb3B5PWcuYW5pc290cm9weSk7dm9pZCAwIT09Zy5mbGlwWSYmKGguZmxpcFk9Zy5mbGlwWSk7ZFtnLnV1aWRdPWh9cmV0dXJuIGR9LHBhcnNlT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBlKGEpe3ZvaWQgMD09PWNbYV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIGdlb21ldHJ5XCIsYSk7cmV0dXJuIGNbYV19ZnVuY3Rpb24gZihhKXtpZih2b2lkIDAhPT1hKXJldHVybiB2b2lkIDA9PT1kW2FdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBtYXRlcmlhbFwiLFxuYSksZFthXX12YXIgZztzd2l0Y2goYi50eXBlKXtjYXNlIFwiU2NlbmVcIjpnPW5ldyBUSFJFRS5TY2VuZTticmVhaztjYXNlIFwiUGVyc3BlY3RpdmVDYW1lcmFcIjpnPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShiLmZvdixiLmFzcGVjdCxiLm5lYXIsYi5mYXIpO3ZvaWQgMCE9PWIuZm9jdXMmJihnLmZvY3VzPWIuZm9jdXMpO3ZvaWQgMCE9PWIuem9vbSYmKGcuem9vbT1iLnpvb20pO3ZvaWQgMCE9PWIuZmlsbUdhdWdlJiYoZy5maWxtR2F1Z2U9Yi5maWxtR2F1Z2UpO3ZvaWQgMCE9PWIuZmlsbU9mZnNldCYmKGcuZmlsbU9mZnNldD1iLmZpbG1PZmZzZXQpO3ZvaWQgMCE9PWIudmlldyYmKGcudmlldz1PYmplY3QuYXNzaWduKHt9LGIudmlldykpO2JyZWFrO2Nhc2UgXCJPcnRob2dyYXBoaWNDYW1lcmFcIjpnPW5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoYi5sZWZ0LGIucmlnaHQsYi50b3AsYi5ib3R0b20sYi5uZWFyLGIuZmFyKTticmVhaztjYXNlIFwiQW1iaWVudExpZ2h0XCI6Zz1cbm5ldyBUSFJFRS5BbWJpZW50TGlnaHQoYi5jb2xvcixiLmludGVuc2l0eSk7YnJlYWs7Y2FzZSBcIkRpcmVjdGlvbmFsTGlnaHRcIjpnPW5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KGIuY29sb3IsYi5pbnRlbnNpdHkpO2JyZWFrO2Nhc2UgXCJQb2ludExpZ2h0XCI6Zz1uZXcgVEhSRUUuUG9pbnRMaWdodChiLmNvbG9yLGIuaW50ZW5zaXR5LGIuZGlzdGFuY2UsYi5kZWNheSk7YnJlYWs7Y2FzZSBcIlNwb3RMaWdodFwiOmc9bmV3IFRIUkVFLlNwb3RMaWdodChiLmNvbG9yLGIuaW50ZW5zaXR5LGIuZGlzdGFuY2UsYi5hbmdsZSxiLnBlbnVtYnJhLGIuZGVjYXkpO2JyZWFrO2Nhc2UgXCJIZW1pc3BoZXJlTGlnaHRcIjpnPW5ldyBUSFJFRS5IZW1pc3BoZXJlTGlnaHQoYi5jb2xvcixiLmdyb3VuZENvbG9yLGIuaW50ZW5zaXR5KTticmVhaztjYXNlIFwiTWVzaFwiOmc9ZShiLmdlb21ldHJ5KTt2YXIgaD1mKGIubWF0ZXJpYWwpO2c9Zy5ib25lcyYmMDxnLmJvbmVzLmxlbmd0aD9uZXcgVEhSRUUuU2tpbm5lZE1lc2goZyxcbmgpOm5ldyBUSFJFRS5NZXNoKGcsaCk7YnJlYWs7Y2FzZSBcIkxPRFwiOmc9bmV3IFRIUkVFLkxPRDticmVhaztjYXNlIFwiTGluZVwiOmc9bmV3IFRIUkVFLkxpbmUoZShiLmdlb21ldHJ5KSxmKGIubWF0ZXJpYWwpLGIubW9kZSk7YnJlYWs7Y2FzZSBcIlBvaW50Q2xvdWRcIjpjYXNlIFwiUG9pbnRzXCI6Zz1uZXcgVEhSRUUuUG9pbnRzKGUoYi5nZW9tZXRyeSksZihiLm1hdGVyaWFsKSk7YnJlYWs7Y2FzZSBcIlNwcml0ZVwiOmc9bmV3IFRIUkVFLlNwcml0ZShmKGIubWF0ZXJpYWwpKTticmVhaztjYXNlIFwiR3JvdXBcIjpnPW5ldyBUSFJFRS5Hcm91cDticmVhaztkZWZhdWx0Omc9bmV3IFRIUkVFLk9iamVjdDNEfWcudXVpZD1iLnV1aWQ7dm9pZCAwIT09Yi5uYW1lJiYoZy5uYW1lPWIubmFtZSk7dm9pZCAwIT09Yi5tYXRyaXg/KGEuZnJvbUFycmF5KGIubWF0cml4KSxhLmRlY29tcG9zZShnLnBvc2l0aW9uLGcucXVhdGVybmlvbixnLnNjYWxlKSk6KHZvaWQgMCE9PWIucG9zaXRpb24mJmcucG9zaXRpb24uZnJvbUFycmF5KGIucG9zaXRpb24pLFxudm9pZCAwIT09Yi5yb3RhdGlvbiYmZy5yb3RhdGlvbi5mcm9tQXJyYXkoYi5yb3RhdGlvbiksdm9pZCAwIT09Yi5zY2FsZSYmZy5zY2FsZS5mcm9tQXJyYXkoYi5zY2FsZSkpO3ZvaWQgMCE9PWIuY2FzdFNoYWRvdyYmKGcuY2FzdFNoYWRvdz1iLmNhc3RTaGFkb3cpO3ZvaWQgMCE9PWIucmVjZWl2ZVNoYWRvdyYmKGcucmVjZWl2ZVNoYWRvdz1iLnJlY2VpdmVTaGFkb3cpO3ZvaWQgMCE9PWIudmlzaWJsZSYmKGcudmlzaWJsZT1iLnZpc2libGUpO3ZvaWQgMCE9PWIudXNlckRhdGEmJihnLnVzZXJEYXRhPWIudXNlckRhdGEpO2lmKHZvaWQgMCE9PWIuY2hpbGRyZW4pZm9yKHZhciBrIGluIGIuY2hpbGRyZW4pZy5hZGQodGhpcy5wYXJzZU9iamVjdChiLmNoaWxkcmVuW2tdLGMsZCkpO2lmKFwiTE9EXCI9PT1iLnR5cGUpZm9yKGI9Yi5sZXZlbHMsaD0wO2g8Yi5sZW5ndGg7aCsrKXt2YXIgbD1iW2hdO2s9Zy5nZXRPYmplY3RCeVByb3BlcnR5KFwidXVpZFwiLGwub2JqZWN0KTt2b2lkIDAhPT1cbmsmJmcuYWRkTGV2ZWwoayxsLmRpc3RhbmNlKX1yZXR1cm4gZ319KCl9KTtUSFJFRS5UZXh0dXJlTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuVGV4dHVyZUxvYWRlci5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bmV3IFRIUkVFLlRleHR1cmUsZj1uZXcgVEhSRUUuSW1hZ2VMb2FkZXIodGhpcy5tYW5hZ2VyKTtmLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2Yuc2V0UGF0aCh0aGlzLnBhdGgpO2YubG9hZChhLGZ1bmN0aW9uKGMpe3ZhciBkPTA8YS5zZWFyY2goL1xcLihqcGd8anBlZykkLyl8fDA9PT1hLnNlYXJjaCgvXmRhdGFcXDppbWFnZVxcL2pwZWcvKTtlLmZvcm1hdD1kP1RIUkVFLlJHQkZvcm1hdDpUSFJFRS5SR0JBRm9ybWF0O2UuaW1hZ2U9YztlLm5lZWRzVXBkYXRlPSEwO3ZvaWQgMCE9PWImJmIoZSl9LGMsZCk7cmV0dXJuIGV9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YTtyZXR1cm4gdGhpc30sc2V0UGF0aDpmdW5jdGlvbihhKXt0aGlzLnBhdGg9YTtyZXR1cm4gdGhpc319KTtcblRIUkVFLkN1YmVUZXh0dXJlTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuQ3ViZVRleHR1cmVMb2FkZXIucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYyl7Zy5sb2FkKGFbY10sZnVuY3Rpb24oYSl7Zi5pbWFnZXNbY109YTtoKys7Nj09PWgmJihmLm5lZWRzVXBkYXRlPSEwLGImJmIoZikpfSx2b2lkIDAsZCl9dmFyIGY9bmV3IFRIUkVFLkN1YmVUZXh0dXJlLGc9bmV3IFRIUkVFLkltYWdlTG9hZGVyKHRoaXMubWFuYWdlcik7Zy5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtnLnNldFBhdGgodGhpcy5wYXRoKTt2YXIgaD0wO2ZvcihjPTA7YzxhLmxlbmd0aDsrK2MpZShjKTtyZXR1cm4gZn0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hO3JldHVybiB0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1hO3JldHVybiB0aGlzfX0pO1xuVEhSRUUuRGF0YVRleHR1cmVMb2FkZXI9VEhSRUUuQmluYXJ5VGV4dHVyZUxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt0aGlzLl9wYXJzZXI9bnVsbH07XG5PYmplY3QuYXNzaWduKFRIUkVFLkJpbmFyeVRleHR1cmVMb2FkZXIucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1uZXcgVEhSRUUuRGF0YVRleHR1cmUsZz1uZXcgVEhSRUUuWEhSTG9hZGVyKHRoaXMubWFuYWdlcik7Zy5zZXRSZXNwb25zZVR5cGUoXCJhcnJheWJ1ZmZlclwiKTtnLmxvYWQoYSxmdW5jdGlvbihhKXtpZihhPWUuX3BhcnNlcihhKSl2b2lkIDAhPT1hLmltYWdlP2YuaW1hZ2U9YS5pbWFnZTp2b2lkIDAhPT1hLmRhdGEmJihmLmltYWdlLndpZHRoPWEud2lkdGgsZi5pbWFnZS5oZWlnaHQ9YS5oZWlnaHQsZi5pbWFnZS5kYXRhPWEuZGF0YSksZi53cmFwUz12b2lkIDAhPT1hLndyYXBTP2Eud3JhcFM6VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZyxmLndyYXBUPXZvaWQgMCE9PWEud3JhcFQ/YS53cmFwVDpUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nLGYubWFnRmlsdGVyPXZvaWQgMCE9PWEubWFnRmlsdGVyP2EubWFnRmlsdGVyOlRIUkVFLkxpbmVhckZpbHRlcixcbmYubWluRmlsdGVyPXZvaWQgMCE9PWEubWluRmlsdGVyP2EubWluRmlsdGVyOlRIUkVFLkxpbmVhck1pcE1hcExpbmVhckZpbHRlcixmLmFuaXNvdHJvcHk9dm9pZCAwIT09YS5hbmlzb3Ryb3B5P2EuYW5pc290cm9weToxLHZvaWQgMCE9PWEuZm9ybWF0JiYoZi5mb3JtYXQ9YS5mb3JtYXQpLHZvaWQgMCE9PWEudHlwZSYmKGYudHlwZT1hLnR5cGUpLHZvaWQgMCE9PWEubWlwbWFwcyYmKGYubWlwbWFwcz1hLm1pcG1hcHMpLDE9PT1hLm1pcG1hcENvdW50JiYoZi5taW5GaWx0ZXI9VEhSRUUuTGluZWFyRmlsdGVyKSxmLm5lZWRzVXBkYXRlPSEwLGImJmIoZixhKX0sYyxkKTtyZXR1cm4gZn19KTtUSFJFRS5Db21wcmVzc2VkVGV4dHVyZUxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt0aGlzLl9wYXJzZXI9bnVsbH07XG5PYmplY3QuYXNzaWduKFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlTG9hZGVyLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGUpe2subG9hZChhW2VdLGZ1bmN0aW9uKGEpe2E9Zi5fcGFyc2VyKGEsITApO2dbZV09e3dpZHRoOmEud2lkdGgsaGVpZ2h0OmEuaGVpZ2h0LGZvcm1hdDphLmZvcm1hdCxtaXBtYXBzOmEubWlwbWFwc307bCs9MTs2PT09bCYmKDE9PT1hLm1pcG1hcENvdW50JiYoaC5taW5GaWx0ZXI9VEhSRUUuTGluZWFyRmlsdGVyKSxoLmZvcm1hdD1hLmZvcm1hdCxoLm5lZWRzVXBkYXRlPSEwLGImJmIoaCkpfSxjLGQpfXZhciBmPXRoaXMsZz1bXSxoPW5ldyBUSFJFRS5Db21wcmVzc2VkVGV4dHVyZTtoLmltYWdlPWc7dmFyIGs9bmV3IFRIUkVFLlhIUkxvYWRlcih0aGlzLm1hbmFnZXIpO2suc2V0UGF0aCh0aGlzLnBhdGgpO2suc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIik7aWYoQXJyYXkuaXNBcnJheShhKSlmb3IodmFyIGw9MCxcbm09MCxwPWEubGVuZ3RoO208cDsrK20pZShtKTtlbHNlIGsubG9hZChhLGZ1bmN0aW9uKGEpe2E9Zi5fcGFyc2VyKGEsITApO2lmKGEuaXNDdWJlbWFwKWZvcih2YXIgYz1hLm1pcG1hcHMubGVuZ3RoL2EubWlwbWFwQ291bnQsZD0wO2Q8YztkKyspe2dbZF09e21pcG1hcHM6W119O2Zvcih2YXIgZT0wO2U8YS5taXBtYXBDb3VudDtlKyspZ1tkXS5taXBtYXBzLnB1c2goYS5taXBtYXBzW2QqYS5taXBtYXBDb3VudCtlXSksZ1tkXS5mb3JtYXQ9YS5mb3JtYXQsZ1tkXS53aWR0aD1hLndpZHRoLGdbZF0uaGVpZ2h0PWEuaGVpZ2h0fWVsc2UgaC5pbWFnZS53aWR0aD1hLndpZHRoLGguaW1hZ2UuaGVpZ2h0PWEuaGVpZ2h0LGgubWlwbWFwcz1hLm1pcG1hcHM7MT09PWEubWlwbWFwQ291bnQmJihoLm1pbkZpbHRlcj1USFJFRS5MaW5lYXJGaWx0ZXIpO2guZm9ybWF0PWEuZm9ybWF0O2gubmVlZHNVcGRhdGU9ITA7YiYmYihoKX0sYyxkKTtyZXR1cm4gaH0sc2V0UGF0aDpmdW5jdGlvbihhKXt0aGlzLnBhdGg9XG5hO3JldHVybiB0aGlzfX0pO1xuVEhSRUUuTWF0ZXJpYWw9ZnVuY3Rpb24oKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOlRIUkVFLk1hdGVyaWFsSWRDb3VudCsrfSk7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy50eXBlPVwiTWF0ZXJpYWxcIjt0aGlzLmxpZ2h0cz10aGlzLmZvZz0hMDt0aGlzLmJsZW5kaW5nPVRIUkVFLk5vcm1hbEJsZW5kaW5nO3RoaXMuc2lkZT1USFJFRS5Gcm9udFNpZGU7dGhpcy5zaGFkaW5nPVRIUkVFLlNtb290aFNoYWRpbmc7dGhpcy52ZXJ0ZXhDb2xvcnM9VEhSRUUuTm9Db2xvcnM7dGhpcy5vcGFjaXR5PTE7dGhpcy50cmFuc3BhcmVudD0hMTt0aGlzLmJsZW5kU3JjPVRIUkVFLlNyY0FscGhhRmFjdG9yO3RoaXMuYmxlbmREc3Q9VEhSRUUuT25lTWludXNTcmNBbHBoYUZhY3Rvcjt0aGlzLmJsZW5kRXF1YXRpb249VEhSRUUuQWRkRXF1YXRpb247dGhpcy5ibGVuZEVxdWF0aW9uQWxwaGE9dGhpcy5ibGVuZERzdEFscGhhPVxudGhpcy5ibGVuZFNyY0FscGhhPW51bGw7dGhpcy5kZXB0aEZ1bmM9VEhSRUUuTGVzc0VxdWFsRGVwdGg7dGhpcy5kZXB0aFdyaXRlPXRoaXMuZGVwdGhUZXN0PSEwO3RoaXMuY2xpcHBpbmdQbGFuZXM9bnVsbDt0aGlzLmNsaXBTaGFkb3dzPSExO3RoaXMuY29sb3JXcml0ZT0hMDt0aGlzLnByZWNpc2lvbj1udWxsO3RoaXMucG9seWdvbk9mZnNldD0hMTt0aGlzLmFscGhhVGVzdD10aGlzLnBvbHlnb25PZmZzZXRVbml0cz10aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I9MDt0aGlzLnByZW11bHRpcGxpZWRBbHBoYT0hMTt0aGlzLm92ZXJkcmF3PTA7dGhpcy5fbmVlZHNVcGRhdGU9dGhpcy52aXNpYmxlPSEwfTtcblRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTWF0ZXJpYWwsZ2V0IG5lZWRzVXBkYXRlKCl7cmV0dXJuIHRoaXMuX25lZWRzVXBkYXRlfSxzZXQgbmVlZHNVcGRhdGUoYSl7ITA9PT1hJiZ0aGlzLnVwZGF0ZSgpO3RoaXMuX25lZWRzVXBkYXRlPWF9LHNldFZhbHVlczpmdW5jdGlvbihhKXtpZih2b2lkIDAhPT1hKWZvcih2YXIgYiBpbiBhKXt2YXIgYz1hW2JdO2lmKHZvaWQgMD09PWMpY29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6ICdcIitiK1wiJyBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkLlwiKTtlbHNle3ZhciBkPXRoaXNbYl07dm9pZCAwPT09ZD9jb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6ICdcIitiK1wiJyBpcyBub3QgYSBwcm9wZXJ0eSBvZiB0aGlzIG1hdGVyaWFsLlwiKTpkIGluc3RhbmNlb2YgVEhSRUUuQ29sb3I/ZC5zZXQoYyk6ZCBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjMmJmMgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IzP2QuY29weShjKTpcbnRoaXNbYl09XCJvdmVyZHJhd1wiPT09Yj9OdW1iZXIoYyk6Y319fSx0b0pTT046ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107ZGVsZXRlIGQubWV0YWRhdGE7Yi5wdXNoKGQpfXJldHVybiBifXZhciBjPXZvaWQgMD09PWE7YyYmKGE9e3RleHR1cmVzOnt9LGltYWdlczp7fX0pO3ZhciBkPXttZXRhZGF0YTp7dmVyc2lvbjo0LjQsdHlwZTpcIk1hdGVyaWFsXCIsZ2VuZXJhdG9yOlwiTWF0ZXJpYWwudG9KU09OXCJ9fTtkLnV1aWQ9dGhpcy51dWlkO2QudHlwZT10aGlzLnR5cGU7XCJcIiE9PXRoaXMubmFtZSYmKGQubmFtZT10aGlzLm5hbWUpO3RoaXMuY29sb3IgaW5zdGFuY2VvZiBUSFJFRS5Db2xvciYmKGQuY29sb3I9dGhpcy5jb2xvci5nZXRIZXgoKSk7dm9pZCAwIT09dGhpcy5yb3VnaG5lc3MmJihkLnJvdWdobmVzcz10aGlzLnJvdWdobmVzcyk7dm9pZCAwIT09dGhpcy5tZXRhbG5lc3MmJihkLm1ldGFsbmVzcz10aGlzLm1ldGFsbmVzcyk7XG50aGlzLmVtaXNzaXZlIGluc3RhbmNlb2YgVEhSRUUuQ29sb3ImJihkLmVtaXNzaXZlPXRoaXMuZW1pc3NpdmUuZ2V0SGV4KCkpO3RoaXMuc3BlY3VsYXIgaW5zdGFuY2VvZiBUSFJFRS5Db2xvciYmKGQuc3BlY3VsYXI9dGhpcy5zcGVjdWxhci5nZXRIZXgoKSk7dm9pZCAwIT09dGhpcy5zaGluaW5lc3MmJihkLnNoaW5pbmVzcz10aGlzLnNoaW5pbmVzcyk7dGhpcy5tYXAgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlJiYoZC5tYXA9dGhpcy5tYXAudG9KU09OKGEpLnV1aWQpO3RoaXMuYWxwaGFNYXAgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlJiYoZC5hbHBoYU1hcD10aGlzLmFscGhhTWFwLnRvSlNPTihhKS51dWlkKTt0aGlzLmxpZ2h0TWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSYmKGQubGlnaHRNYXA9dGhpcy5saWdodE1hcC50b0pTT04oYSkudXVpZCk7dGhpcy5idW1wTWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSYmKGQuYnVtcE1hcD10aGlzLmJ1bXBNYXAudG9KU09OKGEpLnV1aWQsXG5kLmJ1bXBTY2FsZT10aGlzLmJ1bXBTY2FsZSk7dGhpcy5ub3JtYWxNYXAgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlJiYoZC5ub3JtYWxNYXA9dGhpcy5ub3JtYWxNYXAudG9KU09OKGEpLnV1aWQsZC5ub3JtYWxTY2FsZT10aGlzLm5vcm1hbFNjYWxlLnRvQXJyYXkoKSk7dGhpcy5kaXNwbGFjZW1lbnRNYXAgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlJiYoZC5kaXNwbGFjZW1lbnRNYXA9dGhpcy5kaXNwbGFjZW1lbnRNYXAudG9KU09OKGEpLnV1aWQsZC5kaXNwbGFjZW1lbnRTY2FsZT10aGlzLmRpc3BsYWNlbWVudFNjYWxlLGQuZGlzcGxhY2VtZW50Qmlhcz10aGlzLmRpc3BsYWNlbWVudEJpYXMpO3RoaXMucm91Z2huZXNzTWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSYmKGQucm91Z2huZXNzTWFwPXRoaXMucm91Z2huZXNzTWFwLnRvSlNPTihhKS51dWlkKTt0aGlzLm1ldGFsbmVzc01hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUmJihkLm1ldGFsbmVzc01hcD10aGlzLm1ldGFsbmVzc01hcC50b0pTT04oYSkudXVpZCk7XG50aGlzLmVtaXNzaXZlTWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSYmKGQuZW1pc3NpdmVNYXA9dGhpcy5lbWlzc2l2ZU1hcC50b0pTT04oYSkudXVpZCk7dGhpcy5zcGVjdWxhck1hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUmJihkLnNwZWN1bGFyTWFwPXRoaXMuc3BlY3VsYXJNYXAudG9KU09OKGEpLnV1aWQpO3RoaXMuZW52TWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSYmKGQuZW52TWFwPXRoaXMuZW52TWFwLnRvSlNPTihhKS51dWlkLGQucmVmbGVjdGl2aXR5PXRoaXMucmVmbGVjdGl2aXR5KTt2b2lkIDAhPT10aGlzLnNpemUmJihkLnNpemU9dGhpcy5zaXplKTt2b2lkIDAhPT10aGlzLnNpemVBdHRlbnVhdGlvbiYmKGQuc2l6ZUF0dGVudWF0aW9uPXRoaXMuc2l6ZUF0dGVudWF0aW9uKTt0aGlzLmJsZW5kaW5nIT09VEhSRUUuTm9ybWFsQmxlbmRpbmcmJihkLmJsZW5kaW5nPXRoaXMuYmxlbmRpbmcpO3RoaXMuc2hhZGluZyE9PVRIUkVFLlNtb290aFNoYWRpbmcmJlxuKGQuc2hhZGluZz10aGlzLnNoYWRpbmcpO3RoaXMuc2lkZSE9PVRIUkVFLkZyb250U2lkZSYmKGQuc2lkZT10aGlzLnNpZGUpO3RoaXMudmVydGV4Q29sb3JzIT09VEhSRUUuTm9Db2xvcnMmJihkLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9ycyk7MT50aGlzLm9wYWNpdHkmJihkLm9wYWNpdHk9dGhpcy5vcGFjaXR5KTshMD09PXRoaXMudHJhbnNwYXJlbnQmJihkLnRyYW5zcGFyZW50PXRoaXMudHJhbnNwYXJlbnQpOzA8dGhpcy5hbHBoYVRlc3QmJihkLmFscGhhVGVzdD10aGlzLmFscGhhVGVzdCk7ITA9PT10aGlzLnByZW11bHRpcGxpZWRBbHBoYSYmKGQucHJlbXVsdGlwbGllZEFscGhhPXRoaXMucHJlbXVsdGlwbGllZEFscGhhKTshMD09PXRoaXMud2lyZWZyYW1lJiYoZC53aXJlZnJhbWU9dGhpcy53aXJlZnJhbWUpOzE8dGhpcy53aXJlZnJhbWVMaW5ld2lkdGgmJihkLndpcmVmcmFtZUxpbmV3aWR0aD10aGlzLndpcmVmcmFtZUxpbmV3aWR0aCk7YyYmKGM9YihhLnRleHR1cmVzKSxcbmE9YihhLmltYWdlcyksMDxjLmxlbmd0aCYmKGQudGV4dHVyZXM9YyksMDxhLmxlbmd0aCYmKGQuaW1hZ2VzPWEpKTtyZXR1cm4gZH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5uYW1lPWEubmFtZTt0aGlzLmZvZz1hLmZvZzt0aGlzLmxpZ2h0cz1hLmxpZ2h0czt0aGlzLmJsZW5kaW5nPWEuYmxlbmRpbmc7dGhpcy5zaWRlPWEuc2lkZTt0aGlzLnNoYWRpbmc9YS5zaGFkaW5nO3RoaXMudmVydGV4Q29sb3JzPWEudmVydGV4Q29sb3JzO3RoaXMub3BhY2l0eT1hLm9wYWNpdHk7dGhpcy50cmFuc3BhcmVudD1hLnRyYW5zcGFyZW50O3RoaXMuYmxlbmRTcmM9YS5ibGVuZFNyYzt0aGlzLmJsZW5kRHN0PWEuYmxlbmREc3Q7dGhpcy5ibGVuZEVxdWF0aW9uPWEuYmxlbmRFcXVhdGlvbjt0aGlzLmJsZW5kU3JjQWxwaGE9YS5ibGVuZFNyY0FscGhhO3RoaXMuYmxlbmREc3RBbHBoYT1hLmJsZW5kRHN0QWxwaGE7XG50aGlzLmJsZW5kRXF1YXRpb25BbHBoYT1hLmJsZW5kRXF1YXRpb25BbHBoYTt0aGlzLmRlcHRoRnVuYz1hLmRlcHRoRnVuYzt0aGlzLmRlcHRoVGVzdD1hLmRlcHRoVGVzdDt0aGlzLmRlcHRoV3JpdGU9YS5kZXB0aFdyaXRlO3RoaXMuY29sb3JXcml0ZT1hLmNvbG9yV3JpdGU7dGhpcy5wcmVjaXNpb249YS5wcmVjaXNpb247dGhpcy5wb2x5Z29uT2Zmc2V0PWEucG9seWdvbk9mZnNldDt0aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I9YS5wb2x5Z29uT2Zmc2V0RmFjdG9yO3RoaXMucG9seWdvbk9mZnNldFVuaXRzPWEucG9seWdvbk9mZnNldFVuaXRzO3RoaXMuYWxwaGFUZXN0PWEuYWxwaGFUZXN0O3RoaXMucHJlbXVsdGlwbGllZEFscGhhPWEucHJlbXVsdGlwbGllZEFscGhhO3RoaXMub3ZlcmRyYXc9YS5vdmVyZHJhdzt0aGlzLnZpc2libGU9YS52aXNpYmxlO3RoaXMuY2xpcFNoYWRvd3M9YS5jbGlwU2hhZG93czthPWEuY2xpcHBpbmdQbGFuZXM7dmFyIGI9bnVsbDtpZihudWxsIT09XG5hKWZvcih2YXIgYz1hLmxlbmd0aCxiPUFycmF5KGMpLGQ9MDtkIT09YzsrK2QpYltkXT1hW2RdLmNsb25lKCk7dGhpcy5jbGlwcGluZ1BsYW5lcz1iO3JldHVybiB0aGlzfSx1cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJ1cGRhdGVcIn0pfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fTtPYmplY3QuYXNzaWduKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSxUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlKTtUSFJFRS5NYXRlcmlhbElkQ291bnQ9MDtcblRIUkVFLkxpbmVCYXNpY01hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGluZUJhc2ljTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5saW5ld2lkdGg9MTt0aGlzLmxpbmVqb2luPXRoaXMubGluZWNhcD1cInJvdW5kXCI7dGhpcy5saWdodHM9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLkxpbmVCYXNpY01hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkxpbmVCYXNpY01hdGVyaWFsO1xuVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuY29sb3IuY29weShhLmNvbG9yKTt0aGlzLmxpbmV3aWR0aD1hLmxpbmV3aWR0aDt0aGlzLmxpbmVjYXA9YS5saW5lY2FwO3RoaXMubGluZWpvaW49YS5saW5lam9pbjtyZXR1cm4gdGhpc307VEhSRUUuTGluZURhc2hlZE1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGluZURhc2hlZE1hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMuc2NhbGU9dGhpcy5saW5ld2lkdGg9MTt0aGlzLmRhc2hTaXplPTM7dGhpcy5nYXBTaXplPTE7dGhpcy5saWdodHM9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuTGluZURhc2hlZE1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWw7VEhSRUUuTGluZURhc2hlZE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5saW5ld2lkdGg9YS5saW5ld2lkdGg7dGhpcy5zY2FsZT1hLnNjYWxlO3RoaXMuZGFzaFNpemU9YS5kYXNoU2l6ZTt0aGlzLmdhcFNpemU9YS5nYXBTaXplO3JldHVybiB0aGlzfTtcblRIUkVFLk1lc2hCYXNpY01hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaEJhc2ljTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5hb01hcD10aGlzLm1hcD1udWxsO3RoaXMuYW9NYXBJbnRlbnNpdHk9MTt0aGlzLmVudk1hcD10aGlzLmFscGhhTWFwPXRoaXMuc3BlY3VsYXJNYXA9bnVsbDt0aGlzLmNvbWJpbmU9VEhSRUUuTXVsdGlwbHlPcGVyYXRpb247dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTg7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy5saWdodHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhhKX07XG5USFJFRS5NZXNoQmFzaWNNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLk1lc2hCYXNpY01hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5NZXNoQmFzaWNNYXRlcmlhbDtcblRIUkVFLk1lc2hCYXNpY01hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5tYXA9YS5tYXA7dGhpcy5hb01hcD1hLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9YS5hb01hcEludGVuc2l0eTt0aGlzLnNwZWN1bGFyTWFwPWEuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1hLmFscGhhTWFwO3RoaXMuZW52TWFwPWEuZW52TWFwO3RoaXMuY29tYmluZT1hLmNvbWJpbmU7dGhpcy5yZWZsZWN0aXZpdHk9YS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89YS5yZWZyYWN0aW9uUmF0aW87dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPWEud2lyZWZyYW1lTGluZWNhcDt0aGlzLndpcmVmcmFtZUxpbmVqb2luPWEud2lyZWZyYW1lTGluZWpvaW47XG50aGlzLnNraW5uaW5nPWEuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9YS5tb3JwaFRhcmdldHM7cmV0dXJuIHRoaXN9O1RIUkVFLk1lc2hEZXB0aE1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaERlcHRoTWF0ZXJpYWxcIjt0aGlzLmRlcHRoUGFja2luZz1USFJFRS5CYXNpY0RlcHRoUGFja2luZzt0aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPSExO3RoaXMuZGlzcGxhY2VtZW50TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5tYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLmxpZ2h0cz10aGlzLmZvZz0hMTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTWVzaERlcHRoTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5NZXNoRGVwdGhNYXRlcmlhbDtUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5kZXB0aFBhY2tpbmc9YS5kZXB0aFBhY2tpbmc7dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3RoaXMubWFwPWEubWFwO3RoaXMuYWxwaGFNYXA9YS5hbHBoYU1hcDt0aGlzLmRpc3BsYWNlbWVudE1hcD1hLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPWEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhczt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDtyZXR1cm4gdGhpc307XG5USFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaExhbWJlcnRNYXRlcmlhbFwiO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xO3RoaXMuYW9NYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTE7dGhpcy5lbWlzc2l2ZT1uZXcgVEhSRUUuQ29sb3IoMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xO3RoaXMuZW52TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5zcGVjdWxhck1hcD10aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5jb21iaW5lPVRIUkVFLk11bHRpcGx5T3BlcmF0aW9uO3RoaXMucmVmbGVjdGl2aXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89Ljk4O3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XG5cInJvdW5kXCI7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWw7XG5USFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5tYXA9YS5tYXA7dGhpcy5saWdodE1hcD1hLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9YS5saWdodE1hcEludGVuc2l0eTt0aGlzLmFvTWFwPWEuYW9NYXA7dGhpcy5hb01hcEludGVuc2l0eT1hLmFvTWFwSW50ZW5zaXR5O3RoaXMuZW1pc3NpdmUuY29weShhLmVtaXNzaXZlKTt0aGlzLmVtaXNzaXZlTWFwPWEuZW1pc3NpdmVNYXA7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT1hLmVtaXNzaXZlSW50ZW5zaXR5O3RoaXMuc3BlY3VsYXJNYXA9YS5zcGVjdWxhck1hcDt0aGlzLmFscGhhTWFwPWEuYWxwaGFNYXA7dGhpcy5lbnZNYXA9YS5lbnZNYXA7dGhpcy5jb21iaW5lPWEuY29tYmluZTt0aGlzLnJlZmxlY3Rpdml0eT1hLnJlZmxlY3Rpdml0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1cbmEucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMud2lyZWZyYW1lTGluZWNhcD1hLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1hLndpcmVmcmFtZUxpbmVqb2luO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1hLm1vcnBoTm9ybWFscztyZXR1cm4gdGhpc307VEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyxhKTt0aGlzLnR5cGU9XCJNZXNoTm9ybWFsTWF0ZXJpYWxcIjt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMubW9ycGhUYXJnZXRzPXRoaXMubGlnaHRzPXRoaXMuZm9nPSExO3RoaXMuc2V0VmFsdWVzKGEpfTtcblRIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsO1RIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7cmV0dXJuIHRoaXN9O1xuVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoUGhvbmdNYXRlcmlhbFwiO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLnNwZWN1bGFyPW5ldyBUSFJFRS5Db2xvcigxMTE4NDgxKTt0aGlzLnNoaW5pbmVzcz0zMDt0aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xO3RoaXMuYW9NYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTE7dGhpcy5lbWlzc2l2ZT1uZXcgVEhSRUUuQ29sb3IoMCk7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT0xO3RoaXMuYnVtcE1hcD10aGlzLmVtaXNzaXZlTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsU2NhbGU9bmV3IFRIUkVFLlZlY3RvcjIoMSwxKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9XG4wO3RoaXMuZW52TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5zcGVjdWxhck1hcD1udWxsO3RoaXMuY29tYmluZT1USFJFRS5NdWx0aXBseU9wZXJhdGlvbjt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPS45ODt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIjt0aGlzLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPSExO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLk1lc2hQaG9uZ01hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5NZXNoUGhvbmdNYXRlcmlhbDtcblRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5zcGVjdWxhci5jb3B5KGEuc3BlY3VsYXIpO3RoaXMuc2hpbmluZXNzPWEuc2hpbmluZXNzO3RoaXMubWFwPWEubWFwO3RoaXMubGlnaHRNYXA9YS5saWdodE1hcDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PWEubGlnaHRNYXBJbnRlbnNpdHk7dGhpcy5hb01hcD1hLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9YS5hb01hcEludGVuc2l0eTt0aGlzLmVtaXNzaXZlLmNvcHkoYS5lbWlzc2l2ZSk7dGhpcy5lbWlzc2l2ZU1hcD1hLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9YS5lbWlzc2l2ZUludGVuc2l0eTt0aGlzLmJ1bXBNYXA9YS5idW1wTWFwO3RoaXMuYnVtcFNjYWxlPWEuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPWEubm9ybWFsTWFwO3RoaXMubm9ybWFsU2NhbGUuY29weShhLm5vcm1hbFNjYWxlKTtcbnRoaXMuZGlzcGxhY2VtZW50TWFwPWEuZGlzcGxhY2VtZW50TWFwO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9YS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9YS5kaXNwbGFjZW1lbnRCaWFzO3RoaXMuc3BlY3VsYXJNYXA9YS5zcGVjdWxhck1hcDt0aGlzLmFscGhhTWFwPWEuYWxwaGFNYXA7dGhpcy5lbnZNYXA9YS5lbnZNYXA7dGhpcy5jb21iaW5lPWEuY29tYmluZTt0aGlzLnJlZmxlY3Rpdml0eT1hLnJlZmxlY3Rpdml0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1hLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9YS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49YS53aXJlZnJhbWVMaW5lam9pbjt0aGlzLnNraW5uaW5nPWEuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9YS5tb3JwaFRhcmdldHM7XG50aGlzLm1vcnBoTm9ybWFscz1hLm1vcnBoTm9ybWFscztyZXR1cm4gdGhpc307XG5USFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuZGVmaW5lcz17U1RBTkRBUkQ6XCJcIn07dGhpcy50eXBlPVwiTWVzaFN0YW5kYXJkTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5tZXRhbG5lc3M9dGhpcy5yb3VnaG5lc3M9LjU7dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IFRIUkVFLkNvbG9yKDApO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9MTt0aGlzLmJ1bXBNYXA9dGhpcy5lbWlzc2l2ZU1hcD1udWxsO3RoaXMuYnVtcFNjYWxlPTE7dGhpcy5ub3JtYWxNYXA9bnVsbDt0aGlzLm5vcm1hbFNjYWxlPW5ldyBUSFJFRS5WZWN0b3IyKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPVxuMTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLmVudk1hcD10aGlzLmFscGhhTWFwPXRoaXMubWV0YWxuZXNzTWFwPXRoaXMucm91Z2huZXNzTWFwPW51bGw7dGhpcy5lbnZNYXBJbnRlbnNpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTg7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWw7XG5USFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5kZWZpbmVzPXtTVEFOREFSRDpcIlwifTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5yb3VnaG5lc3M9YS5yb3VnaG5lc3M7dGhpcy5tZXRhbG5lc3M9YS5tZXRhbG5lc3M7dGhpcy5tYXA9YS5tYXA7dGhpcy5saWdodE1hcD1hLmxpZ2h0TWFwO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9YS5saWdodE1hcEludGVuc2l0eTt0aGlzLmFvTWFwPWEuYW9NYXA7dGhpcy5hb01hcEludGVuc2l0eT1hLmFvTWFwSW50ZW5zaXR5O3RoaXMuZW1pc3NpdmUuY29weShhLmVtaXNzaXZlKTt0aGlzLmVtaXNzaXZlTWFwPWEuZW1pc3NpdmVNYXA7dGhpcy5lbWlzc2l2ZUludGVuc2l0eT1hLmVtaXNzaXZlSW50ZW5zaXR5O3RoaXMuYnVtcE1hcD1hLmJ1bXBNYXA7dGhpcy5idW1wU2NhbGU9YS5idW1wU2NhbGU7dGhpcy5ub3JtYWxNYXA9XG5hLm5vcm1hbE1hcDt0aGlzLm5vcm1hbFNjYWxlLmNvcHkoYS5ub3JtYWxTY2FsZSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9YS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1hLmRpc3BsYWNlbWVudFNjYWxlO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz1hLmRpc3BsYWNlbWVudEJpYXM7dGhpcy5yb3VnaG5lc3NNYXA9YS5yb3VnaG5lc3NNYXA7dGhpcy5tZXRhbG5lc3NNYXA9YS5tZXRhbG5lc3NNYXA7dGhpcy5hbHBoYU1hcD1hLmFscGhhTWFwO3RoaXMuZW52TWFwPWEuZW52TWFwO3RoaXMuZW52TWFwSW50ZW5zaXR5PWEuZW52TWFwSW50ZW5zaXR5O3RoaXMucmVmcmFjdGlvblJhdGlvPWEucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMud2lyZWZyYW1lTGluZWNhcD1hLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1hLndpcmVmcmFtZUxpbmVqb2luO1xudGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3RoaXMubW9ycGhOb3JtYWxzPWEubW9ycGhOb3JtYWxzO3JldHVybiB0aGlzfTtUSFJFRS5NZXNoUGh5c2ljYWxNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMuZGVmaW5lcz17UEhZU0lDQUw6XCJcIn07dGhpcy50eXBlPVwiTWVzaFBoeXNpY2FsTWF0ZXJpYWxcIjt0aGlzLnJlZmxlY3Rpdml0eT0uNTt0aGlzLmNsZWFyQ29hdFJvdWdobmVzcz10aGlzLmNsZWFyQ29hdD0wO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5NZXNoUGh5c2ljYWxNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLk1lc2hQaHlzaWNhbE1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5NZXNoUGh5c2ljYWxNYXRlcmlhbDtcblRIUkVFLk1lc2hQaHlzaWNhbE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1RIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmRlZmluZXM9e1BIWVNJQ0FMOlwiXCJ9O3RoaXMucmVmbGVjdGl2aXR5PWEucmVmbGVjdGl2aXR5O3RoaXMuY2xlYXJDb2F0PWEuY2xlYXJDb2F0O3RoaXMuY2xlYXJDb2F0Um91Z2huZXNzPWEuY2xlYXJDb2F0Um91Z2huZXNzO3JldHVybiB0aGlzfTtUSFJFRS5NdWx0aU1hdGVyaWFsPWZ1bmN0aW9uKGEpe3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMudHlwZT1cIk11bHRpTWF0ZXJpYWxcIjt0aGlzLm1hdGVyaWFscz1hIGluc3RhbmNlb2YgQXJyYXk/YTpbXTt0aGlzLnZpc2libGU9ITB9O1xuVEhSRUUuTXVsdGlNYXRlcmlhbC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLk11bHRpTWF0ZXJpYWwsdG9KU09OOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj17bWV0YWRhdGE6e3ZlcnNpb246NC4yLHR5cGU6XCJtYXRlcmlhbFwiLGdlbmVyYXRvcjpcIk1hdGVyaWFsRXhwb3J0ZXJcIn0sdXVpZDp0aGlzLnV1aWQsdHlwZTp0aGlzLnR5cGUsbWF0ZXJpYWxzOltdfSxjPXRoaXMubWF0ZXJpYWxzLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWNbZF0udG9KU09OKGEpO2RlbGV0ZSBmLm1ldGFkYXRhO2IubWF0ZXJpYWxzLnB1c2goZil9Yi52aXNpYmxlPXRoaXMudmlzaWJsZTtyZXR1cm4gYn0sY2xvbmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9bmV3IHRoaXMuY29uc3RydWN0b3IsYj0wO2I8dGhpcy5tYXRlcmlhbHMubGVuZ3RoO2IrKylhLm1hdGVyaWFscy5wdXNoKHRoaXMubWF0ZXJpYWxzW2JdLmNsb25lKCkpO2EudmlzaWJsZT10aGlzLnZpc2libGU7cmV0dXJuIGF9fTtcblRIUkVFLlBvaW50c01hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUG9pbnRzTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5tYXA9bnVsbDt0aGlzLnNpemU9MTt0aGlzLnNpemVBdHRlbnVhdGlvbj0hMDt0aGlzLmxpZ2h0cz0hMTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuUG9pbnRzTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5Qb2ludHNNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUG9pbnRzTWF0ZXJpYWw7XG5USFJFRS5Qb2ludHNNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMubWFwPWEubWFwO3RoaXMuc2l6ZT1hLnNpemU7dGhpcy5zaXplQXR0ZW51YXRpb249YS5zaXplQXR0ZW51YXRpb247cmV0dXJuIHRoaXN9O1xuVEhSRUUuU2hhZGVyTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTaGFkZXJNYXRlcmlhbFwiO3RoaXMuZGVmaW5lcz17fTt0aGlzLnVuaWZvcm1zPXt9O3RoaXMudmVydGV4U2hhZGVyPVwidm9pZCBtYWluKCkge1xcblxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG59XCI7dGhpcy5mcmFnbWVudFNoYWRlcj1cInZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCAxLjAsIDAuMCwgMC4wLCAxLjAgKTtcXG59XCI7dGhpcy5saW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9dGhpcy5jbGlwcGluZz10aGlzLmxpZ2h0cz10aGlzLmZvZz0hMTt0aGlzLmV4dGVuc2lvbnM9e2Rlcml2YXRpdmVzOiExLGZyYWdEZXB0aDohMSxcbmRyYXdCdWZmZXJzOiExLHNoYWRlclRleHR1cmVMT0Q6ITF9O3RoaXMuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcz17Y29sb3I6WzEsMSwxXSx1djpbMCwwXSx1djI6WzAsMF19O3RoaXMuaW5kZXgwQXR0cmlidXRlTmFtZT12b2lkIDA7dm9pZCAwIT09YSYmKHZvaWQgMCE9PWEuYXR0cmlidXRlcyYmY29uc29sZS5lcnJvcihcIlRIUkVFLlNoYWRlck1hdGVyaWFsOiBhdHRyaWJ1dGVzIHNob3VsZCBub3cgYmUgZGVmaW5lZCBpbiBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLlwiKSx0aGlzLnNldFZhbHVlcyhhKSl9O1RIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNoYWRlck1hdGVyaWFsO1xuVEhSRUUuU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZnJhZ21lbnRTaGFkZXI9YS5mcmFnbWVudFNoYWRlcjt0aGlzLnZlcnRleFNoYWRlcj1hLnZlcnRleFNoYWRlcjt0aGlzLnVuaWZvcm1zPVRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUoYS51bmlmb3Jtcyk7dGhpcy5kZWZpbmVzPWEuZGVmaW5lczt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLmxpZ2h0cz1hLmxpZ2h0czt0aGlzLmNsaXBwaW5nPWEuY2xpcHBpbmc7dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3RoaXMubW9ycGhOb3JtYWxzPWEubW9ycGhOb3JtYWxzO3RoaXMuZXh0ZW5zaW9ucz1hLmV4dGVuc2lvbnM7cmV0dXJuIHRoaXN9O1xuVEhSRUUuU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihhKXthPVRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2EudW5pZm9ybXM9dGhpcy51bmlmb3JtczthLnZlcnRleFNoYWRlcj10aGlzLnZlcnRleFNoYWRlcjthLmZyYWdtZW50U2hhZGVyPXRoaXMuZnJhZ21lbnRTaGFkZXI7cmV0dXJuIGF9O1RIUkVFLlJhd1NoYWRlck1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLlNoYWRlck1hdGVyaWFsLmNhbGwodGhpcyxhKTt0aGlzLnR5cGU9XCJSYXdTaGFkZXJNYXRlcmlhbFwifTtUSFJFRS5SYXdTaGFkZXJNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLlJhd1NoYWRlck1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5SYXdTaGFkZXJNYXRlcmlhbDtcblRIUkVFLlNwcml0ZU1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU3ByaXRlTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5tYXA9bnVsbDt0aGlzLnJvdGF0aW9uPTA7dGhpcy5saWdodHM9dGhpcy5mb2c9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLlNwcml0ZU1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuU3ByaXRlTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNwcml0ZU1hdGVyaWFsO1RIUkVFLlNwcml0ZU1hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5tYXA9YS5tYXA7dGhpcy5yb3RhdGlvbj1hLnJvdGF0aW9uO3JldHVybiB0aGlzfTtcblRIUkVFLlNoYWRvd01hdGVyaWFsPWZ1bmN0aW9uKCl7VEhSRUUuU2hhZGVyTWF0ZXJpYWwuY2FsbCh0aGlzLHt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodHMse29wYWNpdHk6e3ZhbHVlOjF9fV0pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dfdmVydCxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dfZnJhZ30pO3RoaXMudHJhbnNwYXJlbnQ9dGhpcy5saWdodHM9ITA7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7b3BhY2l0eTp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bmlmb3Jtcy5vcGFjaXR5LnZhbHVlfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy51bmlmb3Jtcy5vcGFjaXR5LnZhbHVlPWF9fX0pfTtUSFJFRS5TaGFkb3dNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGUpO1xuVEhSRUUuU2hhZG93TWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNoYWRvd01hdGVyaWFsO1xuVEhSRUUuVGV4dHVyZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayxsKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOlRIUkVFLlRleHR1cmVJZENvdW50Kyt9KTt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLnNvdXJjZUZpbGU9dGhpcy5uYW1lPVwiXCI7dGhpcy5pbWFnZT12b2lkIDAhPT1hP2E6VEhSRUUuVGV4dHVyZS5ERUZBVUxUX0lNQUdFO3RoaXMubWlwbWFwcz1bXTt0aGlzLm1hcHBpbmc9dm9pZCAwIT09Yj9iOlRIUkVFLlRleHR1cmUuREVGQVVMVF9NQVBQSU5HO3RoaXMud3JhcFM9dm9pZCAwIT09Yz9jOlRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7dGhpcy53cmFwVD12b2lkIDAhPT1kP2Q6VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZzt0aGlzLm1hZ0ZpbHRlcj12b2lkIDAhPT1lP2U6VEhSRUUuTGluZWFyRmlsdGVyO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PWY/ZjpUSFJFRS5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXI7XG50aGlzLmFuaXNvdHJvcHk9dm9pZCAwIT09az9rOjE7dGhpcy5mb3JtYXQ9dm9pZCAwIT09Zz9nOlRIUkVFLlJHQkFGb3JtYXQ7dGhpcy50eXBlPXZvaWQgMCE9PWg/aDpUSFJFRS5VbnNpZ25lZEJ5dGVUeXBlO3RoaXMub2Zmc2V0PW5ldyBUSFJFRS5WZWN0b3IyKDAsMCk7dGhpcy5yZXBlYXQ9bmV3IFRIUkVFLlZlY3RvcjIoMSwxKTt0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMDt0aGlzLnByZW11bHRpcGx5QWxwaGE9ITE7dGhpcy5mbGlwWT0hMDt0aGlzLnVucGFja0FsaWdubWVudD00O3RoaXMuZW5jb2Rpbmc9dm9pZCAwIT09bD9sOlRIUkVFLkxpbmVhckVuY29kaW5nO3RoaXMudmVyc2lvbj0wO3RoaXMub25VcGRhdGU9bnVsbH07VEhSRUUuVGV4dHVyZS5ERUZBVUxUX0lNQUdFPXZvaWQgMDtUSFJFRS5UZXh0dXJlLkRFRkFVTFRfTUFQUElORz1USFJFRS5VVk1hcHBpbmc7XG5USFJFRS5UZXh0dXJlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVGV4dHVyZSxzZXQgbmVlZHNVcGRhdGUoYSl7ITA9PT1hJiZ0aGlzLnZlcnNpb24rK30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5pbWFnZT1hLmltYWdlO3RoaXMubWlwbWFwcz1hLm1pcG1hcHMuc2xpY2UoMCk7dGhpcy5tYXBwaW5nPWEubWFwcGluZzt0aGlzLndyYXBTPWEud3JhcFM7dGhpcy53cmFwVD1hLndyYXBUO3RoaXMubWFnRmlsdGVyPWEubWFnRmlsdGVyO3RoaXMubWluRmlsdGVyPWEubWluRmlsdGVyO3RoaXMuYW5pc290cm9weT1hLmFuaXNvdHJvcHk7dGhpcy5mb3JtYXQ9YS5mb3JtYXQ7dGhpcy50eXBlPWEudHlwZTt0aGlzLm9mZnNldC5jb3B5KGEub2Zmc2V0KTt0aGlzLnJlcGVhdC5jb3B5KGEucmVwZWF0KTt0aGlzLmdlbmVyYXRlTWlwbWFwcz1hLmdlbmVyYXRlTWlwbWFwczt0aGlzLnByZW11bHRpcGx5QWxwaGE9XG5hLnByZW11bHRpcGx5QWxwaGE7dGhpcy5mbGlwWT1hLmZsaXBZO3RoaXMudW5wYWNrQWxpZ25tZW50PWEudW5wYWNrQWxpZ25tZW50O3RoaXMuZW5jb2Rpbmc9YS5lbmNvZGluZztyZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKGEpe2lmKHZvaWQgMCE9PWEudGV4dHVyZXNbdGhpcy51dWlkXSlyZXR1cm4gYS50ZXh0dXJlc1t0aGlzLnV1aWRdO3ZhciBiPXttZXRhZGF0YTp7dmVyc2lvbjo0LjQsdHlwZTpcIlRleHR1cmVcIixnZW5lcmF0b3I6XCJUZXh0dXJlLnRvSlNPTlwifSx1dWlkOnRoaXMudXVpZCxuYW1lOnRoaXMubmFtZSxtYXBwaW5nOnRoaXMubWFwcGluZyxyZXBlYXQ6W3RoaXMucmVwZWF0LngsdGhpcy5yZXBlYXQueV0sb2Zmc2V0Olt0aGlzLm9mZnNldC54LHRoaXMub2Zmc2V0LnldLHdyYXA6W3RoaXMud3JhcFMsdGhpcy53cmFwVF0sbWluRmlsdGVyOnRoaXMubWluRmlsdGVyLG1hZ0ZpbHRlcjp0aGlzLm1hZ0ZpbHRlcixhbmlzb3Ryb3B5OnRoaXMuYW5pc290cm9weSxmbGlwWTp0aGlzLmZsaXBZfTtcbmlmKHZvaWQgMCE9PXRoaXMuaW1hZ2Upe3ZhciBjPXRoaXMuaW1hZ2U7dm9pZCAwPT09Yy51dWlkJiYoYy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCkpO2lmKHZvaWQgMD09PWEuaW1hZ2VzW2MudXVpZF0pe3ZhciBkPWEuaW1hZ2VzLGU9Yy51dWlkLGY9Yy51dWlkLGc7dm9pZCAwIT09Yy50b0RhdGFVUkw/Zz1jOihnPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImNhbnZhc1wiKSxnLndpZHRoPWMud2lkdGgsZy5oZWlnaHQ9Yy5oZWlnaHQsZy5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKGMsMCwwLGMud2lkdGgsYy5oZWlnaHQpKTtnPTIwNDg8Zy53aWR0aHx8MjA0ODxnLmhlaWdodD9nLnRvRGF0YVVSTChcImltYWdlL2pwZWdcIiwuNik6Zy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7ZFtlXT17dXVpZDpmLHVybDpnfX1iLmltYWdlPWMudXVpZH1yZXR1cm4gYS50ZXh0dXJlc1t0aGlzLnV1aWRdPWJ9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX0sXG50cmFuc2Zvcm1VdjpmdW5jdGlvbihhKXtpZih0aGlzLm1hcHBpbmc9PT1USFJFRS5VVk1hcHBpbmcpe2EubXVsdGlwbHkodGhpcy5yZXBlYXQpO2EuYWRkKHRoaXMub2Zmc2V0KTtpZigwPmEueHx8MTxhLngpc3dpdGNoKHRoaXMud3JhcFMpe2Nhc2UgVEhSRUUuUmVwZWF0V3JhcHBpbmc6YS54LT1NYXRoLmZsb29yKGEueCk7YnJlYWs7Y2FzZSBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nOmEueD0wPmEueD8wOjE7YnJlYWs7Y2FzZSBUSFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nOjE9PT1NYXRoLmFicyhNYXRoLmZsb29yKGEueCklMik/YS54PU1hdGguY2VpbChhLngpLWEueDphLngtPU1hdGguZmxvb3IoYS54KX1pZigwPmEueXx8MTxhLnkpc3dpdGNoKHRoaXMud3JhcFQpe2Nhc2UgVEhSRUUuUmVwZWF0V3JhcHBpbmc6YS55LT1NYXRoLmZsb29yKGEueSk7YnJlYWs7Y2FzZSBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nOmEueT0wPmEueT8wOjE7YnJlYWs7Y2FzZSBUSFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nOjE9PT1cbk1hdGguYWJzKE1hdGguZmxvb3IoYS55KSUyKT9hLnk9TWF0aC5jZWlsKGEueSktYS55OmEueS09TWF0aC5mbG9vcihhLnkpfXRoaXMuZmxpcFkmJihhLnk9MS1hLnkpfX19O09iamVjdC5hc3NpZ24oVEhSRUUuVGV4dHVyZS5wcm90b3R5cGUsVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSk7VEhSRUUuVGV4dHVyZUlkQ291bnQ9MDtcblRIUkVFLkRlcHRoVGV4dHVyZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayl7VEhSRUUuVGV4dHVyZS5jYWxsKHRoaXMsbnVsbCxkLGUsZixnLGgsVEhSRUUuRGVwdGhGb3JtYXQsYyxrKTt0aGlzLmltYWdlPXt3aWR0aDphLGhlaWdodDpifTt0aGlzLnR5cGU9dm9pZCAwIT09Yz9jOlRIUkVFLlVuc2lnbmVkU2hvcnRUeXBlO3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWc/ZzpUSFJFRS5OZWFyZXN0RmlsdGVyO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PWg/aDpUSFJFRS5OZWFyZXN0RmlsdGVyO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPXRoaXMuZmxpcFk9ITF9O1RIUkVFLkRlcHRoVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuRGVwdGhUZXh0dXJlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5EZXB0aFRleHR1cmU7XG5USFJFRS5DYW52YXNUZXh0dXJlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXtUSFJFRS5UZXh0dXJlLmNhbGwodGhpcyxhLGIsYyxkLGUsZixnLGgsayk7dGhpcy5uZWVkc1VwZGF0ZT0hMH07VEhSRUUuQ2FudmFzVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuQ2FudmFzVGV4dHVyZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ2FudmFzVGV4dHVyZTtUSFJFRS5DdWJlVGV4dHVyZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayxsKXthPXZvaWQgMCE9PWE/YTpbXTtiPXZvaWQgMCE9PWI/YjpUSFJFRS5DdWJlUmVmbGVjdGlvbk1hcHBpbmc7VEhSRUUuVGV4dHVyZS5jYWxsKHRoaXMsYSxiLGMsZCxlLGYsZyxoLGssbCk7dGhpcy5mbGlwWT0hMX07VEhSRUUuQ3ViZVRleHR1cmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuVGV4dHVyZS5wcm90b3R5cGUpO1xuVEhSRUUuQ3ViZVRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkN1YmVUZXh0dXJlO09iamVjdC5kZWZpbmVQcm9wZXJ0eShUSFJFRS5DdWJlVGV4dHVyZS5wcm90b3R5cGUsXCJpbWFnZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1hZ2V9LHNldDpmdW5jdGlvbihhKXt0aGlzLmltYWdlPWF9fSk7VEhSRUUuQ29tcHJlc3NlZFRleHR1cmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGssbCxtLHApe1RIUkVFLlRleHR1cmUuY2FsbCh0aGlzLG51bGwsZixnLGgsayxsLGQsZSxtLHApO3RoaXMuaW1hZ2U9e3dpZHRoOmIsaGVpZ2h0OmN9O3RoaXMubWlwbWFwcz1hO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPXRoaXMuZmxpcFk9ITF9O1RIUkVFLkNvbXByZXNzZWRUZXh0dXJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlRleHR1cmUucHJvdG90eXBlKTtUSFJFRS5Db21wcmVzc2VkVGV4dHVyZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ29tcHJlc3NlZFRleHR1cmU7XG5USFJFRS5EYXRhVGV4dHVyZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayxsLG0scCl7VEhSRUUuVGV4dHVyZS5jYWxsKHRoaXMsbnVsbCxmLGcsaCxrLGwsZCxlLG0scCk7dGhpcy5pbWFnZT17ZGF0YTphLHdpZHRoOmIsaGVpZ2h0OmN9O3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWs/azpUSFJFRS5OZWFyZXN0RmlsdGVyO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PWw/bDpUSFJFRS5OZWFyZXN0RmlsdGVyO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPXRoaXMuZmxpcFk9ITF9O1RIUkVFLkRhdGFUZXh0dXJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlRleHR1cmUucHJvdG90eXBlKTtUSFJFRS5EYXRhVGV4dHVyZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuRGF0YVRleHR1cmU7XG5USFJFRS5WaWRlb1RleHR1cmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGspe2Z1bmN0aW9uIGwoKXtyZXF1ZXN0QW5pbWF0aW9uRnJhbWUobCk7YS5yZWFkeVN0YXRlPj1hLkhBVkVfQ1VSUkVOVF9EQVRBJiYobS5uZWVkc1VwZGF0ZT0hMCl9VEhSRUUuVGV4dHVyZS5jYWxsKHRoaXMsYSxiLGMsZCxlLGYsZyxoLGspO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPSExO3ZhciBtPXRoaXM7bCgpfTtUSFJFRS5WaWRlb1RleHR1cmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuVGV4dHVyZS5wcm90b3R5cGUpO1RIUkVFLlZpZGVvVGV4dHVyZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuVmlkZW9UZXh0dXJlO1RIUkVFLkdyb3VwPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJHcm91cFwifTtUSFJFRS5Hcm91cC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkdyb3VwfSk7XG5USFJFRS5Qb2ludHM9ZnVuY3Rpb24oYSxiKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBvaW50c1wiO3RoaXMuZ2VvbWV0cnk9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeTt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KX07XG5USFJFRS5Qb2ludHMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5Qb2ludHMscmF5Y2FzdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0LGI9bmV3IFRIUkVFLlJheSxjPW5ldyBUSFJFRS5TcGhlcmU7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7ZnVuY3Rpb24gZihhLGMpe3ZhciBmPWIuZGlzdGFuY2VTcVRvUG9pbnQoYSk7aWYoZjxtKXt2YXIgaD1iLmNsb3Nlc3RQb2ludFRvUG9pbnQoYSk7aC5hcHBseU1hdHJpeDQoayk7dmFyIGw9ZC5yYXkub3JpZ2luLmRpc3RhbmNlVG8oaCk7bDxkLm5lYXJ8fGw+ZC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6bCxkaXN0YW5jZVRvUmF5Ok1hdGguc3FydChmKSxwb2ludDpoLmNsb25lKCksaW5kZXg6YyxmYWNlOm51bGwsb2JqZWN0Omd9KX19dmFyIGc9dGhpcyxoPXRoaXMuZ2VvbWV0cnksaz10aGlzLm1hdHJpeFdvcmxkLGw9ZC5wYXJhbXMuUG9pbnRzLnRocmVzaG9sZDtcbm51bGw9PT1oLmJvdW5kaW5nU3BoZXJlJiZoLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO2MuY29weShoLmJvdW5kaW5nU3BoZXJlKTtjLmFwcGx5TWF0cml4NChrKTtpZighMSE9PWQucmF5LmludGVyc2VjdHNTcGhlcmUoYykpe2EuZ2V0SW52ZXJzZShrKTtiLmNvcHkoZC5yYXkpLmFwcGx5TWF0cml4NChhKTt2YXIgbD1sLygodGhpcy5zY2FsZS54K3RoaXMuc2NhbGUueSt0aGlzLnNjYWxlLnopLzMpLG09bCpsLGw9bmV3IFRIUkVFLlZlY3RvcjM7aWYoaCBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXt2YXIgcD1oLmluZGV4LGg9aC5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2lmKG51bGwhPT1wKWZvcih2YXIgbj1wLmFycmF5LHA9MCxxPW4ubGVuZ3RoO3A8cTtwKyspe3ZhciByPW5bcF07bC5mcm9tQXJyYXkoaCwzKnIpO2YobCxyKX1lbHNlIGZvcihwPTAsbj1oLmxlbmd0aC8zO3A8bjtwKyspbC5mcm9tQXJyYXkoaCwzKnApLGYobCxwKX1lbHNlIGZvcihsPWgudmVydGljZXMsXG5wPTAsbj1sLmxlbmd0aDtwPG47cCsrKWYobFtwXSxwKX19fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkpLmNvcHkodGhpcyl9fSk7VEhSRUUuTGluZT1mdW5jdGlvbihhLGIsYyl7aWYoMT09PWMpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkxpbmU6IHBhcmFtZXRlciBUSFJFRS5MaW5lUGllY2VzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIENyZWF0ZWQgVEhSRUUuTGluZVNlZ21lbnRzIGluc3RlYWQuXCIpLG5ldyBUSFJFRS5MaW5lU2VnbWVudHMoYSxiKTtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpbmVcIjt0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnk7dGhpcy5tYXRlcmlhbD12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjoxNjc3NzIxNSpNYXRoLnJhbmRvbSgpfSl9O1xuVEhSRUUuTGluZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkxpbmUscmF5Y2FzdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0LGI9bmV3IFRIUkVFLlJheSxjPW5ldyBUSFJFRS5TcGhlcmU7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7dmFyIGY9ZC5saW5lUHJlY2lzaW9uLGY9ZipmLGc9dGhpcy5nZW9tZXRyeSxoPXRoaXMubWF0cml4V29ybGQ7bnVsbD09PWcuYm91bmRpbmdTcGhlcmUmJmcuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7Yy5jb3B5KGcuYm91bmRpbmdTcGhlcmUpO2MuYXBwbHlNYXRyaXg0KGgpO2lmKCExIT09ZC5yYXkuaW50ZXJzZWN0c1NwaGVyZShjKSl7YS5nZXRJbnZlcnNlKGgpO2IuY29weShkLnJheSkuYXBwbHlNYXRyaXg0KGEpO3ZhciBrPW5ldyBUSFJFRS5WZWN0b3IzLGw9bmV3IFRIUkVFLlZlY3RvcjMsaD1uZXcgVEhSRUUuVmVjdG9yMyxtPVxubmV3IFRIUkVFLlZlY3RvcjMscD10aGlzIGluc3RhbmNlb2YgVEhSRUUuTGluZVNlZ21lbnRzPzI6MTtpZihnIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkpe3ZhciBuPWcuaW5kZXgscT1nLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7aWYobnVsbCE9PW4pZm9yKHZhciBuPW4uYXJyYXksZz0wLHI9bi5sZW5ndGgtMTtnPHI7Zys9cCl7dmFyIHM9bltnKzFdO2suZnJvbUFycmF5KHEsMypuW2ddKTtsLmZyb21BcnJheShxLDMqcyk7cz1iLmRpc3RhbmNlU3FUb1NlZ21lbnQoayxsLG0saCk7cz5mfHwobS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCkscz1kLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhtKSxzPGQubmVhcnx8cz5kLmZhcnx8ZS5wdXNoKHtkaXN0YW5jZTpzLHBvaW50OmguY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksaW5kZXg6ZyxmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OnRoaXN9KSl9ZWxzZSBmb3IoZz0wLHI9XG5xLmxlbmd0aC8zLTE7ZzxyO2crPXApay5mcm9tQXJyYXkocSwzKmcpLGwuZnJvbUFycmF5KHEsMypnKzMpLHM9Yi5kaXN0YW5jZVNxVG9TZWdtZW50KGssbCxtLGgpLHM+Znx8KG0uYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLHM9ZC5yYXkub3JpZ2luLmRpc3RhbmNlVG8obSksczxkLm5lYXJ8fHM+ZC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6cyxwb2ludDpoLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4OmcsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSkpfWVsc2UgaWYoZyBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KWZvcihrPWcudmVydGljZXMsbD1rLmxlbmd0aCxnPTA7ZzxsLTE7Zys9cClzPWIuZGlzdGFuY2VTcVRvU2VnbWVudChrW2ddLGtbZysxXSxtLGgpLHM+Znx8KG0uYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLHM9ZC5yYXkub3JpZ2luLmRpc3RhbmNlVG8obSksczxkLm5lYXJ8fHM+ZC5mYXJ8fFxuZS5wdXNoKHtkaXN0YW5jZTpzLHBvaW50OmguY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksaW5kZXg6ZyxmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OnRoaXN9KSl9fX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpKS5jb3B5KHRoaXMpfX0pO1RIUkVFLkxpbmVTZWdtZW50cz1mdW5jdGlvbihhLGIpe1RIUkVFLkxpbmUuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiTGluZVNlZ21lbnRzXCJ9O1RIUkVFLkxpbmVTZWdtZW50cy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkxpbmUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuTGluZVNlZ21lbnRzfSk7XG5USFJFRS5NZXNoPWZ1bmN0aW9uKGEsYil7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoXCI7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6MTY3NzcyMTUqTWF0aC5yYW5kb20oKX0pO3RoaXMuZHJhd01vZGU9VEhSRUUuVHJpYW5nbGVzRHJhd01vZGU7dGhpcy51cGRhdGVNb3JwaFRhcmdldHMoKX07XG5USFJFRS5NZXNoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuTWVzaCxzZXREcmF3TW9kZTpmdW5jdGlvbihhKXt0aGlzLmRyYXdNb2RlPWF9LGNvcHk6ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZHJhd01vZGU9YS5kcmF3TW9kZTtyZXR1cm4gdGhpc30sdXBkYXRlTW9ycGhUYXJnZXRzOmZ1bmN0aW9uKCl7aWYodm9pZCAwIT09dGhpcy5nZW9tZXRyeS5tb3JwaFRhcmdldHMmJjA8dGhpcy5nZW9tZXRyeS5tb3JwaFRhcmdldHMubGVuZ3RoKXt0aGlzLm1vcnBoVGFyZ2V0QmFzZT0tMTt0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXTt0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fTtmb3IodmFyIGE9MCxiPXRoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aDthPGI7YSsrKXRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnB1c2goMCksXG50aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVt0aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0c1thXS5uYW1lXT1hfX0sZ2V0TW9ycGhUYXJnZXRJbmRleEJ5TmFtZTpmdW5jdGlvbihhKXtpZih2b2lkIDAhPT10aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVthXSlyZXR1cm4gdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbYV07Y29uc29sZS53YXJuKFwiVEhSRUUuTWVzaC5nZXRNb3JwaFRhcmdldEluZGV4QnlOYW1lOiBtb3JwaCB0YXJnZXQgXCIrYStcIiBkb2VzIG5vdCBleGlzdC4gUmV0dXJuaW5nIDAuXCIpO3JldHVybiAwfSxyYXljYXN0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyxkLGUsZyxmKXtUSFJFRS5UcmlhbmdsZS5iYXJ5Y29vcmRGcm9tUG9pbnQoYSxiLGMsZCxzKTtlLm11bHRpcGx5U2NhbGFyKHMueCk7Zy5tdWx0aXBseVNjYWxhcihzLnkpO2YubXVsdGlwbHlTY2FsYXIocy56KTtlLmFkZChnKS5hZGQoZik7cmV0dXJuIGUuY2xvbmUoKX1mdW5jdGlvbiBiKGEsYixjLFxuZCxlLGcsZil7dmFyIGg9YS5tYXRlcmlhbDtpZihudWxsPT09KGguc2lkZT09PVRIUkVFLkJhY2tTaWRlP2MuaW50ZXJzZWN0VHJpYW5nbGUoZyxlLGQsITAsZik6Yy5pbnRlcnNlY3RUcmlhbmdsZShkLGUsZyxoLnNpZGUhPT1USFJFRS5Eb3VibGVTaWRlLGYpKSlyZXR1cm4gbnVsbDt0LmNvcHkoZik7dC5hcHBseU1hdHJpeDQoYS5tYXRyaXhXb3JsZCk7Yz1iLnJheS5vcmlnaW4uZGlzdGFuY2VUbyh0KTtyZXR1cm4gYzxiLm5lYXJ8fGM+Yi5mYXI/bnVsbDp7ZGlzdGFuY2U6Yyxwb2ludDp0LmNsb25lKCksb2JqZWN0OmF9fWZ1bmN0aW9uIGMoYyxkLGUsZixsLHAsbSxzKXtnLmZyb21BcnJheShmLDMqcCk7aC5mcm9tQXJyYXkoZiwzKm0pO2suZnJvbUFycmF5KGYsMypzKTtpZihjPWIoYyxkLGUsZyxoLGssdikpbCYmKG4uZnJvbUFycmF5KGwsMipwKSxxLmZyb21BcnJheShsLDIqbSksci5mcm9tQXJyYXkobCwyKnMpLGMudXY9YSh2LGcsaCxrLG4scSxyKSksYy5mYWNlPW5ldyBUSFJFRS5GYWNlMyhwLFxubSxzLFRIUkVFLlRyaWFuZ2xlLm5vcm1hbChnLGgsaykpLGMuZmFjZUluZGV4PXA7cmV0dXJuIGN9dmFyIGQ9bmV3IFRIUkVFLk1hdHJpeDQsZT1uZXcgVEhSRUUuUmF5LGY9bmV3IFRIUkVFLlNwaGVyZSxnPW5ldyBUSFJFRS5WZWN0b3IzLGg9bmV3IFRIUkVFLlZlY3RvcjMsaz1uZXcgVEhSRUUuVmVjdG9yMyxsPW5ldyBUSFJFRS5WZWN0b3IzLG09bmV3IFRIUkVFLlZlY3RvcjMscD1uZXcgVEhSRUUuVmVjdG9yMyxuPW5ldyBUSFJFRS5WZWN0b3IyLHE9bmV3IFRIUkVFLlZlY3RvcjIscj1uZXcgVEhSRUUuVmVjdG9yMixzPW5ldyBUSFJFRS5WZWN0b3IzLHY9bmV3IFRIUkVFLlZlY3RvcjMsdD1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24odSxzKXt2YXIgdz10aGlzLmdlb21ldHJ5LHQ9dGhpcy5tYXRlcmlhbCx6PXRoaXMubWF0cml4V29ybGQ7aWYodm9pZCAwIT09dCYmKG51bGw9PT13LmJvdW5kaW5nU3BoZXJlJiZ3LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLGYuY29weSh3LmJvdW5kaW5nU3BoZXJlKSxcbmYuYXBwbHlNYXRyaXg0KHopLCExIT09dS5yYXkuaW50ZXJzZWN0c1NwaGVyZShmKSYmKGQuZ2V0SW52ZXJzZSh6KSxlLmNvcHkodS5yYXkpLmFwcGx5TWF0cml4NChkKSxudWxsPT09dy5ib3VuZGluZ0JveHx8ITEhPT1lLmludGVyc2VjdHNCb3gody5ib3VuZGluZ0JveCkpKSl7dmFyIHksQTtpZih3IGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkpe3ZhciBHLEIsdD13LmluZGV4LHo9dy5hdHRyaWJ1dGVzLHc9ei5wb3NpdGlvbi5hcnJheTt2b2lkIDAhPT16LnV2JiYoeT16LnV2LmFycmF5KTtpZihudWxsIT09dClmb3IodmFyIHo9dC5hcnJheSxGPTAsSj16Lmxlbmd0aDtGPEo7Ris9Myl7aWYodD16W0ZdLEc9eltGKzFdLEI9eltGKzJdLEE9Yyh0aGlzLHUsZSx3LHksdCxHLEIpKUEuZmFjZUluZGV4PU1hdGguZmxvb3IoRi8zKSxzLnB1c2goQSl9ZWxzZSBmb3IoRj0wLEo9dy5sZW5ndGg7RjxKO0YrPTkpaWYodD1GLzMsRz10KzEsQj10KzIsQT1jKHRoaXMsdSxlLHcseSxcbnQsRyxCKSlBLmluZGV4PXQscy5wdXNoKEEpfWVsc2UgaWYodyBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KXt2YXIgUCxLLHo9dCBpbnN0YW5jZW9mIFRIUkVFLk11bHRpTWF0ZXJpYWwsRj0hMD09PXo/dC5tYXRlcmlhbHM6bnVsbCxKPXcudmVydGljZXM7Rz13LmZhY2VzO0I9dy5mYWNlVmVydGV4VXZzWzBdOzA8Qi5sZW5ndGgmJih5PUIpO2Zvcih2YXIgSD0wLE09Ry5sZW5ndGg7SDxNO0grKyl7dmFyIE89R1tIXTtBPSEwPT09ej9GW08ubWF0ZXJpYWxJbmRleF06dDtpZih2b2lkIDAhPT1BKXtCPUpbTy5hXTtQPUpbTy5iXTtLPUpbTy5jXTtpZighMD09PUEubW9ycGhUYXJnZXRzKXtBPXcubW9ycGhUYXJnZXRzO3ZhciBOPXRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzO2cuc2V0KDAsMCwwKTtoLnNldCgwLDAsMCk7ay5zZXQoMCwwLDApO2Zvcih2YXIgUT0wLEM9QS5sZW5ndGg7UTxDO1ErKyl7dmFyIEw9TltRXTtpZigwIT09TCl7dmFyIEU9QVtRXS52ZXJ0aWNlcztnLmFkZFNjYWxlZFZlY3RvcihsLnN1YlZlY3RvcnMoRVtPLmFdLFxuQiksTCk7aC5hZGRTY2FsZWRWZWN0b3IobS5zdWJWZWN0b3JzKEVbTy5iXSxQKSxMKTtrLmFkZFNjYWxlZFZlY3RvcihwLnN1YlZlY3RvcnMoRVtPLmNdLEspLEwpfX1nLmFkZChCKTtoLmFkZChQKTtrLmFkZChLKTtCPWc7UD1oO0s9a31pZihBPWIodGhpcyx1LGUsQixQLEssdikpeSYmKE49eVtIXSxuLmNvcHkoTlswXSkscS5jb3B5KE5bMV0pLHIuY29weShOWzJdKSxBLnV2PWEodixCLFAsSyxuLHEscikpLEEuZmFjZT1PLEEuZmFjZUluZGV4PUgscy5wdXNoKEEpfX19fX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKSkuY29weSh0aGlzKX19KTtUSFJFRS5Cb25lPWZ1bmN0aW9uKGEpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQm9uZVwiO3RoaXMuc2tpbj1hfTtcblRIUkVFLkJvbmUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5Cb25lLGNvcHk6ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuc2tpbj1hLnNraW47cmV0dXJuIHRoaXN9fSk7XG5USFJFRS5Ta2VsZXRvbj1mdW5jdGlvbihhLGIsYyl7dGhpcy51c2VWZXJ0ZXhUZXh0dXJlPXZvaWQgMCE9PWM/YzohMDt0aGlzLmlkZW50aXR5TWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0O2E9YXx8W107dGhpcy5ib25lcz1hLnNsaWNlKDApO3RoaXMudXNlVmVydGV4VGV4dHVyZT8oYT1NYXRoLnNxcnQoNCp0aGlzLmJvbmVzLmxlbmd0aCksYT1USFJFRS5NYXRoLm5leHRQb3dlck9mVHdvKE1hdGguY2VpbChhKSksdGhpcy5ib25lVGV4dHVyZUhlaWdodD10aGlzLmJvbmVUZXh0dXJlV2lkdGg9YT1NYXRoLm1heChhLDQpLHRoaXMuYm9uZU1hdHJpY2VzPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5ib25lVGV4dHVyZVdpZHRoKnRoaXMuYm9uZVRleHR1cmVIZWlnaHQqNCksdGhpcy5ib25lVGV4dHVyZT1uZXcgVEhSRUUuRGF0YVRleHR1cmUodGhpcy5ib25lTWF0cmljZXMsdGhpcy5ib25lVGV4dHVyZVdpZHRoLHRoaXMuYm9uZVRleHR1cmVIZWlnaHQsVEhSRUUuUkdCQUZvcm1hdCxUSFJFRS5GbG9hdFR5cGUpKTpcbnRoaXMuYm9uZU1hdHJpY2VzPW5ldyBGbG9hdDMyQXJyYXkoMTYqdGhpcy5ib25lcy5sZW5ndGgpO2lmKHZvaWQgMD09PWIpdGhpcy5jYWxjdWxhdGVJbnZlcnNlcygpO2Vsc2UgaWYodGhpcy5ib25lcy5sZW5ndGg9PT1iLmxlbmd0aCl0aGlzLmJvbmVJbnZlcnNlcz1iLnNsaWNlKDApO2Vsc2UgZm9yKGNvbnNvbGUud2FybihcIlRIUkVFLlNrZWxldG9uIGJvbkludmVyc2VzIGlzIHRoZSB3cm9uZyBsZW5ndGguXCIpLHRoaXMuYm9uZUludmVyc2VzPVtdLGI9MCxhPXRoaXMuYm9uZXMubGVuZ3RoO2I8YTtiKyspdGhpcy5ib25lSW52ZXJzZXMucHVzaChuZXcgVEhSRUUuTWF0cml4NCl9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5Ta2VsZXRvbi5wcm90b3R5cGUse2NhbGN1bGF0ZUludmVyc2VzOmZ1bmN0aW9uKCl7dGhpcy5ib25lSW52ZXJzZXM9W107Zm9yKHZhciBhPTAsYj10aGlzLmJvbmVzLmxlbmd0aDthPGI7YSsrKXt2YXIgYz1uZXcgVEhSRUUuTWF0cml4NDt0aGlzLmJvbmVzW2FdJiZjLmdldEludmVyc2UodGhpcy5ib25lc1thXS5tYXRyaXhXb3JsZCk7dGhpcy5ib25lSW52ZXJzZXMucHVzaChjKX19LHBvc2U6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wLGM9dGhpcy5ib25lcy5sZW5ndGg7YjxjO2IrKykoYT10aGlzLmJvbmVzW2JdKSYmYS5tYXRyaXhXb3JsZC5nZXRJbnZlcnNlKHRoaXMuYm9uZUludmVyc2VzW2JdKTtiPTA7Zm9yKGM9dGhpcy5ib25lcy5sZW5ndGg7YjxjO2IrKylpZihhPXRoaXMuYm9uZXNbYl0pYS5wYXJlbnQgaW5zdGFuY2VvZiBUSFJFRS5Cb25lPyhhLm1hdHJpeC5nZXRJbnZlcnNlKGEucGFyZW50Lm1hdHJpeFdvcmxkKSxhLm1hdHJpeC5tdWx0aXBseShhLm1hdHJpeFdvcmxkKSk6XG5hLm1hdHJpeC5jb3B5KGEubWF0cml4V29ybGQpLGEubWF0cml4LmRlY29tcG9zZShhLnBvc2l0aW9uLGEucXVhdGVybmlvbixhLnNjYWxlKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLk1hdHJpeDQ7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYz10aGlzLmJvbmVzLmxlbmd0aDtiPGM7YisrKWEubXVsdGlwbHlNYXRyaWNlcyh0aGlzLmJvbmVzW2JdP3RoaXMuYm9uZXNbYl0ubWF0cml4V29ybGQ6dGhpcy5pZGVudGl0eU1hdHJpeCx0aGlzLmJvbmVJbnZlcnNlc1tiXSksYS50b0FycmF5KHRoaXMuYm9uZU1hdHJpY2VzLDE2KmIpO3RoaXMudXNlVmVydGV4VGV4dHVyZSYmKHRoaXMuYm9uZVRleHR1cmUubmVlZHNVcGRhdGU9ITApfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgVEhSRUUuU2tlbGV0b24odGhpcy5ib25lcyx0aGlzLmJvbmVJbnZlcnNlcyx0aGlzLnVzZVZlcnRleFRleHR1cmUpfX0pO1xuVEhSRUUuU2tpbm5lZE1lc2g9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLk1lc2guY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiU2tpbm5lZE1lc2hcIjt0aGlzLmJpbmRNb2RlPVwiYXR0YWNoZWRcIjt0aGlzLmJpbmRNYXRyaXg9bmV3IFRIUkVFLk1hdHJpeDQ7dGhpcy5iaW5kTWF0cml4SW52ZXJzZT1uZXcgVEhSRUUuTWF0cml4NDthPVtdO2lmKHRoaXMuZ2VvbWV0cnkmJnZvaWQgMCE9PXRoaXMuZ2VvbWV0cnkuYm9uZXMpe2Zvcih2YXIgZCxlPTAsZj10aGlzLmdlb21ldHJ5LmJvbmVzLmxlbmd0aDtlPGY7KytlKWQ9dGhpcy5nZW9tZXRyeS5ib25lc1tlXSxiPW5ldyBUSFJFRS5Cb25lKHRoaXMpLGEucHVzaChiKSxiLm5hbWU9ZC5uYW1lLGIucG9zaXRpb24uZnJvbUFycmF5KGQucG9zKSxiLnF1YXRlcm5pb24uZnJvbUFycmF5KGQucm90cSksdm9pZCAwIT09ZC5zY2wmJmIuc2NhbGUuZnJvbUFycmF5KGQuc2NsKTtlPTA7Zm9yKGY9dGhpcy5nZW9tZXRyeS5ib25lcy5sZW5ndGg7ZTxmOysrZSlkPVxudGhpcy5nZW9tZXRyeS5ib25lc1tlXSwtMSE9PWQucGFyZW50JiZudWxsIT09ZC5wYXJlbnQmJnZvaWQgMCE9PWFbZC5wYXJlbnRdP2FbZC5wYXJlbnRdLmFkZChhW2VdKTp0aGlzLmFkZChhW2VdKX10aGlzLm5vcm1hbGl6ZVNraW5XZWlnaHRzKCk7dGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5iaW5kKG5ldyBUSFJFRS5Ta2VsZXRvbihhLHZvaWQgMCxjKSx0aGlzLm1hdHJpeFdvcmxkKX07XG5USFJFRS5Ta2lubmVkTWVzaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk1lc2gucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuU2tpbm5lZE1lc2gsYmluZDpmdW5jdGlvbihhLGIpe3RoaXMuc2tlbGV0b249YTt2b2lkIDA9PT1iJiYodGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCksdGhpcy5za2VsZXRvbi5jYWxjdWxhdGVJbnZlcnNlcygpLGI9dGhpcy5tYXRyaXhXb3JsZCk7dGhpcy5iaW5kTWF0cml4LmNvcHkoYik7dGhpcy5iaW5kTWF0cml4SW52ZXJzZS5nZXRJbnZlcnNlKGIpfSxwb3NlOmZ1bmN0aW9uKCl7dGhpcy5za2VsZXRvbi5wb3NlKCl9LG5vcm1hbGl6ZVNraW5XZWlnaHRzOmZ1bmN0aW9uKCl7aWYodGhpcy5nZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KWZvcih2YXIgYT0wO2E8dGhpcy5nZW9tZXRyeS5za2luV2VpZ2h0cy5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLmdlb21ldHJ5LnNraW5XZWlnaHRzW2FdLGM9XG4xL2IubGVuZ3RoTWFuaGF0dGFuKCk7SW5maW5pdHkhPT1jP2IubXVsdGlwbHlTY2FsYXIoYyk6Yi5zZXQoMSwwLDAsMCl9ZWxzZSBpZih0aGlzLmdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkpZm9yKHZhciBiPW5ldyBUSFJFRS5WZWN0b3I0LGQ9dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnNraW5XZWlnaHQsYT0wO2E8ZC5jb3VudDthKyspYi54PWQuZ2V0WChhKSxiLnk9ZC5nZXRZKGEpLGIuej1kLmdldFooYSksYi53PWQuZ2V0VyhhKSxjPTEvYi5sZW5ndGhNYW5oYXR0YW4oKSxJbmZpbml0eSE9PWM/Yi5tdWx0aXBseVNjYWxhcihjKTpiLnNldCgxLDAsMCwwKSxkLnNldFhZWlcoYSxiLngsYi55LGIueixiLncpfSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbihhKXtUSFJFRS5NZXNoLnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsITApO1wiYXR0YWNoZWRcIj09PXRoaXMuYmluZE1vZGU/dGhpcy5iaW5kTWF0cml4SW52ZXJzZS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpOlxuXCJkZXRhY2hlZFwiPT09dGhpcy5iaW5kTW9kZT90aGlzLmJpbmRNYXRyaXhJbnZlcnNlLmdldEludmVyc2UodGhpcy5iaW5kTWF0cml4KTpjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2lubmVkTWVzaCB1bnJlY29nbml6ZWQgYmluZE1vZGU6IFwiK3RoaXMuYmluZE1vZGUpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwsdGhpcy5za2VsZXRvbi51c2VWZXJ0ZXhUZXh0dXJlKSkuY29weSh0aGlzKX19KTtUSFJFRS5MT0Q9ZnVuY3Rpb24oKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxPRFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse2xldmVsczp7ZW51bWVyYWJsZTohMCx2YWx1ZTpbXX19KX07XG5USFJFRS5MT0QucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5MT0QsY29weTpmdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSwhMSk7YT1hLmxldmVscztmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFbYl07dGhpcy5hZGRMZXZlbChkLm9iamVjdC5jbG9uZSgpLGQuZGlzdGFuY2UpfXJldHVybiB0aGlzfSxhZGRMZXZlbDpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO2I9TWF0aC5hYnMoYik7Zm9yKHZhciBjPXRoaXMubGV2ZWxzLGQ9MDtkPGMubGVuZ3RoJiYhKGI8Y1tkXS5kaXN0YW5jZSk7ZCsrKTtjLnNwbGljZShkLDAse2Rpc3RhbmNlOmIsb2JqZWN0OmF9KTt0aGlzLmFkZChhKX0sZ2V0T2JqZWN0Rm9yRGlzdGFuY2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMubGV2ZWxzLGM9MSxkPWIubGVuZ3RoO2M8XG5kJiYhKGE8YltjXS5kaXN0YW5jZSk7YysrKTtyZXR1cm4gYltjLTFdLm9iamVjdH0scmF5Y2FzdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMpe2Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO3ZhciBkPWIucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGEpO3RoaXMuZ2V0T2JqZWN0Rm9yRGlzdGFuY2UoZCkucmF5Y2FzdChiLGMpfX0oKSx1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD10aGlzLmxldmVscztpZigxPGQubGVuZ3RoKXthLnNldEZyb21NYXRyaXhQb3NpdGlvbihjLm1hdHJpeFdvcmxkKTtiLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTtjPWEuZGlzdGFuY2VUbyhiKTtkWzBdLm9iamVjdC52aXNpYmxlPSEwO2Zvcih2YXIgZT0xLGY9ZC5sZW5ndGg7ZTxmO2UrKylpZihjPj1cbmRbZV0uZGlzdGFuY2UpZFtlLTFdLm9iamVjdC52aXNpYmxlPSExLGRbZV0ub2JqZWN0LnZpc2libGU9ITA7ZWxzZSBicmVhaztmb3IoO2U8ZjtlKyspZFtlXS5vYmplY3QudmlzaWJsZT0hMX19fSgpLHRvSlNPTjpmdW5jdGlvbihhKXthPVRIUkVFLk9iamVjdDNELnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2Eub2JqZWN0LmxldmVscz1bXTtmb3IodmFyIGI9dGhpcy5sZXZlbHMsYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YltjXTthLm9iamVjdC5sZXZlbHMucHVzaCh7b2JqZWN0OmUub2JqZWN0LnV1aWQsZGlzdGFuY2U6ZS5kaXN0YW5jZX0pfXJldHVybiBhfX0pO1RIUkVFLlNwcml0ZT1mdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNwcml0ZVwiO3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5TcHJpdGVNYXRlcmlhbH07XG5USFJFRS5TcHJpdGUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5TcHJpdGUscmF5Y2FzdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMpe2Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO3ZhciBkPWIucmF5LmRpc3RhbmNlU3FUb1BvaW50KGEpO2Q+dGhpcy5zY2FsZS54KnRoaXMuc2NhbGUueS80fHxjLnB1c2goe2Rpc3RhbmNlOk1hdGguc3FydChkKSxwb2ludDp0aGlzLnBvc2l0aW9uLGZhY2U6bnVsbCxvYmplY3Q6dGhpc30pfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm1hdGVyaWFsKSkuY29weSh0aGlzKX19KTtcblRIUkVFLkxlbnNGbGFyZT1mdW5jdGlvbihhLGIsYyxkLGUpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5sZW5zRmxhcmVzPVtdO3RoaXMucG9zaXRpb25TY3JlZW49bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5jdXN0b21VcGRhdGVDYWxsYmFjaz12b2lkIDA7dm9pZCAwIT09YSYmdGhpcy5hZGQoYSxiLGMsZCxlKX07XG5USFJFRS5MZW5zRmxhcmUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5MZW5zRmxhcmUsY29weTpmdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5wb3NpdGlvblNjcmVlbi5jb3B5KGEucG9zaXRpb25TY3JlZW4pO3RoaXMuY3VzdG9tVXBkYXRlQ2FsbGJhY2s9YS5jdXN0b21VcGRhdGVDYWxsYmFjaztmb3IodmFyIGI9MCxjPWEubGVuc0ZsYXJlcy5sZW5ndGg7YjxjO2IrKyl0aGlzLmxlbnNGbGFyZXMucHVzaChhLmxlbnNGbGFyZXNbYl0pO3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZvaWQgMD09PWImJihiPS0xKTt2b2lkIDA9PT1jJiYoYz0wKTt2b2lkIDA9PT1mJiYoZj0xKTt2b2lkIDA9PT1lJiYoZT1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpKTt2b2lkIDA9PT1kJiYoZD1USFJFRS5Ob3JtYWxCbGVuZGluZyk7XG5jPU1hdGgubWluKGMsTWF0aC5tYXgoMCxjKSk7dGhpcy5sZW5zRmxhcmVzLnB1c2goe3RleHR1cmU6YSxzaXplOmIsZGlzdGFuY2U6Yyx4OjAseTowLHo6MCxzY2FsZToxLHJvdGF0aW9uOjAsb3BhY2l0eTpmLGNvbG9yOmUsYmxlbmRpbmc6ZH0pfSx1cGRhdGVMZW5zRmxhcmVzOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLmxlbnNGbGFyZXMubGVuZ3RoLGMsZD0yKi10aGlzLnBvc2l0aW9uU2NyZWVuLngsZT0yKi10aGlzLnBvc2l0aW9uU2NyZWVuLnk7Zm9yKGE9MDthPGI7YSsrKWM9dGhpcy5sZW5zRmxhcmVzW2FdLGMueD10aGlzLnBvc2l0aW9uU2NyZWVuLngrZCpjLmRpc3RhbmNlLGMueT10aGlzLnBvc2l0aW9uU2NyZWVuLnkrZSpjLmRpc3RhbmNlLGMud2FudGVkUm90YXRpb249Yy54Kk1hdGguUEkqLjI1LGMucm90YXRpb24rPS4yNSooYy53YW50ZWRSb3RhdGlvbi1jLnJvdGF0aW9uKX19KTtcblRIUkVFLlNjZW5lPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTY2VuZVwiO3RoaXMub3ZlcnJpZGVNYXRlcmlhbD10aGlzLmZvZz10aGlzLmJhY2tncm91bmQ9bnVsbDt0aGlzLmF1dG9VcGRhdGU9ITB9O1RIUkVFLlNjZW5lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuU2NlbmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNjZW5lO1xuVEhSRUUuU2NlbmUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSxiKXtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSxiKTtudWxsIT09YS5iYWNrZ3JvdW5kJiYodGhpcy5iYWNrZ3JvdW5kPWEuYmFja2dyb3VuZC5jbG9uZSgpKTtudWxsIT09YS5mb2cmJih0aGlzLmZvZz1hLmZvZy5jbG9uZSgpKTtudWxsIT09YS5vdmVycmlkZU1hdGVyaWFsJiYodGhpcy5vdmVycmlkZU1hdGVyaWFsPWEub3ZlcnJpZGVNYXRlcmlhbC5jbG9uZSgpKTt0aGlzLmF1dG9VcGRhdGU9YS5hdXRvVXBkYXRlO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1hLm1hdHJpeEF1dG9VcGRhdGU7cmV0dXJuIHRoaXN9O1RIUkVFLkZvZz1mdW5jdGlvbihhLGIsYyl7dGhpcy5uYW1lPVwiXCI7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoYSk7dGhpcy5uZWFyPXZvaWQgMCE9PWI/YjoxO3RoaXMuZmFyPXZvaWQgMCE9PWM/YzoxRTN9O1xuVEhSRUUuRm9nLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgVEhSRUUuRm9nKHRoaXMuY29sb3IuZ2V0SGV4KCksdGhpcy5uZWFyLHRoaXMuZmFyKX07VEhSRUUuRm9nRXhwMj1mdW5jdGlvbihhLGIpe3RoaXMubmFtZT1cIlwiO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKGEpO3RoaXMuZGVuc2l0eT12b2lkIDAhPT1iP2I6Mi41RS00fTtUSFJFRS5Gb2dFeHAyLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgVEhSRUUuRm9nRXhwMih0aGlzLmNvbG9yLmdldEhleCgpLHRoaXMuZGVuc2l0eSl9O1RIUkVFLlNoYWRlckNodW5rPXt9O1RIUkVFLlNoYWRlckNodW5rLmFscGhhbWFwX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9BTFBIQU1BUFxcblxcdGRpZmZ1c2VDb2xvci5hICo9IHRleHR1cmUyRCggYWxwaGFNYXAsIHZVdiApLmc7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuYWxwaGFtYXBfcGFyc19mcmFnbWVudD1cIiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBhbHBoYU1hcDtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmFscGhhdGVzdF9mcmFnbWVudD1cIiNpZmRlZiBBTFBIQVRFU1RcXG5cXHRpZiAoIGRpZmZ1c2VDb2xvci5hIDwgQUxQSEFURVNUICkgZGlzY2FyZDtcXG4jZW5kaWZcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5hb21hcF9mcmFnbWVudD1cIiNpZmRlZiBVU0VfQU9NQVBcXG5cXHRmbG9hdCBhbWJpZW50T2NjbHVzaW9uID0gKCB0ZXh0dXJlMkQoIGFvTWFwLCB2VXYyICkuciAtIDEuMCApICogYW9NYXBJbnRlbnNpdHkgKyAxLjA7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IGFtYmllbnRPY2NsdXNpb247XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBQSFlTSUNBTCApXFxuXFx0XFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKj0gY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBkb3ROViwgYW1iaWVudE9jY2x1c2lvbiwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmFvbWFwX3BhcnNfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0FPTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYW9NYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBhb01hcEludGVuc2l0eTtcXG4jZW5kaWZcIjtUSFJFRS5TaGFkZXJDaHVuay5iZWdpbl92ZXJ0ZXg9XCJcXG52ZWMzIHRyYW5zZm9ybWVkID0gdmVjMyggcG9zaXRpb24gKTtcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5iZWdpbm5vcm1hbF92ZXJ0ZXg9XCJcXG52ZWMzIG9iamVjdE5vcm1hbCA9IHZlYzMoIG5vcm1hbCApO1xcblwiO1RIUkVFLlNoYWRlckNodW5rLmJzZGZzPVwiYm9vbCB0ZXN0TGlnaHRJblJhbmdlKCBjb25zdCBpbiBmbG9hdCBsaWdodERpc3RhbmNlLCBjb25zdCBpbiBmbG9hdCBjdXRvZmZEaXN0YW5jZSApIHtcXG5cXHRyZXR1cm4gYW55KCBidmVjMiggY3V0b2ZmRGlzdGFuY2UgPT0gMC4wLCBsaWdodERpc3RhbmNlIDwgY3V0b2ZmRGlzdGFuY2UgKSApO1xcbn1cXG5mbG9hdCBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBjb25zdCBpbiBmbG9hdCBsaWdodERpc3RhbmNlLCBjb25zdCBpbiBmbG9hdCBjdXRvZmZEaXN0YW5jZSwgY29uc3QgaW4gZmxvYXQgZGVjYXlFeHBvbmVudCApIHtcXG5cXHRcXHRpZiggZGVjYXlFeHBvbmVudCA+IDAuMCApIHtcXG4jaWYgZGVmaW5lZCAoIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFMgKVxcblxcdFxcdFxcdGZsb2F0IGRpc3RhbmNlRmFsbG9mZiA9IDEuMCAvIG1heCggcG93KCBsaWdodERpc3RhbmNlLCBkZWNheUV4cG9uZW50ICksIDAuMDEgKTtcXG5cXHRcXHRcXHRmbG9hdCBtYXhEaXN0YW5jZUN1dG9mZkZhY3RvciA9IHBvdzIoIHNhdHVyYXRlKCAxLjAgLSBwb3c0KCBsaWdodERpc3RhbmNlIC8gY3V0b2ZmRGlzdGFuY2UgKSApICk7XFxuXFx0XFx0XFx0cmV0dXJuIGRpc3RhbmNlRmFsbG9mZiAqIG1heERpc3RhbmNlQ3V0b2ZmRmFjdG9yO1xcbiNlbHNlXFxuXFx0XFx0XFx0cmV0dXJuIHBvdyggc2F0dXJhdGUoIC1saWdodERpc3RhbmNlIC8gY3V0b2ZmRGlzdGFuY2UgKyAxLjAgKSwgZGVjYXlFeHBvbmVudCApO1xcbiNlbmRpZlxcblxcdFxcdH1cXG5cXHRcXHRyZXR1cm4gMS4wO1xcbn1cXG52ZWMzIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBjb25zdCBpbiB2ZWMzIGRpZmZ1c2VDb2xvciApIHtcXG5cXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqIGRpZmZ1c2VDb2xvcjtcXG59XFxudmVjMyBGX1NjaGxpY2soIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgZG90TEggKSB7XFxuXFx0ZmxvYXQgZnJlc25lbCA9IGV4cDIoICggLTUuNTU0NzMgKiBkb3RMSCAtIDYuOTgzMTYgKSAqIGRvdExIICk7XFxuXFx0cmV0dXJuICggMS4wIC0gc3BlY3VsYXJDb2xvciApICogZnJlc25lbCArIHNwZWN1bGFyQ29sb3I7XFxufVxcbmZsb2F0IEdfR0dYX1NtaXRoKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkwsIGNvbnN0IGluIGZsb2F0IGRvdE5WICkge1xcblxcdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcXG5cXHRmbG9hdCBnbCA9IGRvdE5MICsgc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROTCApICk7XFxuXFx0ZmxvYXQgZ3YgPSBkb3ROViArIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TlYgKSApO1xcblxcdHJldHVybiAxLjAgLyAoIGdsICogZ3YgKTtcXG59XFxuZmxvYXQgR19HR1hfU21pdGhDb3JyZWxhdGVkKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkwsIGNvbnN0IGluIGZsb2F0IGRvdE5WICkge1xcblxcdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcXG5cXHRmbG9hdCBndiA9IGRvdE5MICogc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROViApICk7XFxuXFx0ZmxvYXQgZ2wgPSBkb3ROViAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xcblxcdHJldHVybiAwLjUgLyBtYXgoIGd2ICsgZ2wsIEVQU0lMT04gKTtcXG59XFxuZmxvYXQgRF9HR1goIGNvbnN0IGluIGZsb2F0IGFscGhhLCBjb25zdCBpbiBmbG9hdCBkb3ROSCApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZGVub20gPSBwb3cyKCBkb3ROSCApICogKCBhMiAtIDEuMCApICsgMS4wO1xcblxcdHJldHVybiBSRUNJUFJPQ0FMX1BJICogYTIgLyBwb3cyKCBkZW5vbSApO1xcbn1cXG52ZWMzIEJSREZfU3BlY3VsYXJfR0dYKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IGFscGhhID0gcG93Miggcm91Z2huZXNzICk7XFxuXFx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiArIGdlb21ldHJ5LnZpZXdEaXIgKTtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKSApO1xcblxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGFsZkRpciApICk7XFxuXFx0ZmxvYXQgZG90TEggPSBzYXR1cmF0ZSggZG90KCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiwgaGFsZkRpciApICk7XFxuXFx0dmVjMyBGID0gRl9TY2hsaWNrKCBzcGVjdWxhckNvbG9yLCBkb3RMSCApO1xcblxcdGZsb2F0IEcgPSBHX0dHWF9TbWl0aENvcnJlbGF0ZWQoIGFscGhhLCBkb3ROTCwgZG90TlYgKTtcXG5cXHRmbG9hdCBEID0gRF9HR1goIGFscGhhLCBkb3ROSCApO1xcblxcdHJldHVybiBGICogKCBHICogRCApO1xcbn1cXG52ZWMzIEJSREZfU3BlY3VsYXJfR0dYX0Vudmlyb25tZW50KCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXFx0Y29uc3QgdmVjNCBjMCA9IHZlYzQoIC0gMSwgLSAwLjAyNzUsIC0gMC41NzIsIDAuMDIyICk7XFxuXFx0Y29uc3QgdmVjNCBjMSA9IHZlYzQoIDEsIDAuMDQyNSwgMS4wNCwgLSAwLjA0ICk7XFxuXFx0dmVjNCByID0gcm91Z2huZXNzICogYzAgKyBjMTtcXG5cXHRmbG9hdCBhMDA0ID0gbWluKCByLnggKiByLngsIGV4cDIoIC0gOS4yOCAqIGRvdE5WICkgKSAqIHIueCArIHIueTtcXG5cXHR2ZWMyIEFCID0gdmVjMiggLTEuMDQsIDEuMDQgKSAqIGEwMDQgKyByLnp3O1xcblxcdHJldHVybiBzcGVjdWxhckNvbG9yICogQUIueCArIEFCLnk7XFxufVxcbmZsb2F0IEdfQmxpbm5QaG9uZ19JbXBsaWNpdCggKSB7XFxuXFx0cmV0dXJuIDAuMjU7XFxufVxcbmZsb2F0IERfQmxpbm5QaG9uZyggY29uc3QgaW4gZmxvYXQgc2hpbmluZXNzLCBjb25zdCBpbiBmbG9hdCBkb3ROSCApIHtcXG5cXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqICggc2hpbmluZXNzICogMC41ICsgMS4wICkgKiBwb3coIGRvdE5ILCBzaGluaW5lc3MgKTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX0JsaW5uUGhvbmcoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgaW5jaWRlbnRMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCBzaGluaW5lc3MgKSB7XFxuXFx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiArIGdlb21ldHJ5LnZpZXdEaXIgKTtcXG5cXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGFsZkRpciApICk7XFxuXFx0ZmxvYXQgZG90TEggPSBzYXR1cmF0ZSggZG90KCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiwgaGFsZkRpciApICk7XFxuXFx0dmVjMyBGID0gRl9TY2hsaWNrKCBzcGVjdWxhckNvbG9yLCBkb3RMSCApO1xcblxcdGZsb2F0IEcgPSBHX0JsaW5uUGhvbmdfSW1wbGljaXQoICk7XFxuXFx0ZmxvYXQgRCA9IERfQmxpbm5QaG9uZyggc2hpbmluZXNzLCBkb3ROSCApO1xcblxcdHJldHVybiBGICogKCBHICogRCApO1xcbn1cXG5mbG9hdCBHR1hSb3VnaG5lc3NUb0JsaW5uRXhwb25lbnQoIGNvbnN0IGluIGZsb2F0IGdneFJvdWdobmVzcyApIHtcXG5cXHRyZXR1cm4gKCAyLjAgLyBwb3cyKCBnZ3hSb3VnaG5lc3MgKyAwLjAwMDEgKSAtIDIuMCApO1xcbn1cXG5mbG9hdCBCbGlubkV4cG9uZW50VG9HR1hSb3VnaG5lc3MoIGNvbnN0IGluIGZsb2F0IGJsaW5uRXhwb25lbnQgKSB7XFxuXFx0cmV0dXJuIHNxcnQoIDIuMCAvICggYmxpbm5FeHBvbmVudCArIDIuMCApICk7XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuYnVtcG1hcF9wYXJzX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9CVU1QTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYnVtcE1hcDtcXG5cXHR1bmlmb3JtIGZsb2F0IGJ1bXBTY2FsZTtcXG5cXHR2ZWMyIGRIZHh5X2Z3ZCgpIHtcXG5cXHRcXHR2ZWMyIGRTVGR4ID0gZEZkeCggdlV2ICk7XFxuXFx0XFx0dmVjMiBkU1RkeSA9IGRGZHkoIHZVdiApO1xcblxcdFxcdGZsb2F0IEhsbCA9IGJ1bXBTY2FsZSAqIHRleHR1cmUyRCggYnVtcE1hcCwgdlV2ICkueDtcXG5cXHRcXHRmbG9hdCBkQnggPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiArIGRTVGR4ICkueCAtIEhsbDtcXG5cXHRcXHRmbG9hdCBkQnkgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiArIGRTVGR5ICkueCAtIEhsbDtcXG5cXHRcXHRyZXR1cm4gdmVjMiggZEJ4LCBkQnkgKTtcXG5cXHR9XFxuXFx0dmVjMyBwZXJ0dXJiTm9ybWFsQXJiKCB2ZWMzIHN1cmZfcG9zLCB2ZWMzIHN1cmZfbm9ybSwgdmVjMiBkSGR4eSApIHtcXG5cXHRcXHR2ZWMzIHZTaWdtYVggPSBkRmR4KCBzdXJmX3BvcyApO1xcblxcdFxcdHZlYzMgdlNpZ21hWSA9IGRGZHkoIHN1cmZfcG9zICk7XFxuXFx0XFx0dmVjMyB2TiA9IHN1cmZfbm9ybTtcXG5cXHRcXHR2ZWMzIFIxID0gY3Jvc3MoIHZTaWdtYVksIHZOICk7XFxuXFx0XFx0dmVjMyBSMiA9IGNyb3NzKCB2TiwgdlNpZ21hWCApO1xcblxcdFxcdGZsb2F0IGZEZXQgPSBkb3QoIHZTaWdtYVgsIFIxICk7XFxuXFx0XFx0dmVjMyB2R3JhZCA9IHNpZ24oIGZEZXQgKSAqICggZEhkeHkueCAqIFIxICsgZEhkeHkueSAqIFIyICk7XFxuXFx0XFx0cmV0dXJuIG5vcm1hbGl6ZSggYWJzKCBmRGV0ICkgKiBzdXJmX25vcm0gLSB2R3JhZCApO1xcblxcdH1cXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD1cIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9DTElQUElOR19QTEFORVM7ICsrIGkgKSB7XFxuXFx0XFx0dmVjNCBwbGFuZSA9IGNsaXBwaW5nUGxhbmVzWyBpIF07XFxuXFx0XFx0aWYgKCBkb3QoIHZWaWV3UG9zaXRpb24sIHBsYW5lLnh5eiApID4gcGxhbmUudyApIGRpc2NhcmQ7XFxuXFx0fVxcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLmNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PVwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0I2lmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAhIGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG5cXHQjZW5kaWZcXG5cXHR1bmlmb3JtIHZlYzQgY2xpcHBpbmdQbGFuZXNbIE5VTV9DTElQUElOR19QTEFORVMgXTtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD1cIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMCAmJiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgISBkZWZpbmVkKCBQSE9ORyApXFxuXFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuY2xpcHBpbmdfcGxhbmVzX3ZlcnRleD1cIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMCAmJiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgISBkZWZpbmVkKCBQSE9ORyApXFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0ZGlmZnVzZUNvbG9yLnJnYiAqPSB2Q29sb3I7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc19mcmFnbWVudD1cIiNpZmRlZiBVU0VfQ09MT1JcXG5cXHR2YXJ5aW5nIHZlYzMgdkNvbG9yO1xcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfcGFyc192ZXJ0ZXg9XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcXG4jZW5kaWZcIjtUSFJFRS5TaGFkZXJDaHVuay5jb2xvcl92ZXJ0ZXg9XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0dkNvbG9yLnh5eiA9IGNvbG9yLnh5ejtcXG4jZW5kaWZcIjtUSFJFRS5TaGFkZXJDaHVuay5jb21tb249XCIjZGVmaW5lIFBJIDMuMTQxNTkyNjUzNTlcXG4jZGVmaW5lIFBJMiA2LjI4MzE4NTMwNzE4XFxuI2RlZmluZSBSRUNJUFJPQ0FMX1BJIDAuMzE4MzA5ODg2MThcXG4jZGVmaW5lIFJFQ0lQUk9DQUxfUEkyIDAuMTU5MTU0OTRcXG4jZGVmaW5lIExPRzIgMS40NDI2OTVcXG4jZGVmaW5lIEVQU0lMT04gMWUtNlxcbiNkZWZpbmUgc2F0dXJhdGUoYSkgY2xhbXAoIGEsIDAuMCwgMS4wIClcXG4jZGVmaW5lIHdoaXRlQ29tcGxpbWVudChhKSAoIDEuMCAtIHNhdHVyYXRlKCBhICkgKVxcbmZsb2F0IHBvdzIoIGNvbnN0IGluIGZsb2F0IHggKSB7IHJldHVybiB4Kng7IH1cXG5mbG9hdCBwb3czKCBjb25zdCBpbiBmbG9hdCB4ICkgeyByZXR1cm4geCp4Kng7IH1cXG5mbG9hdCBwb3c0KCBjb25zdCBpbiBmbG9hdCB4ICkgeyBmbG9hdCB4MiA9IHgqeDsgcmV0dXJuIHgyKngyOyB9XFxuZmxvYXQgYXZlcmFnZSggY29uc3QgaW4gdmVjMyBjb2xvciApIHsgcmV0dXJuIGRvdCggY29sb3IsIHZlYzMoIDAuMzMzMyApICk7IH1cXG5oaWdocCBmbG9hdCByYW5kKCBjb25zdCBpbiB2ZWMyIHV2ICkge1xcblxcdGNvbnN0IGhpZ2hwIGZsb2F0IGEgPSAxMi45ODk4LCBiID0gNzguMjMzLCBjID0gNDM3NTguNTQ1MztcXG5cXHRoaWdocCBmbG9hdCBkdCA9IGRvdCggdXYueHksIHZlYzIoIGEsYiApICksIHNuID0gbW9kKCBkdCwgUEkgKTtcXG5cXHRyZXR1cm4gZnJhY3Qoc2luKHNuKSAqIGMpO1xcbn1cXG5zdHJ1Y3QgSW5jaWRlbnRMaWdodCB7XFxuXFx0dmVjMyBjb2xvcjtcXG5cXHR2ZWMzIGRpcmVjdGlvbjtcXG5cXHRib29sIHZpc2libGU7XFxufTtcXG5zdHJ1Y3QgUmVmbGVjdGVkTGlnaHQge1xcblxcdHZlYzMgZGlyZWN0RGlmZnVzZTtcXG5cXHR2ZWMzIGRpcmVjdFNwZWN1bGFyO1xcblxcdHZlYzMgaW5kaXJlY3REaWZmdXNlO1xcblxcdHZlYzMgaW5kaXJlY3RTcGVjdWxhcjtcXG59O1xcbnN0cnVjdCBHZW9tZXRyaWNDb250ZXh0IHtcXG5cXHR2ZWMzIHBvc2l0aW9uO1xcblxcdHZlYzMgbm9ybWFsO1xcblxcdHZlYzMgdmlld0RpcjtcXG59O1xcbnZlYzMgdHJhbnNmb3JtRGlyZWN0aW9uKCBpbiB2ZWMzIGRpciwgaW4gbWF0NCBtYXRyaXggKSB7XFxuXFx0cmV0dXJuIG5vcm1hbGl6ZSggKCBtYXRyaXggKiB2ZWM0KCBkaXIsIDAuMCApICkueHl6ICk7XFxufVxcbnZlYzMgaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggaW4gdmVjMyBkaXIsIGluIG1hdDQgbWF0cml4ICkge1xcblxcdHJldHVybiBub3JtYWxpemUoICggdmVjNCggZGlyLCAwLjAgKSAqIG1hdHJpeCApLnh5eiApO1xcbn1cXG52ZWMzIHByb2plY3RPblBsYW5lKGluIHZlYzMgcG9pbnQsIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdGZsb2F0IGRpc3RhbmNlID0gZG90KCBwbGFuZU5vcm1hbCwgcG9pbnQgLSBwb2ludE9uUGxhbmUgKTtcXG5cXHRyZXR1cm4gLSBkaXN0YW5jZSAqIHBsYW5lTm9ybWFsICsgcG9pbnQ7XFxufVxcbmZsb2F0IHNpZGVPZlBsYW5lKCBpbiB2ZWMzIHBvaW50LCBpbiB2ZWMzIHBvaW50T25QbGFuZSwgaW4gdmVjMyBwbGFuZU5vcm1hbCApIHtcXG5cXHRyZXR1cm4gc2lnbiggZG90KCBwb2ludCAtIHBvaW50T25QbGFuZSwgcGxhbmVOb3JtYWwgKSApO1xcbn1cXG52ZWMzIGxpbmVQbGFuZUludGVyc2VjdCggaW4gdmVjMyBwb2ludE9uTGluZSwgaW4gdmVjMyBsaW5lRGlyZWN0aW9uLCBpbiB2ZWMzIHBvaW50T25QbGFuZSwgaW4gdmVjMyBwbGFuZU5vcm1hbCApIHtcXG5cXHRyZXR1cm4gbGluZURpcmVjdGlvbiAqICggZG90KCBwbGFuZU5vcm1hbCwgcG9pbnRPblBsYW5lIC0gcG9pbnRPbkxpbmUgKSAvIGRvdCggcGxhbmVOb3JtYWwsIGxpbmVEaXJlY3Rpb24gKSApICsgcG9pbnRPbkxpbmU7XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuY3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PVwiI2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVfVVZcXG4jZGVmaW5lIGN1YmVVVl90ZXh0dXJlU2l6ZSAoMTAyNC4wKVxcbmludCBnZXRGYWNlRnJvbURpcmVjdGlvbih2ZWMzIGRpcmVjdGlvbikge1xcblxcdHZlYzMgYWJzRGlyZWN0aW9uID0gYWJzKGRpcmVjdGlvbik7XFxuXFx0aW50IGZhY2UgPSAtMTtcXG5cXHRpZiggYWJzRGlyZWN0aW9uLnggPiBhYnNEaXJlY3Rpb24ueiApIHtcXG5cXHRcXHRpZihhYnNEaXJlY3Rpb24ueCA+IGFic0RpcmVjdGlvbi55IClcXG5cXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnggPiAwLjAgPyAwIDogMztcXG5cXHRcXHRlbHNlXFxuXFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi55ID4gMC4wID8gMSA6IDQ7XFxuXFx0fVxcblxcdGVsc2Uge1xcblxcdFxcdGlmKGFic0RpcmVjdGlvbi56ID4gYWJzRGlyZWN0aW9uLnkgKVxcblxcdFxcdFxcdGZhY2UgPSBkaXJlY3Rpb24ueiA+IDAuMCA/IDIgOiA1O1xcblxcdFxcdGVsc2VcXG5cXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnkgPiAwLjAgPyAxIDogNDtcXG5cXHR9XFxuXFx0cmV0dXJuIGZhY2U7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMxICAobG9nMihjdWJlVVZfdGV4dHVyZVNpemUqMC4yNSkgLSAxLjApXFxuI2RlZmluZSBjdWJlVVZfcmFuZ2VDbGFtcCAoZXhwMigoNi4wIC0gMS4wKSAqIDIuMCkpXFxudmVjMiBNaXBMZXZlbEluZm8oIHZlYzMgdmVjLCBmbG9hdCByb3VnaG5lc3NMZXZlbCwgZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IHNjYWxlID0gZXhwMihjdWJlVVZfbWF4TG9kczEgLSByb3VnaG5lc3NMZXZlbCk7XFxuXFx0ZmxvYXQgZHhSb3VnaG5lc3MgPSBkRmR4KHJvdWdobmVzcyk7XFxuXFx0ZmxvYXQgZHlSb3VnaG5lc3MgPSBkRmR5KHJvdWdobmVzcyk7XFxuXFx0dmVjMyBkeCA9IGRGZHgoIHZlYyAqIHNjYWxlICogZHhSb3VnaG5lc3MgKTtcXG5cXHR2ZWMzIGR5ID0gZEZkeSggdmVjICogc2NhbGUgKiBkeVJvdWdobmVzcyApO1xcblxcdGZsb2F0IGQgPSBtYXgoIGRvdCggZHgsIGR4ICksIGRvdCggZHksIGR5ICkgKTtcXG5cXHRkID0gY2xhbXAoZCwgMS4wLCBjdWJlVVZfcmFuZ2VDbGFtcCk7XFxuXFx0ZmxvYXQgbWlwTGV2ZWwgPSAwLjUgKiBsb2cyKGQpO1xcblxcdHJldHVybiB2ZWMyKGZsb29yKG1pcExldmVsKSwgZnJhY3QobWlwTGV2ZWwpKTtcXG59XFxuI2RlZmluZSBjdWJlVVZfbWF4TG9kczIgKGxvZzIoY3ViZVVWX3RleHR1cmVTaXplKjAuMjUpIC0gMi4wKVxcbiNkZWZpbmUgY3ViZVVWX3JjcFRleHR1cmVTaXplICgxLjAgLyBjdWJlVVZfdGV4dHVyZVNpemUpXFxudmVjMiBnZXRDdWJlVVYodmVjMyBkaXJlY3Rpb24sIGZsb2F0IHJvdWdobmVzc0xldmVsLCBmbG9hdCBtaXBMZXZlbCkge1xcblxcdG1pcExldmVsID0gcm91Z2huZXNzTGV2ZWwgPiBjdWJlVVZfbWF4TG9kczIgLSAzLjAgPyAwLjAgOiBtaXBMZXZlbDtcXG5cXHRmbG9hdCBhID0gMTYuMCAqIGN1YmVVVl9yY3BUZXh0dXJlU2l6ZTtcXG5cXHR2ZWMyIGV4cDJfcGFja2VkID0gZXhwMiggdmVjMiggcm91Z2huZXNzTGV2ZWwsIG1pcExldmVsICkgKTtcXG5cXHR2ZWMyIHJjcF9leHAyX3BhY2tlZCA9IHZlYzIoIDEuMCApIC8gZXhwMl9wYWNrZWQ7XFxuXFx0ZmxvYXQgcG93U2NhbGUgPSBleHAyX3BhY2tlZC54ICogZXhwMl9wYWNrZWQueTtcXG5cXHRmbG9hdCBzY2FsZSA9IHJjcF9leHAyX3BhY2tlZC54ICogcmNwX2V4cDJfcGFja2VkLnkgKiAwLjI1O1xcblxcdGZsb2F0IG1pcE9mZnNldCA9IDAuNzUqKDEuMCAtIHJjcF9leHAyX3BhY2tlZC55KSAqIHJjcF9leHAyX3BhY2tlZC54O1xcblxcdGJvb2wgYlJlcyA9IG1pcExldmVsID09IDAuMDtcXG5cXHRzY2FsZSA9ICBiUmVzICYmIChzY2FsZSA8IGEpID8gYSA6IHNjYWxlO1xcblxcdHZlYzMgcjtcXG5cXHR2ZWMyIG9mZnNldDtcXG5cXHRpbnQgZmFjZSA9IGdldEZhY2VGcm9tRGlyZWN0aW9uKGRpcmVjdGlvbik7XFxuXFx0ZmxvYXQgcmNwUG93U2NhbGUgPSAxLjAgLyBwb3dTY2FsZTtcXG5cXHRpZiggZmFjZSA9PSAwKSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLngsIC1kaXJlY3Rpb24ueiwgZGlyZWN0aW9uLnkpO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoMC4wK21pcE9mZnNldCwwLjc1ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAgYSA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIGlmKCBmYWNlID09IDEpIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueSwgZGlyZWN0aW9uLngsIGRpcmVjdGlvbi56KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKHNjYWxlK21pcE9mZnNldCwgMC43NSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gIGEgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ZWxzZSBpZiggZmFjZSA9PSAyKSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLnosIGRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueSk7XFxuXFx0XFx0b2Zmc2V0ID0gdmVjMigyLjAqc2NhbGUrbWlwT2Zmc2V0LCAwLjc1ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAgYSA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIGlmKCBmYWNlID09IDMpIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnosIGRpcmVjdGlvbi55KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKDAuMCttaXBPZmZzZXQsMC41ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAgMC4wIDogb2Zmc2V0Lnk7XFxuXFx0fVxcblxcdGVsc2UgaWYoIGZhY2UgPT0gNCkge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi55LCBkaXJlY3Rpb24ueCwgLWRpcmVjdGlvbi56KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKHNjYWxlK21pcE9mZnNldCwgMC41ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAgMC4wIDogb2Zmc2V0Lnk7XFxuXFx0fVxcblxcdGVsc2Uge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi56LCAtZGlyZWN0aW9uLngsIGRpcmVjdGlvbi55KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKDIuMCpzY2FsZSttaXBPZmZzZXQsIDAuNSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gIDAuMCA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRyID0gbm9ybWFsaXplKHIpO1xcblxcdGZsb2F0IHRleGVsT2Zmc2V0ID0gMC41ICogY3ViZVVWX3JjcFRleHR1cmVTaXplO1xcblxcdHZlYzIgcyA9ICggci55eiAvIGFicyggci54ICkgKyB2ZWMyKCAxLjAgKSApICogMC41O1xcblxcdHZlYzIgYmFzZSA9IG9mZnNldCArIHZlYzIoIHRleGVsT2Zmc2V0ICk7XFxuXFx0cmV0dXJuIGJhc2UgKyBzICogKCBzY2FsZSAtIDIuMCAqIHRleGVsT2Zmc2V0ICk7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMzIChsb2cyKGN1YmVVVl90ZXh0dXJlU2l6ZSowLjI1KSAtIDMuMClcXG52ZWM0IHRleHR1cmVDdWJlVVYodmVjMyByZWZsZWN0ZWREaXJlY3Rpb24sIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCByb3VnaG5lc3NWYWwgPSByb3VnaG5lc3MqIGN1YmVVVl9tYXhMb2RzMztcXG5cXHRmbG9hdCByMSA9IGZsb29yKHJvdWdobmVzc1ZhbCk7XFxuXFx0ZmxvYXQgcjIgPSByMSArIDEuMDtcXG5cXHRmbG9hdCB0ID0gZnJhY3Qocm91Z2huZXNzVmFsKTtcXG5cXHR2ZWMyIG1pcEluZm8gPSBNaXBMZXZlbEluZm8ocmVmbGVjdGVkRGlyZWN0aW9uLCByMSwgcm91Z2huZXNzKTtcXG5cXHRmbG9hdCBzID0gbWlwSW5mby55O1xcblxcdGZsb2F0IGxldmVsMCA9IG1pcEluZm8ueDtcXG5cXHRmbG9hdCBsZXZlbDEgPSBsZXZlbDAgKyAxLjA7XFxuXFx0bGV2ZWwxID0gbGV2ZWwxID4gNS4wID8gNS4wIDogbGV2ZWwxO1xcblxcdGxldmVsMCArPSBtaW4oIGZsb29yKCBzICsgMC41ICksIDUuMCApO1xcblxcdHZlYzIgdXZfMTAgPSBnZXRDdWJlVVYocmVmbGVjdGVkRGlyZWN0aW9uLCByMSwgbGV2ZWwwKTtcXG5cXHR2ZWM0IGNvbG9yMTAgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2XzEwKSk7XFxuXFx0dmVjMiB1dl8yMCA9IGdldEN1YmVVVihyZWZsZWN0ZWREaXJlY3Rpb24sIHIyLCBsZXZlbDApO1xcblxcdHZlYzQgY29sb3IyMCA9IGVudk1hcFRleGVsVG9MaW5lYXIodGV4dHVyZTJEKGVudk1hcCwgdXZfMjApKTtcXG5cXHR2ZWM0IHJlc3VsdCA9IG1peChjb2xvcjEwLCBjb2xvcjIwLCB0KTtcXG5cXHRyZXR1cm4gdmVjNChyZXN1bHQucmdiLCAxLjApO1xcbn1cXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmRlZmF1bHRub3JtYWxfdmVydGV4PVwiI2lmZGVmIEZMSVBfU0lERURcXG5cXHRvYmplY3ROb3JtYWwgPSAtb2JqZWN0Tm9ybWFsO1xcbiNlbmRpZlxcbnZlYzMgdHJhbnNmb3JtZWROb3JtYWwgPSBub3JtYWxNYXRyaXggKiBvYmplY3ROb3JtYWw7XFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuZGlzcGxhY2VtZW50bWFwX3ZlcnRleD1cIiNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0dHJhbnNmb3JtZWQgKz0gbm9ybWFsICogKCB0ZXh0dXJlMkQoIGRpc3BsYWNlbWVudE1hcCwgdXYgKS54ICogZGlzcGxhY2VtZW50U2NhbGUgKyBkaXNwbGFjZW1lbnRCaWFzICk7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PVwiI2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBkaXNwbGFjZW1lbnRNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBkaXNwbGFjZW1lbnRTY2FsZTtcXG5cXHR1bmlmb3JtIGZsb2F0IGRpc3BsYWNlbWVudEJpYXM7XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5lbWlzc2l2ZW1hcF9mcmFnbWVudD1cIiNpZmRlZiBVU0VfRU1JU1NJVkVNQVBcXG5cXHR2ZWM0IGVtaXNzaXZlQ29sb3IgPSB0ZXh0dXJlMkQoIGVtaXNzaXZlTWFwLCB2VXYgKTtcXG5cXHRlbWlzc2l2ZUNvbG9yLnJnYiA9IGVtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhciggZW1pc3NpdmVDb2xvciApLnJnYjtcXG5cXHR0b3RhbEVtaXNzaXZlUmFkaWFuY2UgKj0gZW1pc3NpdmVDb2xvci5yZ2I7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD1cIiNpZmRlZiBVU0VfRU1JU1NJVkVNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBlbWlzc2l2ZU1hcDtcXG4jZW5kaWZcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5lbmNvZGluZ3NfcGFyc19mcmFnbWVudD1cIlxcbnZlYzQgTGluZWFyVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuICByZXR1cm4gdmFsdWU7XFxufVxcbnZlYzQgR2FtbWFUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgZ2FtbWFGYWN0b3IgKSB7XFxuICByZXR1cm4gdmVjNCggcG93KCB2YWx1ZS54eXosIHZlYzMoIGdhbW1hRmFjdG9yICkgKSwgdmFsdWUudyApO1xcbn1cXG52ZWM0IExpbmVhclRvR2FtbWEoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IGdhbW1hRmFjdG9yICkge1xcbiAgcmV0dXJuIHZlYzQoIHBvdyggdmFsdWUueHl6LCB2ZWMzKCAxLjAgLyBnYW1tYUZhY3RvciApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBzUkdCVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuICByZXR1cm4gdmVjNCggbWl4KCBwb3coIHZhbHVlLnJnYiAqIDAuOTQ3ODY3Mjk4NiArIHZlYzMoIDAuMDUyMTMyNzAxNCApLCB2ZWMzKCAyLjQgKSApLCB2YWx1ZS5yZ2IgKiAwLjA3NzM5OTM4MDgsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wNDA0NSApICkgKSApLCB2YWx1ZS53ICk7XFxufVxcbnZlYzQgTGluZWFyVG9zUkdCKCBpbiB2ZWM0IHZhbHVlICkge1xcbiAgcmV0dXJuIHZlYzQoIG1peCggcG93KCB2YWx1ZS5yZ2IsIHZlYzMoIDAuNDE2NjYgKSApICogMS4wNTUgLSB2ZWMzKCAwLjA1NSApLCB2YWx1ZS5yZ2IgKiAxMi45MiwgdmVjMyggbGVzc1RoYW5FcXVhbCggdmFsdWUucmdiLCB2ZWMzKCAwLjAwMzEzMDggKSApICkgKSwgdmFsdWUudyApO1xcbn1cXG52ZWM0IFJHQkVUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG4gIHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiBleHAyKCB2YWx1ZS5hICogMjU1LjAgLSAxMjguMCApLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQkUoIGluIHZlYzQgdmFsdWUgKSB7XFxuICBmbG9hdCBtYXhDb21wb25lbnQgPSBtYXgoIG1heCggdmFsdWUuciwgdmFsdWUuZyApLCB2YWx1ZS5iICk7XFxuICBmbG9hdCBmRXhwID0gY2xhbXAoIGNlaWwoIGxvZzIoIG1heENvbXBvbmVudCApICksIC0xMjguMCwgMTI3LjAgKTtcXG4gIHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgLyBleHAyKCBmRXhwICksICggZkV4cCArIDEyOC4wICkgLyAyNTUuMCApO1xcbn1cXG52ZWM0IFJHQk1Ub0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuICByZXR1cm4gdmVjNCggdmFsdWUueHl6ICogdmFsdWUudyAqIG1heFJhbmdlLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQk0oIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcbiAgZmxvYXQgbWF4UkdCID0gbWF4KCB2YWx1ZS54LCBtYXgoIHZhbHVlLmcsIHZhbHVlLmIgKSApO1xcbiAgZmxvYXQgTSAgICAgID0gY2xhbXAoIG1heFJHQiAvIG1heFJhbmdlLCAwLjAsIDEuMCApO1xcbiAgTSAgICAgICAgICAgID0gY2VpbCggTSAqIDI1NS4wICkgLyAyNTUuMDtcXG4gIHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgLyAoIE0gKiBtYXhSYW5nZSApLCBNICk7XFxufVxcbnZlYzQgUkdCRFRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG4gICAgcmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggKCBtYXhSYW5nZSAvIDI1NS4wICkgLyB2YWx1ZS5hICksIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCRCggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuICAgIGZsb2F0IG1heFJHQiA9IG1heCggdmFsdWUueCwgbWF4KCB2YWx1ZS5nLCB2YWx1ZS5iICkgKTtcXG4gICAgZmxvYXQgRCAgICAgID0gbWF4KCBtYXhSYW5nZSAvIG1heFJHQiwgMS4wICk7XFxuICAgIEQgICAgICAgICAgICA9IG1pbiggZmxvb3IoIEQgKSAvIDI1NS4wLCAxLjAgKTtcXG4gICAgcmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggRCAqICggMjU1LjAgLyBtYXhSYW5nZSApICksIEQgKTtcXG59XFxuY29uc3QgbWF0MyBjTG9nTHV2TSA9IG1hdDMoIDAuMjIwOSwgMC4zMzkwLCAwLjQxODQsIDAuMTEzOCwgMC42NzgwLCAwLjczMTksIDAuMDEwMiwgMC4xMTMwLCAwLjI5NjkgKTtcXG52ZWM0IExpbmVhclRvTG9nTHV2KCBpbiB2ZWM0IHZhbHVlICkgIHtcXG4gIHZlYzMgWHBfWV9YWVpwID0gdmFsdWUucmdiICogY0xvZ0x1dk07XFxuICBYcF9ZX1hZWnAgPSBtYXgoWHBfWV9YWVpwLCB2ZWMzKDFlLTYsIDFlLTYsIDFlLTYpKTtcXG4gIHZlYzQgdlJlc3VsdDtcXG4gIHZSZXN1bHQueHkgPSBYcF9ZX1hZWnAueHkgLyBYcF9ZX1hZWnAuejtcXG4gIGZsb2F0IExlID0gMi4wICogbG9nMihYcF9ZX1hZWnAueSkgKyAxMjcuMDtcXG4gIHZSZXN1bHQudyA9IGZyYWN0KExlKTtcXG4gIHZSZXN1bHQueiA9IChMZSAtIChmbG9vcih2UmVzdWx0LncqMjU1LjApKS8yNTUuMCkvMjU1LjA7XFxuICByZXR1cm4gdlJlc3VsdDtcXG59XFxuY29uc3QgbWF0MyBjTG9nTHV2SW52ZXJzZU0gPSBtYXQzKCA2LjAwMTQsIC0yLjcwMDgsIC0xLjc5OTYsIC0xLjMzMjAsIDMuMTAyOSwgLTUuNzcyMSwgMC4zMDA4LCAtMS4wODgyLCA1LjYyNjggKTtcXG52ZWM0IExvZ0x1dlRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcbiAgZmxvYXQgTGUgPSB2YWx1ZS56ICogMjU1LjAgKyB2YWx1ZS53O1xcbiAgdmVjMyBYcF9ZX1hZWnA7XFxuICBYcF9ZX1hZWnAueSA9IGV4cDIoKExlIC0gMTI3LjApIC8gMi4wKTtcXG4gIFhwX1lfWFlacC56ID0gWHBfWV9YWVpwLnkgLyB2YWx1ZS55O1xcbiAgWHBfWV9YWVpwLnggPSB2YWx1ZS54ICogWHBfWV9YWVpwLno7XFxuICB2ZWMzIHZSR0IgPSBYcF9ZX1hZWnAucmdiICogY0xvZ0x1dkludmVyc2VNO1xcbiAgcmV0dXJuIHZlYzQoIG1heCh2UkdCLCAwLjApLCAxLjAgKTtcXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5lbmNvZGluZ3NfZnJhZ21lbnQ9XCIgIGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoIGdsX0ZyYWdDb2xvciApO1xcblwiO1RIUkVFLlNoYWRlckNodW5rLmVudm1hcF9mcmFnbWVudD1cIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHR2ZWMzIGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIG5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyByZWZsZWN0VmVjID0gdlJlZmxlY3Q7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgZmxpcE5vcm1hbCAqIHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKSApO1xcblxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0VRVUlSRUMgKVxcblxcdFxcdHZlYzIgc2FtcGxlVVY7XFxuXFx0XFx0c2FtcGxlVVYueSA9IHNhdHVyYXRlKCBmbGlwTm9ybWFsICogcmVmbGVjdFZlYy55ICogMC41ICsgMC41ICk7XFxuXFx0XFx0c2FtcGxlVVYueCA9IGF0YW4oIGZsaXBOb3JtYWwgKiByZWZsZWN0VmVjLnosIGZsaXBOb3JtYWwgKiByZWZsZWN0VmVjLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9TUEhFUkUgKVxcblxcdFxcdHZlYzMgcmVmbGVjdFZpZXcgPSBmbGlwTm9ybWFsICogbm9ybWFsaXplKCAoIHZpZXdNYXRyaXggKiB2ZWM0KCByZWZsZWN0VmVjLCAwLjAgKSApLnh5eiArIHZlYzMoIDAuMCwgMC4wLCAxLjAgKSApO1xcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgcmVmbGVjdFZpZXcueHkgKiAwLjUgKyAwLjUgKTtcXG5cXHQjZW5kaWZcXG5cXHRlbnZDb2xvciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudkNvbG9yICk7XFxuXFx0I2lmZGVmIEVOVk1BUF9CTEVORElOR19NVUxUSVBMWVxcblxcdFxcdG91dGdvaW5nTGlnaHQgPSBtaXgoIG91dGdvaW5nTGlnaHQsIG91dGdvaW5nTGlnaHQgKiBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfTUlYIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfQUREIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ICs9IGVudkNvbG9yLnh5eiAqIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfcGFyc19mcmFnbWVudD1cIiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgfHwgZGVmaW5lZCggUEhZU0lDQUwgKVxcblxcdHVuaWZvcm0gZmxvYXQgcmVmbGVjdGl2aXR5O1xcblxcdHVuaWZvcm0gZmxvYXQgZW52TWFwSW50ZW5zdGl5O1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAoIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HICkgKVxcblxcdFxcdHZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG5cXHQjZW5kaWZcXG5cXHQjaWZkZWYgRU5WTUFQX1RZUEVfQ1VCRVxcblxcdFxcdHVuaWZvcm0gc2FtcGxlckN1YmUgZW52TWFwO1xcblxcdCNlbHNlXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgZW52TWFwO1xcblxcdCNlbmRpZlxcblxcdHVuaWZvcm0gZmxvYXQgZmxpcEVudk1hcDtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKSB8fCBkZWZpbmVkKCBQSFlTSUNBTCApXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCByZWZyYWN0aW9uUmF0aW87XFxuXFx0I2Vsc2VcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlJlZmxlY3Q7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfcGFyc192ZXJ0ZXg9XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcblxcdFxcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLmVudm1hcF92ZXJ0ZXg9XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uLnh5ejtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzMgY2FtZXJhVG9WZXJ0ZXggPSBub3JtYWxpemUoIHdvcmxkUG9zaXRpb24ueHl6IC0gY2FtZXJhUG9zaXRpb24gKTtcXG5cXHRcXHR2ZWMzIHdvcmxkTm9ybWFsID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggdHJhbnNmb3JtZWROb3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxcblxcdFxcdFxcdHZSZWZsZWN0ID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2UmVmbGVjdCA9IHJlZnJhY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5mb2dfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0ZPR1xcblxcdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXFxuXFx0XFx0ZmxvYXQgZGVwdGggPSBnbF9GcmFnRGVwdGhFWFQgLyBnbF9GcmFnQ29vcmQudztcXG5cXHQjZWxzZVxcblxcdFxcdGZsb2F0IGRlcHRoID0gZ2xfRnJhZ0Nvb3JkLnogLyBnbF9GcmFnQ29vcmQudztcXG5cXHQjZW5kaWZcXG5cXHQjaWZkZWYgRk9HX0VYUDJcXG5cXHRcXHRmbG9hdCBmb2dGYWN0b3IgPSB3aGl0ZUNvbXBsaW1lbnQoIGV4cDIoIC0gZm9nRGVuc2l0eSAqIGZvZ0RlbnNpdHkgKiBkZXB0aCAqIGRlcHRoICogTE9HMiApICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBmb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGRlcHRoICk7XFxuXFx0I2VuZGlmXFxuXFx0Z2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggZ2xfRnJhZ0NvbG9yLnJnYiwgZm9nQ29sb3IsIGZvZ0ZhY3RvciApO1xcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX3BhcnNfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0ZPR1xcblxcdHVuaWZvcm0gdmVjMyBmb2dDb2xvcjtcXG5cXHQjaWZkZWYgRk9HX0VYUDJcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7XFxuXFx0I2Vsc2VcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGZvZ05lYXI7XFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBmb2dGYXI7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRtYXBfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IFBJICogdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApLnh5eiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBsaWdodE1hcEludGVuc2l0eTtcXG4jZW5kaWZcIjtcblRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19sYW1iZXJ0X3ZlcnRleD1cInZlYzMgZGlmZnVzZSA9IHZlYzMoIDEuMCApO1xcbkdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnk7XFxuZ2VvbWV0cnkucG9zaXRpb24gPSBtdlBvc2l0aW9uLnh5ejtcXG5nZW9tZXRyeS5ub3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuZ2VvbWV0cnkudmlld0RpciA9IG5vcm1hbGl6ZSggLW12UG9zaXRpb24ueHl6ICk7XFxuR2VvbWV0cmljQ29udGV4dCBiYWNrR2VvbWV0cnk7XFxuYmFja0dlb21ldHJ5LnBvc2l0aW9uID0gZ2VvbWV0cnkucG9zaXRpb247XFxuYmFja0dlb21ldHJ5Lm5vcm1hbCA9IC1nZW9tZXRyeS5ub3JtYWw7XFxuYmFja0dlb21ldHJ5LnZpZXdEaXIgPSBnZW9tZXRyeS52aWV3RGlyO1xcbnZMaWdodEZyb250ID0gdmVjMyggMC4wICk7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblxcdHZMaWdodEJhY2sgPSB2ZWMzKCAwLjAgKTtcXG4jZW5kaWZcXG5JbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0O1xcbmZsb2F0IGRvdE5MO1xcbnZlYzMgZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcbiNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0Z2V0UG9pbnREaXJlY3RMaWdodElycmFkaWFuY2UoIHBvaW50TGlnaHRzWyBpIF0sIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApO1xcblxcdFxcdGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZSA9IFBJICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0XFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdFxcdHZMaWdodEJhY2sgKz0gc2F0dXJhdGUoIC1kb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBzcG90TGlnaHRzWyBpIF0sIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApO1xcblxcdFxcdGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZSA9IFBJICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0XFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdFxcdHZMaWdodEJhY2sgKz0gc2F0dXJhdGUoIC1kb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0Z2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGRpcmVjdGlvbmFsTGlnaHRzWyBpIF0sIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApO1xcblxcdFxcdGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZSA9IFBJICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0XFx0dkxpZ2h0RnJvbnQgKz0gc2F0dXJhdGUoIGRvdE5MICkgKiBkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2U7XFxuXFx0XFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdFxcdHZMaWdodEJhY2sgKz0gc2F0dXJhdGUoIC1kb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX0hFTUlfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9IRU1JX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHR2TGlnaHRGcm9udCArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5ICk7XFxuXFx0XFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdFxcdHZMaWdodEJhY2sgKz0gZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggaGVtaXNwaGVyZUxpZ2h0c1sgaSBdLCBiYWNrR2VvbWV0cnkgKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGFycz1cInVuaWZvcm0gdmVjMyBhbWJpZW50TGlnaHRDb2xvcjtcXG52ZWMzIGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIHZlYzMgYW1iaWVudExpZ2h0Q29sb3IgKSB7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gYW1iaWVudExpZ2h0Q29sb3I7XFxuXFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHQjZW5kaWZcXG5cXHRyZXR1cm4gaXJyYWRpYW5jZTtcXG59XFxuI2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdHN0cnVjdCBEaXJlY3Rpb25hbExpZ2h0IHtcXG5cXHRcXHR2ZWMzIGRpcmVjdGlvbjtcXG5cXHRcXHR2ZWMzIGNvbG9yO1xcblxcdFxcdGludCBzaGFkb3c7XFxuXFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblxcdH07XFxuXFx0dW5pZm9ybSBEaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHRzWyBOVU1fRElSX0xJR0hUUyBdO1xcblxcdHZvaWQgZ2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQgKSB7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBkaXJlY3Rpb25hbExpZ2h0LmNvbG9yO1xcblxcdFxcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbmFsTGlnaHQuZGlyZWN0aW9uO1xcblxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSB0cnVlO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgUG9pbnRMaWdodCB7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbjtcXG5cXHRcXHR2ZWMzIGNvbG9yO1xcblxcdFxcdGZsb2F0IGRpc3RhbmNlO1xcblxcdFxcdGZsb2F0IGRlY2F5O1xcblxcdFxcdGludCBzaGFkb3c7XFxuXFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblxcdH07XFxuXFx0dW5pZm9ybSBQb2ludExpZ2h0IHBvaW50TGlnaHRzWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0dm9pZCBnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gUG9pbnRMaWdodCBwb2ludExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCApIHtcXG5cXHRcXHR2ZWMzIGxWZWN0b3IgPSBwb2ludExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblxcdFxcdGlmICggdGVzdExpZ2h0SW5SYW5nZSggbGlnaHREaXN0YW5jZSwgcG9pbnRMaWdodC5kaXN0YW5jZSApICkge1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yID0gcG9pbnRMaWdodC5jb2xvcjtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBsaWdodERpc3RhbmNlLCBwb2ludExpZ2h0LmRpc3RhbmNlLCBwb2ludExpZ2h0LmRlY2F5ICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XFxuXFx0XFx0fSBlbHNlIHtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IHZlYzMoIDAuMCApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSBmYWxzZTtcXG5cXHRcXHR9XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IFNwb3RMaWdodCB7XFxuXFx0XFx0dmVjMyBwb3NpdGlvbjtcXG5cXHRcXHR2ZWMzIGRpcmVjdGlvbjtcXG5cXHRcXHR2ZWMzIGNvbG9yO1xcblxcdFxcdGZsb2F0IGRpc3RhbmNlO1xcblxcdFxcdGZsb2F0IGRlY2F5O1xcblxcdFxcdGZsb2F0IGNvbmVDb3M7XFxuXFx0XFx0ZmxvYXQgcGVudW1icmFDb3M7XFxuXFx0XFx0aW50IHNoYWRvdztcXG5cXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIFNwb3RMaWdodCBzcG90TGlnaHRzWyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cXHR2b2lkIGdldFNwb3REaXJlY3RMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIFNwb3RMaWdodCBzcG90TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIG91dCBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0ICApIHtcXG5cXHRcXHR2ZWMzIGxWZWN0b3IgPSBzcG90TGlnaHQucG9zaXRpb24gLSBnZW9tZXRyeS5wb3NpdGlvbjtcXG5cXHRcXHRkaXJlY3RMaWdodC5kaXJlY3Rpb24gPSBub3JtYWxpemUoIGxWZWN0b3IgKTtcXG5cXHRcXHRmbG9hdCBsaWdodERpc3RhbmNlID0gbGVuZ3RoKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgYW5nbGVDb3MgPSBkb3QoIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiwgc3BvdExpZ2h0LmRpcmVjdGlvbiApO1xcblxcdFxcdGlmICggYWxsKCBidmVjMiggYW5nbGVDb3MgPiBzcG90TGlnaHQuY29uZUNvcywgdGVzdExpZ2h0SW5SYW5nZSggbGlnaHREaXN0YW5jZSwgc3BvdExpZ2h0LmRpc3RhbmNlICkgKSApICkge1xcblxcdFxcdFxcdGZsb2F0IHNwb3RFZmZlY3QgPSBzbW9vdGhzdGVwKCBzcG90TGlnaHQuY29uZUNvcywgc3BvdExpZ2h0LnBlbnVtYnJhQ29zLCBhbmdsZUNvcyApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yID0gc3BvdExpZ2h0LmNvbG9yO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IHNwb3RFZmZlY3QgKiBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBsaWdodERpc3RhbmNlLCBzcG90TGlnaHQuZGlzdGFuY2UsIHNwb3RMaWdodC5kZWNheSApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSB0cnVlO1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSB2ZWMzKCAwLjAgKTtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC52aXNpYmxlID0gZmFsc2U7XFxuXFx0XFx0fVxcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX0hFTUlfTElHSFRTID4gMFxcblxcdHN0cnVjdCBIZW1pc3BoZXJlTGlnaHQge1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgc2t5Q29sb3I7XFxuXFx0XFx0dmVjMyBncm91bmRDb2xvcjtcXG5cXHR9O1xcblxcdHVuaWZvcm0gSGVtaXNwaGVyZUxpZ2h0IGhlbWlzcGhlcmVMaWdodHNbIE5VTV9IRU1JX0xJR0hUUyBdO1xcblxcdHZlYzMgZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gSGVtaXNwaGVyZUxpZ2h0IGhlbWlMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSApIHtcXG5cXHRcXHRmbG9hdCBkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBoZW1pTGlnaHQuZGlyZWN0aW9uICk7XFxuXFx0XFx0ZmxvYXQgaGVtaURpZmZ1c2VXZWlnaHQgPSAwLjUgKiBkb3ROTCArIDAuNTtcXG5cXHRcXHR2ZWMzIGlycmFkaWFuY2UgPSBtaXgoIGhlbWlMaWdodC5ncm91bmRDb2xvciwgaGVtaUxpZ2h0LnNreUNvbG9yLCBoZW1pRGlmZnVzZVdlaWdodCApO1xcblxcdFxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIGlycmFkaWFuY2U7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUEhZU0lDQUwgKVxcblxcdHZlYzMgZ2V0TGlnaHRQcm9iZUluZGlyZWN0SXJyYWRpYW5jZSggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xcblxcdFxcdCNpbmNsdWRlIDxub3JtYWxfZmxpcD5cXG5cXHRcXHR2ZWMzIHdvcmxkTm9ybWFsID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggZ2VvbWV0cnkubm9ybWFsLCB2aWV3TWF0cml4ICk7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHRcXHR2ZWMzIHF1ZXJ5VmVjID0gZmxpcE5vcm1hbCAqIHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVZlYyA9IGZsaXBOb3JtYWwgKiB2ZWMzKCBmbGlwRW52TWFwICogd29ybGROb3JtYWwueCwgd29ybGROb3JtYWwueXogKTtcXG5cXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVVViggcXVlcnlWZWMsIDEuMCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHZlYzQoIDAuMCApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdHJldHVybiBQSSAqIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHR9XFxuXFx0ZmxvYXQgZ2V0U3BlY3VsYXJNSVBMZXZlbCggY29uc3QgaW4gZmxvYXQgYmxpbm5TaGluaW5lc3NFeHBvbmVudCwgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xcblxcdFxcdGZsb2F0IG1heE1JUExldmVsU2NhbGFyID0gZmxvYXQoIG1heE1JUExldmVsICk7XFxuXFx0XFx0ZmxvYXQgZGVzaXJlZE1JUExldmVsID0gbWF4TUlQTGV2ZWxTY2FsYXIgLSAwLjc5MjQ4IC0gMC41ICogbG9nMiggcG93MiggYmxpbm5TaGluaW5lc3NFeHBvbmVudCApICsgMS4wICk7XFxuXFx0XFx0cmV0dXJuIGNsYW1wKCBkZXNpcmVkTUlQTGV2ZWwsIDAuMCwgbWF4TUlQTGV2ZWxTY2FsYXIgKTtcXG5cXHR9XFxuXFx0dmVjMyBnZXRMaWdodFByb2JlSW5kaXJlY3RSYWRpYW5jZSggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gZmxvYXQgYmxpbm5TaGluaW5lc3NFeHBvbmVudCwgY29uc3QgaW4gaW50IG1heE1JUExldmVsICkge1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggLWdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5Lm5vcm1hbCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmcmFjdCggLWdlb21ldHJ5LnZpZXdEaXIsIGdlb21ldHJ5Lm5vcm1hbCwgcmVmcmFjdGlvblJhdGlvICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0I2luY2x1ZGUgPG5vcm1hbF9mbGlwPlxcblxcdFxcdHJlZmxlY3RWZWMgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCByZWZsZWN0VmVjLCB2aWV3TWF0cml4ICk7XFxuXFx0XFx0ZmxvYXQgc3BlY3VsYXJNSVBMZXZlbCA9IGdldFNwZWN1bGFyTUlQTGV2ZWwoIGJsaW5uU2hpbmluZXNzRXhwb25lbnQsIG1heE1JUExldmVsICk7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHRcXHR2ZWMzIHF1ZXJ5UmVmbGVjdFZlYyA9IGZsaXBOb3JtYWwgKiB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICk7XFxuXFx0XFx0XFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZUxvZEVYVCggZW52TWFwLCBxdWVyeVJlZmxlY3RWZWMsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZWxzZVxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZSggZW52TWFwLCBxdWVyeVJlZmxlY3RWZWMsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZW5kaWZcXG5cXHRcXHRcXHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcXG5cXHRcXHRcXHR2ZWMzIHF1ZXJ5UmVmbGVjdFZlYyA9IGZsaXBOb3JtYWwgKiB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICk7XFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYocXVlcnlSZWZsZWN0VmVjLCBCbGlubkV4cG9uZW50VG9HR1hSb3VnaG5lc3MoYmxpbm5TaGluaW5lc3NFeHBvbmVudCkpO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0VRVUlSRUMgKVxcblxcdFxcdFxcdHZlYzIgc2FtcGxlVVY7XFxuXFx0XFx0XFx0c2FtcGxlVVYueSA9IHNhdHVyYXRlKCBmbGlwTm9ybWFsICogcmVmbGVjdFZlYy55ICogMC41ICsgMC41ICk7XFxuXFx0XFx0XFx0c2FtcGxlVVYueCA9IGF0YW4oIGZsaXBOb3JtYWwgKiByZWZsZWN0VmVjLnosIGZsaXBOb3JtYWwgKiByZWZsZWN0VmVjLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJETG9kRVhUKCBlbnZNYXAsIHNhbXBsZVVWLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHNhbXBsZVVWLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfU1BIRVJFIClcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWaWV3ID0gZmxpcE5vcm1hbCAqIG5vcm1hbGl6ZSggKCB2aWV3TWF0cml4ICogdmVjNCggcmVmbGVjdFZlYywgMC4wICkgKS54eXogKyB2ZWMzKCAwLjAsMC4wLDEuMCApICk7XFxuXFx0XFx0XFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkRMb2RFWFQoIGVudk1hcCwgcmVmbGVjdFZpZXcueHkgKiAwLjUgKyAwLjUsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZWxzZVxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgcmVmbGVjdFZpZXcueHkgKiAwLjUgKyAwLjUsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZW5kaWZcXG5cXHRcXHRcXHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZXR1cm4gZW52TWFwQ29sb3IucmdiICogZW52TWFwSW50ZW5zaXR5O1xcblxcdH1cXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19waG9uZ19mcmFnbWVudD1cIkJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbDtcXG5tYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBkaWZmdXNlQ29sb3IucmdiO1xcbm1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBzcGVjdWxhcjtcXG5tYXRlcmlhbC5zcGVjdWxhclNoaW5pbmVzcyA9IHNoaW5pbmVzcztcXG5tYXRlcmlhbC5zcGVjdWxhclN0cmVuZ3RoID0gc3BlY3VsYXJTdHJlbmd0aDtcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGhvbmdfcGFyc19mcmFnbWVudD1cInZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG5zdHJ1Y3QgQmxpbm5QaG9uZ01hdGVyaWFsIHtcXG5cXHR2ZWMzXFx0ZGlmZnVzZUNvbG9yO1xcblxcdHZlYzNcXHRzcGVjdWxhckNvbG9yO1xcblxcdGZsb2F0XFx0c3BlY3VsYXJTaGluaW5lc3M7XFxuXFx0ZmxvYXRcXHRzcGVjdWxhclN0cmVuZ3RoO1xcbn07XFxudm9pZCBSRV9EaXJlY3RfQmxpbm5QaG9uZyggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGlycmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0JsaW5uUGhvbmcoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgKSAqIG1hdGVyaWFsLnNwZWN1bGFyU3RyZW5ndGg7XFxufVxcbnZvaWQgUkVfSW5kaXJlY3REaWZmdXNlX0JsaW5uUGhvbmcoIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxuI2RlZmluZSBSRV9EaXJlY3RcXHRcXHRcXHRcXHRSRV9EaXJlY3RfQmxpbm5QaG9uZ1xcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXFx0XFx0UkVfSW5kaXJlY3REaWZmdXNlX0JsaW5uUGhvbmdcXG4jZGVmaW5lIE1hdGVyaWFsX0xpZ2h0UHJvYmVMT0QoIG1hdGVyaWFsIClcXHQoMClcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19waHlzaWNhbF9mcmFnbWVudD1cIlBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWw7XFxubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYiAqICggMS4wIC0gbWV0YWxuZXNzRmFjdG9yICk7XFxubWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgPSBjbGFtcCggcm91Z2huZXNzRmFjdG9yLCAwLjA0LCAxLjAgKTtcXG4jaWZkZWYgU1RBTkRBUkRcXG5cXHRtYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gbWl4KCB2ZWMzKCBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICksIGRpZmZ1c2VDb2xvci5yZ2IsIG1ldGFsbmVzc0ZhY3RvciApO1xcbiNlbHNlXFxuXFx0bWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG1peCggdmVjMyggTUFYSU1VTV9TUEVDVUxBUl9DT0VGRklDSUVOVCAqIHBvdzIoIHJlZmxlY3Rpdml0eSApICksIGRpZmZ1c2VDb2xvci5yZ2IsIG1ldGFsbmVzc0ZhY3RvciApO1xcblxcdG1hdGVyaWFsLmNsZWFyQ29hdCA9IHNhdHVyYXRlKCBjbGVhckNvYXQgKTtcXHRtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MgPSBjbGFtcCggY2xlYXJDb2F0Um91Z2huZXNzLCAwLjA0LCAxLjAgKTtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmxpZ2h0c19waHlzaWNhbF9wYXJzX2ZyYWdtZW50PVwic3RydWN0IFBoeXNpY2FsTWF0ZXJpYWwge1xcblxcdHZlYzNcXHRkaWZmdXNlQ29sb3I7XFxuXFx0ZmxvYXRcXHRzcGVjdWxhclJvdWdobmVzcztcXG5cXHR2ZWMzXFx0c3BlY3VsYXJDb2xvcjtcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0O1xcblxcdFxcdGZsb2F0IGNsZWFyQ29hdFJvdWdobmVzcztcXG5cXHQjZW5kaWZcXG59O1xcbiNkZWZpbmUgTUFYSU1VTV9TUEVDVUxBUl9DT0VGRklDSUVOVCAwLjE2XFxuI2RlZmluZSBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UIDAuMDRcXG5mbG9hdCBjbGVhckNvYXRESFJBcHByb3goIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcywgY29uc3QgaW4gZmxvYXQgZG90TkwgKSB7XFxuXFx0cmV0dXJuIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKyAoIDEuMCAtIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSAqICggcG93KCAxLjAgLSBkb3ROTCwgNS4wICkgKiBwb3coIDEuMCAtIHJvdWdobmVzcywgMi4wICkgKTtcXG59XFxudm9pZCBSRV9EaXJlY3RfUGh5c2ljYWwoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdGZsb2F0IGRvdE5MID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKSApO1xcblxcdHZlYzMgaXJyYWRpYW5jZSA9IGRvdE5MICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHQjZW5kaWZcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0REhSID0gbWF0ZXJpYWwuY2xlYXJDb2F0ICogY2xlYXJDb2F0REhSQXBwcm94KCBtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MsIGRvdE5MICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXRESFIgPSAwLjA7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gKCAxLjAgLSBjbGVhckNvYXRESFIgKSAqIGlycmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0dHWCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKz0gKCAxLjAgLSBjbGVhckNvYXRESFIgKSAqIGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxuXFx0I2lmbmRlZiBTVEFOREFSRFxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGlycmFkaWFuY2UgKiBtYXRlcmlhbC5jbGVhckNvYXQgKiBCUkRGX1NwZWN1bGFyX0dHWCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCB2ZWMzKCBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICksIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyApO1xcblxcdCNlbmRpZlxcbn1cXG52b2lkIFJFX0luZGlyZWN0RGlmZnVzZV9QaHlzaWNhbCggY29uc3QgaW4gdmVjMyBpcnJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxudm9pZCBSRV9JbmRpcmVjdFNwZWN1bGFyX1BoeXNpY2FsKCBjb25zdCBpbiB2ZWMzIHJhZGlhbmNlLCBjb25zdCBpbiB2ZWMzIGNsZWFyQ29hdFJhZGlhbmNlLCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdFxcdGZsb2F0IGRvdE5MID0gZG90TlY7XFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0REhSID0gbWF0ZXJpYWwuY2xlYXJDb2F0ICogY2xlYXJDb2F0REhSQXBwcm94KCBtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MsIGRvdE5MICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXRESFIgPSAwLjA7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArPSAoIDEuMCAtIGNsZWFyQ29hdERIUiApICogcmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggZ2VvbWV0cnksIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IsIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzICk7XFxuXFx0I2lmbmRlZiBTVEFOREFSRFxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gY2xlYXJDb2F0UmFkaWFuY2UgKiBtYXRlcmlhbC5jbGVhckNvYXQgKiBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggZ2VvbWV0cnksIHZlYzMoIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSwgbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzICk7XFxuXFx0I2VuZGlmXFxufVxcbiNkZWZpbmUgUkVfRGlyZWN0XFx0XFx0XFx0XFx0UkVfRGlyZWN0X1BoeXNpY2FsXFxuI2RlZmluZSBSRV9JbmRpcmVjdERpZmZ1c2VcXHRcXHRSRV9JbmRpcmVjdERpZmZ1c2VfUGh5c2ljYWxcXG4jZGVmaW5lIFJFX0luZGlyZWN0U3BlY3VsYXJcXHRcXHRSRV9JbmRpcmVjdFNwZWN1bGFyX1BoeXNpY2FsXFxuI2RlZmluZSBNYXRlcmlhbF9CbGlublNoaW5pbmVzc0V4cG9uZW50KCBtYXRlcmlhbCApICAgR0dYUm91Z2huZXNzVG9CbGlubkV4cG9uZW50KCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApXFxuI2RlZmluZSBNYXRlcmlhbF9DbGVhckNvYXRfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSAgIEdHWFJvdWdobmVzc1RvQmxpbm5FeHBvbmVudCggbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzIClcXG5mbG9hdCBjb21wdXRlU3BlY3VsYXJPY2NsdXNpb24oIGNvbnN0IGluIGZsb2F0IGRvdE5WLCBjb25zdCBpbiBmbG9hdCBhbWJpZW50T2NjbHVzaW9uLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0cmV0dXJuIHNhdHVyYXRlKCBwb3coIGRvdE5WICsgYW1iaWVudE9jY2x1c2lvbiwgZXhwMiggLSAxNi4wICogcm91Z2huZXNzIC0gMS4wICkgKSAtIDEuMCArIGFtYmllbnRPY2NsdXNpb24gKTtcXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5saWdodHNfdGVtcGxhdGU9XCJcXG5HZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5O1xcbmdlb21ldHJ5LnBvc2l0aW9uID0gLSB2Vmlld1Bvc2l0aW9uO1xcbmdlb21ldHJ5Lm5vcm1hbCA9IG5vcm1hbDtcXG5nZW9tZXRyeS52aWV3RGlyID0gbm9ybWFsaXplKCB2Vmlld1Bvc2l0aW9uICk7XFxuSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodDtcXG4jaWYgKCBOVU1fUE9JTlRfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0UG9pbnRMaWdodCBwb2ludExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0cG9pbnRMaWdodCA9IHBvaW50TGlnaHRzWyBpIF07XFxuXFx0XFx0Z2V0UG9pbnREaXJlY3RMaWdodElycmFkaWFuY2UoIHBvaW50TGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggcG9pbnRMaWdodC5zaGFkb3csIGRpcmVjdExpZ2h0LnZpc2libGUgKSApID8gZ2V0UG9pbnRTaGFkb3coIHBvaW50U2hhZG93TWFwWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93TWFwU2l6ZSwgcG9pbnRMaWdodC5zaGFkb3dCaWFzLCBwb2ludExpZ2h0LnNoYWRvd1JhZGl1cywgdlBvaW50U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmICggTlVNX1NQT1RfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0U3BvdExpZ2h0IHNwb3RMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0c3BvdExpZ2h0ID0gc3BvdExpZ2h0c1sgaSBdO1xcblxcdFxcdGdldFNwb3REaXJlY3RMaWdodElycmFkaWFuY2UoIHNwb3RMaWdodCwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0I2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBzcG90TGlnaHQuc2hhZG93LCBkaXJlY3RMaWdodC52aXNpYmxlICkgKSA/IGdldFNoYWRvdyggc3BvdFNoYWRvd01hcFsgaSBdLCBzcG90TGlnaHQuc2hhZG93TWFwU2l6ZSwgc3BvdExpZ2h0LnNoYWRvd0JpYXMsIHNwb3RMaWdodC5zaGFkb3dSYWRpdXMsIHZTcG90U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmICggTlVNX0RJUl9MSUdIVFMgPiAwICkgJiYgZGVmaW5lZCggUkVfRGlyZWN0IClcXG5cXHREaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF07XFxuXFx0XFx0Z2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGRpcmVjdGlvbmFsTGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggZGlyZWN0aW9uYWxMaWdodC5zaGFkb3csIGRpcmVjdExpZ2h0LnZpc2libGUgKSApID8gZ2V0U2hhZG93KCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgaSBdLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd01hcFNpemUsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93QmlhcywgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dSYWRpdXMsIHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKCBSRV9JbmRpcmVjdERpZmZ1c2UgKVxcblxcdHZlYzMgaXJyYWRpYW5jZSA9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XFxuXFx0I2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdFxcdHZlYzMgbGlnaHRNYXBJcnJhZGlhbmNlID0gdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApLnh5eiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xcblxcdFxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdFxcdGxpZ2h0TWFwSXJyYWRpYW5jZSAqPSBQSTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRpcnJhZGlhbmNlICs9IGxpZ2h0TWFwSXJyYWRpYW5jZTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgKCBOVU1fSEVNSV9MSUdIVFMgPiAwIClcXG5cXHRcXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0XFx0aXJyYWRpYW5jZSArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5ICk7XFxuXFx0XFx0fVxcblxcdCNlbmRpZlxcblxcdCNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcXG5cXHQgXFx0aXJyYWRpYW5jZSArPSBnZXRMaWdodFByb2JlSW5kaXJlY3RJcnJhZGlhbmNlKCBnZW9tZXRyeSwgOCApO1xcblxcdCNlbmRpZlxcblxcdFJFX0luZGlyZWN0RGlmZnVzZSggaXJyYWRpYW5jZSwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUkVfSW5kaXJlY3RTcGVjdWxhciApXFxuXFx0dmVjMyByYWRpYW5jZSA9IGdldExpZ2h0UHJvYmVJbmRpcmVjdFJhZGlhbmNlKCBnZW9tZXRyeSwgTWF0ZXJpYWxfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSwgOCApO1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHR2ZWMzIGNsZWFyQ29hdFJhZGlhbmNlID0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGdlb21ldHJ5LCBNYXRlcmlhbF9DbGVhckNvYXRfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSwgOCApO1xcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyBjbGVhckNvYXRSYWRpYW5jZSA9IHZlYzMoIDAuMCApO1xcblxcdCNlbmRpZlxcblxcdFxcdFxcblxcdFJFX0luZGlyZWN0U3BlY3VsYXIoIHJhZGlhbmNlLCBjbGVhckNvYXRSYWRpYW5jZSwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubG9nZGVwdGhidWZfZnJhZ21lbnQ9XCIjaWYgZGVmaW5lZChVU0VfTE9HREVQVEhCVUYpICYmIGRlZmluZWQoVVNFX0xPR0RFUFRIQlVGX0VYVClcXG5cXHRnbF9GcmFnRGVwdGhFWFQgPSBsb2cyKHZGcmFnRGVwdGgpICogbG9nRGVwdGhCdWZGQyAqIDAuNTtcXG4jZW5kaWZcIjtUSFJFRS5TaGFkZXJDaHVuay5sb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblxcdHVuaWZvcm0gZmxvYXQgbG9nRGVwdGhCdWZGQztcXG5cXHQjaWZkZWYgVVNFX0xPR0RFUFRIQlVGX0VYVFxcblxcdFxcdHZhcnlpbmcgZmxvYXQgdkZyYWdEZXB0aDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5sb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD1cIiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcXG5cXHQjaWZkZWYgVVNFX0xPR0RFUFRIQlVGX0VYVFxcblxcdFxcdHZhcnlpbmcgZmxvYXQgdkZyYWdEZXB0aDtcXG5cXHQjZW5kaWZcXG5cXHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XFxuI2VuZGlmXCI7XG5USFJFRS5TaGFkZXJDaHVuay5sb2dkZXB0aGJ1Zl92ZXJ0ZXg9XCIjaWZkZWYgVVNFX0xPR0RFUFRIQlVGXFxuXFx0Z2xfUG9zaXRpb24ueiA9IGxvZzIobWF4KCBFUFNJTE9OLCBnbF9Qb3NpdGlvbi53ICsgMS4wICkpICogbG9nRGVwdGhCdWZGQztcXG5cXHQjaWZkZWYgVVNFX0xPR0RFUFRIQlVGX0VYVFxcblxcdFxcdHZGcmFnRGVwdGggPSAxLjAgKyBnbF9Qb3NpdGlvbi53O1xcblxcdCNlbHNlXFxuXFx0XFx0Z2xfUG9zaXRpb24ueiA9IChnbF9Qb3NpdGlvbi56IC0gMS4wKSAqIGdsX1Bvc2l0aW9uLnc7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsubWFwX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9NQVBcXG5cXHR2ZWM0IHRleGVsQ29sb3IgPSB0ZXh0dXJlMkQoIG1hcCwgdlV2ICk7XFxuXFx0dGV4ZWxDb2xvciA9IG1hcFRleGVsVG9MaW5lYXIoIHRleGVsQ29sb3IgKTtcXG5cXHRkaWZmdXNlQ29sb3IgKj0gdGV4ZWxDb2xvcjtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJzX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9NQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnRpY2xlX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9NQVBcXG5cXHR2ZWM0IG1hcFRleGVsID0gdGV4dHVyZTJEKCBtYXAsIHZlYzIoIGdsX1BvaW50Q29vcmQueCwgMS4wIC0gZ2xfUG9pbnRDb29yZC55ICkgKiBvZmZzZXRSZXBlYXQuencgKyBvZmZzZXRSZXBlYXQueHkgKTtcXG5cXHRkaWZmdXNlQ29sb3IgKj0gbWFwVGV4ZWxUb0xpbmVhciggbWFwVGV4ZWwgKTtcXG4jZW5kaWZcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5tYXBfcGFydGljbGVfcGFyc19mcmFnbWVudD1cIiNpZmRlZiBVU0VfTUFQXFxuXFx0dW5pZm9ybSB2ZWM0IG9mZnNldFJlcGVhdDtcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsubWV0YWxuZXNzbWFwX2ZyYWdtZW50PVwiZmxvYXQgbWV0YWxuZXNzRmFjdG9yID0gbWV0YWxuZXNzO1xcbiNpZmRlZiBVU0VfTUVUQUxORVNTTUFQXFxuXFx0dmVjNCB0ZXhlbE1ldGFsbmVzcyA9IHRleHR1cmUyRCggbWV0YWxuZXNzTWFwLCB2VXYgKTtcXG5cXHRtZXRhbG5lc3NGYWN0b3IgKj0gdGV4ZWxNZXRhbG5lc3MucjtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLm1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9NRVRBTE5FU1NNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtZXRhbG5lc3NNYXA7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsubW9ycGhub3JtYWxfdmVydGV4PVwiI2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHRvYmplY3ROb3JtYWwgKz0gKCBtb3JwaE5vcm1hbDAgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xcblxcdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMSAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxuXFx0b2JqZWN0Tm9ybWFsICs9ICggbW9ycGhOb3JtYWwyIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcXG5cXHRvYmplY3ROb3JtYWwgKz0gKCBtb3JwaE5vcm1hbDMgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg9XCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xcblxcdCNpZm5kZWYgVVNFX01PUlBITk9STUFMU1xcblxcdHVuaWZvcm0gZmxvYXQgbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA4IF07XFxuXFx0I2Vsc2VcXG5cXHR1bmlmb3JtIGZsb2F0IG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNCBdO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiO1RIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3ZlcnRleD1cIiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDAgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAwIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDEgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDIgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDMgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAzIF07XFxuXFx0I2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDQgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDUgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA1IF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDYgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA2IF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDcgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA3IF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5ub3JtYWxfZmxpcD1cIiNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRmbG9hdCBmbGlwTm9ybWFsID0gKCBmbG9hdCggZ2xfRnJvbnRGYWNpbmcgKSAqIDIuMCAtIDEuMCApO1xcbiNlbHNlXFxuXFx0ZmxvYXQgZmxpcE5vcm1hbCA9IDEuMDtcXG4jZW5kaWZcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5ub3JtYWxfZnJhZ21lbnQ9XCIjaWZkZWYgRkxBVF9TSEFERURcXG5cXHR2ZWMzIGZkeCA9IHZlYzMoIGRGZHgoIHZWaWV3UG9zaXRpb24ueCApLCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnkgKSwgZEZkeCggdlZpZXdQb3NpdGlvbi56ICkgKTtcXG5cXHR2ZWMzIGZkeSA9IHZlYzMoIGRGZHkoIHZWaWV3UG9zaXRpb24ueCApLCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnkgKSwgZEZkeSggdlZpZXdQb3NpdGlvbi56ICkgKTtcXG5cXHR2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggY3Jvc3MoIGZkeCwgZmR5ICkgKTtcXG4jZWxzZVxcblxcdHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCB2Tm9ybWFsICkgKiBmbGlwTm9ybWFsO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTk9STUFMTUFQXFxuXFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbDJBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwgKTtcXG4jZWxpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXFxuXFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbEFyYiggLXZWaWV3UG9zaXRpb24sIG5vcm1hbCwgZEhkeHlfZndkKCkgKTtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLm5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9OT1JNQUxNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBub3JtYWxNYXA7XFxuXFx0dW5pZm9ybSB2ZWMyIG5vcm1hbFNjYWxlO1xcblxcdHZlYzMgcGVydHVyYk5vcm1hbDJBcmIoIHZlYzMgZXllX3BvcywgdmVjMyBzdXJmX25vcm0gKSB7XFxuXFx0XFx0dmVjMyBxMCA9IGRGZHgoIGV5ZV9wb3MueHl6ICk7XFxuXFx0XFx0dmVjMyBxMSA9IGRGZHkoIGV5ZV9wb3MueHl6ICk7XFxuXFx0XFx0dmVjMiBzdDAgPSBkRmR4KCB2VXYuc3QgKTtcXG5cXHRcXHR2ZWMyIHN0MSA9IGRGZHkoIHZVdi5zdCApO1xcblxcdFxcdHZlYzMgUyA9IG5vcm1hbGl6ZSggcTAgKiBzdDEudCAtIHExICogc3QwLnQgKTtcXG5cXHRcXHR2ZWMzIFQgPSBub3JtYWxpemUoIC1xMCAqIHN0MS5zICsgcTEgKiBzdDAucyApO1xcblxcdFxcdHZlYzMgTiA9IG5vcm1hbGl6ZSggc3VyZl9ub3JtICk7XFxuXFx0XFx0dmVjMyBtYXBOID0gdGV4dHVyZTJEKCBub3JtYWxNYXAsIHZVdiApLnh5eiAqIDIuMCAtIDEuMDtcXG5cXHRcXHRtYXBOLnh5ID0gbm9ybWFsU2NhbGUgKiBtYXBOLnh5O1xcblxcdFxcdG1hdDMgdHNuID0gbWF0MyggUywgVCwgTiApO1xcblxcdFxcdHJldHVybiBub3JtYWxpemUoIHRzbiAqIG1hcE4gKTtcXG5cXHR9XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5wYWNraW5nPVwidmVjMyBwYWNrTm9ybWFsVG9SR0IoIGNvbnN0IGluIHZlYzMgbm9ybWFsICkge1xcbiAgcmV0dXJuIG5vcm1hbGl6ZSggbm9ybWFsICkgKiAwLjUgKyAwLjU7XFxufVxcbnZlYzMgdW5wYWNrUkdCVG9Ob3JtYWwoIGNvbnN0IGluIHZlYzMgcmdiICkge1xcbiAgcmV0dXJuIDEuMCAtIDIuMCAqIHJnYi54eXo7XFxufVxcbmNvbnN0IGZsb2F0IFBhY2tVcHNjYWxlID0gMjU2LiAvIDI1NS47Y29uc3QgZmxvYXQgVW5wYWNrRG93bnNjYWxlID0gMjU1LiAvIDI1Ni47XFxuY29uc3QgdmVjMyBQYWNrRmFjdG9ycyA9IHZlYzMoIDI1Ni4gKiAyNTYuICogMjU2LiwgMjU2LiAqIDI1Ni4sICAyNTYuICk7XFxuY29uc3QgdmVjNCBVbnBhY2tGYWN0b3JzID0gVW5wYWNrRG93bnNjYWxlIC8gdmVjNCggUGFja0ZhY3RvcnMsIDEuICk7XFxuY29uc3QgZmxvYXQgU2hpZnRSaWdodDggPSAxLiAvIDI1Ni47XFxudmVjNCBwYWNrRGVwdGhUb1JHQkEoIGNvbnN0IGluIGZsb2F0IHYgKSB7XFxuXFx0dmVjNCByID0gdmVjNCggZnJhY3QoIHYgKiBQYWNrRmFjdG9ycyApLCB2ICk7XFxuXFx0ci55encgLT0gci54eXogKiBTaGlmdFJpZ2h0ODtcXHRyZXR1cm4gciAqIFBhY2tVcHNjYWxlO1xcbn1cXG5mbG9hdCB1bnBhY2tSR0JBVG9EZXB0aCggY29uc3QgaW4gdmVjNCB2ICkge1xcblxcdHJldHVybiBkb3QoIHYsIFVucGFja0ZhY3RvcnMgKTtcXG59XFxuZmxvYXQgdmlld1pUb09ydGhvZ3JhcGhpY0RlcHRoKCBjb25zdCBpbiBmbG9hdCB2aWV3WiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcbiAgcmV0dXJuICggdmlld1ogKyBuZWFyICkgLyAoIG5lYXIgLSBmYXIgKTtcXG59XFxuZmxvYXQgb3J0aG9ncmFwaGljRGVwdGhUb1ZpZXdaKCBjb25zdCBpbiBmbG9hdCBsaW5lYXJDbGlwWiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcbiAgcmV0dXJuIGxpbmVhckNsaXBaICogKCBuZWFyIC0gZmFyICkgLSBuZWFyO1xcbn1cXG5mbG9hdCB2aWV3WlRvUGVyc3BlY3RpdmVEZXB0aCggY29uc3QgaW4gZmxvYXQgdmlld1osIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG4gIHJldHVybiAoKCBuZWFyICsgdmlld1ogKSAqIGZhciApIC8gKCggZmFyIC0gbmVhciApICogdmlld1ogKTtcXG59XFxuZmxvYXQgcGVyc3BlY3RpdmVEZXB0aFRvVmlld1ooIGNvbnN0IGluIGZsb2F0IGludkNsaXBaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuICByZXR1cm4gKCBuZWFyICogZmFyICkgLyAoICggZmFyIC0gbmVhciApICogaW52Q2xpcFogLSBmYXIgKTtcXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5wcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PVwiI2lmZGVmIFBSRU1VTFRJUExJRURfQUxQSEFcXG5cXHRnbF9GcmFnQ29sb3IucmdiICo9IGdsX0ZyYWdDb2xvci5hO1xcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLnByb2plY3RfdmVydGV4PVwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdHZlYzQgbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHNraW5uZWQ7XFxuI2Vsc2VcXG5cXHR2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XFxuI2VuZGlmXFxuZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5yb3VnaG5lc3NtYXBfZnJhZ21lbnQ9XCJmbG9hdCByb3VnaG5lc3NGYWN0b3IgPSByb3VnaG5lc3M7XFxuI2lmZGVmIFVTRV9ST1VHSE5FU1NNQVBcXG5cXHR2ZWM0IHRleGVsUm91Z2huZXNzID0gdGV4dHVyZTJEKCByb3VnaG5lc3NNYXAsIHZVdiApO1xcblxcdHJvdWdobmVzc0ZhY3RvciAqPSB0ZXhlbFJvdWdobmVzcy5yO1xcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsucm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX1JPVUdITkVTU01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIHJvdWdobmVzc01hcDtcXG4jZW5kaWZcIjtUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfcGFyc19mcmFnbWVudD1cIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBOVU1fRElSX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIHNwb3RTaGFkb3dNYXBbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2U3BvdFNoYWRvd0Nvb3JkWyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBwb2ludFNoYWRvd01hcFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcblxcdGZsb2F0IHRleHR1cmUyRENvbXBhcmUoIHNhbXBsZXIyRCBkZXB0aHMsIHZlYzIgdXYsIGZsb2F0IGNvbXBhcmUgKSB7XFxuXFx0XFx0cmV0dXJuIHN0ZXAoIGNvbXBhcmUsIHVucGFja1JHQkFUb0RlcHRoKCB0ZXh0dXJlMkQoIGRlcHRocywgdXYgKSApICk7XFxuXFx0fVxcblxcdGZsb2F0IHRleHR1cmUyRFNoYWRvd0xlcnAoIHNhbXBsZXIyRCBkZXB0aHMsIHZlYzIgc2l6ZSwgdmVjMiB1diwgZmxvYXQgY29tcGFyZSApIHtcXG5cXHRcXHRjb25zdCB2ZWMyIG9mZnNldCA9IHZlYzIoIDAuMCwgMS4wICk7XFxuXFx0XFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvIHNpemU7XFxuXFx0XFx0dmVjMiBjZW50cm9pZFVWID0gZmxvb3IoIHV2ICogc2l6ZSArIDAuNSApIC8gc2l6ZTtcXG5cXHRcXHRmbG9hdCBsYiA9IHRleHR1cmUyRENvbXBhcmUoIGRlcHRocywgY2VudHJvaWRVViArIHRleGVsU2l6ZSAqIG9mZnNldC54eCwgY29tcGFyZSApO1xcblxcdFxcdGZsb2F0IGx0ID0gdGV4dHVyZTJEQ29tcGFyZSggZGVwdGhzLCBjZW50cm9pZFVWICsgdGV4ZWxTaXplICogb2Zmc2V0Lnh5LCBjb21wYXJlICk7XFxuXFx0XFx0ZmxvYXQgcmIgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueXgsIGNvbXBhcmUgKTtcXG5cXHRcXHRmbG9hdCBydCA9IHRleHR1cmUyRENvbXBhcmUoIGRlcHRocywgY2VudHJvaWRVViArIHRleGVsU2l6ZSAqIG9mZnNldC55eSwgY29tcGFyZSApO1xcblxcdFxcdHZlYzIgZiA9IGZyYWN0KCB1diAqIHNpemUgKyAwLjUgKTtcXG5cXHRcXHRmbG9hdCBhID0gbWl4KCBsYiwgbHQsIGYueSApO1xcblxcdFxcdGZsb2F0IGIgPSBtaXgoIHJiLCBydCwgZi55ICk7XFxuXFx0XFx0ZmxvYXQgYyA9IG1peCggYSwgYiwgZi54ICk7XFxuXFx0XFx0cmV0dXJuIGM7XFxuXFx0fVxcblxcdGZsb2F0IGdldFNoYWRvdyggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjMiBzaGFkb3dNYXBTaXplLCBmbG9hdCBzaGFkb3dCaWFzLCBmbG9hdCBzaGFkb3dSYWRpdXMsIHZlYzQgc2hhZG93Q29vcmQgKSB7XFxuXFx0XFx0c2hhZG93Q29vcmQueHl6IC89IHNoYWRvd0Nvb3JkLnc7XFxuXFx0XFx0c2hhZG93Q29vcmQueiArPSBzaGFkb3dCaWFzO1xcblxcdFxcdGJ2ZWM0IGluRnJ1c3R1bVZlYyA9IGJ2ZWM0ICggc2hhZG93Q29vcmQueCA+PSAwLjAsIHNoYWRvd0Nvb3JkLnggPD0gMS4wLCBzaGFkb3dDb29yZC55ID49IDAuMCwgc2hhZG93Q29vcmQueSA8PSAxLjAgKTtcXG5cXHRcXHRib29sIGluRnJ1c3R1bSA9IGFsbCggaW5GcnVzdHVtVmVjICk7XFxuXFx0XFx0YnZlYzIgZnJ1c3R1bVRlc3RWZWMgPSBidmVjMiggaW5GcnVzdHVtLCBzaGFkb3dDb29yZC56IDw9IDEuMCApO1xcblxcdFxcdGJvb2wgZnJ1c3R1bVRlc3QgPSBhbGwoIGZydXN0dW1UZXN0VmVjICk7XFxuXFx0XFx0aWYgKCBmcnVzdHVtVGVzdCApIHtcXG5cXHRcXHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGIClcXG5cXHRcXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHRcXHRmbG9hdCBkeDAgPSAtIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MCA9IC0gdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHgxID0gKyB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeTEgPSArIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHJldHVybiAoXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSwgc2hhZG93Q29vcmQueiApXFxuXFx0XFx0XFx0KSAqICggMS4wIC8gOS4wICk7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGX1NPRlQgKVxcblxcdFxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaGFkb3dNYXBTaXplO1xcblxcdFxcdFxcdGZsb2F0IGR4MCA9IC0gdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHkwID0gLSB0ZXhlbFNpemUueSAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeDEgPSArIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MSA9ICsgdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0cmV0dXJuIChcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MSApLCBzaGFkb3dDb29yZC56IClcXG5cXHRcXHRcXHQpICogKCAxLjAgLyA5LjAgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHJldHVybiB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiAxLjA7XFxuXFx0fVxcblxcdHZlYzIgY3ViZVRvVVYoIHZlYzMgdiwgZmxvYXQgdGV4ZWxTaXplWSApIHtcXG5cXHRcXHR2ZWMzIGFic1YgPSBhYnMoIHYgKTtcXG5cXHRcXHRmbG9hdCBzY2FsZVRvQ3ViZSA9IDEuMCAvIG1heCggYWJzVi54LCBtYXgoIGFic1YueSwgYWJzVi56ICkgKTtcXG5cXHRcXHRhYnNWICo9IHNjYWxlVG9DdWJlO1xcblxcdFxcdHYgKj0gc2NhbGVUb0N1YmUgKiAoIDEuMCAtIDIuMCAqIHRleGVsU2l6ZVkgKTtcXG5cXHRcXHR2ZWMyIHBsYW5hciA9IHYueHk7XFxuXFx0XFx0ZmxvYXQgYWxtb3N0QVRleGVsID0gMS41ICogdGV4ZWxTaXplWTtcXG5cXHRcXHRmbG9hdCBhbG1vc3RPbmUgPSAxLjAgLSBhbG1vc3RBVGV4ZWw7XFxuXFx0XFx0aWYgKCBhYnNWLnogPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGlmICggdi56ID4gMC4wIClcXG5cXHRcXHRcXHRcXHRwbGFuYXIueCA9IDQuMCAtIHYueDtcXG5cXHRcXHR9IGVsc2UgaWYgKCBhYnNWLnggPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGZsb2F0IHNpZ25YID0gc2lnbiggdi54ICk7XFxuXFx0XFx0XFx0cGxhbmFyLnggPSB2LnogKiBzaWduWCArIDIuMCAqIHNpZ25YO1xcblxcdFxcdH0gZWxzZSBpZiAoIGFic1YueSA+PSBhbG1vc3RPbmUgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc2lnblkgPSBzaWduKCB2LnkgKTtcXG5cXHRcXHRcXHRwbGFuYXIueCA9IHYueCArIDIuMCAqIHNpZ25ZICsgMi4wO1xcblxcdFxcdFxcdHBsYW5hci55ID0gdi56ICogc2lnblkgLSAyLjA7XFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiB2ZWMyKCAwLjEyNSwgMC4yNSApICogcGxhbmFyICsgdmVjMiggMC4zNzUsIDAuNzUgKTtcXG5cXHR9XFxuXFx0ZmxvYXQgZ2V0UG9pbnRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgc2hhZG93QmlhcywgZmxvYXQgc2hhZG93UmFkaXVzLCB2ZWM0IHNoYWRvd0Nvb3JkICkge1xcblxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyAoIHNoYWRvd01hcFNpemUgKiB2ZWMyKCA0LjAsIDIuMCApICk7XFxuXFx0XFx0dmVjMyBsaWdodFRvUG9zaXRpb24gPSBzaGFkb3dDb29yZC54eXo7XFxuXFx0XFx0dmVjMyBiZDNEID0gbm9ybWFsaXplKCBsaWdodFRvUG9zaXRpb24gKTtcXG5cXHRcXHRmbG9hdCBkcCA9ICggbGVuZ3RoKCBsaWdodFRvUG9zaXRpb24gKSAtIHNoYWRvd0JpYXMgKSAvIDEwMDAuMDtcXG5cXHRcXHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGICkgfHwgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGX1NPRlQgKVxcblxcdFxcdFxcdHZlYzIgb2Zmc2V0ID0gdmVjMiggLSAxLCAxICkgKiBzaGFkb3dSYWRpdXMgKiB0ZXhlbFNpemUueTtcXG5cXHRcXHRcXHRyZXR1cm4gKFxcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHl5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl5eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eXgsIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXl4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNELCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh4eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eHksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHh4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl4eCwgdGV4ZWxTaXplLnkgKSwgZHAgKVxcblxcdFxcdFxcdCkgKiAoIDEuMCAvIDkuMCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0cmV0dXJuIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QsIHRleGVsU2l6ZS55ICksIGRwICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfdmVydGV4PVwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IGRpcmVjdGlvbmFsU2hhZG93TWF0cml4WyBOVU1fRElSX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBzcG90U2hhZG93TWF0cml4WyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdlNwb3RTaGFkb3dDb29yZFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IHBvaW50U2hhZG93TWF0cml4WyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZQb2ludFNoYWRvd0Nvb3JkWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXBfdmVydGV4PVwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0dkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSA9IGRpcmVjdGlvbmFsU2hhZG93TWF0cml4WyBpIF0gKiB3b3JsZFBvc2l0aW9uO1xcblxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHR2U3BvdFNoYWRvd0Nvb3JkWyBpIF0gPSBzcG90U2hhZG93TWF0cml4WyBpIF0gKiB3b3JsZFBvc2l0aW9uO1xcblxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0gPSBwb2ludFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5zaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ9XCJmbG9hdCBnZXRTaGFkb3dNYXNrKCkge1xcblxcdGZsb2F0IHNoYWRvdyA9IDEuMDtcXG5cXHQjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdCNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHREaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF07XFxuXFx0XFx0c2hhZG93ICo9IGJvb2woIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93ICkgPyBnZXRTaGFkb3coIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBpIF0sIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93TWFwU2l6ZSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dCaWFzLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd1JhZGl1cywgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdFNwb3RMaWdodCBzcG90TGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHNwb3RMaWdodCA9IHNwb3RMaWdodHNbIGkgXTtcXG5cXHRcXHRzaGFkb3cgKj0gYm9vbCggc3BvdExpZ2h0LnNoYWRvdyApID8gZ2V0U2hhZG93KCBzcG90U2hhZG93TWFwWyBpIF0sIHNwb3RMaWdodC5zaGFkb3dNYXBTaXplLCBzcG90TGlnaHQuc2hhZG93Qmlhcywgc3BvdExpZ2h0LnNoYWRvd1JhZGl1cywgdlNwb3RTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0fVxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdFBvaW50TGlnaHQgcG9pbnRMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHBvaW50TGlnaHQgPSBwb2ludExpZ2h0c1sgaSBdO1xcblxcdFxcdHNoYWRvdyAqPSBib29sKCBwb2ludExpZ2h0LnNoYWRvdyApID8gZ2V0UG9pbnRTaGFkb3coIHBvaW50U2hhZG93TWFwWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93TWFwU2l6ZSwgcG9pbnRMaWdodC5zaGFkb3dCaWFzLCBwb2ludExpZ2h0LnNoYWRvd1JhZGl1cywgdlBvaW50U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjZW5kaWZcXG5cXHRyZXR1cm4gc2hhZG93O1xcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLnNraW5iYXNlX3ZlcnRleD1cIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHRtYXQ0IGJvbmVNYXRYID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnggKTtcXG5cXHRtYXQ0IGJvbmVNYXRZID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnkgKTtcXG5cXHRtYXQ0IGJvbmVNYXRaID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnogKTtcXG5cXHRtYXQ0IGJvbmVNYXRXID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LncgKTtcXG4jZW5kaWZcIjtUSFJFRS5TaGFkZXJDaHVuay5za2lubmluZ19wYXJzX3ZlcnRleD1cIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHR1bmlmb3JtIG1hdDQgYmluZE1hdHJpeDtcXG5cXHR1bmlmb3JtIG1hdDQgYmluZE1hdHJpeEludmVyc2U7XFxuXFx0I2lmZGVmIEJPTkVfVEVYVFVSRVxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGJvbmVUZXh0dXJlO1xcblxcdFxcdHVuaWZvcm0gaW50IGJvbmVUZXh0dXJlV2lkdGg7XFxuXFx0XFx0dW5pZm9ybSBpbnQgYm9uZVRleHR1cmVIZWlnaHQ7XFxuXFx0XFx0bWF0NCBnZXRCb25lTWF0cml4KCBjb25zdCBpbiBmbG9hdCBpICkge1xcblxcdFxcdFxcdGZsb2F0IGogPSBpICogNC4wO1xcblxcdFxcdFxcdGZsb2F0IHggPSBtb2QoIGosIGZsb2F0KCBib25lVGV4dHVyZVdpZHRoICkgKTtcXG5cXHRcXHRcXHRmbG9hdCB5ID0gZmxvb3IoIGogLyBmbG9hdCggYm9uZVRleHR1cmVXaWR0aCApICk7XFxuXFx0XFx0XFx0ZmxvYXQgZHggPSAxLjAgLyBmbG9hdCggYm9uZVRleHR1cmVXaWR0aCApO1xcblxcdFxcdFxcdGZsb2F0IGR5ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlSGVpZ2h0ICk7XFxuXFx0XFx0XFx0eSA9IGR5ICogKCB5ICsgMC41ICk7XFxuXFx0XFx0XFx0dmVjNCB2MSA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMC41ICksIHkgKSApO1xcblxcdFxcdFxcdHZlYzQgdjIgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDEuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHR2ZWM0IHYzID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAyLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0dmVjNCB2NCA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMy41ICksIHkgKSApO1xcblxcdFxcdFxcdG1hdDQgYm9uZSA9IG1hdDQoIHYxLCB2MiwgdjMsIHY0ICk7XFxuXFx0XFx0XFx0cmV0dXJuIGJvbmU7XFxuXFx0XFx0fVxcblxcdCNlbHNlXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IGJvbmVNYXRyaWNlc1sgTUFYX0JPTkVTIF07XFxuXFx0XFx0bWF0NCBnZXRCb25lTWF0cml4KCBjb25zdCBpbiBmbG9hdCBpICkge1xcblxcdFxcdFxcdG1hdDQgYm9uZSA9IGJvbmVNYXRyaWNlc1sgaW50KGkpIF07XFxuXFx0XFx0XFx0cmV0dXJuIGJvbmU7XFxuXFx0XFx0fVxcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfdmVydGV4PVwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdHZlYzQgc2tpblZlcnRleCA9IGJpbmRNYXRyaXggKiB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XFxuXFx0dmVjNCBza2lubmVkID0gdmVjNCggMC4wICk7XFxuXFx0c2tpbm5lZCArPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lng7XFxuXFx0c2tpbm5lZCArPSBib25lTWF0WSAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnk7XFxuXFx0c2tpbm5lZCArPSBib25lTWF0WiAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lno7XFxuXFx0c2tpbm5lZCArPSBib25lTWF0VyAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnc7XFxuXFx0c2tpbm5lZCAgPSBiaW5kTWF0cml4SW52ZXJzZSAqIHNraW5uZWQ7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5vcm1hbF92ZXJ0ZXg9XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0bWF0NCBza2luTWF0cml4ID0gbWF0NCggMC4wICk7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnggKiBib25lTWF0WDtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueSAqIGJvbmVNYXRZO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC56ICogYm9uZU1hdFo7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LncgKiBib25lTWF0VztcXG5cXHRza2luTWF0cml4ICA9IGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbk1hdHJpeCAqIGJpbmRNYXRyaXg7XFxuXFx0b2JqZWN0Tm9ybWFsID0gdmVjNCggc2tpbk1hdHJpeCAqIHZlYzQoIG9iamVjdE5vcm1hbCwgMC4wICkgKS54eXo7XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5zcGVjdWxhcm1hcF9mcmFnbWVudD1cImZsb2F0IHNwZWN1bGFyU3RyZW5ndGg7XFxuI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxcblxcdHZlYzQgdGV4ZWxTcGVjdWxhciA9IHRleHR1cmUyRCggc3BlY3VsYXJNYXAsIHZVdiApO1xcblxcdHNwZWN1bGFyU3RyZW5ndGggPSB0ZXhlbFNwZWN1bGFyLnI7XFxuI2Vsc2VcXG5cXHRzcGVjdWxhclN0cmVuZ3RoID0gMS4wO1xcbiNlbmRpZlwiO1RIUkVFLlNoYWRlckNodW5rLnNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX1NQRUNVTEFSTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgc3BlY3VsYXJNYXA7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsudG9uZW1hcHBpbmdfZnJhZ21lbnQ9XCIjaWYgZGVmaW5lZCggVE9ORV9NQVBQSU5HIClcXG4gIGdsX0ZyYWdDb2xvci5yZ2IgPSB0b25lTWFwcGluZyggZ2xfRnJhZ0NvbG9yLnJnYiApO1xcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsudG9uZW1hcHBpbmdfcGFyc19mcmFnbWVudD1cIiNkZWZpbmUgc2F0dXJhdGUoYSkgY2xhbXAoIGEsIDAuMCwgMS4wIClcXG51bmlmb3JtIGZsb2F0IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxudW5pZm9ybSBmbG9hdCB0b25lTWFwcGluZ1doaXRlUG9pbnQ7XFxudmVjMyBMaW5lYXJUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG4gIHJldHVybiB0b25lTWFwcGluZ0V4cG9zdXJlICogY29sb3I7XFxufVxcbnZlYzMgUmVpbmhhcmRUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG4gIGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuICByZXR1cm4gc2F0dXJhdGUoIGNvbG9yIC8gKCB2ZWMzKCAxLjAgKSArIGNvbG9yICkgKTtcXG59XFxuI2RlZmluZSBVbmNoYXJ0ZWQySGVscGVyKCB4ICkgbWF4KCAoICggeCAqICggMC4xNSAqIHggKyAwLjEwICogMC41MCApICsgMC4yMCAqIDAuMDIgKSAvICggeCAqICggMC4xNSAqIHggKyAwLjUwICkgKyAwLjIwICogMC4zMCApICkgLSAwLjAyIC8gMC4zMCwgdmVjMyggMC4wICkgKVxcbnZlYzMgVW5jaGFydGVkMlRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcbiAgY29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG4gIHJldHVybiBzYXR1cmF0ZSggVW5jaGFydGVkMkhlbHBlciggY29sb3IgKSAvIFVuY2hhcnRlZDJIZWxwZXIoIHZlYzMoIHRvbmVNYXBwaW5nV2hpdGVQb2ludCApICkgKTtcXG59XFxudmVjMyBPcHRpbWl6ZWRDaW5lb25Ub25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG4gIGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuICBjb2xvciA9IG1heCggdmVjMyggMC4wICksIGNvbG9yIC0gMC4wMDQgKTtcXG4gIHJldHVybiBwb3coICggY29sb3IgKiAoIDYuMiAqIGNvbG9yICsgMC41ICkgKSAvICggY29sb3IgKiAoIDYuMiAqIGNvbG9yICsgMS43ICkgKyAwLjA2ICksIHZlYzMoIDIuMiApICk7XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsudXYyX3BhcnNfZnJhZ21lbnQ9XCIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2MjtcXG4jZW5kaWZcIjtUSFJFRS5TaGFkZXJDaHVuay51djJfcGFyc192ZXJ0ZXg9XCIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcXG5cXHRhdHRyaWJ1dGUgdmVjMiB1djI7XFxuXFx0dmFyeWluZyB2ZWMyIHZVdjI7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsudXYyX3ZlcnRleD1cIiNpZiBkZWZpbmVkKCBVU0VfTElHSFRNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQU9NQVAgKVxcblxcdHZVdjIgPSB1djI7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsudXZfcGFyc19mcmFnbWVudD1cIiNpZiBkZWZpbmVkKCBVU0VfTUFQICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggVVNFX1NQRUNVTEFSTUFQICkgfHwgZGVmaW5lZCggVVNFX0FMUEhBTUFQICkgfHwgZGVmaW5lZCggVVNFX0VNSVNTSVZFTUFQICkgfHwgZGVmaW5lZCggVVNFX1JPVUdITkVTU01BUCApIHx8IGRlZmluZWQoIFVTRV9NRVRBTE5FU1NNQVAgKVxcblxcdHZhcnlpbmcgdmVjMiB2VXY7XFxuI2VuZGlmXCI7XG5USFJFRS5TaGFkZXJDaHVuay51dl9wYXJzX3ZlcnRleD1cIiNpZiBkZWZpbmVkKCBVU0VfTUFQICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggVVNFX1NQRUNVTEFSTUFQICkgfHwgZGVmaW5lZCggVVNFX0FMUEhBTUFQICkgfHwgZGVmaW5lZCggVVNFX0VNSVNTSVZFTUFQICkgfHwgZGVmaW5lZCggVVNFX1JPVUdITkVTU01BUCApIHx8IGRlZmluZWQoIFVTRV9NRVRBTE5FU1NNQVAgKVxcblxcdHZhcnlpbmcgdmVjMiB2VXY7XFxuXFx0dW5pZm9ybSB2ZWM0IG9mZnNldFJlcGVhdDtcXG4jZW5kaWZcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay51dl92ZXJ0ZXg9XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApIHx8IGRlZmluZWQoIFVTRV9FTUlTU0lWRU1BUCApIHx8IGRlZmluZWQoIFVTRV9ST1VHSE5FU1NNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTUVUQUxORVNTTUFQIClcXG5cXHR2VXYgPSB1diAqIG9mZnNldFJlcGVhdC56dyArIG9mZnNldFJlcGVhdC54eTtcXG4jZW5kaWZcIjtcblRIUkVFLlNoYWRlckNodW5rLndvcmxkcG9zX3ZlcnRleD1cIiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKSB8fCBkZWZpbmVkKCBQSFlTSUNBTCApIHx8IGRlZmluZWQoIExBTUJFUlQgKSB8fCBkZWZpbmVkICggVVNFX1NIQURPV01BUCApXFxuXFx0I2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdFxcdHZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogc2tpbm5lZDtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzQgd29ybGRQb3NpdGlvbiA9IG1vZGVsTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiO1xuVEhSRUUuVW5pZm9ybXNVdGlscz17bWVyZ2U6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXt9LGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5jbG9uZShhW2NdKSxlO2ZvcihlIGluIGQpYltlXT1kW2VdfXJldHVybiBifSxjbG9uZTpmdW5jdGlvbihhKXt2YXIgYj17fSxjO2ZvcihjIGluIGEpe2JbY109e307Zm9yKHZhciBkIGluIGFbY10pe3ZhciBlPWFbY11bZF07ZSBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yfHxlIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yMnx8ZSBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjN8fGUgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3I0fHxlIGluc3RhbmNlb2YgVEhSRUUuTWF0cml4M3x8ZSBpbnN0YW5jZW9mIFRIUkVFLk1hdHJpeDR8fGUgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlP2JbY11bZF09ZS5jbG9uZSgpOkFycmF5LmlzQXJyYXkoZSk/YltjXVtkXT1lLnNsaWNlKCk6YltjXVtkXT1lfX1yZXR1cm4gYn19O1xuVEhSRUUuVW5pZm9ybXNMaWI9e2NvbW1vbjp7ZGlmZnVzZTp7dmFsdWU6bmV3IFRIUkVFLkNvbG9yKDE1NjU4NzM0KX0sb3BhY2l0eTp7dmFsdWU6MX0sbWFwOnt2YWx1ZTpudWxsfSxvZmZzZXRSZXBlYXQ6e3ZhbHVlOm5ldyBUSFJFRS5WZWN0b3I0KDAsMCwxLDEpfSxzcGVjdWxhck1hcDp7dmFsdWU6bnVsbH0sYWxwaGFNYXA6e3ZhbHVlOm51bGx9LGVudk1hcDp7dmFsdWU6bnVsbH0sZmxpcEVudk1hcDp7dmFsdWU6LTF9LHJlZmxlY3Rpdml0eTp7dmFsdWU6MX0scmVmcmFjdGlvblJhdGlvOnt2YWx1ZTouOTh9fSxhb21hcDp7YW9NYXA6e3ZhbHVlOm51bGx9LGFvTWFwSW50ZW5zaXR5Ont2YWx1ZToxfX0sbGlnaHRtYXA6e2xpZ2h0TWFwOnt2YWx1ZTpudWxsfSxsaWdodE1hcEludGVuc2l0eTp7dmFsdWU6MX19LGVtaXNzaXZlbWFwOntlbWlzc2l2ZU1hcDp7dmFsdWU6bnVsbH19LGJ1bXBtYXA6e2J1bXBNYXA6e3ZhbHVlOm51bGx9LGJ1bXBTY2FsZTp7dmFsdWU6MX19LG5vcm1hbG1hcDp7bm9ybWFsTWFwOnt2YWx1ZTpudWxsfSxcbm5vcm1hbFNjYWxlOnt2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yMigxLDEpfX0sZGlzcGxhY2VtZW50bWFwOntkaXNwbGFjZW1lbnRNYXA6e3ZhbHVlOm51bGx9LGRpc3BsYWNlbWVudFNjYWxlOnt2YWx1ZToxfSxkaXNwbGFjZW1lbnRCaWFzOnt2YWx1ZTowfX0scm91Z2huZXNzbWFwOntyb3VnaG5lc3NNYXA6e3ZhbHVlOm51bGx9fSxtZXRhbG5lc3NtYXA6e21ldGFsbmVzc01hcDp7dmFsdWU6bnVsbH19LGZvZzp7Zm9nRGVuc2l0eTp7dmFsdWU6Mi41RS00fSxmb2dOZWFyOnt2YWx1ZToxfSxmb2dGYXI6e3ZhbHVlOjJFM30sZm9nQ29sb3I6e3ZhbHVlOm5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSl9fSxsaWdodHM6e2FtYmllbnRMaWdodENvbG9yOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2RpcmVjdGlvbjp7fSxjb2xvcjp7fSxzaGFkb3c6e30sc2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LGRpcmVjdGlvbmFsU2hhZG93TWFwOnt2YWx1ZTpbXX0sXG5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeDp7dmFsdWU6W119LHNwb3RMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LGRpcmVjdGlvbjp7fSxkaXN0YW5jZTp7fSxjb25lQ29zOnt9LHBlbnVtYnJhQ29zOnt9LGRlY2F5Ont9LHNoYWRvdzp7fSxzaGFkb3dCaWFzOnt9LHNoYWRvd1JhZGl1czp7fSxzaGFkb3dNYXBTaXplOnt9fX0sc3BvdFNoYWRvd01hcDp7dmFsdWU6W119LHNwb3RTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxwb2ludExpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7Y29sb3I6e30scG9zaXRpb246e30sZGVjYXk6e30sZGlzdGFuY2U6e30sc2hhZG93Ont9LHNoYWRvd0JpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e319fSxwb2ludFNoYWRvd01hcDp7dmFsdWU6W119LHBvaW50U2hhZG93TWF0cml4Ont2YWx1ZTpbXX0saGVtaXNwaGVyZUxpZ2h0czp7dmFsdWU6W10scHJvcGVydGllczp7ZGlyZWN0aW9uOnt9LFxuc2t5Q29sb3I6e30sZ3JvdW5kQ29sb3I6e319fX0scG9pbnRzOntkaWZmdXNlOnt2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTU2NTg3MzQpfSxvcGFjaXR5Ont2YWx1ZToxfSxzaXplOnt2YWx1ZToxfSxzY2FsZTp7dmFsdWU6MX0sbWFwOnt2YWx1ZTpudWxsfSxvZmZzZXRSZXBlYXQ6e3ZhbHVlOm5ldyBUSFJFRS5WZWN0b3I0KDAsMCwxLDEpfX19O1RIUkVFLlNoYWRlckNodW5rLmN1YmVfZnJhZz1cInVuaWZvcm0gc2FtcGxlckN1YmUgdEN1YmU7XFxudW5pZm9ybSBmbG9hdCB0RmxpcDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxudm9pZCBtYWluKCkge1xcblxcdGdsX0ZyYWdDb2xvciA9IHRleHR1cmVDdWJlKCB0Q3ViZSwgdmVjMyggdEZsaXAgKiB2V29ybGRQb3NpdGlvbi54LCB2V29ybGRQb3NpdGlvbi55eiApICk7XFxuXFx0Z2xfRnJhZ0NvbG9yLmEgKj0gb3BhY2l0eTtcXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5jdWJlX3ZlcnQ9XCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG52b2lkIG1haW4oKSB7XFxuXFx0dldvcmxkUG9zaXRpb24gPSB0cmFuc2Zvcm1EaXJlY3Rpb24oIHBvc2l0aW9uLCBtb2RlbE1hdHJpeCApO1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcbn1cXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5kZXB0aF9mcmFnPVwiI2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblxcdHVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCAxLjAgKTtcXG5cXHQjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXFxuXFx0XFx0ZGlmZnVzZUNvbG9yLmEgPSBvcGFjaXR5O1xcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcXG5cXHRcXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCB2ZWMzKCBnbF9GcmFnQ29vcmQueiApLCBvcGFjaXR5ICk7XFxuXFx0I2VsaWYgREVQVEhfUEFDS0lORyA9PSAzMjAxXFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gcGFja0RlcHRoVG9SR0JBKCBnbF9GcmFnQ29vcmQueiApO1xcblxcdCNlbmRpZlxcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmRlcHRoX3ZlcnQ9XCIjaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5kaXN0YW5jZVJHQkFfZnJhZz1cInVuaWZvcm0gdmVjMyBsaWdodFBvcztcXG52YXJ5aW5nIHZlYzQgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluICgpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHBhY2tEZXB0aFRvUkdCQSggbGVuZ3RoKCB2V29ybGRQb3NpdGlvbi54eXogLSBsaWdodFBvcy54eXogKSAvIDEwMDAuMCApO1xcbn1cXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5kaXN0YW5jZVJHQkFfdmVydD1cInZhcnlpbmcgdmVjNCB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHR2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb247XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuZXF1aXJlY3RfZnJhZz1cInVuaWZvcm0gc2FtcGxlcjJEIHRFcXVpcmVjdDtcXG51bmlmb3JtIGZsb2F0IHRGbGlwO1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMzIGRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gKTtcXG5cXHR2ZWMyIHNhbXBsZVVWO1xcblxcdHNhbXBsZVVWLnkgPSBzYXR1cmF0ZSggdEZsaXAgKiBkaXJlY3Rpb24ueSAqIC0wLjUgKyAwLjUgKTtcXG5cXHRzYW1wbGVVVi54ID0gYXRhbiggZGlyZWN0aW9uLnosIGRpcmVjdGlvbi54ICkgKiBSRUNJUFJPQ0FMX1BJMiArIDAuNTtcXG5cXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIHRFcXVpcmVjdCwgc2FtcGxlVVYgKTtcXG59XFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuZXF1aXJlY3RfdmVydD1cInZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2V29ybGRQb3NpdGlvbiA9IHRyYW5zZm9ybURpcmVjdGlvbiggcG9zaXRpb24sIG1vZGVsTWF0cml4ICk7XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubGluZWRhc2hlZF9mcmFnPVwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gZmxvYXQgZGFzaFNpemU7XFxudW5pZm9ybSBmbG9hdCB0b3RhbFNpemU7XFxudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHRpZiAoIG1vZCggdkxpbmVEaXN0YW5jZSwgdG90YWxTaXplICkgPiBkYXNoU2l6ZSApIHtcXG5cXHRcXHRkaXNjYXJkO1xcblxcdH1cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5saW5lZGFzaGVkX3ZlcnQ9XCJ1bmlmb3JtIGZsb2F0IHNjYWxlO1xcbmF0dHJpYnV0ZSBmbG9hdCBsaW5lRGlzdGFuY2U7XFxudmFyeWluZyBmbG9hdCB2TGluZURpc3RhbmNlO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdHZMaW5lRGlzdGFuY2UgPSBzY2FsZSAqIGxpbmVEaXN0YW5jZTtcXG5cXHR2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxuXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4Plxcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLm1lc2hiYXNpY19mcmFnPVwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodDtcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlID0gdmVjMyggMC4wICk7XFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgPSB2ZWMzKCAwLjAgKTtcXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlO1xcblxcdCNpbmNsdWRlIDxub3JtYWxfZmxpcD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5tZXNoYmFzaWNfdmVydD1cIiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxlbnZtYXBfdmVydGV4Plxcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLm1lc2hsYW1iZXJ0X2ZyYWc9XCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnZhcnlpbmcgdmVjMyB2TGlnaHRGcm9udDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hc2tfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSA9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XFxuXFx0I2luY2x1ZGUgPGxpZ2h0bWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBCUkRGX0RpZmZ1c2VfTGFtYmVydCggZGlmZnVzZUNvbG9yLnJnYiApO1xcblxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlID0gKCBnbF9Gcm9udEZhY2luZyApID8gdkxpZ2h0RnJvbnQgOiB2TGlnaHRCYWNrO1xcblxcdCNlbHNlXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9IHZMaWdodEZyb250O1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKj0gQlJERl9EaWZmdXNlX0xhbWJlcnQoIGRpZmZ1c2VDb2xvci5yZ2IgKSAqIGdldFNoYWRvd01hc2soKTtcXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZsaXA+XFxuXFx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubWVzaGxhbWJlcnRfdmVydD1cIiNkZWZpbmUgTEFNQkVSVFxcbnZhcnlpbmcgdmVjMyB2TGlnaHRGcm9udDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2xhbWJlcnRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4Plxcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLm1lc2hwaG9uZ19mcmFnPVwiI2RlZmluZSBQSE9OR1xcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIHZlYzMgc3BlY3VsYXI7XFxudW5pZm9ybSBmbG9hdCBzaGluaW5lc3M7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mbGlwPlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfcGhvbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c190ZW1wbGF0ZT5cXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5tZXNocGhvbmdfdmVydD1cIiNkZWZpbmUgUEhPTkdcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuI2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5tZXNocGh5c2ljYWxfZnJhZz1cIiNkZWZpbmUgUEhZU0lDQUxcXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSBmbG9hdCByb3VnaG5lc3M7XFxudW5pZm9ybSBmbG9hdCBtZXRhbG5lc3M7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZm5kZWYgU1RBTkRBUkRcXG5cXHR1bmlmb3JtIGZsb2F0IGNsZWFyQ29hdDtcXG5cXHR1bmlmb3JtIGZsb2F0IGNsZWFyQ29hdFJvdWdobmVzcztcXG4jZW5kaWZcXG51bmlmb3JtIGZsb2F0IGVudk1hcEludGVuc2l0eTtcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHJvdWdobmVzc21hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWV0YWxuZXNzbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZmxpcD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfdGVtcGxhdGU+XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLm1lc2hwaHlzaWNhbF92ZXJ0PVwiI2RlZmluZSBQSFlTSUNBTFxcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuI2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5ub3JtYWxfZnJhZz1cInVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG52YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBwYWNrTm9ybWFsVG9SR0IoIHZOb3JtYWwgKSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG59XFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsubm9ybWFsX3ZlcnQ9XCJ2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggbm9ybWFsTWF0cml4ICogbm9ybWFsICk7XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4Plxcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLnBvaW50c19mcmFnPVwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJ0aWNsZV9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX3BhcnRpY2xlX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5wb2ludHNfdmVydD1cInVuaWZvcm0gZmxvYXQgc2l6ZTtcXG51bmlmb3JtIGZsb2F0IHNjYWxlO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2lmZGVmIFVTRV9TSVpFQVRURU5VQVRJT05cXG5cXHRcXHRnbF9Qb2ludFNpemUgPSBzaXplICogKCBzY2FsZSAvIC0gbXZQb3NpdGlvbi56ICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRnbF9Qb2ludFNpemUgPSBzaXplO1xcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5zaGFkb3dfZnJhZz1cInVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIDAuMCwgMC4wLCAwLjAsIG9wYWNpdHkgKiAoIDEuMCAgLSBnZXRTaGFkb3dNYXNrKCkgKSApO1xcbn1cXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5zaGFkb3dfdmVydD1cIiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyTGliPXtiYXNpYzp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIuY29tbW9uLFRIUkVFLlVuaWZvcm1zTGliLmFvbWFwLFRIUkVFLlVuaWZvcm1zTGliLmZvZ10pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5tZXNoYmFzaWNfdmVydCxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5tZXNoYmFzaWNfZnJhZ30sbGFtYmVydDp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIuY29tbW9uLFRIUkVFLlVuaWZvcm1zTGliLmFvbWFwLFRIUkVFLlVuaWZvcm1zTGliLmxpZ2h0bWFwLFRIUkVFLlVuaWZvcm1zTGliLmVtaXNzaXZlbWFwLFRIUkVFLlVuaWZvcm1zTGliLmZvZyxUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMCl9fV0pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5tZXNobGFtYmVydF92ZXJ0LFxuZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubWVzaGxhbWJlcnRfZnJhZ30scGhvbmc6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLmNvbW1vbixUSFJFRS5Vbmlmb3Jtc0xpYi5hb21hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodG1hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5lbWlzc2l2ZW1hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5idW1wbWFwLFRIUkVFLlVuaWZvcm1zTGliLm5vcm1hbG1hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5kaXNwbGFjZW1lbnRtYXAsVEhSRUUuVW5pZm9ybXNMaWIuZm9nLFRIUkVFLlVuaWZvcm1zTGliLmxpZ2h0cyx7ZW1pc3NpdmU6e3ZhbHVlOm5ldyBUSFJFRS5Db2xvcigwKX0sc3BlY3VsYXI6e3ZhbHVlOm5ldyBUSFJFRS5Db2xvcigxMTE4NDgxKX0sc2hpbmluZXNzOnt2YWx1ZTozMH19XSksdmVydGV4U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLm1lc2hwaG9uZ192ZXJ0LGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLm1lc2hwaG9uZ19mcmFnfSxcbnN0YW5kYXJkOnt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYi5jb21tb24sVEhSRUUuVW5pZm9ybXNMaWIuYW9tYXAsVEhSRUUuVW5pZm9ybXNMaWIubGlnaHRtYXAsVEhSRUUuVW5pZm9ybXNMaWIuZW1pc3NpdmVtYXAsVEhSRUUuVW5pZm9ybXNMaWIuYnVtcG1hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5ub3JtYWxtYXAsVEhSRUUuVW5pZm9ybXNMaWIuZGlzcGxhY2VtZW50bWFwLFRIUkVFLlVuaWZvcm1zTGliLnJvdWdobmVzc21hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5tZXRhbG5lc3NtYXAsVEhSRUUuVW5pZm9ybXNMaWIuZm9nLFRIUkVFLlVuaWZvcm1zTGliLmxpZ2h0cyx7ZW1pc3NpdmU6e3ZhbHVlOm5ldyBUSFJFRS5Db2xvcigwKX0scm91Z2huZXNzOnt2YWx1ZTouNX0sbWV0YWxuZXNzOnt2YWx1ZTowfSxlbnZNYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fV0pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5tZXNocGh5c2ljYWxfdmVydCxcbmZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLm1lc2hwaHlzaWNhbF9mcmFnfSxwb2ludHM6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLnBvaW50cyxUSFJFRS5Vbmlmb3Jtc0xpYi5mb2ddKSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsucG9pbnRzX3ZlcnQsZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsucG9pbnRzX2ZyYWd9LGRhc2hlZDp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIuY29tbW9uLFRIUkVFLlVuaWZvcm1zTGliLmZvZyx7c2NhbGU6e3ZhbHVlOjF9LGRhc2hTaXplOnt2YWx1ZToxfSx0b3RhbFNpemU6e3ZhbHVlOjJ9fV0pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5saW5lZGFzaGVkX3ZlcnQsZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubGluZWRhc2hlZF9mcmFnfSxkZXB0aDp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIuY29tbW9uLFxuVEhSRUUuVW5pZm9ybXNMaWIuZGlzcGxhY2VtZW50bWFwXSksdmVydGV4U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLmRlcHRoX3ZlcnQsZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsuZGVwdGhfZnJhZ30sbm9ybWFsOnt1bmlmb3Jtczp7b3BhY2l0eTp7dmFsdWU6MX19LHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5ub3JtYWxfdmVydCxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5ub3JtYWxfZnJhZ30sY3ViZTp7dW5pZm9ybXM6e3RDdWJlOnt2YWx1ZTpudWxsfSx0RmxpcDp7dmFsdWU6LTF9LG9wYWNpdHk6e3ZhbHVlOjF9fSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsuY3ViZV92ZXJ0LGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLmN1YmVfZnJhZ30sZXF1aXJlY3Q6e3VuaWZvcm1zOnt0RXF1aXJlY3Q6e3ZhbHVlOm51bGx9LHRGbGlwOnt2YWx1ZTotMX19LHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5lcXVpcmVjdF92ZXJ0LFxuZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsuZXF1aXJlY3RfZnJhZ30sZGlzdGFuY2VSR0JBOnt1bmlmb3Jtczp7bGlnaHRQb3M6e3ZhbHVlOm5ldyBUSFJFRS5WZWN0b3IzfX0sdmVydGV4U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLmRpc3RhbmNlUkdCQV92ZXJ0LGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLmRpc3RhbmNlUkdCQV9mcmFnfX07VEhSRUUuU2hhZGVyTGliLnBoeXNpY2FsPXt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5TaGFkZXJMaWIuc3RhbmRhcmQudW5pZm9ybXMse2NsZWFyQ29hdDp7dmFsdWU6MH0sY2xlYXJDb2F0Um91Z2huZXNzOnt2YWx1ZTowfX1dKSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubWVzaHBoeXNpY2FsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubWVzaHBoeXNpY2FsX2ZyYWd9O1xuVEhSRUUuV2ViR0xSZW5kZXJlcj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQpeyEwPT09QSYmKGEqPWQsYio9ZCxjKj1kKTtSLmNsZWFyQ29sb3IoYSxiLGMsZCl9ZnVuY3Rpb24gYygpe1IuaW5pdCgpO1Iuc2Npc3NvcihYLmNvcHkodWEpLm11bHRpcGx5U2NhbGFyKFopKTtSLnZpZXdwb3J0KGZhLmNvcHkobmEpLm11bHRpcGx5U2NhbGFyKFopKTtiKFYucixWLmcsVi5iLGJhKX1mdW5jdGlvbiBkKCl7VD1RPW51bGw7JD1cIlwiO0U9LTE7Ui5yZXNldCgpfWZ1bmN0aW9uIGUoYSl7YS5wcmV2ZW50RGVmYXVsdCgpO2QoKTtjKCk7WS5jbGVhcigpfWZ1bmN0aW9uIGYoYSl7YT1hLnRhcmdldDthLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsZik7ZyhhKTtZLmRlbGV0ZShhKX1mdW5jdGlvbiBnKGEpe3ZhciBiPVkuZ2V0KGEpLnByb2dyYW07YS5wcm9ncmFtPXZvaWQgMDt2b2lkIDAhPT1iJiZvYS5yZWxlYXNlUHJvZ3JhbShiKX1mdW5jdGlvbiBoKGEsYil7cmV0dXJuIE1hdGguYWJzKGJbMF0pLVxuTWF0aC5hYnMoYVswXSl9ZnVuY3Rpb24gayhhLGIpe3JldHVybiBhLm9iamVjdC5yZW5kZXJPcmRlciE9PWIub2JqZWN0LnJlbmRlck9yZGVyP2Eub2JqZWN0LnJlbmRlck9yZGVyLWIub2JqZWN0LnJlbmRlck9yZGVyOmEubWF0ZXJpYWwucHJvZ3JhbSYmYi5tYXRlcmlhbC5wcm9ncmFtJiZhLm1hdGVyaWFsLnByb2dyYW0hPT1iLm1hdGVyaWFsLnByb2dyYW0/YS5tYXRlcmlhbC5wcm9ncmFtLmlkLWIubWF0ZXJpYWwucHJvZ3JhbS5pZDphLm1hdGVyaWFsLmlkIT09Yi5tYXRlcmlhbC5pZD9hLm1hdGVyaWFsLmlkLWIubWF0ZXJpYWwuaWQ6YS56IT09Yi56P2Euei1iLno6YS5pZC1iLmlkfWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gYS5vYmplY3QucmVuZGVyT3JkZXIhPT1iLm9iamVjdC5yZW5kZXJPcmRlcj9hLm9iamVjdC5yZW5kZXJPcmRlci1iLm9iamVjdC5yZW5kZXJPcmRlcjphLnohPT1iLno/Yi56LWEuejphLmlkLWIuaWR9ZnVuY3Rpb24gbShhLGIsYyxkLGUpe3ZhciBnO2MudHJhbnNwYXJlbnQ/XG4oZD1QLGc9KytLKTooZD1GLGc9KytKKTtnPWRbZ107dm9pZCAwIT09Zz8oZy5pZD1hLmlkLGcub2JqZWN0PWEsZy5nZW9tZXRyeT1iLGcubWF0ZXJpYWw9YyxnLno9Vy56LGcuZ3JvdXA9ZSk6KGc9e2lkOmEuaWQsb2JqZWN0OmEsZ2VvbWV0cnk6YixtYXRlcmlhbDpjLHo6Vy56LGdyb3VwOmV9LGQucHVzaChnKSl9ZnVuY3Rpb24gcChhKXtpZighd2EuaW50ZXJzZWN0c1NwaGVyZShhKSlyZXR1cm4hMTt2YXIgYj1kYS5udW1QbGFuZXM7aWYoMD09PWIpcmV0dXJuITA7dmFyIGM9Ti5jbGlwcGluZ1BsYW5lcyxkPWEuY2VudGVyO2E9LWEucmFkaXVzO3ZhciBlPTA7ZG8gaWYoY1tlXS5kaXN0YW5jZVRvUG9pbnQoZCk8YSlyZXR1cm4hMTt3aGlsZSgrK2UhPT1iKTtyZXR1cm4hMH1mdW5jdGlvbiBuKGEsYil7aWYoITEhPT1hLnZpc2libGUpe2lmKGEubGF5ZXJzLnRlc3QoYi5sYXllcnMpKWlmKGEgaW5zdGFuY2VvZiBUSFJFRS5MaWdodClCLnB1c2goYSk7ZWxzZSBpZihhIGluc3RhbmNlb2ZcblRIUkVFLlNwcml0ZSl7dmFyIGM7KGM9ITE9PT1hLmZydXN0dW1DdWxsZWQpfHwoa2EuY2VudGVyLnNldCgwLDAsMCksa2EucmFkaXVzPS43MDcxMDY3ODExODY1NDc2LGthLmFwcGx5TWF0cml4NChhLm1hdHJpeFdvcmxkKSxjPSEwPT09cChrYSkpO2MmJk0ucHVzaChhKX1lbHNlIGlmKGEgaW5zdGFuY2VvZiBUSFJFRS5MZW5zRmxhcmUpTy5wdXNoKGEpO2Vsc2UgaWYoYSBpbnN0YW5jZW9mIFRIUkVFLkltbWVkaWF0ZVJlbmRlck9iamVjdCkhMD09PU4uc29ydE9iamVjdHMmJihXLnNldEZyb21NYXRyaXhQb3NpdGlvbihhLm1hdHJpeFdvcmxkKSxXLmFwcGx5UHJvamVjdGlvbihxYSkpLG0oYSxudWxsLGEubWF0ZXJpYWwsVy56LG51bGwpO2Vsc2UgaWYoYSBpbnN0YW5jZW9mIFRIUkVFLk1lc2h8fGEgaW5zdGFuY2VvZiBUSFJFRS5MaW5lfHxhIGluc3RhbmNlb2YgVEhSRUUuUG9pbnRzKWlmKGEgaW5zdGFuY2VvZiBUSFJFRS5Ta2lubmVkTWVzaCYmYS5za2VsZXRvbi51cGRhdGUoKSxcbihjPSExPT09YS5mcnVzdHVtQ3VsbGVkKXx8KGM9YS5nZW9tZXRyeSxudWxsPT09Yy5ib3VuZGluZ1NwaGVyZSYmYy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSxrYS5jb3B5KGMuYm91bmRpbmdTcGhlcmUpLmFwcGx5TWF0cml4NChhLm1hdHJpeFdvcmxkKSxjPSEwPT09cChrYSkpLGMpe3ZhciBkPWEubWF0ZXJpYWw7aWYoITA9PT1kLnZpc2libGUpaWYoITA9PT1OLnNvcnRPYmplY3RzJiYoVy5zZXRGcm9tTWF0cml4UG9zaXRpb24oYS5tYXRyaXhXb3JsZCksVy5hcHBseVByb2plY3Rpb24ocWEpKSxjPWhhLnVwZGF0ZShhKSxkIGluc3RhbmNlb2YgVEhSRUUuTXVsdGlNYXRlcmlhbClmb3IodmFyIGU9Yy5ncm91cHMsZz1kLm1hdGVyaWFscyxkPTAsZj1lLmxlbmd0aDtkPGY7ZCsrKXt2YXIgaD1lW2RdLGs9Z1toLm1hdGVyaWFsSW5kZXhdOyEwPT09ay52aXNpYmxlJiZtKGEsYyxrLFcueixoKX1lbHNlIG0oYSxjLGQsVy56LG51bGwpfWM9YS5jaGlsZHJlbjtkPTA7Zm9yKGY9Yy5sZW5ndGg7ZDxcbmY7ZCsrKW4oY1tkXSxiKX19ZnVuY3Rpb24gcShhLGIsYyxkKXtmb3IodmFyIGU9MCxnPWEubGVuZ3RoO2U8ZztlKyspe3ZhciBmPWFbZV0saD1mLm9iamVjdCxrPWYuZ2VvbWV0cnksbD12b2lkIDA9PT1kP2YubWF0ZXJpYWw6ZCxmPWYuZ3JvdXA7aC5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhiLm1hdHJpeFdvcmxkSW52ZXJzZSxoLm1hdHJpeFdvcmxkKTtoLm5vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgoaC5tb2RlbFZpZXdNYXRyaXgpO2lmKGggaW5zdGFuY2VvZiBUSFJFRS5JbW1lZGlhdGVSZW5kZXJPYmplY3Qpe3IobCk7dmFyIG49cyhiLGMsbCxoKTskPVwiXCI7aC5yZW5kZXIoZnVuY3Rpb24oYSl7Ti5yZW5kZXJCdWZmZXJJbW1lZGlhdGUoYSxuLGwpfSl9ZWxzZSBOLnJlbmRlckJ1ZmZlckRpcmVjdChiLGMsayxsLGgsZil9fWZ1bmN0aW9uIHIoYSl7YS5zaWRlIT09VEhSRUUuRG91YmxlU2lkZT9SLmVuYWJsZSh4LkNVTExfRkFDRSk6Ui5kaXNhYmxlKHguQ1VMTF9GQUNFKTtcblIuc2V0RmxpcFNpZGVkKGEuc2lkZT09PVRIUkVFLkJhY2tTaWRlKTshMD09PWEudHJhbnNwYXJlbnQ/Ui5zZXRCbGVuZGluZyhhLmJsZW5kaW5nLGEuYmxlbmRFcXVhdGlvbixhLmJsZW5kU3JjLGEuYmxlbmREc3QsYS5ibGVuZEVxdWF0aW9uQWxwaGEsYS5ibGVuZFNyY0FscGhhLGEuYmxlbmREc3RBbHBoYSxhLnByZW11bHRpcGxpZWRBbHBoYSk6Ui5zZXRCbGVuZGluZyhUSFJFRS5Ob0JsZW5kaW5nKTtSLnNldERlcHRoRnVuYyhhLmRlcHRoRnVuYyk7Ui5zZXREZXB0aFRlc3QoYS5kZXB0aFRlc3QpO1Iuc2V0RGVwdGhXcml0ZShhLmRlcHRoV3JpdGUpO1Iuc2V0Q29sb3JXcml0ZShhLmNvbG9yV3JpdGUpO1Iuc2V0UG9seWdvbk9mZnNldChhLnBvbHlnb25PZmZzZXQsYS5wb2x5Z29uT2Zmc2V0RmFjdG9yLGEucG9seWdvbk9mZnNldFVuaXRzKX1mdW5jdGlvbiBzKGEsYixjLGQpe2dhPTA7dmFyIGU9WS5nZXQoYyk7cmEmJigodmF8fGEhPT1UKSYmZGEuc2V0U3RhdGUoYy5jbGlwcGluZ1BsYW5lcyxcbmMuY2xpcFNoYWRvd3MsYSxlLGE9PT1UJiZjLmlkPT09RSksdm9pZCAwIT09ZS5udW1DbGlwcGluZ1BsYW5lcyYmZS5udW1DbGlwcGluZ1BsYW5lcyE9PWRhLm51bVBsYW5lcyYmKGMubmVlZHNVcGRhdGU9ITApKTt2b2lkIDA9PT1lLnByb2dyYW0mJihjLm5lZWRzVXBkYXRlPSEwKTt2b2lkIDAhPT1lLmxpZ2h0c0hhc2gmJmUubGlnaHRzSGFzaCE9PVMuaGFzaCYmKGMubmVlZHNVcGRhdGU9ITApO2lmKGMubmVlZHNVcGRhdGUpe2E6e3ZhciBoPVkuZ2V0KGMpLGs9b2EuZ2V0UGFyYW1ldGVycyhjLFMsYixkYS5udW1QbGFuZXMsZCksbD1vYS5nZXRQcm9ncmFtQ29kZShjLGspLG49aC5wcm9ncmFtLHA9ITA7aWYodm9pZCAwPT09biljLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsZik7ZWxzZSBpZihuLmNvZGUhPT1sKWcoYyk7ZWxzZSBpZih2b2lkIDAhPT1rLnNoYWRlcklEKWJyZWFrIGE7ZWxzZSBwPSExO3AmJihrLnNoYWRlcklEPyhuPVRIUkVFLlNoYWRlckxpYltrLnNoYWRlcklEXSxcbmguX193ZWJnbFNoYWRlcj17bmFtZTpjLnR5cGUsdW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZShuLnVuaWZvcm1zKSx2ZXJ0ZXhTaGFkZXI6bi52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6bi5mcmFnbWVudFNoYWRlcn0pOmguX193ZWJnbFNoYWRlcj17bmFtZTpjLnR5cGUsdW5pZm9ybXM6Yy51bmlmb3Jtcyx2ZXJ0ZXhTaGFkZXI6Yy52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6Yy5mcmFnbWVudFNoYWRlcn0sYy5fX3dlYmdsU2hhZGVyPWguX193ZWJnbFNoYWRlcixuPW9hLmFjcXVpcmVQcm9ncmFtKGMsayxsKSxoLnByb2dyYW09bixjLnByb2dyYW09bik7az1uLmdldEF0dHJpYnV0ZXMoKTtpZihjLm1vcnBoVGFyZ2V0cylmb3IobD1jLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0cz0wO2w8Ti5tYXhNb3JwaFRhcmdldHM7bCsrKTA8PWtbXCJtb3JwaFRhcmdldFwiK2xdJiZjLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0cysrO2lmKGMubW9ycGhOb3JtYWxzKWZvcihsPVxuYy5udW1TdXBwb3J0ZWRNb3JwaE5vcm1hbHM9MDtsPE4ubWF4TW9ycGhOb3JtYWxzO2wrKykwPD1rW1wibW9ycGhOb3JtYWxcIitsXSYmYy5udW1TdXBwb3J0ZWRNb3JwaE5vcm1hbHMrKztrPWguX193ZWJnbFNoYWRlci51bmlmb3JtczsoYyBpbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsfHxjIGluc3RhbmNlb2YgVEhSRUUuUmF3U2hhZGVyTWF0ZXJpYWwpJiYhMCE9PWMuY2xpcHBpbmd8fChoLm51bUNsaXBwaW5nUGxhbmVzPWRhLm51bVBsYW5lcyxrLmNsaXBwaW5nUGxhbmVzPWRhLnVuaWZvcm0pO2MubGlnaHRzJiYoaC5saWdodHNIYXNoPVMuaGFzaCxrLmFtYmllbnRMaWdodENvbG9yLnZhbHVlPVMuYW1iaWVudCxrLmRpcmVjdGlvbmFsTGlnaHRzLnZhbHVlPVMuZGlyZWN0aW9uYWwsay5zcG90TGlnaHRzLnZhbHVlPVMuc3BvdCxrLnBvaW50TGlnaHRzLnZhbHVlPVMucG9pbnQsay5oZW1pc3BoZXJlTGlnaHRzLnZhbHVlPVMuaGVtaSxrLmRpcmVjdGlvbmFsU2hhZG93TWFwLnZhbHVlPVxuUy5kaXJlY3Rpb25hbFNoYWRvd01hcCxrLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4LnZhbHVlPVMuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXgsay5zcG90U2hhZG93TWFwLnZhbHVlPVMuc3BvdFNoYWRvd01hcCxrLnNwb3RTaGFkb3dNYXRyaXgudmFsdWU9Uy5zcG90U2hhZG93TWF0cml4LGsucG9pbnRTaGFkb3dNYXAudmFsdWU9Uy5wb2ludFNoYWRvd01hcCxrLnBvaW50U2hhZG93TWF0cml4LnZhbHVlPVMucG9pbnRTaGFkb3dNYXRyaXgpO2w9aC5wcm9ncmFtLmdldFVuaWZvcm1zKCk7bD1USFJFRS5XZWJHTFVuaWZvcm1zLnNlcVdpdGhWYWx1ZShsLnNlcSxrKTtoLnVuaWZvcm1zTGlzdD1sO2guZHluYW1pY1VuaWZvcm1zPVRIUkVFLldlYkdMVW5pZm9ybXMuc3BsaXREeW5hbWljKGwsayl9Yy5uZWVkc1VwZGF0ZT0hMX12YXIgbT0hMSxwPW49ITEsaD1lLnByb2dyYW0sbD1oLmdldFVuaWZvcm1zKCksaz1lLl9fd2ViZ2xTaGFkZXIudW5pZm9ybXM7aC5pZCE9PVEmJih4LnVzZVByb2dyYW0oaC5wcm9ncmFtKSxcblE9aC5pZCxwPW49bT0hMCk7Yy5pZCE9PUUmJihFPWMuaWQsbj0hMCk7aWYobXx8YSE9PVQpe2wuc2V0KHgsYSxcInByb2plY3Rpb25NYXRyaXhcIik7Y2EubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmbC5zZXRWYWx1ZSh4LFwibG9nRGVwdGhCdWZGQ1wiLDIvKE1hdGgubG9nKGEuZmFyKzEpL01hdGguTE4yKSk7YSE9PVQmJihUPWEscD1uPSEwKTtpZihjIGluc3RhbmNlb2YgVEhSRUUuU2hhZGVyTWF0ZXJpYWx8fGMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbHx8YyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsfHxjLmVudk1hcCltPWwubWFwLmNhbWVyYVBvc2l0aW9uLHZvaWQgMCE9PW0mJm0uc2V0VmFsdWUoeCxXLnNldEZyb21NYXRyaXhQb3NpdGlvbihhLm1hdHJpeFdvcmxkKSk7KGMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbHx8YyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWx8fGMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbHx8XG5jIGluc3RhbmNlb2YgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fGMgaW5zdGFuY2VvZiBUSFJFRS5TaGFkZXJNYXRlcmlhbHx8Yy5za2lubmluZykmJmwuc2V0VmFsdWUoeCxcInZpZXdNYXRyaXhcIixhLm1hdHJpeFdvcmxkSW52ZXJzZSk7bC5zZXQoeCxOLFwidG9uZU1hcHBpbmdFeHBvc3VyZVwiKTtsLnNldCh4LE4sXCJ0b25lTWFwcGluZ1doaXRlUG9pbnRcIil9Yy5za2lubmluZyYmKGwuc2V0T3B0aW9uYWwoeCxkLFwiYmluZE1hdHJpeFwiKSxsLnNldE9wdGlvbmFsKHgsZCxcImJpbmRNYXRyaXhJbnZlcnNlXCIpLG09ZC5za2VsZXRvbikmJihjYS5mbG9hdFZlcnRleFRleHR1cmVzJiZtLnVzZVZlcnRleFRleHR1cmU/KGwuc2V0KHgsbSxcImJvbmVUZXh0dXJlXCIpLGwuc2V0KHgsbSxcImJvbmVUZXh0dXJlV2lkdGhcIiksbC5zZXQoeCxtLFwiYm9uZVRleHR1cmVIZWlnaHRcIikpOmwuc2V0T3B0aW9uYWwoeCxtLFwiYm9uZU1hdHJpY2VzXCIpKTtpZihuKXtjLmxpZ2h0cyYmKG49cCxrLmFtYmllbnRMaWdodENvbG9yLm5lZWRzVXBkYXRlPVxubixrLmRpcmVjdGlvbmFsTGlnaHRzLm5lZWRzVXBkYXRlPW4say5wb2ludExpZ2h0cy5uZWVkc1VwZGF0ZT1uLGsuc3BvdExpZ2h0cy5uZWVkc1VwZGF0ZT1uLGsuaGVtaXNwaGVyZUxpZ2h0cy5uZWVkc1VwZGF0ZT1uKTtiJiZjLmZvZyYmKGsuZm9nQ29sb3IudmFsdWU9Yi5jb2xvcixiIGluc3RhbmNlb2YgVEhSRUUuRm9nPyhrLmZvZ05lYXIudmFsdWU9Yi5uZWFyLGsuZm9nRmFyLnZhbHVlPWIuZmFyKTpiIGluc3RhbmNlb2YgVEhSRUUuRm9nRXhwMiYmKGsuZm9nRGVuc2l0eS52YWx1ZT1iLmRlbnNpdHkpKTtpZihjIGluc3RhbmNlb2YgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWx8fGMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsfHxjIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWx8fGMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbHx8YyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsKXtrLm9wYWNpdHkudmFsdWU9XG5jLm9wYWNpdHk7ay5kaWZmdXNlLnZhbHVlPWMuY29sb3I7Yy5lbWlzc2l2ZSYmay5lbWlzc2l2ZS52YWx1ZS5jb3B5KGMuZW1pc3NpdmUpLm11bHRpcGx5U2NhbGFyKGMuZW1pc3NpdmVJbnRlbnNpdHkpO2subWFwLnZhbHVlPWMubWFwO2suc3BlY3VsYXJNYXAudmFsdWU9Yy5zcGVjdWxhck1hcDtrLmFscGhhTWFwLnZhbHVlPWMuYWxwaGFNYXA7Yy5hb01hcCYmKGsuYW9NYXAudmFsdWU9Yy5hb01hcCxrLmFvTWFwSW50ZW5zaXR5LnZhbHVlPWMuYW9NYXBJbnRlbnNpdHkpO3ZhciBxO2MubWFwP3E9Yy5tYXA6Yy5zcGVjdWxhck1hcD9xPWMuc3BlY3VsYXJNYXA6Yy5kaXNwbGFjZW1lbnRNYXA/cT1jLmRpc3BsYWNlbWVudE1hcDpjLm5vcm1hbE1hcD9xPWMubm9ybWFsTWFwOmMuYnVtcE1hcD9xPWMuYnVtcE1hcDpjLnJvdWdobmVzc01hcD9xPWMucm91Z2huZXNzTWFwOmMubWV0YWxuZXNzTWFwP3E9Yy5tZXRhbG5lc3NNYXA6Yy5hbHBoYU1hcD9xPWMuYWxwaGFNYXA6Yy5lbWlzc2l2ZU1hcCYmXG4ocT1jLmVtaXNzaXZlTWFwKTt2b2lkIDAhPT1xJiYocSBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0JiYocT1xLnRleHR1cmUpLGI9cS5vZmZzZXQscT1xLnJlcGVhdCxrLm9mZnNldFJlcGVhdC52YWx1ZS5zZXQoYi54LGIueSxxLngscS55KSk7ay5lbnZNYXAudmFsdWU9Yy5lbnZNYXA7ay5mbGlwRW52TWFwLnZhbHVlPWMuZW52TWFwIGluc3RhbmNlb2YgVEhSRUUuQ3ViZVRleHR1cmU/LTE6MTtrLnJlZmxlY3Rpdml0eS52YWx1ZT1jLnJlZmxlY3Rpdml0eTtrLnJlZnJhY3Rpb25SYXRpby52YWx1ZT1jLnJlZnJhY3Rpb25SYXRpb31jIGluc3RhbmNlb2YgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWw/KGsuZGlmZnVzZS52YWx1ZT1jLmNvbG9yLGsub3BhY2l0eS52YWx1ZT1jLm9wYWNpdHkpOmMgaW5zdGFuY2VvZiBUSFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWw/KGsuZGlmZnVzZS52YWx1ZT1jLmNvbG9yLGsub3BhY2l0eS52YWx1ZT1jLm9wYWNpdHksay5kYXNoU2l6ZS52YWx1ZT1cbmMuZGFzaFNpemUsay50b3RhbFNpemUudmFsdWU9Yy5kYXNoU2l6ZStjLmdhcFNpemUsay5zY2FsZS52YWx1ZT1jLnNjYWxlKTpjIGluc3RhbmNlb2YgVEhSRUUuUG9pbnRzTWF0ZXJpYWw/KGsuZGlmZnVzZS52YWx1ZT1jLmNvbG9yLGsub3BhY2l0eS52YWx1ZT1jLm9wYWNpdHksay5zaXplLnZhbHVlPWMuc2l6ZSpaLGsuc2NhbGUudmFsdWU9LjUqdS5jbGllbnRIZWlnaHQsay5tYXAudmFsdWU9Yy5tYXAsbnVsbCE9PWMubWFwJiYocT1jLm1hcC5vZmZzZXQsYz1jLm1hcC5yZXBlYXQsay5vZmZzZXRSZXBlYXQudmFsdWUuc2V0KHEueCxxLnksYy54LGMueSkpKTpjIGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbD8oYy5saWdodE1hcCYmKGsubGlnaHRNYXAudmFsdWU9Yy5saWdodE1hcCxrLmxpZ2h0TWFwSW50ZW5zaXR5LnZhbHVlPWMubGlnaHRNYXBJbnRlbnNpdHkpLGMuZW1pc3NpdmVNYXAmJihrLmVtaXNzaXZlTWFwLnZhbHVlPWMuZW1pc3NpdmVNYXApKTpjIGluc3RhbmNlb2ZcblRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsPyhrLnNwZWN1bGFyLnZhbHVlPWMuc3BlY3VsYXIsay5zaGluaW5lc3MudmFsdWU9TWF0aC5tYXgoYy5zaGluaW5lc3MsMUUtNCksYy5saWdodE1hcCYmKGsubGlnaHRNYXAudmFsdWU9Yy5saWdodE1hcCxrLmxpZ2h0TWFwSW50ZW5zaXR5LnZhbHVlPWMubGlnaHRNYXBJbnRlbnNpdHkpLGMuZW1pc3NpdmVNYXAmJihrLmVtaXNzaXZlTWFwLnZhbHVlPWMuZW1pc3NpdmVNYXApLGMuYnVtcE1hcCYmKGsuYnVtcE1hcC52YWx1ZT1jLmJ1bXBNYXAsay5idW1wU2NhbGUudmFsdWU9Yy5idW1wU2NhbGUpLGMubm9ybWFsTWFwJiYoay5ub3JtYWxNYXAudmFsdWU9Yy5ub3JtYWxNYXAsay5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGMubm9ybWFsU2NhbGUpKSxjLmRpc3BsYWNlbWVudE1hcCYmKGsuZGlzcGxhY2VtZW50TWFwLnZhbHVlPWMuZGlzcGxhY2VtZW50TWFwLGsuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9Yy5kaXNwbGFjZW1lbnRTY2FsZSxrLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9XG5jLmRpc3BsYWNlbWVudEJpYXMpKTpjIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBoeXNpY2FsTWF0ZXJpYWw/KGsuY2xlYXJDb2F0LnZhbHVlPWMuY2xlYXJDb2F0LGsuY2xlYXJDb2F0Um91Z2huZXNzLnZhbHVlPWMuY2xlYXJDb2F0Um91Z2huZXNzLHYoayxjKSk6YyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsP3YoayxjKTpjIGluc3RhbmNlb2YgVEhSRUUuTWVzaERlcHRoTWF0ZXJpYWw/Yy5kaXNwbGFjZW1lbnRNYXAmJihrLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1jLmRpc3BsYWNlbWVudE1hcCxrLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWMuZGlzcGxhY2VtZW50U2NhbGUsay5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWMuZGlzcGxhY2VtZW50Qmlhcyk6YyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbCYmKGsub3BhY2l0eS52YWx1ZT1jLm9wYWNpdHkpO1RIUkVFLldlYkdMVW5pZm9ybXMudXBsb2FkKHgsZS51bmlmb3Jtc0xpc3QsayxOKX1sLnNldCh4LFxuZCxcIm1vZGVsVmlld01hdHJpeFwiKTtsLnNldCh4LGQsXCJub3JtYWxNYXRyaXhcIik7bC5zZXRWYWx1ZSh4LFwibW9kZWxNYXRyaXhcIixkLm1hdHJpeFdvcmxkKTtlPWUuZHluYW1pY1VuaWZvcm1zO251bGwhPT1lJiYoVEhSRUUuV2ViR0xVbmlmb3Jtcy5ldmFsRHluYW1pYyhlLGssZCxhKSxUSFJFRS5XZWJHTFVuaWZvcm1zLnVwbG9hZCh4LGUsayxOKSk7cmV0dXJuIGh9ZnVuY3Rpb24gdihhLGIpe2Eucm91Z2huZXNzLnZhbHVlPWIucm91Z2huZXNzO2EubWV0YWxuZXNzLnZhbHVlPWIubWV0YWxuZXNzO2Iucm91Z2huZXNzTWFwJiYoYS5yb3VnaG5lc3NNYXAudmFsdWU9Yi5yb3VnaG5lc3NNYXApO2IubWV0YWxuZXNzTWFwJiYoYS5tZXRhbG5lc3NNYXAudmFsdWU9Yi5tZXRhbG5lc3NNYXApO2IubGlnaHRNYXAmJihhLmxpZ2h0TWFwLnZhbHVlPWIubGlnaHRNYXAsYS5saWdodE1hcEludGVuc2l0eS52YWx1ZT1iLmxpZ2h0TWFwSW50ZW5zaXR5KTtiLmVtaXNzaXZlTWFwJiYoYS5lbWlzc2l2ZU1hcC52YWx1ZT1cbmIuZW1pc3NpdmVNYXApO2IuYnVtcE1hcCYmKGEuYnVtcE1hcC52YWx1ZT1iLmJ1bXBNYXAsYS5idW1wU2NhbGUudmFsdWU9Yi5idW1wU2NhbGUpO2Iubm9ybWFsTWFwJiYoYS5ub3JtYWxNYXAudmFsdWU9Yi5ub3JtYWxNYXAsYS5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGIubm9ybWFsU2NhbGUpKTtiLmRpc3BsYWNlbWVudE1hcCYmKGEuZGlzcGxhY2VtZW50TWFwLnZhbHVlPWIuZGlzcGxhY2VtZW50TWFwLGEuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9Yi5kaXNwbGFjZW1lbnRTY2FsZSxhLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9Yi5kaXNwbGFjZW1lbnRCaWFzKTtiLmVudk1hcCYmKGEuZW52TWFwSW50ZW5zaXR5LnZhbHVlPWIuZW52TWFwSW50ZW5zaXR5KX1mdW5jdGlvbiB0KGEpe3ZhciBiO2lmKGE9PT1USFJFRS5SZXBlYXRXcmFwcGluZylyZXR1cm4geC5SRVBFQVQ7aWYoYT09PVRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcpcmV0dXJuIHguQ0xBTVBfVE9fRURHRTtpZihhPT09XG5USFJFRS5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nKXJldHVybiB4Lk1JUlJPUkVEX1JFUEVBVDtpZihhPT09VEhSRUUuTmVhcmVzdEZpbHRlcilyZXR1cm4geC5ORUFSRVNUO2lmKGE9PT1USFJFRS5OZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcilyZXR1cm4geC5ORUFSRVNUX01JUE1BUF9ORUFSRVNUO2lmKGE9PT1USFJFRS5OZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyKXJldHVybiB4Lk5FQVJFU1RfTUlQTUFQX0xJTkVBUjtpZihhPT09VEhSRUUuTGluZWFyRmlsdGVyKXJldHVybiB4LkxJTkVBUjtpZihhPT09VEhSRUUuTGluZWFyTWlwTWFwTmVhcmVzdEZpbHRlcilyZXR1cm4geC5MSU5FQVJfTUlQTUFQX05FQVJFU1Q7aWYoYT09PVRIUkVFLkxpbmVhck1pcE1hcExpbmVhckZpbHRlcilyZXR1cm4geC5MSU5FQVJfTUlQTUFQX0xJTkVBUjtpZihhPT09VEhSRUUuVW5zaWduZWRCeXRlVHlwZSlyZXR1cm4geC5VTlNJR05FRF9CWVRFO2lmKGE9PT1USFJFRS5VbnNpZ25lZFNob3J0NDQ0NFR5cGUpcmV0dXJuIHguVU5TSUdORURfU0hPUlRfNF80XzRfNDtcbmlmKGE9PT1USFJFRS5VbnNpZ25lZFNob3J0NTU1MVR5cGUpcmV0dXJuIHguVU5TSUdORURfU0hPUlRfNV81XzVfMTtpZihhPT09VEhSRUUuVW5zaWduZWRTaG9ydDU2NVR5cGUpcmV0dXJuIHguVU5TSUdORURfU0hPUlRfNV82XzU7aWYoYT09PVRIUkVFLkJ5dGVUeXBlKXJldHVybiB4LkJZVEU7aWYoYT09PVRIUkVFLlNob3J0VHlwZSlyZXR1cm4geC5TSE9SVDtpZihhPT09VEhSRUUuVW5zaWduZWRTaG9ydFR5cGUpcmV0dXJuIHguVU5TSUdORURfU0hPUlQ7aWYoYT09PVRIUkVFLkludFR5cGUpcmV0dXJuIHguSU5UO2lmKGE9PT1USFJFRS5VbnNpZ25lZEludFR5cGUpcmV0dXJuIHguVU5TSUdORURfSU5UO2lmKGE9PT1USFJFRS5GbG9hdFR5cGUpcmV0dXJuIHguRkxPQVQ7Yj1VLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIik7aWYobnVsbCE9PWImJmE9PT1USFJFRS5IYWxmRmxvYXRUeXBlKXJldHVybiBiLkhBTEZfRkxPQVRfT0VTO2lmKGE9PT1USFJFRS5BbHBoYUZvcm1hdClyZXR1cm4geC5BTFBIQTtcbmlmKGE9PT1USFJFRS5SR0JGb3JtYXQpcmV0dXJuIHguUkdCO2lmKGE9PT1USFJFRS5SR0JBRm9ybWF0KXJldHVybiB4LlJHQkE7aWYoYT09PVRIUkVFLkx1bWluYW5jZUZvcm1hdClyZXR1cm4geC5MVU1JTkFOQ0U7aWYoYT09PVRIUkVFLkx1bWluYW5jZUFscGhhRm9ybWF0KXJldHVybiB4LkxVTUlOQU5DRV9BTFBIQTtpZihhPT09VEhSRUUuRGVwdGhGb3JtYXQpcmV0dXJuIHguREVQVEhfQ09NUE9ORU5UO2lmKGE9PT1USFJFRS5BZGRFcXVhdGlvbilyZXR1cm4geC5GVU5DX0FERDtpZihhPT09VEhSRUUuU3VidHJhY3RFcXVhdGlvbilyZXR1cm4geC5GVU5DX1NVQlRSQUNUO2lmKGE9PT1USFJFRS5SZXZlcnNlU3VidHJhY3RFcXVhdGlvbilyZXR1cm4geC5GVU5DX1JFVkVSU0VfU1VCVFJBQ1Q7aWYoYT09PVRIUkVFLlplcm9GYWN0b3IpcmV0dXJuIHguWkVSTztpZihhPT09VEhSRUUuT25lRmFjdG9yKXJldHVybiB4Lk9ORTtpZihhPT09VEhSRUUuU3JjQ29sb3JGYWN0b3IpcmV0dXJuIHguU1JDX0NPTE9SO1xuaWYoYT09PVRIUkVFLk9uZU1pbnVzU3JjQ29sb3JGYWN0b3IpcmV0dXJuIHguT05FX01JTlVTX1NSQ19DT0xPUjtpZihhPT09VEhSRUUuU3JjQWxwaGFGYWN0b3IpcmV0dXJuIHguU1JDX0FMUEhBO2lmKGE9PT1USFJFRS5PbmVNaW51c1NyY0FscGhhRmFjdG9yKXJldHVybiB4Lk9ORV9NSU5VU19TUkNfQUxQSEE7aWYoYT09PVRIUkVFLkRzdEFscGhhRmFjdG9yKXJldHVybiB4LkRTVF9BTFBIQTtpZihhPT09VEhSRUUuT25lTWludXNEc3RBbHBoYUZhY3RvcilyZXR1cm4geC5PTkVfTUlOVVNfRFNUX0FMUEhBO2lmKGE9PT1USFJFRS5Ec3RDb2xvckZhY3RvcilyZXR1cm4geC5EU1RfQ09MT1I7aWYoYT09PVRIUkVFLk9uZU1pbnVzRHN0Q29sb3JGYWN0b3IpcmV0dXJuIHguT05FX01JTlVTX0RTVF9DT0xPUjtpZihhPT09VEhSRUUuU3JjQWxwaGFTYXR1cmF0ZUZhY3RvcilyZXR1cm4geC5TUkNfQUxQSEFfU0FUVVJBVEU7Yj1VLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpO1xuaWYobnVsbCE9PWIpe2lmKGE9PT1USFJFRS5SR0JfUzNUQ19EWFQxX0Zvcm1hdClyZXR1cm4gYi5DT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUO2lmKGE9PT1USFJFRS5SR0JBX1MzVENfRFhUMV9Gb3JtYXQpcmV0dXJuIGIuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUMV9FWFQ7aWYoYT09PVRIUkVFLlJHQkFfUzNUQ19EWFQzX0Zvcm1hdClyZXR1cm4gYi5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVDtpZihhPT09VEhSRUUuUkdCQV9TM1RDX0RYVDVfRm9ybWF0KXJldHVybiBiLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDVfRVhUfWI9VS5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIik7aWYobnVsbCE9PWIpe2lmKGE9PT1USFJFRS5SR0JfUFZSVENfNEJQUFYxX0Zvcm1hdClyZXR1cm4gYi5DT01QUkVTU0VEX1JHQl9QVlJUQ180QlBQVjFfSU1HO2lmKGE9PT1USFJFRS5SR0JfUFZSVENfMkJQUFYxX0Zvcm1hdClyZXR1cm4gYi5DT01QUkVTU0VEX1JHQl9QVlJUQ18yQlBQVjFfSU1HO1xuaWYoYT09PVRIUkVFLlJHQkFfUFZSVENfNEJQUFYxX0Zvcm1hdClyZXR1cm4gYi5DT01QUkVTU0VEX1JHQkFfUFZSVENfNEJQUFYxX0lNRztpZihhPT09VEhSRUUuUkdCQV9QVlJUQ18yQlBQVjFfRm9ybWF0KXJldHVybiBiLkNPTVBSRVNTRURfUkdCQV9QVlJUQ18yQlBQVjFfSU1HfWI9VS5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMVwiKTtpZihudWxsIT09YiYmYT09PVRIUkVFLlJHQl9FVEMxX0Zvcm1hdClyZXR1cm4gYi5DT01QUkVTU0VEX1JHQl9FVEMxX1dFQkdMO2I9VS5nZXQoXCJFWFRfYmxlbmRfbWlubWF4XCIpO2lmKG51bGwhPT1iKXtpZihhPT09VEhSRUUuTWluRXF1YXRpb24pcmV0dXJuIGIuTUlOX0VYVDtpZihhPT09VEhSRUUuTWF4RXF1YXRpb24pcmV0dXJuIGIuTUFYX0VYVH1yZXR1cm4gMH1jb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXJcIixUSFJFRS5SRVZJU0lPTik7YT1hfHx7fTt2YXIgdT12b2lkIDAhPT1hLmNhbnZhcz9hLmNhbnZhczpkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXG5cImNhbnZhc1wiKSxEPXZvaWQgMCE9PWEuY29udGV4dD9hLmNvbnRleHQ6bnVsbCx3PXZvaWQgMCE9PWEuYWxwaGE/YS5hbHBoYTohMSxJPXZvaWQgMCE9PWEuZGVwdGg/YS5kZXB0aDohMCx6PXZvaWQgMCE9PWEuc3RlbmNpbD9hLnN0ZW5jaWw6ITAseT12b2lkIDAhPT1hLmFudGlhbGlhcz9hLmFudGlhbGlhczohMSxBPXZvaWQgMCE9PWEucHJlbXVsdGlwbGllZEFscGhhP2EucHJlbXVsdGlwbGllZEFscGhhOiEwLEc9dm9pZCAwIT09YS5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI/YS5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI6ITEsQj1bXSxGPVtdLEo9LTEsUD1bXSxLPS0xLEg9bmV3IEZsb2F0MzJBcnJheSg4KSxNPVtdLE89W107dGhpcy5kb21FbGVtZW50PXU7dGhpcy5jb250ZXh0PW51bGw7dGhpcy5zb3J0T2JqZWN0cz10aGlzLmF1dG9DbGVhclN0ZW5jaWw9dGhpcy5hdXRvQ2xlYXJEZXB0aD10aGlzLmF1dG9DbGVhckNvbG9yPXRoaXMuYXV0b0NsZWFyPSEwO3RoaXMuY2xpcHBpbmdQbGFuZXM9XG5bXTt0aGlzLmxvY2FsQ2xpcHBpbmdFbmFibGVkPSExO3RoaXMuZ2FtbWFGYWN0b3I9Mjt0aGlzLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzPXRoaXMuZ2FtbWFPdXRwdXQ9dGhpcy5nYW1tYUlucHV0PSExO3RoaXMudG9uZU1hcHBpbmc9VEhSRUUuTGluZWFyVG9uZU1hcHBpbmc7dGhpcy50b25lTWFwcGluZ1doaXRlUG9pbnQ9dGhpcy50b25lTWFwcGluZ0V4cG9zdXJlPTE7dGhpcy5tYXhNb3JwaFRhcmdldHM9ODt0aGlzLm1heE1vcnBoTm9ybWFscz00O3ZhciBOPXRoaXMsUT1udWxsLEM9bnVsbCxMPW51bGwsRT0tMSwkPVwiXCIsVD1udWxsLFg9bmV3IFRIUkVFLlZlY3RvcjQsZWE9bnVsbCxmYT1uZXcgVEhSRUUuVmVjdG9yNCxnYT0wLFY9bmV3IFRIUkVFLkNvbG9yKDApLGJhPTAsYWE9dS53aWR0aCxzYT11LmhlaWdodCxaPTEsdWE9bmV3IFRIUkVFLlZlY3RvcjQoMCwwLGFhLHNhKSx4YT0hMSxuYT1uZXcgVEhSRUUuVmVjdG9yNCgwLDAsYWEsc2EpLHdhPW5ldyBUSFJFRS5GcnVzdHVtLFxuZGE9bmV3IFRIUkVFLldlYkdMQ2xpcHBpbmcscmE9ITEsdmE9ITEsa2E9bmV3IFRIUkVFLlNwaGVyZSxxYT1uZXcgVEhSRUUuTWF0cml4NCxXPW5ldyBUSFJFRS5WZWN0b3IzLFM9e2hhc2g6XCJcIixhbWJpZW50OlswLDAsMF0sZGlyZWN0aW9uYWw6W10sZGlyZWN0aW9uYWxTaGFkb3dNYXA6W10sZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6W10sc3BvdDpbXSxzcG90U2hhZG93TWFwOltdLHNwb3RTaGFkb3dNYXRyaXg6W10scG9pbnQ6W10scG9pbnRTaGFkb3dNYXA6W10scG9pbnRTaGFkb3dNYXRyaXg6W10saGVtaTpbXSxzaGFkb3dzOltdfSxpYT17Y2FsbHM6MCx2ZXJ0aWNlczowLGZhY2VzOjAscG9pbnRzOjB9O3RoaXMuaW5mbz17cmVuZGVyOmlhLG1lbW9yeTp7Z2VvbWV0cmllczowLHRleHR1cmVzOjB9LHByb2dyYW1zOm51bGx9O3ZhciB4O3RyeXt3PXthbHBoYTp3LGRlcHRoOkksc3RlbmNpbDp6LGFudGlhbGlhczp5LHByZW11bHRpcGxpZWRBbHBoYTpBLHByZXNlcnZlRHJhd2luZ0J1ZmZlcjpHfTtcbng9RHx8dS5nZXRDb250ZXh0KFwid2ViZ2xcIix3KXx8dS5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIsdyk7aWYobnVsbD09PXgpe2lmKG51bGwhPT11LmdldENvbnRleHQoXCJ3ZWJnbFwiKSl0aHJvd1wiRXJyb3IgY3JlYXRpbmcgV2ViR0wgY29udGV4dCB3aXRoIHlvdXIgc2VsZWN0ZWQgYXR0cmlidXRlcy5cIjt0aHJvd1wiRXJyb3IgY3JlYXRpbmcgV2ViR0wgY29udGV4dC5cIjt9dm9pZCAwPT09eC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQmJih4LmdldFNoYWRlclByZWNpc2lvbkZvcm1hdD1mdW5jdGlvbigpe3JldHVybntyYW5nZU1pbjoxLHJhbmdlTWF4OjEscHJlY2lzaW9uOjF9fSk7dS5hZGRFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0bG9zdFwiLGUsITEpfWNhdGNoKHphKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogXCIremEpfXZhciBVPW5ldyBUSFJFRS5XZWJHTEV4dGVuc2lvbnMoeCk7VS5nZXQoXCJXRUJHTF9kZXB0aF90ZXh0dXJlXCIpO1UuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIik7XG5VLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiKTtVLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIik7VS5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiKTtVLmdldChcIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wiKTtVLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7VS5nZXQoXCJPRVNfZWxlbWVudF9pbmRleF91aW50XCIpJiYoVEhSRUUuQnVmZmVyR2VvbWV0cnkuTWF4SW5kZXg9NDI5NDk2NzI5Nik7dmFyIGNhPW5ldyBUSFJFRS5XZWJHTENhcGFiaWxpdGllcyh4LFUsYSksUj1uZXcgVEhSRUUuV2ViR0xTdGF0ZSh4LFUsdCksWT1uZXcgVEhSRUUuV2ViR0xQcm9wZXJ0aWVzLGxhPW5ldyBUSFJFRS5XZWJHTFRleHR1cmVzKHgsVSxSLFksY2EsdCx0aGlzLmluZm8pLGhhPW5ldyBUSFJFRS5XZWJHTE9iamVjdHMoeCxZLHRoaXMuaW5mbyksb2E9bmV3IFRIUkVFLldlYkdMUHJvZ3JhbXModGhpcyxjYSksdGE9bmV3IFRIUkVFLldlYkdMTGlnaHRzO3RoaXMuaW5mby5wcm9ncmFtcz1cbm9hLnByb2dyYW1zO3ZhciBBYT1uZXcgVEhSRUUuV2ViR0xCdWZmZXJSZW5kZXJlcih4LFUsaWEpLEJhPW5ldyBUSFJFRS5XZWJHTEluZGV4ZWRCdWZmZXJSZW5kZXJlcih4LFUsaWEpLENhPW5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoLTEsMSwxLC0xLDAsMSksbWE9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLHBhPW5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5KDIsMiksbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMSxmb2c6ITF9KSk7YT1USFJFRS5TaGFkZXJMaWIuY3ViZTt2YXIgamE9bmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLkJveEJ1ZmZlckdlb21ldHJ5KDUsNSw1KSxuZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe3VuaWZvcm1zOmEudW5pZm9ybXMsdmVydGV4U2hhZGVyOmEudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOmEuZnJhZ21lbnRTaGFkZXIsc2lkZTpUSFJFRS5CYWNrU2lkZSxcbmRlcHRoVGVzdDohMSxkZXB0aFdyaXRlOiExLGZvZzohMX0pKTtjKCk7dGhpcy5jb250ZXh0PXg7dGhpcy5jYXBhYmlsaXRpZXM9Y2E7dGhpcy5leHRlbnNpb25zPVU7dGhpcy5wcm9wZXJ0aWVzPVk7dGhpcy5zdGF0ZT1SO3ZhciB5YT1uZXcgVEhSRUUuV2ViR0xTaGFkb3dNYXAodGhpcyxTLGhhLGNhKTt0aGlzLnNoYWRvd01hcD15YTt2YXIgRGE9bmV3IFRIUkVFLlNwcml0ZVBsdWdpbih0aGlzLE0pLEVhPW5ldyBUSFJFRS5MZW5zRmxhcmVQbHVnaW4odGhpcyxPKTt0aGlzLmdldENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4geH07dGhpcy5nZXRDb250ZXh0QXR0cmlidXRlcz1mdW5jdGlvbigpe3JldHVybiB4LmdldENvbnRleHRBdHRyaWJ1dGVzKCl9O3RoaXMuZm9yY2VDb250ZXh0TG9zcz1mdW5jdGlvbigpe1UuZ2V0KFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpLmxvc2VDb250ZXh0KCl9O3RoaXMuZ2V0TWF4QW5pc290cm9weT1mdW5jdGlvbigpe3JldHVybiBjYS5nZXRNYXhBbmlzb3Ryb3B5KCl9O1xudGhpcy5nZXRQcmVjaXNpb249ZnVuY3Rpb24oKXtyZXR1cm4gY2EucHJlY2lzaW9ufTt0aGlzLmdldFBpeGVsUmF0aW89ZnVuY3Rpb24oKXtyZXR1cm4gWn07dGhpcy5zZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEmJihaPWEsdGhpcy5zZXRTaXplKG5hLnosbmEudywhMSkpfTt0aGlzLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6YWEsaGVpZ2h0OnNhfX07dGhpcy5zZXRTaXplPWZ1bmN0aW9uKGEsYixjKXthYT1hO3NhPWI7dS53aWR0aD1hKlo7dS5oZWlnaHQ9YipaOyExIT09YyYmKHUuc3R5bGUud2lkdGg9YStcInB4XCIsdS5zdHlsZS5oZWlnaHQ9YitcInB4XCIpO3RoaXMuc2V0Vmlld3BvcnQoMCwwLGEsYil9O3RoaXMuc2V0Vmlld3BvcnQ9ZnVuY3Rpb24oYSxiLGMsZCl7Ui52aWV3cG9ydChuYS5zZXQoYSxiLGMsZCkpfTt0aGlzLnNldFNjaXNzb3I9ZnVuY3Rpb24oYSxiLGMsZCl7Ui5zY2lzc29yKHVhLnNldChhLGIsYyxkKSl9O3RoaXMuc2V0U2Npc3NvclRlc3Q9XG5mdW5jdGlvbihhKXtSLnNldFNjaXNzb3JUZXN0KHhhPWEpfTt0aGlzLmdldENsZWFyQ29sb3I9ZnVuY3Rpb24oKXtyZXR1cm4gVn07dGhpcy5zZXRDbGVhckNvbG9yPWZ1bmN0aW9uKGEsYyl7Vi5zZXQoYSk7YmE9dm9pZCAwIT09Yz9jOjE7YihWLnIsVi5nLFYuYixiYSl9O3RoaXMuZ2V0Q2xlYXJBbHBoYT1mdW5jdGlvbigpe3JldHVybiBiYX07dGhpcy5zZXRDbGVhckFscGhhPWZ1bmN0aW9uKGEpe2JhPWE7YihWLnIsVi5nLFYuYixiYSl9O3RoaXMuY2xlYXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPTA7aWYodm9pZCAwPT09YXx8YSlkfD14LkNPTE9SX0JVRkZFUl9CSVQ7aWYodm9pZCAwPT09Ynx8YilkfD14LkRFUFRIX0JVRkZFUl9CSVQ7aWYodm9pZCAwPT09Y3x8YylkfD14LlNURU5DSUxfQlVGRkVSX0JJVDt4LmNsZWFyKGQpfTt0aGlzLmNsZWFyQ29sb3I9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCEwLCExLCExKX07dGhpcy5jbGVhckRlcHRoPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcighMSxcbiEwLCExKX07dGhpcy5jbGVhclN0ZW5jaWw9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCExLCExLCEwKX07dGhpcy5jbGVhclRhcmdldD1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLnNldFJlbmRlclRhcmdldChhKTt0aGlzLmNsZWFyKGIsYyxkKX07dGhpcy5yZXNldEdMU3RhdGU9ZDt0aGlzLmRpc3Bvc2U9ZnVuY3Rpb24oKXtQPVtdO0s9LTE7Rj1bXTtKPS0xO3UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIixlLCExKX07dGhpcy5yZW5kZXJCdWZmZXJJbW1lZGlhdGU9ZnVuY3Rpb24oYSxiLGMpe1IuaW5pdEF0dHJpYnV0ZXMoKTt2YXIgZD1ZLmdldChhKTthLmhhc1Bvc2l0aW9ucyYmIWQucG9zaXRpb24mJihkLnBvc2l0aW9uPXguY3JlYXRlQnVmZmVyKCkpO2EuaGFzTm9ybWFscyYmIWQubm9ybWFsJiYoZC5ub3JtYWw9eC5jcmVhdGVCdWZmZXIoKSk7YS5oYXNVdnMmJiFkLnV2JiYoZC51dj14LmNyZWF0ZUJ1ZmZlcigpKTthLmhhc0NvbG9ycyYmIWQuY29sb3ImJlxuKGQuY29sb3I9eC5jcmVhdGVCdWZmZXIoKSk7Yj1iLmdldEF0dHJpYnV0ZXMoKTthLmhhc1Bvc2l0aW9ucyYmKHguYmluZEJ1ZmZlcih4LkFSUkFZX0JVRkZFUixkLnBvc2l0aW9uKSx4LmJ1ZmZlckRhdGEoeC5BUlJBWV9CVUZGRVIsYS5wb3NpdGlvbkFycmF5LHguRFlOQU1JQ19EUkFXKSxSLmVuYWJsZUF0dHJpYnV0ZShiLnBvc2l0aW9uKSx4LnZlcnRleEF0dHJpYlBvaW50ZXIoYi5wb3NpdGlvbiwzLHguRkxPQVQsITEsMCwwKSk7aWYoYS5oYXNOb3JtYWxzKXt4LmJpbmRCdWZmZXIoeC5BUlJBWV9CVUZGRVIsZC5ub3JtYWwpO2lmKFwiTWVzaFBob25nTWF0ZXJpYWxcIiE9PWMudHlwZSYmXCJNZXNoU3RhbmRhcmRNYXRlcmlhbFwiIT09Yy50eXBlJiZcIk1lc2hQaHlzaWNhbE1hdGVyaWFsXCIhPT1jLnR5cGUmJmMuc2hhZGluZz09PVRIUkVFLkZsYXRTaGFkaW5nKWZvcih2YXIgZT0wLGc9MyphLmNvdW50O2U8ZztlKz05KXt2YXIgZj1hLm5vcm1hbEFycmF5LGg9KGZbZSswXStmW2UrM10rXG5mW2UrNl0pLzMsaz0oZltlKzFdK2ZbZSs0XStmW2UrN10pLzMsbD0oZltlKzJdK2ZbZSs1XStmW2UrOF0pLzM7ZltlKzBdPWg7ZltlKzFdPWs7ZltlKzJdPWw7ZltlKzNdPWg7ZltlKzRdPWs7ZltlKzVdPWw7ZltlKzZdPWg7ZltlKzddPWs7ZltlKzhdPWx9eC5idWZmZXJEYXRhKHguQVJSQVlfQlVGRkVSLGEubm9ybWFsQXJyYXkseC5EWU5BTUlDX0RSQVcpO1IuZW5hYmxlQXR0cmlidXRlKGIubm9ybWFsKTt4LnZlcnRleEF0dHJpYlBvaW50ZXIoYi5ub3JtYWwsMyx4LkZMT0FULCExLDAsMCl9YS5oYXNVdnMmJmMubWFwJiYoeC5iaW5kQnVmZmVyKHguQVJSQVlfQlVGRkVSLGQudXYpLHguYnVmZmVyRGF0YSh4LkFSUkFZX0JVRkZFUixhLnV2QXJyYXkseC5EWU5BTUlDX0RSQVcpLFIuZW5hYmxlQXR0cmlidXRlKGIudXYpLHgudmVydGV4QXR0cmliUG9pbnRlcihiLnV2LDIseC5GTE9BVCwhMSwwLDApKTthLmhhc0NvbG9ycyYmYy52ZXJ0ZXhDb2xvcnMhPT1USFJFRS5Ob0NvbG9ycyYmXG4oeC5iaW5kQnVmZmVyKHguQVJSQVlfQlVGRkVSLGQuY29sb3IpLHguYnVmZmVyRGF0YSh4LkFSUkFZX0JVRkZFUixhLmNvbG9yQXJyYXkseC5EWU5BTUlDX0RSQVcpLFIuZW5hYmxlQXR0cmlidXRlKGIuY29sb3IpLHgudmVydGV4QXR0cmliUG9pbnRlcihiLmNvbG9yLDMseC5GTE9BVCwhMSwwLDApKTtSLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCk7eC5kcmF3QXJyYXlzKHguVFJJQU5HTEVTLDAsYS5jb3VudCk7YS5jb3VudD0wfTt0aGlzLnJlbmRlckJ1ZmZlckRpcmVjdD1mdW5jdGlvbihhLGIsYyxkLGUsZil7cihkKTt2YXIgZz1zKGEsYixkLGUpLGs9ITE7YT1jLmlkK1wiX1wiK2cuaWQrXCJfXCIrZC53aXJlZnJhbWU7YSE9PSQmJigkPWEsaz0hMCk7Yj1lLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcztpZih2b2lkIDAhPT1iKXthPVtdO2Zvcih2YXIgbD0wLGs9Yi5sZW5ndGg7bDxrO2wrKyl7dmFyIG49YltsXTthLnB1c2goW24sbF0pfWEuc29ydChoKTs4PGEubGVuZ3RoJiYoYS5sZW5ndGg9XG44KTtmb3IodmFyIG09Yy5tb3JwaEF0dHJpYnV0ZXMsbD0wLGs9YS5sZW5ndGg7bDxrO2wrKyluPWFbbF0sSFtsXT1uWzBdLDAhPT1uWzBdPyhiPW5bMV0sITA9PT1kLm1vcnBoVGFyZ2V0cyYmbS5wb3NpdGlvbiYmYy5hZGRBdHRyaWJ1dGUoXCJtb3JwaFRhcmdldFwiK2wsbS5wb3NpdGlvbltiXSksITA9PT1kLm1vcnBoTm9ybWFscyYmbS5ub3JtYWwmJmMuYWRkQXR0cmlidXRlKFwibW9ycGhOb3JtYWxcIitsLG0ubm9ybWFsW2JdKSk6KCEwPT09ZC5tb3JwaFRhcmdldHMmJmMucmVtb3ZlQXR0cmlidXRlKFwibW9ycGhUYXJnZXRcIitsKSwhMD09PWQubW9ycGhOb3JtYWxzJiZjLnJlbW92ZUF0dHJpYnV0ZShcIm1vcnBoTm9ybWFsXCIrbCkpO2cuZ2V0VW5pZm9ybXMoKS5zZXRWYWx1ZSh4LFwibW9ycGhUYXJnZXRJbmZsdWVuY2VzXCIsSCk7az0hMH1iPWMuaW5kZXg7bD1jLmF0dHJpYnV0ZXMucG9zaXRpb247ITA9PT1kLndpcmVmcmFtZSYmKGI9aGEuZ2V0V2lyZWZyYW1lQXR0cmlidXRlKGMpKTtudWxsIT09XG5iPyhhPUJhLGEuc2V0SW5kZXgoYikpOmE9QWE7aWYoayl7YTp7dmFyIGs9dm9pZCAwLHA7aWYoYyBpbnN0YW5jZW9mIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5JiYocD1VLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIiksbnVsbD09PXApKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5zZXR1cFZlcnRleEF0dHJpYnV0ZXM6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLlwiKTticmVhayBhfXZvaWQgMD09PWsmJihrPTApO1IuaW5pdEF0dHJpYnV0ZXMoKTt2YXIgbj1jLmF0dHJpYnV0ZXMsZz1nLmdldEF0dHJpYnV0ZXMoKSxtPWQuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyxxO2ZvcihxIGluIGcpe3ZhciB1PWdbcV07aWYoMDw9dSl7dmFyIHc9bltxXTtpZih2b2lkIDAhPT13KXt2YXIgdD14LkZMT0FULEQ9dy5hcnJheSx2PVxudy5ub3JtYWxpemVkO0QgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXk/dD14LkZMT0FUOkQgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXk/Y29uc29sZS53YXJuKFwiVW5zdXBwb3J0ZWQgZGF0YSBidWZmZXIgZm9ybWF0OiBGbG9hdDY0QXJyYXlcIik6RCBpbnN0YW5jZW9mIFVpbnQxNkFycmF5P3Q9eC5VTlNJR05FRF9TSE9SVDpEIGluc3RhbmNlb2YgSW50MTZBcnJheT90PXguU0hPUlQ6RCBpbnN0YW5jZW9mIFVpbnQzMkFycmF5P3Q9eC5VTlNJR05FRF9JTlQ6RCBpbnN0YW5jZW9mIEludDMyQXJyYXk/dD14LklOVDpEIGluc3RhbmNlb2YgSW50OEFycmF5P3Q9eC5CWVRFOkQgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYodD14LlVOU0lHTkVEX0JZVEUpO3ZhciBEPXcuaXRlbVNpemUseT1oYS5nZXRBdHRyaWJ1dGVCdWZmZXIodyk7aWYodyBpbnN0YW5jZW9mIFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKXt2YXIgej13LmRhdGEsQT16LnN0cmlkZSx3PXcub2Zmc2V0O3ogaW5zdGFuY2VvZlxuVEhSRUUuSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXI/KFIuZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcih1LHoubWVzaFBlckF0dHJpYnV0ZSxwKSx2b2lkIDA9PT1jLm1heEluc3RhbmNlZENvdW50JiYoYy5tYXhJbnN0YW5jZWRDb3VudD16Lm1lc2hQZXJBdHRyaWJ1dGUqei5jb3VudCkpOlIuZW5hYmxlQXR0cmlidXRlKHUpO3guYmluZEJ1ZmZlcih4LkFSUkFZX0JVRkZFUix5KTt4LnZlcnRleEF0dHJpYlBvaW50ZXIodSxELHQsdixBKnouYXJyYXkuQllURVNfUEVSX0VMRU1FTlQsKGsqQSt3KSp6LmFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKX1lbHNlIHcgaW5zdGFuY2VvZiBUSFJFRS5JbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGU/KFIuZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcih1LHcubWVzaFBlckF0dHJpYnV0ZSxwKSx2b2lkIDA9PT1jLm1heEluc3RhbmNlZENvdW50JiYoYy5tYXhJbnN0YW5jZWRDb3VudD13Lm1lc2hQZXJBdHRyaWJ1dGUqdy5jb3VudCkpOlIuZW5hYmxlQXR0cmlidXRlKHUpLFxueC5iaW5kQnVmZmVyKHguQVJSQVlfQlVGRkVSLHkpLHgudmVydGV4QXR0cmliUG9pbnRlcih1LEQsdCx2LDAsaypEKncuYXJyYXkuQllURVNfUEVSX0VMRU1FTlQpfWVsc2UgaWYodm9pZCAwIT09bSYmKHQ9bVtxXSx2b2lkIDAhPT10KSlzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMjp4LnZlcnRleEF0dHJpYjJmdih1LHQpO2JyZWFrO2Nhc2UgMzp4LnZlcnRleEF0dHJpYjNmdih1LHQpO2JyZWFrO2Nhc2UgNDp4LnZlcnRleEF0dHJpYjRmdih1LHQpO2JyZWFrO2RlZmF1bHQ6eC52ZXJ0ZXhBdHRyaWIxZnYodSx0KX19fVIuZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMoKX1udWxsIT09YiYmeC5iaW5kQnVmZmVyKHguRUxFTUVOVF9BUlJBWV9CVUZGRVIsaGEuZ2V0QXR0cmlidXRlQnVmZmVyKGIpKX1wPUluZmluaXR5O251bGwhPT1iP3A9Yi5jb3VudDp2b2lkIDAhPT1sJiYocD1sLmNvdW50KTtxPWMuZHJhd1JhbmdlLnN0YXJ0O2I9Yy5kcmF3UmFuZ2UuY291bnQ7bD1udWxsIT09Zj9mLnN0YXJ0OlxuMDtrPW51bGwhPT1mP2YuY291bnQ6SW5maW5pdHk7Zj1NYXRoLm1heCgwLHEsbCk7cD1NYXRoLm1pbigwK3AscStiLGwrayktMTtwPU1hdGgubWF4KDAscC1mKzEpO2lmKGUgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKWlmKCEwPT09ZC53aXJlZnJhbWUpUi5zZXRMaW5lV2lkdGgoZC53aXJlZnJhbWVMaW5ld2lkdGgqKG51bGw9PT1DP1o6MSkpLGEuc2V0TW9kZSh4LkxJTkVTKTtlbHNlIHN3aXRjaChlLmRyYXdNb2RlKXtjYXNlIFRIUkVFLlRyaWFuZ2xlc0RyYXdNb2RlOmEuc2V0TW9kZSh4LlRSSUFOR0xFUyk7YnJlYWs7Y2FzZSBUSFJFRS5UcmlhbmdsZVN0cmlwRHJhd01vZGU6YS5zZXRNb2RlKHguVFJJQU5HTEVfU1RSSVApO2JyZWFrO2Nhc2UgVEhSRUUuVHJpYW5nbGVGYW5EcmF3TW9kZTphLnNldE1vZGUoeC5UUklBTkdMRV9GQU4pfWVsc2UgZSBpbnN0YW5jZW9mIFRIUkVFLkxpbmU/KGQ9ZC5saW5ld2lkdGgsdm9pZCAwPT09ZCYmKGQ9MSksUi5zZXRMaW5lV2lkdGgoZCoobnVsbD09PVxuQz9aOjEpKSxlIGluc3RhbmNlb2YgVEhSRUUuTGluZVNlZ21lbnRzP2Euc2V0TW9kZSh4LkxJTkVTKTphLnNldE1vZGUoeC5MSU5FX1NUUklQKSk6ZSBpbnN0YW5jZW9mIFRIUkVFLlBvaW50cyYmYS5zZXRNb2RlKHguUE9JTlRTKTtjIGluc3RhbmNlb2YgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk/MDxjLm1heEluc3RhbmNlZENvdW50JiZhLnJlbmRlckluc3RhbmNlcyhjLGYscCk6YS5yZW5kZXIoZixwKX07dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYSxjLGQsZSl7aWYoITE9PT1jIGluc3RhbmNlb2YgVEhSRUUuQ2FtZXJhKWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlbmRlcjogY2FtZXJhIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5DYW1lcmEuXCIpO2Vsc2V7dmFyIGY9YS5mb2c7JD1cIlwiO0U9LTE7VD1udWxsOyEwPT09YS5hdXRvVXBkYXRlJiZhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7bnVsbD09PWMucGFyZW50JiZjLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG5jLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKGMubWF0cml4V29ybGQpO3FhLm11bHRpcGx5TWF0cmljZXMoYy5wcm9qZWN0aW9uTWF0cml4LGMubWF0cml4V29ybGRJbnZlcnNlKTt3YS5zZXRGcm9tTWF0cml4KHFhKTtCLmxlbmd0aD0wO0s9Sj0tMTtNLmxlbmd0aD0wO08ubGVuZ3RoPTA7dmE9dGhpcy5sb2NhbENsaXBwaW5nRW5hYmxlZDtyYT1kYS5pbml0KHRoaXMuY2xpcHBpbmdQbGFuZXMsdmEsYyk7bihhLGMpO0YubGVuZ3RoPUorMTtQLmxlbmd0aD1LKzE7ITA9PT1OLnNvcnRPYmplY3RzJiYoRi5zb3J0KGspLFAuc29ydChsKSk7cmEmJmRhLmJlZ2luU2hhZG93cygpO2Zvcih2YXIgZz1CLGg9MCxwPTAsbT1nLmxlbmd0aDtwPG07cCsrKXt2YXIgdT1nW3BdO3UuY2FzdFNoYWRvdyYmKFMuc2hhZG93c1toKytdPXUpfVMuc2hhZG93cy5sZW5ndGg9aDt5YS5yZW5kZXIoYSxjKTtmb3IodmFyIGc9QixyPXU9MCxzPTAsdyx0LEQsSCx2PWMubWF0cml4V29ybGRJbnZlcnNlLFxueT0wLHo9MCxBPTAsTD0wLGg9MCxwPWcubGVuZ3RoO2g8cDtoKyspaWYobT1nW2hdLHc9bS5jb2xvcix0PW0uaW50ZW5zaXR5LEQ9bS5kaXN0YW5jZSxIPW0uc2hhZG93JiZtLnNoYWRvdy5tYXA/bS5zaGFkb3cubWFwLnRleHR1cmU6bnVsbCxtIGluc3RhbmNlb2YgVEhSRUUuQW1iaWVudExpZ2h0KXUrPXcucip0LHIrPXcuZyp0LHMrPXcuYip0O2Vsc2UgaWYobSBpbnN0YW5jZW9mIFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQpe3ZhciBDPXRhLmdldChtKTtDLmNvbG9yLmNvcHkobS5jb2xvcikubXVsdGlwbHlTY2FsYXIobS5pbnRlbnNpdHkpO0MuZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLm1hdHJpeFdvcmxkKTtXLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLnRhcmdldC5tYXRyaXhXb3JsZCk7Qy5kaXJlY3Rpb24uc3ViKFcpO0MuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbih2KTtpZihDLnNoYWRvdz1tLmNhc3RTaGFkb3cpQy5zaGFkb3dCaWFzPW0uc2hhZG93LmJpYXMsXG5DLnNoYWRvd1JhZGl1cz1tLnNoYWRvdy5yYWRpdXMsQy5zaGFkb3dNYXBTaXplPW0uc2hhZG93Lm1hcFNpemU7Uy5kaXJlY3Rpb25hbFNoYWRvd01hcFt5XT1IO1MuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbeV09bS5zaGFkb3cubWF0cml4O1MuZGlyZWN0aW9uYWxbeSsrXT1DfWVsc2UgaWYobSBpbnN0YW5jZW9mIFRIUkVFLlNwb3RMaWdodCl7Qz10YS5nZXQobSk7Qy5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obS5tYXRyaXhXb3JsZCk7Qy5wb3NpdGlvbi5hcHBseU1hdHJpeDQodik7Qy5jb2xvci5jb3B5KHcpLm11bHRpcGx5U2NhbGFyKHQpO0MuZGlzdGFuY2U9RDtDLmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obS5tYXRyaXhXb3JsZCk7Vy5zZXRGcm9tTWF0cml4UG9zaXRpb24obS50YXJnZXQubWF0cml4V29ybGQpO0MuZGlyZWN0aW9uLnN1YihXKTtDLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24odik7Qy5jb25lQ29zPU1hdGguY29zKG0uYW5nbGUpO1xuQy5wZW51bWJyYUNvcz1NYXRoLmNvcyhtLmFuZ2xlKigxLW0ucGVudW1icmEpKTtDLmRlY2F5PTA9PT1tLmRpc3RhbmNlPzA6bS5kZWNheTtpZihDLnNoYWRvdz1tLmNhc3RTaGFkb3cpQy5zaGFkb3dCaWFzPW0uc2hhZG93LmJpYXMsQy5zaGFkb3dSYWRpdXM9bS5zaGFkb3cucmFkaXVzLEMuc2hhZG93TWFwU2l6ZT1tLnNoYWRvdy5tYXBTaXplO1Muc3BvdFNoYWRvd01hcFtBXT1IO1Muc3BvdFNoYWRvd01hdHJpeFtBXT1tLnNoYWRvdy5tYXRyaXg7Uy5zcG90W0ErK109Q31lbHNlIGlmKG0gaW5zdGFuY2VvZiBUSFJFRS5Qb2ludExpZ2h0KXtDPXRhLmdldChtKTtDLnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLm1hdHJpeFdvcmxkKTtDLnBvc2l0aW9uLmFwcGx5TWF0cml4NCh2KTtDLmNvbG9yLmNvcHkobS5jb2xvcikubXVsdGlwbHlTY2FsYXIobS5pbnRlbnNpdHkpO0MuZGlzdGFuY2U9bS5kaXN0YW5jZTtDLmRlY2F5PTA9PT1tLmRpc3RhbmNlPzA6bS5kZWNheTtpZihDLnNoYWRvdz1cbm0uY2FzdFNoYWRvdylDLnNoYWRvd0JpYXM9bS5zaGFkb3cuYmlhcyxDLnNoYWRvd1JhZGl1cz1tLnNoYWRvdy5yYWRpdXMsQy5zaGFkb3dNYXBTaXplPW0uc2hhZG93Lm1hcFNpemU7Uy5wb2ludFNoYWRvd01hcFt6XT1IO3ZvaWQgMD09PVMucG9pbnRTaGFkb3dNYXRyaXhbel0mJihTLnBvaW50U2hhZG93TWF0cml4W3pdPW5ldyBUSFJFRS5NYXRyaXg0KTtXLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLm1hdHJpeFdvcmxkKS5uZWdhdGUoKTtTLnBvaW50U2hhZG93TWF0cml4W3pdLmlkZW50aXR5KCkuc2V0UG9zaXRpb24oVyk7Uy5wb2ludFt6KytdPUN9ZWxzZSBtIGluc3RhbmNlb2YgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0JiYoQz10YS5nZXQobSksQy5kaXJlY3Rpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0ubWF0cml4V29ybGQpLEMuZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbih2KSxDLmRpcmVjdGlvbi5ub3JtYWxpemUoKSxDLnNreUNvbG9yLmNvcHkobS5jb2xvcikubXVsdGlwbHlTY2FsYXIodCksXG5DLmdyb3VuZENvbG9yLmNvcHkobS5ncm91bmRDb2xvcikubXVsdGlwbHlTY2FsYXIodCksUy5oZW1pW0wrK109Qyk7Uy5hbWJpZW50WzBdPXU7Uy5hbWJpZW50WzFdPXI7Uy5hbWJpZW50WzJdPXM7Uy5kaXJlY3Rpb25hbC5sZW5ndGg9eTtTLnNwb3QubGVuZ3RoPUE7Uy5wb2ludC5sZW5ndGg9ejtTLmhlbWkubGVuZ3RoPUw7Uy5oYXNoPXkrXCIsXCIreitcIixcIitBK1wiLFwiK0wrXCIsXCIrUy5zaGFkb3dzLmxlbmd0aDtyYSYmZGEuZW5kU2hhZG93cygpO2lhLmNhbGxzPTA7aWEudmVydGljZXM9MDtpYS5mYWNlcz0wO2lhLnBvaW50cz0wO3ZvaWQgMD09PWQmJihkPW51bGwpO3RoaXMuc2V0UmVuZGVyVGFyZ2V0KGQpO2c9YS5iYWNrZ3JvdW5kO251bGw9PT1nP2IoVi5yLFYuZyxWLmIsYmEpOmcgaW5zdGFuY2VvZiBUSFJFRS5Db2xvciYmYihnLnIsZy5nLGcuYiwxKTsodGhpcy5hdXRvQ2xlYXJ8fGUpJiZ0aGlzLmNsZWFyKHRoaXMuYXV0b0NsZWFyQ29sb3IsdGhpcy5hdXRvQ2xlYXJEZXB0aCxcbnRoaXMuYXV0b0NsZWFyU3RlbmNpbCk7ZyBpbnN0YW5jZW9mIFRIUkVFLkN1YmVUZXh0dXJlPyhtYS5wcm9qZWN0aW9uTWF0cml4LmNvcHkoYy5wcm9qZWN0aW9uTWF0cml4KSxtYS5tYXRyaXhXb3JsZC5leHRyYWN0Um90YXRpb24oYy5tYXRyaXhXb3JsZCksbWEubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UobWEubWF0cml4V29ybGQpLGphLm1hdGVyaWFsLnVuaWZvcm1zLnRDdWJlLnZhbHVlPWcsamEubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMobWEubWF0cml4V29ybGRJbnZlcnNlLGphLm1hdHJpeFdvcmxkKSxoYS51cGRhdGUoamEpLE4ucmVuZGVyQnVmZmVyRGlyZWN0KG1hLG51bGwsamEuZ2VvbWV0cnksamEubWF0ZXJpYWwsamEsbnVsbCkpOmcgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlJiYocGEubWF0ZXJpYWwubWFwPWcsaGEudXBkYXRlKHBhKSxOLnJlbmRlckJ1ZmZlckRpcmVjdChDYSxudWxsLHBhLmdlb21ldHJ5LHBhLm1hdGVyaWFsLHBhLG51bGwpKTtcbmEub3ZlcnJpZGVNYXRlcmlhbD8oZT1hLm92ZXJyaWRlTWF0ZXJpYWwscShGLGMsZixlKSxxKFAsYyxmLGUpKTooUi5zZXRCbGVuZGluZyhUSFJFRS5Ob0JsZW5kaW5nKSxxKEYsYyxmKSxxKFAsYyxmKSk7RGEucmVuZGVyKGEsYyk7RWEucmVuZGVyKGEsYyxmYSk7ZCYmbGEudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwKGQpO1Iuc2V0RGVwdGhUZXN0KCEwKTtSLnNldERlcHRoV3JpdGUoITApO1Iuc2V0Q29sb3JXcml0ZSghMCl9fTt0aGlzLnNldEZhY2VDdWxsaW5nPWZ1bmN0aW9uKGEsYil7Ui5zZXRDdWxsRmFjZShhKTtSLnNldEZsaXBTaWRlZChiPT09VEhSRUUuRnJvbnRGYWNlRGlyZWN0aW9uQ1cpfTt0aGlzLmFsbG9jVGV4dHVyZVVuaXQ9ZnVuY3Rpb24oKXt2YXIgYT1nYTthPj1jYS5tYXhUZXh0dXJlcyYmY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogdHJ5aW5nIHRvIHVzZSBcIithK1wiIHRleHR1cmUgdW5pdHMgd2hpbGUgdGhpcyBHUFUgc3VwcG9ydHMgb25seSBcIitjYS5tYXhUZXh0dXJlcyk7XG5nYSs9MTtyZXR1cm4gYX07dGhpcy5zZXRUZXh0dXJlMkQ9ZnVuY3Rpb24oKXt2YXIgYT0hMTtyZXR1cm4gZnVuY3Rpb24oYixjKXtiIGluc3RhbmNlb2YgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQmJihhfHwoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5zZXRUZXh0dXJlMkQ6IGRvbid0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuXCIpLGE9ITApLGI9Yi50ZXh0dXJlKTtsYS5zZXRUZXh0dXJlMkQoYixjKX19KCk7dGhpcy5zZXRUZXh0dXJlPWZ1bmN0aW9uKCl7dmFyIGE9ITE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YXx8KGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRUZXh0dXJlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzZXRUZXh0dXJlMkQgaW5zdGVhZC5cIiksYT0hMCk7bGEuc2V0VGV4dHVyZTJEKGIsYyl9fSgpO3RoaXMuc2V0VGV4dHVyZUN1YmU9ZnVuY3Rpb24oKXt2YXIgYT1cbiExO3JldHVybiBmdW5jdGlvbihiLGMpe2IgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUmJihhfHwoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5zZXRUZXh0dXJlQ3ViZTogZG9uJ3QgdXNlIGN1YmUgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxhPSEwKSxiPWIudGV4dHVyZSk7YiBpbnN0YW5jZW9mIFRIUkVFLkN1YmVUZXh0dXJlfHxBcnJheS5pc0FycmF5KGIuaW1hZ2UpJiY2PT09Yi5pbWFnZS5sZW5ndGg/bGEuc2V0VGV4dHVyZUN1YmUoYixjKTpsYS5zZXRUZXh0dXJlQ3ViZUR5bmFtaWMoYixjKX19KCk7dGhpcy5nZXRDdXJyZW50UmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIEN9O3RoaXMuc2V0UmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKGEpeyhDPWEpJiZ2b2lkIDA9PT1ZLmdldChhKS5fX3dlYmdsRnJhbWVidWZmZXImJmxhLnNldHVwUmVuZGVyVGFyZ2V0KGEpO1xudmFyIGI9YSBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZSxjO2E/KGM9WS5nZXQoYSksYz1iP2MuX193ZWJnbEZyYW1lYnVmZmVyW2EuYWN0aXZlQ3ViZUZhY2VdOmMuX193ZWJnbEZyYW1lYnVmZmVyLFguY29weShhLnNjaXNzb3IpLGVhPWEuc2Npc3NvclRlc3QsZmEuY29weShhLnZpZXdwb3J0KSk6KGM9bnVsbCxYLmNvcHkodWEpLm11bHRpcGx5U2NhbGFyKFopLGVhPXhhLGZhLmNvcHkobmEpLm11bHRpcGx5U2NhbGFyKFopKTtMIT09YyYmKHguYmluZEZyYW1lYnVmZmVyKHguRlJBTUVCVUZGRVIsYyksTD1jKTtSLnNjaXNzb3IoWCk7Ui5zZXRTY2lzc29yVGVzdChlYSk7Ui52aWV3cG9ydChmYSk7YiYmKGI9WS5nZXQoYS50ZXh0dXJlKSx4LmZyYW1lYnVmZmVyVGV4dHVyZTJEKHguRlJBTUVCVUZGRVIseC5DT0xPUl9BVFRBQ0hNRU5UMCx4LlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCthLmFjdGl2ZUN1YmVGYWNlLGIuX193ZWJnbFRleHR1cmUsYS5hY3RpdmVNaXBNYXBMZXZlbCkpfTtcbnRoaXMucmVhZFJlbmRlclRhcmdldFBpeGVscz1mdW5jdGlvbihhLGIsYyxkLGUsZyl7aWYoITE9PT1hIGluc3RhbmNlb2YgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQpY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVuZGVyVGFyZ2V0IGlzIG5vdCBUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5cIik7ZWxzZXt2YXIgZj1ZLmdldChhKS5fX3dlYmdsRnJhbWVidWZmZXI7aWYoZil7dmFyIGg9ITE7ZiE9PUwmJih4LmJpbmRGcmFtZWJ1ZmZlcih4LkZSQU1FQlVGRkVSLGYpLGg9ITApO3RyeXt2YXIgaz1hLnRleHR1cmU7ay5mb3JtYXQhPT1USFJFRS5SR0JBRm9ybWF0JiZ0KGsuZm9ybWF0KSE9PXguZ2V0UGFyYW1ldGVyKHguSU1QTEVNRU5UQVRJT05fQ09MT1JfUkVBRF9GT1JNQVQpP2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gUkdCQSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIGZvcm1hdC5cIik6XG5rLnR5cGU9PT1USFJFRS5VbnNpZ25lZEJ5dGVUeXBlfHx0KGsudHlwZSk9PT14LmdldFBhcmFtZXRlcih4LklNUExFTUVOVEFUSU9OX0NPTE9SX1JFQURfVFlQRSl8fGsudHlwZT09PVRIUkVFLkZsb2F0VHlwZSYmVS5nZXQoXCJXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXRcIil8fGsudHlwZT09PVRIUkVFLkhhbGZGbG9hdFR5cGUmJlUuZ2V0KFwiRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0XCIpP3guY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyh4LkZSQU1FQlVGRkVSKT09PXguRlJBTUVCVUZGRVJfQ09NUExFVEU/MDw9YiYmYjw9YS53aWR0aC1kJiYwPD1jJiZjPD1hLmhlaWdodC1lJiZ4LnJlYWRQaXhlbHMoYixjLGQsZSx0KGsuZm9ybWF0KSx0KGsudHlwZSksZyk6Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVhZFBpeGVscyBmcm9tIHJlbmRlclRhcmdldCBmYWlsZWQuIEZyYW1lYnVmZmVyIG5vdCBjb21wbGV0ZS5cIik6Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIucmVhZFJlbmRlclRhcmdldFBpeGVsczogcmVuZGVyVGFyZ2V0IGlzIG5vdCBpbiBVbnNpZ25lZEJ5dGVUeXBlIG9yIGltcGxlbWVudGF0aW9uIGRlZmluZWQgdHlwZS5cIil9ZmluYWxseXtoJiZcbnguYmluZEZyYW1lYnVmZmVyKHguRlJBTUVCVUZGRVIsTCl9fX19fTtcblRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKGEsYixjKXt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLndpZHRoPWE7dGhpcy5oZWlnaHQ9Yjt0aGlzLnNjaXNzb3I9bmV3IFRIUkVFLlZlY3RvcjQoMCwwLGEsYik7dGhpcy5zY2lzc29yVGVzdD0hMTt0aGlzLnZpZXdwb3J0PW5ldyBUSFJFRS5WZWN0b3I0KDAsMCxhLGIpO2M9Y3x8e307dm9pZCAwPT09Yy5taW5GaWx0ZXImJihjLm1pbkZpbHRlcj1USFJFRS5MaW5lYXJGaWx0ZXIpO3RoaXMudGV4dHVyZT1uZXcgVEhSRUUuVGV4dHVyZSh2b2lkIDAsdm9pZCAwLGMud3JhcFMsYy53cmFwVCxjLm1hZ0ZpbHRlcixjLm1pbkZpbHRlcixjLmZvcm1hdCxjLnR5cGUsYy5hbmlzb3Ryb3B5LGMuZW5jb2RpbmcpO3RoaXMuZGVwdGhCdWZmZXI9dm9pZCAwIT09Yy5kZXB0aEJ1ZmZlcj9jLmRlcHRoQnVmZmVyOiEwO3RoaXMuc3RlbmNpbEJ1ZmZlcj12b2lkIDAhPT1jLnN0ZW5jaWxCdWZmZXI/Yy5zdGVuY2lsQnVmZmVyOlxuITA7dGhpcy5kZXB0aFRleHR1cmU9bnVsbH07XG5PYmplY3QuYXNzaWduKFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LnByb3RvdHlwZSxUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLHtzZXRTaXplOmZ1bmN0aW9uKGEsYil7aWYodGhpcy53aWR0aCE9PWF8fHRoaXMuaGVpZ2h0IT09Yil0aGlzLndpZHRoPWEsdGhpcy5oZWlnaHQ9Yix0aGlzLmRpc3Bvc2UoKTt0aGlzLnZpZXdwb3J0LnNldCgwLDAsYSxiKTt0aGlzLnNjaXNzb3Iuc2V0KDAsMCxhLGIpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLndpZHRoPWEud2lkdGg7dGhpcy5oZWlnaHQ9YS5oZWlnaHQ7dGhpcy52aWV3cG9ydC5jb3B5KGEudmlld3BvcnQpO3RoaXMudGV4dHVyZT1hLnRleHR1cmUuY2xvbmUoKTt0aGlzLmRlcHRoQnVmZmVyPWEuZGVwdGhCdWZmZXI7dGhpcy5zdGVuY2lsQnVmZmVyPWEuc3RlbmNpbEJ1ZmZlcjt0aGlzLmRlcHRoVGV4dHVyZT1hLmRlcHRoVGV4dHVyZTtcbnJldHVybiB0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlPWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5jYWxsKHRoaXMsYSxiLGMpO3RoaXMuYWN0aXZlTWlwTWFwTGV2ZWw9dGhpcy5hY3RpdmVDdWJlRmFjZT0wfTtUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQucHJvdG90eXBlKTtUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZTtcblRIUkVFLldlYkdMQnVmZmVyUmVuZGVyZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3RoaXMuc2V0TW9kZT1mdW5jdGlvbihhKXtkPWF9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGIsZil7YS5kcmF3QXJyYXlzKGQsYixmKTtjLmNhbGxzKys7Yy52ZXJ0aWNlcys9ZjtkPT09YS5UUklBTkdMRVMmJihjLmZhY2VzKz1mLzMpfTt0aGlzLnJlbmRlckluc3RhbmNlcz1mdW5jdGlvbihlKXt2YXIgZj1iLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7aWYobnVsbD09PWYpY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMQnVmZmVyUmVuZGVyZXI6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLlwiKTtlbHNle3ZhciBnPWUuYXR0cmlidXRlcy5wb3NpdGlvbixoPTAsaD1nIGluc3RhbmNlb2YgVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU/Zy5kYXRhLmNvdW50OlxuZy5jb3VudDtmLmRyYXdBcnJheXNJbnN0YW5jZWRBTkdMRShkLDAsaCxlLm1heEluc3RhbmNlZENvdW50KTtjLmNhbGxzKys7Yy52ZXJ0aWNlcys9aCplLm1heEluc3RhbmNlZENvdW50O2Q9PT1hLlRSSUFOR0xFUyYmKGMuZmFjZXMrPWUubWF4SW5zdGFuY2VkQ291bnQqaC8zKX19fTtcblRIUkVFLldlYkdMQ2xpcHBpbmc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7bC52YWx1ZSE9PWQmJihsLnZhbHVlPWQsbC5uZWVkc1VwZGF0ZT0wPGUpO2MubnVtUGxhbmVzPWV9ZnVuY3Rpb24gYihhLGIsZCxlKXt2YXIgZz1udWxsIT09YT9hLmxlbmd0aDowLGY9bnVsbDtpZigwIT09Zyl7Zj1sLnZhbHVlO2lmKCEwIT09ZXx8bnVsbD09PWYpe2U9ZCs0Kmc7Yj1iLm1hdHJpeFdvcmxkSW52ZXJzZTtrLmdldE5vcm1hbE1hdHJpeChiKTtpZihudWxsPT09Znx8Zi5sZW5ndGg8ZSlmPW5ldyBGbG9hdDMyQXJyYXkoZSk7Zm9yKGU9MDtlIT09ZzsrK2UsZCs9NCloLmNvcHkoYVtlXSkuYXBwbHlNYXRyaXg0KGIsayksaC5ub3JtYWwudG9BcnJheShmLGQpLGZbZCszXT1oLmNvbnN0YW50fWwudmFsdWU9ZjtsLm5lZWRzVXBkYXRlPSEwfWMubnVtUGxhbmVzPWc7cmV0dXJuIGZ9dmFyIGM9dGhpcyxkPW51bGwsZT0wLGY9ITEsZz0hMSxoPW5ldyBUSFJFRS5QbGFuZSxrPW5ldyBUSFJFRS5NYXRyaXgzLFxubD17dmFsdWU6bnVsbCxuZWVkc1VwZGF0ZTohMX07dGhpcy51bmlmb3JtPWw7dGhpcy5udW1QbGFuZXM9MDt0aGlzLmluaXQ9ZnVuY3Rpb24oYSxjLGcpe3ZhciBoPTAhPT1hLmxlbmd0aHx8Y3x8MCE9PWV8fGY7Zj1jO2Q9YihhLGcsMCk7ZT1hLmxlbmd0aDtyZXR1cm4gaH07dGhpcy5iZWdpblNoYWRvd3M9ZnVuY3Rpb24oKXtnPSEwO2IobnVsbCl9O3RoaXMuZW5kU2hhZG93cz1mdW5jdGlvbigpe2c9ITE7YSgpfTt0aGlzLnNldFN0YXRlPWZ1bmN0aW9uKGMsaCxrLHEscil7aWYoIWZ8fG51bGw9PT1jfHwwPT09Yy5sZW5ndGh8fGcmJiFoKWc/YihudWxsKTphKCk7ZWxzZXtoPWc/MDplO3ZhciBzPTQqaCx2PXEuY2xpcHBpbmdTdGF0ZXx8bnVsbDtsLnZhbHVlPXY7dj1iKGMsayxzLHIpO2ZvcihjPTA7YyE9PXM7KytjKXZbY109ZFtjXTtxLmNsaXBwaW5nU3RhdGU9djt0aGlzLm51bVBsYW5lcys9aH19fTtcblRIUkVFLldlYkdMSW5kZXhlZEJ1ZmZlclJlbmRlcmVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY7dGhpcy5zZXRNb2RlPWZ1bmN0aW9uKGEpe2Q9YX07dGhpcy5zZXRJbmRleD1mdW5jdGlvbihjKXtjLmFycmF5IGluc3RhbmNlb2YgVWludDMyQXJyYXkmJmIuZ2V0KFwiT0VTX2VsZW1lbnRfaW5kZXhfdWludFwiKT8oZT1hLlVOU0lHTkVEX0lOVCxmPTQpOihlPWEuVU5TSUdORURfU0hPUlQsZj0yKX07dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYixoKXthLmRyYXdFbGVtZW50cyhkLGgsZSxiKmYpO2MuY2FsbHMrKztjLnZlcnRpY2VzKz1oO2Q9PT1hLlRSSUFOR0xFUyYmKGMuZmFjZXMrPWgvMyl9O3RoaXMucmVuZGVySW5zdGFuY2VzPWZ1bmN0aW9uKGcsaCxrKXt2YXIgbD1iLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7bnVsbD09PWw/Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMQnVmZmVyUmVuZGVyZXI6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLlwiKTpcbihsLmRyYXdFbGVtZW50c0luc3RhbmNlZEFOR0xFKGQsayxlLGgqZixnLm1heEluc3RhbmNlZENvdW50KSxjLmNhbGxzKyssYy52ZXJ0aWNlcys9aypnLm1heEluc3RhbmNlZENvdW50LGQ9PT1hLlRSSUFOR0xFUyYmKGMuZmFjZXMrPWcubWF4SW5zdGFuY2VkQ291bnQqay8zKSl9fTtcblRIUkVFLldlYkdMRXh0ZW5zaW9ucz1mdW5jdGlvbihhKXt2YXIgYj17fTt0aGlzLmdldD1mdW5jdGlvbihjKXtpZih2b2lkIDAhPT1iW2NdKXJldHVybiBiW2NdO3ZhciBkO3N3aXRjaChjKXtjYXNlIFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiOmQ9YS5nZXRFeHRlbnNpb24oXCJXRUJHTF9kZXB0aF90ZXh0dXJlXCIpfHxhLmdldEV4dGVuc2lvbihcIk1PWl9XRUJHTF9kZXB0aF90ZXh0dXJlXCIpfHxhLmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9kZXB0aF90ZXh0dXJlXCIpO2JyZWFrO2Nhc2UgXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIjpkPWEuZ2V0RXh0ZW5zaW9uKFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpfHxhLmdldEV4dGVuc2lvbihcIk1PWl9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKTticmVhaztjYXNlIFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIjpkPVxuYS5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8YS5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpO2JyZWFrO2Nhc2UgXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIjpkPWEuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpfHxhLmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIik7YnJlYWs7Y2FzZSBcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxXCI6ZD1hLmdldEV4dGVuc2lvbihcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxXCIpO2JyZWFrO2RlZmF1bHQ6ZD1hLmdldEV4dGVuc2lvbihjKX1udWxsPT09ZCYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogXCIrYytcIiBleHRlbnNpb24gbm90IHN1cHBvcnRlZC5cIik7XG5yZXR1cm4gYltjXT1kfX07XG5USFJFRS5XZWJHTENhcGFiaWxpdGllcz1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChiKXtpZihcImhpZ2hwXCI9PT1iKXtpZigwPGEuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGEuVkVSVEVYX1NIQURFUixhLkhJR0hfRkxPQVQpLnByZWNpc2lvbiYmMDxhLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChhLkZSQUdNRU5UX1NIQURFUixhLkhJR0hfRkxPQVQpLnByZWNpc2lvbilyZXR1cm5cImhpZ2hwXCI7Yj1cIm1lZGl1bXBcIn1yZXR1cm5cIm1lZGl1bXBcIj09PWImJjA8YS5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoYS5WRVJURVhfU0hBREVSLGEuTUVESVVNX0ZMT0FUKS5wcmVjaXNpb24mJjA8YS5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoYS5GUkFHTUVOVF9TSEFERVIsYS5NRURJVU1fRkxPQVQpLnByZWNpc2lvbj9cIm1lZGl1bXBcIjpcImxvd3BcIn12YXIgZTt0aGlzLmdldE1heEFuaXNvdHJvcHk9ZnVuY3Rpb24oKXtpZih2b2lkIDAhPT1lKXJldHVybiBlO3ZhciBjPWIuZ2V0KFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpO1xucmV0dXJuIGU9bnVsbCE9PWM/YS5nZXRQYXJhbWV0ZXIoYy5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpOjB9O3RoaXMuZ2V0TWF4UHJlY2lzaW9uPWQ7dGhpcy5wcmVjaXNpb249dm9pZCAwIT09Yy5wcmVjaXNpb24/Yy5wcmVjaXNpb246XCJoaWdocFwiO3RoaXMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj12b2lkIDAhPT1jLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI/Yy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyOiExO3RoaXMubWF4VGV4dHVyZXM9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7dGhpcy5tYXhWZXJ0ZXhUZXh0dXJlcz1hLmdldFBhcmFtZXRlcihhLk1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7dGhpcy5tYXhUZXh0dXJlU2l6ZT1hLmdldFBhcmFtZXRlcihhLk1BWF9URVhUVVJFX1NJWkUpO3RoaXMubWF4Q3ViZW1hcFNpemU9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfQ1VCRV9NQVBfVEVYVFVSRV9TSVpFKTt0aGlzLm1heEF0dHJpYnV0ZXM9XG5hLmdldFBhcmFtZXRlcihhLk1BWF9WRVJURVhfQVRUUklCUyk7dGhpcy5tYXhWZXJ0ZXhVbmlmb3Jtcz1hLmdldFBhcmFtZXRlcihhLk1BWF9WRVJURVhfVU5JRk9STV9WRUNUT1JTKTt0aGlzLm1heFZhcnlpbmdzPWEuZ2V0UGFyYW1ldGVyKGEuTUFYX1ZBUllJTkdfVkVDVE9SUyk7dGhpcy5tYXhGcmFnbWVudFVuaWZvcm1zPWEuZ2V0UGFyYW1ldGVyKGEuTUFYX0ZSQUdNRU5UX1VOSUZPUk1fVkVDVE9SUyk7dGhpcy52ZXJ0ZXhUZXh0dXJlcz0wPHRoaXMubWF4VmVydGV4VGV4dHVyZXM7dGhpcy5mbG9hdEZyYWdtZW50VGV4dHVyZXM9ISFiLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0XCIpO3RoaXMuZmxvYXRWZXJ0ZXhUZXh0dXJlcz10aGlzLnZlcnRleFRleHR1cmVzJiZ0aGlzLmZsb2F0RnJhZ21lbnRUZXh0dXJlcztjPWQodGhpcy5wcmVjaXNpb24pO2MhPT10aGlzLnByZWNpc2lvbiYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6XCIsdGhpcy5wcmVjaXNpb24sXCJub3Qgc3VwcG9ydGVkLCB1c2luZ1wiLFxuYyxcImluc3RlYWQuXCIpLHRoaXMucHJlY2lzaW9uPWMpO3RoaXMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmKHRoaXMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj0hIWIuZ2V0KFwiRVhUX2ZyYWdfZGVwdGhcIikpfTtcblRIUkVFLldlYkdMR2VvbWV0cmllcz1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXt2YXIgaD1hLnRhcmdldDthPWZbaC5pZF07bnVsbCE9PWEuaW5kZXgmJmUoYS5pbmRleCk7dmFyIGs9YS5hdHRyaWJ1dGVzLGw7Zm9yKGwgaW4gayllKGtbbF0pO2gucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixkKTtkZWxldGUgZltoLmlkXTtsPWIuZ2V0KGgpO2wud2lyZWZyYW1lJiZlKGwud2lyZWZyYW1lKTtiLmRlbGV0ZShoKTtoPWIuZ2V0KGEpO2gud2lyZWZyYW1lJiZlKGgud2lyZWZyYW1lKTtiLmRlbGV0ZShhKTtjLm1lbW9yeS5nZW9tZXRyaWVzLS19ZnVuY3Rpb24gZShjKXt2YXIgZDtkPWMgaW5zdGFuY2VvZiBUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT9iLmdldChjLmRhdGEpLl9fd2ViZ2xCdWZmZXI6Yi5nZXQoYykuX193ZWJnbEJ1ZmZlcjt2b2lkIDAhPT1kJiYoYS5kZWxldGVCdWZmZXIoZCksYyBpbnN0YW5jZW9mIFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlP1xuYi5kZWxldGUoYy5kYXRhKTpiLmRlbGV0ZShjKSl9dmFyIGY9e307dGhpcy5nZXQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZW9tZXRyeTtpZih2b2lkIDAhPT1mW2IuaWRdKXJldHVybiBmW2IuaWRdO2IuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixkKTt2YXIgZTtiIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnk/ZT1iOmIgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSYmKHZvaWQgMD09PWIuX2J1ZmZlckdlb21ldHJ5JiYoYi5fYnVmZmVyR2VvbWV0cnk9KG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSkuc2V0RnJvbU9iamVjdChhKSksZT1iLl9idWZmZXJHZW9tZXRyeSk7ZltiLmlkXT1lO2MubWVtb3J5Lmdlb21ldHJpZXMrKztyZXR1cm4gZX19O1xuVEhSRUUuV2ViR0xMaWdodHM9ZnVuY3Rpb24oKXt2YXIgYT17fTt0aGlzLmdldD1mdW5jdGlvbihiKXtpZih2b2lkIDAhPT1hW2IuaWRdKXJldHVybiBhW2IuaWRdO3ZhciBjO3N3aXRjaChiLnR5cGUpe2Nhc2UgXCJEaXJlY3Rpb25hbExpZ2h0XCI6Yz17ZGlyZWN0aW9uOm5ldyBUSFJFRS5WZWN0b3IzLGNvbG9yOm5ldyBUSFJFRS5Db2xvcixzaGFkb3c6ITEsc2hhZG93QmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IFRIUkVFLlZlY3RvcjJ9O2JyZWFrO2Nhc2UgXCJTcG90TGlnaHRcIjpjPXtwb3NpdGlvbjpuZXcgVEhSRUUuVmVjdG9yMyxkaXJlY3Rpb246bmV3IFRIUkVFLlZlY3RvcjMsY29sb3I6bmV3IFRIUkVFLkNvbG9yLGRpc3RhbmNlOjAsY29uZUNvczowLHBlbnVtYnJhQ29zOjAsZGVjYXk6MCxzaGFkb3c6ITEsc2hhZG93QmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IFRIUkVFLlZlY3RvcjJ9O2JyZWFrO2Nhc2UgXCJQb2ludExpZ2h0XCI6Yz1cbntwb3NpdGlvbjpuZXcgVEhSRUUuVmVjdG9yMyxjb2xvcjpuZXcgVEhSRUUuQ29sb3IsZGlzdGFuY2U6MCxkZWNheTowLHNoYWRvdzohMSxzaGFkb3dCaWFzOjAsc2hhZG93UmFkaXVzOjEsc2hhZG93TWFwU2l6ZTpuZXcgVEhSRUUuVmVjdG9yMn07YnJlYWs7Y2FzZSBcIkhlbWlzcGhlcmVMaWdodFwiOmM9e2RpcmVjdGlvbjpuZXcgVEhSRUUuVmVjdG9yMyxza3lDb2xvcjpuZXcgVEhSRUUuQ29sb3IsZ3JvdW5kQ29sb3I6bmV3IFRIUkVFLkNvbG9yfX1yZXR1cm4gYVtiLmlkXT1jfX07XG5USFJFRS5XZWJHTE9iamVjdHM9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYyxkKXt2YXIgZT1jIGluc3RhbmNlb2YgVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU/Yy5kYXRhOmMsZj1iLmdldChlKTt2b2lkIDA9PT1mLl9fd2ViZ2xCdWZmZXI/KGYuX193ZWJnbEJ1ZmZlcj1hLmNyZWF0ZUJ1ZmZlcigpLGEuYmluZEJ1ZmZlcihkLGYuX193ZWJnbEJ1ZmZlciksYS5idWZmZXJEYXRhKGQsZS5hcnJheSxlLmR5bmFtaWM/YS5EWU5BTUlDX0RSQVc6YS5TVEFUSUNfRFJBVyksZi52ZXJzaW9uPWUudmVyc2lvbik6Zi52ZXJzaW9uIT09ZS52ZXJzaW9uJiYoYS5iaW5kQnVmZmVyKGQsZi5fX3dlYmdsQnVmZmVyKSwhMT09PWUuZHluYW1pY3x8LTE9PT1lLnVwZGF0ZVJhbmdlLmNvdW50P2EuYnVmZmVyU3ViRGF0YShkLDAsZS5hcnJheSk6MD09PWUudXBkYXRlUmFuZ2UuY291bnQ/Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMT2JqZWN0cy51cGRhdGVCdWZmZXI6IGR5bmFtaWMgVEhSRUUuQnVmZmVyQXR0cmlidXRlIG1hcmtlZCBhcyBuZWVkc1VwZGF0ZSBidXQgdXBkYXRlUmFuZ2UuY291bnQgaXMgMCwgZW5zdXJlIHlvdSBhcmUgdXNpbmcgc2V0IG1ldGhvZHMgb3IgdXBkYXRpbmcgbWFudWFsbHkuXCIpOlxuKGEuYnVmZmVyU3ViRGF0YShkLGUudXBkYXRlUmFuZ2Uub2Zmc2V0KmUuYXJyYXkuQllURVNfUEVSX0VMRU1FTlQsZS5hcnJheS5zdWJhcnJheShlLnVwZGF0ZVJhbmdlLm9mZnNldCxlLnVwZGF0ZVJhbmdlLm9mZnNldCtlLnVwZGF0ZVJhbmdlLmNvdW50KSksZS51cGRhdGVSYW5nZS5jb3VudD0wKSxmLnZlcnNpb249ZS52ZXJzaW9uKX1mdW5jdGlvbiBlKGEsYixjKXtpZihiPmMpe3ZhciBkPWI7Yj1jO2M9ZH1kPWFbYl07cmV0dXJuIHZvaWQgMD09PWQ/KGFbYl09W2NdLCEwKTotMT09PWQuaW5kZXhPZihjKT8oZC5wdXNoKGMpLCEwKTohMX12YXIgZj1uZXcgVEhSRUUuV2ViR0xHZW9tZXRyaWVzKGEsYixjKTt0aGlzLmdldEF0dHJpYnV0ZUJ1ZmZlcj1mdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlP2IuZ2V0KGEuZGF0YSkuX193ZWJnbEJ1ZmZlcjpiLmdldChhKS5fX3dlYmdsQnVmZmVyfTt0aGlzLmdldFdpcmVmcmFtZUF0dHJpYnV0ZT1cbmZ1bmN0aW9uKGMpe3ZhciBmPWIuZ2V0KGMpO2lmKHZvaWQgMCE9PWYud2lyZWZyYW1lKXJldHVybiBmLndpcmVmcmFtZTt2YXIgaz1bXSxsPWMuaW5kZXgsbT1jLmF0dHJpYnV0ZXM7Yz1tLnBvc2l0aW9uO2lmKG51bGwhPT1sKWZvcih2YXIgbT17fSxsPWwuYXJyYXkscD0wLG49bC5sZW5ndGg7cDxuO3ArPTMpe3ZhciBxPWxbcCswXSxyPWxbcCsxXSxzPWxbcCsyXTtlKG0scSxyKSYmay5wdXNoKHEscik7ZShtLHIscykmJmsucHVzaChyLHMpO2UobSxzLHEpJiZrLnB1c2gocyxxKX1lbHNlIGZvcihsPW0ucG9zaXRpb24uYXJyYXkscD0wLG49bC5sZW5ndGgvMy0xO3A8bjtwKz0zKXE9cCswLHI9cCsxLHM9cCsyLGsucHVzaChxLHIscixzLHMscSk7az1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyAoNjU1MzU8Yy5jb3VudD9VaW50MzJBcnJheTpVaW50MTZBcnJheSkoayksMSk7ZChrLGEuRUxFTUVOVF9BUlJBWV9CVUZGRVIpO3JldHVybiBmLndpcmVmcmFtZT1rfTt0aGlzLnVwZGF0ZT1cbmZ1bmN0aW9uKGIpe3ZhciBjPWYuZ2V0KGIpO2IuZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSYmYy51cGRhdGVGcm9tT2JqZWN0KGIpO2I9Yy5pbmRleDt2YXIgZT1jLmF0dHJpYnV0ZXM7bnVsbCE9PWImJmQoYixhLkVMRU1FTlRfQVJSQVlfQlVGRkVSKTtmb3IodmFyIGwgaW4gZSlkKGVbbF0sYS5BUlJBWV9CVUZGRVIpO2I9Yy5tb3JwaEF0dHJpYnV0ZXM7Zm9yKGwgaW4gYilmb3IodmFyIGU9YltsXSxtPTAscD1lLmxlbmd0aDttPHA7bSsrKWQoZVttXSxhLkFSUkFZX0JVRkZFUik7cmV0dXJuIGN9fTtcblRIUkVFLldlYkdMUHJvZ3JhbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7c3dpdGNoKGEpe2Nhc2UgVEhSRUUuTGluZWFyRW5jb2Rpbmc6cmV0dXJuW1wiTGluZWFyXCIsXCIoIHZhbHVlIClcIl07Y2FzZSBUSFJFRS5zUkdCRW5jb2Rpbmc6cmV0dXJuW1wic1JHQlwiLFwiKCB2YWx1ZSApXCJdO2Nhc2UgVEhSRUUuUkdCRUVuY29kaW5nOnJldHVybltcIlJHQkVcIixcIiggdmFsdWUgKVwiXTtjYXNlIFRIUkVFLlJHQk03RW5jb2Rpbmc6cmV0dXJuW1wiUkdCTVwiLFwiKCB2YWx1ZSwgNy4wIClcIl07Y2FzZSBUSFJFRS5SR0JNMTZFbmNvZGluZzpyZXR1cm5bXCJSR0JNXCIsXCIoIHZhbHVlLCAxNi4wIClcIl07Y2FzZSBUSFJFRS5SR0JERW5jb2Rpbmc6cmV0dXJuW1wiUkdCRFwiLFwiKCB2YWx1ZSwgMjU2LjAgKVwiXTtjYXNlIFRIUkVFLkdhbW1hRW5jb2Rpbmc6cmV0dXJuW1wiR2FtbWFcIixcIiggdmFsdWUsIGZsb2F0KCBHQU1NQV9GQUNUT1IgKSApXCJdO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJ1bnN1cHBvcnRlZCBlbmNvZGluZzogXCIrXG5hKTt9fWZ1bmN0aW9uIGIoYixjKXt2YXIgZD1hKGMpO3JldHVyblwidmVjNCBcIitiK1wiKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gXCIrZFswXStcIlRvTGluZWFyXCIrZFsxXStcIjsgfVwifWZ1bmN0aW9uIGMoYixjKXt2YXIgZD1hKGMpO3JldHVyblwidmVjNCBcIitiK1wiKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gTGluZWFyVG9cIitkWzBdK2RbMV0rXCI7IH1cIn1mdW5jdGlvbiBkKGEsYil7dmFyIGM7c3dpdGNoKGIpe2Nhc2UgVEhSRUUuTGluZWFyVG9uZU1hcHBpbmc6Yz1cIkxpbmVhclwiO2JyZWFrO2Nhc2UgVEhSRUUuUmVpbmhhcmRUb25lTWFwcGluZzpjPVwiUmVpbmhhcmRcIjticmVhaztjYXNlIFRIUkVFLlVuY2hhcnRlZDJUb25lTWFwcGluZzpjPVwiVW5jaGFydGVkMlwiO2JyZWFrO2Nhc2UgVEhSRUUuQ2luZW9uVG9uZU1hcHBpbmc6Yz1cIk9wdGltaXplZENpbmVvblwiO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJ1bnN1cHBvcnRlZCB0b25lTWFwcGluZzogXCIrYik7fXJldHVyblwidmVjMyBcIithK1xuXCIoIHZlYzMgY29sb3IgKSB7IHJldHVybiBcIitjK1wiVG9uZU1hcHBpbmcoIGNvbG9yICk7IH1cIn1mdW5jdGlvbiBlKGEsYixjKXthPWF8fHt9O3JldHVyblthLmRlcml2YXRpdmVzfHxiLmVudk1hcEN1YmVVVnx8Yi5idW1wTWFwfHxiLm5vcm1hbE1hcHx8Yi5mbGF0U2hhZGluZz9cIiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlXCI6XCJcIiwoYS5mcmFnRGVwdGh8fGIubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcikmJmMuZ2V0KFwiRVhUX2ZyYWdfZGVwdGhcIik/XCIjZXh0ZW5zaW9uIEdMX0VYVF9mcmFnX2RlcHRoIDogZW5hYmxlXCI6XCJcIixhLmRyYXdCdWZmZXJzJiZjLmdldChcIldFQkdMX2RyYXdfYnVmZmVyc1wiKT9cIiNleHRlbnNpb24gR0xfRVhUX2RyYXdfYnVmZmVycyA6IHJlcXVpcmVcIjpcIlwiLChhLnNoYWRlclRleHR1cmVMT0R8fGIuZW52TWFwKSYmYy5nZXQoXCJFWFRfc2hhZGVyX3RleHR1cmVfbG9kXCIpP1wiI2V4dGVuc2lvbiBHTF9FWFRfc2hhZGVyX3RleHR1cmVfbG9kIDogZW5hYmxlXCI6XG5cIlwiXS5maWx0ZXIoZykuam9pbihcIlxcblwiKX1mdW5jdGlvbiBmKGEpe3ZhciBiPVtdLGM7Zm9yKGMgaW4gYSl7dmFyIGQ9YVtjXTshMSE9PWQmJmIucHVzaChcIiNkZWZpbmUgXCIrYytcIiBcIitkKX1yZXR1cm4gYi5qb2luKFwiXFxuXCIpfWZ1bmN0aW9uIGcoYSl7cmV0dXJuXCJcIiE9PWF9ZnVuY3Rpb24gaChhLGIpe3JldHVybiBhLnJlcGxhY2UoL05VTV9ESVJfTElHSFRTL2csYi5udW1EaXJMaWdodHMpLnJlcGxhY2UoL05VTV9TUE9UX0xJR0hUUy9nLGIubnVtU3BvdExpZ2h0cykucmVwbGFjZSgvTlVNX1BPSU5UX0xJR0hUUy9nLGIubnVtUG9pbnRMaWdodHMpLnJlcGxhY2UoL05VTV9IRU1JX0xJR0hUUy9nLGIubnVtSGVtaUxpZ2h0cyl9ZnVuY3Rpb24gayhhKXtyZXR1cm4gYS5yZXBsYWNlKC8jaW5jbHVkZSArPChbXFx3XFxkLl0rKT4vZyxmdW5jdGlvbihhLGIpe3ZhciBjPVRIUkVFLlNoYWRlckNodW5rW2JdO2lmKHZvaWQgMD09PWMpdGhyb3cgRXJyb3IoXCJDYW4gbm90IHJlc29sdmUgI2luY2x1ZGUgPFwiK1xuYitcIj5cIik7cmV0dXJuIGsoYyl9KX1mdW5jdGlvbiBsKGEpe3JldHVybiBhLnJlcGxhY2UoL2ZvciBcXCggaW50IGkgXFw9IChcXGQrKVxcOyBpIDwgKFxcZCspXFw7IGkgXFwrXFwrIFxcKSBcXHsoW1xcc1xcU10rPykoPz1cXH0pXFx9L2csZnVuY3Rpb24oYSxiLGMsZCl7YT1cIlwiO2ZvcihiPXBhcnNlSW50KGIpO2I8cGFyc2VJbnQoYyk7YisrKWErPWQucmVwbGFjZSgvXFxbIGkgXFxdL2csXCJbIFwiK2IrXCIgXVwiKTtyZXR1cm4gYX0pfXZhciBtPTA7cmV0dXJuIGZ1bmN0aW9uKGEsbixxLHIpe3ZhciBzPWEuY29udGV4dCx2PXEuZXh0ZW5zaW9ucyx0PXEuZGVmaW5lcyx1PXEuX193ZWJnbFNoYWRlci52ZXJ0ZXhTaGFkZXIsRD1xLl9fd2ViZ2xTaGFkZXIuZnJhZ21lbnRTaGFkZXIsdz1cIlNIQURPV01BUF9UWVBFX0JBU0lDXCI7ci5zaGFkb3dNYXBUeXBlPT09VEhSRUUuUENGU2hhZG93TWFwP3c9XCJTSEFET1dNQVBfVFlQRV9QQ0ZcIjpyLnNoYWRvd01hcFR5cGU9PT1USFJFRS5QQ0ZTb2Z0U2hhZG93TWFwJiYodz1cIlNIQURPV01BUF9UWVBFX1BDRl9TT0ZUXCIpO1xudmFyIEk9XCJFTlZNQVBfVFlQRV9DVUJFXCIsej1cIkVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cIix5PVwiRU5WTUFQX0JMRU5ESU5HX01VTFRJUExZXCI7aWYoci5lbnZNYXApe3N3aXRjaChxLmVudk1hcC5tYXBwaW5nKXtjYXNlIFRIUkVFLkN1YmVSZWZsZWN0aW9uTWFwcGluZzpjYXNlIFRIUkVFLkN1YmVSZWZyYWN0aW9uTWFwcGluZzpJPVwiRU5WTUFQX1RZUEVfQ1VCRVwiO2JyZWFrO2Nhc2UgVEhSRUUuQ3ViZVVWUmVmbGVjdGlvbk1hcHBpbmc6Y2FzZSBUSFJFRS5DdWJlVVZSZWZyYWN0aW9uTWFwcGluZzpJPVwiRU5WTUFQX1RZUEVfQ1VCRV9VVlwiO2JyZWFrO2Nhc2UgVEhSRUUuRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmc6Y2FzZSBUSFJFRS5FcXVpcmVjdGFuZ3VsYXJSZWZyYWN0aW9uTWFwcGluZzpJPVwiRU5WTUFQX1RZUEVfRVFVSVJFQ1wiO2JyZWFrO2Nhc2UgVEhSRUUuU3BoZXJpY2FsUmVmbGVjdGlvbk1hcHBpbmc6ST1cIkVOVk1BUF9UWVBFX1NQSEVSRVwifXN3aXRjaChxLmVudk1hcC5tYXBwaW5nKXtjYXNlIFRIUkVFLkN1YmVSZWZyYWN0aW9uTWFwcGluZzpjYXNlIFRIUkVFLkVxdWlyZWN0YW5ndWxhclJlZnJhY3Rpb25NYXBwaW5nOno9XG5cIkVOVk1BUF9NT0RFX1JFRlJBQ1RJT05cIn1zd2l0Y2gocS5jb21iaW5lKXtjYXNlIFRIUkVFLk11bHRpcGx5T3BlcmF0aW9uOnk9XCJFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFlcIjticmVhaztjYXNlIFRIUkVFLk1peE9wZXJhdGlvbjp5PVwiRU5WTUFQX0JMRU5ESU5HX01JWFwiO2JyZWFrO2Nhc2UgVEhSRUUuQWRkT3BlcmF0aW9uOnk9XCJFTlZNQVBfQkxFTkRJTkdfQUREXCJ9fXZhciBBPTA8YS5nYW1tYUZhY3Rvcj9hLmdhbW1hRmFjdG9yOjEsdj1lKHYscixhLmV4dGVuc2lvbnMpLEc9Zih0KSxCPXMuY3JlYXRlUHJvZ3JhbSgpO3EgaW5zdGFuY2VvZiBUSFJFRS5SYXdTaGFkZXJNYXRlcmlhbD8odD1bR10uZmlsdGVyKGcpLmpvaW4oXCJcXG5cIiksdz1bR10uZmlsdGVyKGcpLmpvaW4oXCJcXG5cIikpOih0PVtcInByZWNpc2lvbiBcIityLnByZWNpc2lvbitcIiBmbG9hdDtcIixcInByZWNpc2lvbiBcIityLnByZWNpc2lvbitcIiBpbnQ7XCIsXCIjZGVmaW5lIFNIQURFUl9OQU1FIFwiK3EuX193ZWJnbFNoYWRlci5uYW1lLFxuRyxyLnN1cHBvcnRzVmVydGV4VGV4dHVyZXM/XCIjZGVmaW5lIFZFUlRFWF9URVhUVVJFU1wiOlwiXCIsXCIjZGVmaW5lIEdBTU1BX0ZBQ1RPUiBcIitBLFwiI2RlZmluZSBNQVhfQk9ORVMgXCIrci5tYXhCb25lcyxyLm1hcD9cIiNkZWZpbmUgVVNFX01BUFwiOlwiXCIsci5lbnZNYXA/XCIjZGVmaW5lIFVTRV9FTlZNQVBcIjpcIlwiLHIuZW52TWFwP1wiI2RlZmluZSBcIit6OlwiXCIsci5saWdodE1hcD9cIiNkZWZpbmUgVVNFX0xJR0hUTUFQXCI6XCJcIixyLmFvTWFwP1wiI2RlZmluZSBVU0VfQU9NQVBcIjpcIlwiLHIuZW1pc3NpdmVNYXA/XCIjZGVmaW5lIFVTRV9FTUlTU0lWRU1BUFwiOlwiXCIsci5idW1wTWFwP1wiI2RlZmluZSBVU0VfQlVNUE1BUFwiOlwiXCIsci5ub3JtYWxNYXA/XCIjZGVmaW5lIFVTRV9OT1JNQUxNQVBcIjpcIlwiLHIuZGlzcGxhY2VtZW50TWFwJiZyLnN1cHBvcnRzVmVydGV4VGV4dHVyZXM/XCIjZGVmaW5lIFVTRV9ESVNQTEFDRU1FTlRNQVBcIjpcIlwiLHIuc3BlY3VsYXJNYXA/XCIjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUFwiOlxuXCJcIixyLnJvdWdobmVzc01hcD9cIiNkZWZpbmUgVVNFX1JPVUdITkVTU01BUFwiOlwiXCIsci5tZXRhbG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9NRVRBTE5FU1NNQVBcIjpcIlwiLHIuYWxwaGFNYXA/XCIjZGVmaW5lIFVTRV9BTFBIQU1BUFwiOlwiXCIsci52ZXJ0ZXhDb2xvcnM/XCIjZGVmaW5lIFVTRV9DT0xPUlwiOlwiXCIsci5mbGF0U2hhZGluZz9cIiNkZWZpbmUgRkxBVF9TSEFERURcIjpcIlwiLHIuc2tpbm5pbmc/XCIjZGVmaW5lIFVTRV9TS0lOTklOR1wiOlwiXCIsci51c2VWZXJ0ZXhUZXh0dXJlP1wiI2RlZmluZSBCT05FX1RFWFRVUkVcIjpcIlwiLHIubW9ycGhUYXJnZXRzP1wiI2RlZmluZSBVU0VfTU9SUEhUQVJHRVRTXCI6XCJcIixyLm1vcnBoTm9ybWFscyYmITE9PT1yLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBVU0VfTU9SUEhOT1JNQUxTXCI6XCJcIixyLmRvdWJsZVNpZGVkP1wiI2RlZmluZSBET1VCTEVfU0lERURcIjpcIlwiLHIuZmxpcFNpZGVkP1wiI2RlZmluZSBGTElQX1NJREVEXCI6XCJcIixcIiNkZWZpbmUgTlVNX0NMSVBQSU5HX1BMQU5FUyBcIitcbnIubnVtQ2xpcHBpbmdQbGFuZXMsci5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBVU0VfU0hBRE9XTUFQXCI6XCJcIixyLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFwiK3c6XCJcIixyLnNpemVBdHRlbnVhdGlvbj9cIiNkZWZpbmUgVVNFX1NJWkVBVFRFTlVBVElPTlwiOlwiXCIsci5sb2dhcml0aG1pY0RlcHRoQnVmZmVyP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZcIjpcIlwiLHIubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmYS5leHRlbnNpb25zLmdldChcIkVYVF9mcmFnX2RlcHRoXCIpP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZfRVhUXCI6XCJcIixcInVuaWZvcm0gbWF0NCBtb2RlbE1hdHJpeDtcIixcInVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDtcIixcInVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1wiLFwidW5pZm9ybSBtYXQzIG5vcm1hbE1hdHJpeDtcIixcInVuaWZvcm0gdmVjMyBjYW1lcmFQb3NpdGlvbjtcIixcImF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uO1wiLFxuXCJhdHRyaWJ1dGUgdmVjMyBub3JtYWw7XCIsXCJhdHRyaWJ1dGUgdmVjMiB1djtcIixcIiNpZmRlZiBVU0VfQ09MT1JcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIGNvbG9yO1wiLFwiI2VuZGlmXCIsXCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQwO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQxO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQyO1wiLFwiXFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQzO1wiLFwiXFx0I2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMDtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMTtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMjtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoTm9ybWFsMztcIixcIlxcdCNlbHNlXCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDQ7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDU7XCIsXG5cIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NjtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NztcIixcIlxcdCNlbmRpZlwiLFwiI2VuZGlmXCIsXCIjaWZkZWYgVVNFX1NLSU5OSU5HXCIsXCJcXHRhdHRyaWJ1dGUgdmVjNCBza2luSW5kZXg7XCIsXCJcXHRhdHRyaWJ1dGUgdmVjNCBza2luV2VpZ2h0O1wiLFwiI2VuZGlmXCIsXCJcXG5cIl0uZmlsdGVyKGcpLmpvaW4oXCJcXG5cIiksdz1bdixcInByZWNpc2lvbiBcIityLnByZWNpc2lvbitcIiBmbG9hdDtcIixcInByZWNpc2lvbiBcIityLnByZWNpc2lvbitcIiBpbnQ7XCIsXCIjZGVmaW5lIFNIQURFUl9OQU1FIFwiK3EuX193ZWJnbFNoYWRlci5uYW1lLEcsci5hbHBoYVRlc3Q/XCIjZGVmaW5lIEFMUEhBVEVTVCBcIityLmFscGhhVGVzdDpcIlwiLFwiI2RlZmluZSBHQU1NQV9GQUNUT1IgXCIrQSxyLnVzZUZvZyYmci5mb2c/XCIjZGVmaW5lIFVTRV9GT0dcIjpcIlwiLHIudXNlRm9nJiZyLmZvZ0V4cD9cIiNkZWZpbmUgRk9HX0VYUDJcIjpcIlwiLHIubWFwP1wiI2RlZmluZSBVU0VfTUFQXCI6XG5cIlwiLHIuZW52TWFwP1wiI2RlZmluZSBVU0VfRU5WTUFQXCI6XCJcIixyLmVudk1hcD9cIiNkZWZpbmUgXCIrSTpcIlwiLHIuZW52TWFwP1wiI2RlZmluZSBcIit6OlwiXCIsci5lbnZNYXA/XCIjZGVmaW5lIFwiK3k6XCJcIixyLmxpZ2h0TWFwP1wiI2RlZmluZSBVU0VfTElHSFRNQVBcIjpcIlwiLHIuYW9NYXA/XCIjZGVmaW5lIFVTRV9BT01BUFwiOlwiXCIsci5lbWlzc2l2ZU1hcD9cIiNkZWZpbmUgVVNFX0VNSVNTSVZFTUFQXCI6XCJcIixyLmJ1bXBNYXA/XCIjZGVmaW5lIFVTRV9CVU1QTUFQXCI6XCJcIixyLm5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX05PUk1BTE1BUFwiOlwiXCIsci5zcGVjdWxhck1hcD9cIiNkZWZpbmUgVVNFX1NQRUNVTEFSTUFQXCI6XCJcIixyLnJvdWdobmVzc01hcD9cIiNkZWZpbmUgVVNFX1JPVUdITkVTU01BUFwiOlwiXCIsci5tZXRhbG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9NRVRBTE5FU1NNQVBcIjpcIlwiLHIuYWxwaGFNYXA/XCIjZGVmaW5lIFVTRV9BTFBIQU1BUFwiOlwiXCIsci52ZXJ0ZXhDb2xvcnM/XCIjZGVmaW5lIFVTRV9DT0xPUlwiOlxuXCJcIixyLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBGTEFUX1NIQURFRFwiOlwiXCIsci5kb3VibGVTaWRlZD9cIiNkZWZpbmUgRE9VQkxFX1NJREVEXCI6XCJcIixyLmZsaXBTaWRlZD9cIiNkZWZpbmUgRkxJUF9TSURFRFwiOlwiXCIsXCIjZGVmaW5lIE5VTV9DTElQUElOR19QTEFORVMgXCIrci5udW1DbGlwcGluZ1BsYW5lcyxyLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFVTRV9TSEFET1dNQVBcIjpcIlwiLHIuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgXCIrdzpcIlwiLHIucHJlbXVsdGlwbGllZEFscGhhP1wiI2RlZmluZSBQUkVNVUxUSVBMSUVEX0FMUEhBXCI6XCJcIixyLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzP1wiI2RlZmluZSBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXCI6XCJcIixyLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI/XCIjZGVmaW5lIFVTRV9MT0dERVBUSEJVRlwiOlwiXCIsci5sb2dhcml0aG1pY0RlcHRoQnVmZmVyJiZhLmV4dGVuc2lvbnMuZ2V0KFwiRVhUX2ZyYWdfZGVwdGhcIik/XCIjZGVmaW5lIFVTRV9MT0dERVBUSEJVRl9FWFRcIjpcblwiXCIsci5lbnZNYXAmJmEuZXh0ZW5zaW9ucy5nZXQoXCJFWFRfc2hhZGVyX3RleHR1cmVfbG9kXCIpP1wiI2RlZmluZSBURVhUVVJFX0xPRF9FWFRcIjpcIlwiLFwidW5pZm9ybSBtYXQ0IHZpZXdNYXRyaXg7XCIsXCJ1bmlmb3JtIHZlYzMgY2FtZXJhUG9zaXRpb247XCIsci50b25lTWFwcGluZyE9PVRIUkVFLk5vVG9uZU1hcHBpbmc/XCIjZGVmaW5lIFRPTkVfTUFQUElOR1wiOlwiXCIsci50b25lTWFwcGluZyE9PVRIUkVFLk5vVG9uZU1hcHBpbmc/VEhSRUUuU2hhZGVyQ2h1bmsudG9uZW1hcHBpbmdfcGFyc19mcmFnbWVudDpcIlwiLHIudG9uZU1hcHBpbmchPT1USFJFRS5Ob1RvbmVNYXBwaW5nP2QoXCJ0b25lTWFwcGluZ1wiLHIudG9uZU1hcHBpbmcpOlwiXCIsci5vdXRwdXRFbmNvZGluZ3x8ci5tYXBFbmNvZGluZ3x8ci5lbnZNYXBFbmNvZGluZ3x8ci5lbWlzc2l2ZU1hcEVuY29kaW5nP1RIUkVFLlNoYWRlckNodW5rLmVuY29kaW5nc19wYXJzX2ZyYWdtZW50OlwiXCIsci5tYXBFbmNvZGluZz9iKFwibWFwVGV4ZWxUb0xpbmVhclwiLFxuci5tYXBFbmNvZGluZyk6XCJcIixyLmVudk1hcEVuY29kaW5nP2IoXCJlbnZNYXBUZXhlbFRvTGluZWFyXCIsci5lbnZNYXBFbmNvZGluZyk6XCJcIixyLmVtaXNzaXZlTWFwRW5jb2Rpbmc/YihcImVtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhclwiLHIuZW1pc3NpdmVNYXBFbmNvZGluZyk6XCJcIixyLm91dHB1dEVuY29kaW5nP2MoXCJsaW5lYXJUb091dHB1dFRleGVsXCIsci5vdXRwdXRFbmNvZGluZyk6XCJcIixyLmRlcHRoUGFja2luZz9cIiNkZWZpbmUgREVQVEhfUEFDS0lORyBcIitxLmRlcHRoUGFja2luZzpcIlwiLFwiXFxuXCJdLmZpbHRlcihnKS5qb2luKFwiXFxuXCIpKTt1PWsodSxyKTt1PWgodSxyKTtEPWsoRCxyKTtEPWgoRCxyKTshMT09PXEgaW5zdGFuY2VvZiBUSFJFRS5TaGFkZXJNYXRlcmlhbCYmKHU9bCh1KSxEPWwoRCkpO0Q9dytEO3U9VEhSRUUuV2ViR0xTaGFkZXIocyxzLlZFUlRFWF9TSEFERVIsdCt1KTtEPVRIUkVFLldlYkdMU2hhZGVyKHMscy5GUkFHTUVOVF9TSEFERVIsRCk7cy5hdHRhY2hTaGFkZXIoQixcbnUpO3MuYXR0YWNoU2hhZGVyKEIsRCk7dm9pZCAwIT09cS5pbmRleDBBdHRyaWJ1dGVOYW1lP3MuYmluZEF0dHJpYkxvY2F0aW9uKEIsMCxxLmluZGV4MEF0dHJpYnV0ZU5hbWUpOiEwPT09ci5tb3JwaFRhcmdldHMmJnMuYmluZEF0dHJpYkxvY2F0aW9uKEIsMCxcInBvc2l0aW9uXCIpO3MubGlua1Byb2dyYW0oQik7cj1zLmdldFByb2dyYW1JbmZvTG9nKEIpO0k9cy5nZXRTaGFkZXJJbmZvTG9nKHUpO3o9cy5nZXRTaGFkZXJJbmZvTG9nKEQpO0E9eT0hMDtpZighMT09PXMuZ2V0UHJvZ3JhbVBhcmFtZXRlcihCLHMuTElOS19TVEFUVVMpKXk9ITEsY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUHJvZ3JhbTogc2hhZGVyIGVycm9yOiBcIixzLmdldEVycm9yKCksXCJnbC5WQUxJREFURV9TVEFUVVNcIixzLmdldFByb2dyYW1QYXJhbWV0ZXIoQixzLlZBTElEQVRFX1NUQVRVUyksXCJnbC5nZXRQcm9ncmFtSW5mb0xvZ1wiLHIsSSx6KTtlbHNlIGlmKFwiXCIhPT1yKWNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbTogZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coKVwiLFxucik7ZWxzZSBpZihcIlwiPT09SXx8XCJcIj09PXopQT0hMTtBJiYodGhpcy5kaWFnbm9zdGljcz17cnVubmFibGU6eSxtYXRlcmlhbDpxLHByb2dyYW1Mb2c6cix2ZXJ0ZXhTaGFkZXI6e2xvZzpJLHByZWZpeDp0fSxmcmFnbWVudFNoYWRlcjp7bG9nOnoscHJlZml4Ond9fSk7cy5kZWxldGVTaGFkZXIodSk7cy5kZWxldGVTaGFkZXIoRCk7dmFyIEY7dGhpcy5nZXRVbmlmb3Jtcz1mdW5jdGlvbigpe3ZvaWQgMD09PUYmJihGPW5ldyBUSFJFRS5XZWJHTFVuaWZvcm1zKHMsQixhKSk7cmV0dXJuIEZ9O3ZhciBKO3RoaXMuZ2V0QXR0cmlidXRlcz1mdW5jdGlvbigpe2lmKHZvaWQgMD09PUope2Zvcih2YXIgYT17fSxiPXMuZ2V0UHJvZ3JhbVBhcmFtZXRlcihCLHMuQUNUSVZFX0FUVFJJQlVURVMpLGM9MDtjPGI7YysrKXt2YXIgZD1zLmdldEFjdGl2ZUF0dHJpYihCLGMpLm5hbWU7YVtkXT1zLmdldEF0dHJpYkxvY2F0aW9uKEIsZCl9Sj1hfXJldHVybiBKfTt0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXtzLmRlbGV0ZVByb2dyYW0oQik7XG50aGlzLnByb2dyYW09dm9pZCAwfTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHt1bmlmb3Jtczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiAudW5pZm9ybXMgaXMgbm93IC5nZXRVbmlmb3JtcygpLlwiKTtyZXR1cm4gdGhpcy5nZXRVbmlmb3JtcygpfX0sYXR0cmlidXRlczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiAuYXR0cmlidXRlcyBpcyBub3cgLmdldEF0dHJpYnV0ZXMoKS5cIik7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlcygpfX19KTt0aGlzLmlkPW0rKzt0aGlzLmNvZGU9bjt0aGlzLnVzZWRUaW1lcz0xO3RoaXMucHJvZ3JhbT1CO3RoaXMudmVydGV4U2hhZGVyPXU7dGhpcy5mcmFnbWVudFNoYWRlcj1EO3JldHVybiB0aGlzfX0oKTtcblRIUkVFLldlYkdMUHJvZ3JhbXM9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7dmFyIGM7YT9hIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZT9jPWEuZW5jb2Rpbmc6YSBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0JiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtcy5nZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwOiBkb24ndCB1c2UgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxjPWEudGV4dHVyZS5lbmNvZGluZyk6Yz1USFJFRS5MaW5lYXJFbmNvZGluZztjPT09VEhSRUUuTGluZWFyRW5jb2RpbmcmJmImJihjPVRIUkVFLkdhbW1hRW5jb2RpbmcpO3JldHVybiBjfXZhciBkPVtdLGU9e01lc2hEZXB0aE1hdGVyaWFsOlwiZGVwdGhcIixNZXNoTm9ybWFsTWF0ZXJpYWw6XCJub3JtYWxcIixNZXNoQmFzaWNNYXRlcmlhbDpcImJhc2ljXCIsTWVzaExhbWJlcnRNYXRlcmlhbDpcImxhbWJlcnRcIixcbk1lc2hQaG9uZ01hdGVyaWFsOlwicGhvbmdcIixNZXNoU3RhbmRhcmRNYXRlcmlhbDpcInBoeXNpY2FsXCIsTWVzaFBoeXNpY2FsTWF0ZXJpYWw6XCJwaHlzaWNhbFwiLExpbmVCYXNpY01hdGVyaWFsOlwiYmFzaWNcIixMaW5lRGFzaGVkTWF0ZXJpYWw6XCJkYXNoZWRcIixQb2ludHNNYXRlcmlhbDpcInBvaW50c1wifSxmPVwicHJlY2lzaW9uIHN1cHBvcnRzVmVydGV4VGV4dHVyZXMgbWFwIG1hcEVuY29kaW5nIGVudk1hcCBlbnZNYXBNb2RlIGVudk1hcEVuY29kaW5nIGxpZ2h0TWFwIGFvTWFwIGVtaXNzaXZlTWFwIGVtaXNzaXZlTWFwRW5jb2RpbmcgYnVtcE1hcCBub3JtYWxNYXAgZGlzcGxhY2VtZW50TWFwIHNwZWN1bGFyTWFwIHJvdWdobmVzc01hcCBtZXRhbG5lc3NNYXAgYWxwaGFNYXAgY29tYmluZSB2ZXJ0ZXhDb2xvcnMgZm9nIHVzZUZvZyBmb2dFeHAgZmxhdFNoYWRpbmcgc2l6ZUF0dGVudWF0aW9uIGxvZ2FyaXRobWljRGVwdGhCdWZmZXIgc2tpbm5pbmcgbWF4Qm9uZXMgdXNlVmVydGV4VGV4dHVyZSBtb3JwaFRhcmdldHMgbW9ycGhOb3JtYWxzIG1heE1vcnBoVGFyZ2V0cyBtYXhNb3JwaE5vcm1hbHMgcHJlbXVsdGlwbGllZEFscGhhIG51bURpckxpZ2h0cyBudW1Qb2ludExpZ2h0cyBudW1TcG90TGlnaHRzIG51bUhlbWlMaWdodHMgc2hhZG93TWFwRW5hYmxlZCBzaGFkb3dNYXBUeXBlIHRvbmVNYXBwaW5nIHBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzIGFscGhhVGVzdCBkb3VibGVTaWRlZCBmbGlwU2lkZWQgbnVtQ2xpcHBpbmdQbGFuZXMgZGVwdGhQYWNraW5nXCIuc3BsaXQoXCIgXCIpO1xudGhpcy5nZXRQYXJhbWV0ZXJzPWZ1bmN0aW9uKGQsZixrLGwsbSl7dmFyIHA9ZVtkLnR5cGVdLG47Yi5mbG9hdFZlcnRleFRleHR1cmVzJiZtJiZtLnNrZWxldG9uJiZtLnNrZWxldG9uLnVzZVZlcnRleFRleHR1cmU/bj0xMDI0OihuPU1hdGguZmxvb3IoKGIubWF4VmVydGV4VW5pZm9ybXMtMjApLzQpLHZvaWQgMCE9PW0mJm0gaW5zdGFuY2VvZiBUSFJFRS5Ta2lubmVkTWVzaCYmKG49TWF0aC5taW4obS5za2VsZXRvbi5ib25lcy5sZW5ndGgsbiksbjxtLnNrZWxldG9uLmJvbmVzLmxlbmd0aCYmY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogdG9vIG1hbnkgYm9uZXMgLSBcIittLnNrZWxldG9uLmJvbmVzLmxlbmd0aCtcIiwgdGhpcyBHUFUgc3VwcG9ydHMganVzdCBcIituK1wiICh0cnkgT3BlbkdMIGluc3RlYWQgb2YgQU5HTEUpXCIpKSk7dmFyIHE9YS5nZXRQcmVjaXNpb24oKTtudWxsIT09ZC5wcmVjaXNpb24mJihxPWIuZ2V0TWF4UHJlY2lzaW9uKGQucHJlY2lzaW9uKSxxIT09XG5kLnByZWNpc2lvbiYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtLmdldFBhcmFtZXRlcnM6XCIsZC5wcmVjaXNpb24sXCJub3Qgc3VwcG9ydGVkLCB1c2luZ1wiLHEsXCJpbnN0ZWFkLlwiKSk7dmFyIHI9YS5nZXRDdXJyZW50UmVuZGVyVGFyZ2V0KCk7cmV0dXJue3NoYWRlcklEOnAscHJlY2lzaW9uOnEsc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlczpiLnZlcnRleFRleHR1cmVzLG91dHB1dEVuY29kaW5nOmMocj9yLnRleHR1cmU6bnVsbCxhLmdhbW1hT3V0cHV0KSxtYXA6ISFkLm1hcCxtYXBFbmNvZGluZzpjKGQubWFwLGEuZ2FtbWFJbnB1dCksZW52TWFwOiEhZC5lbnZNYXAsZW52TWFwTW9kZTpkLmVudk1hcCYmZC5lbnZNYXAubWFwcGluZyxlbnZNYXBFbmNvZGluZzpjKGQuZW52TWFwLGEuZ2FtbWFJbnB1dCksZW52TWFwQ3ViZVVWOiEhZC5lbnZNYXAmJihkLmVudk1hcC5tYXBwaW5nPT09VEhSRUUuQ3ViZVVWUmVmbGVjdGlvbk1hcHBpbmd8fGQuZW52TWFwLm1hcHBpbmc9PT1cblRIUkVFLkN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nKSxsaWdodE1hcDohIWQubGlnaHRNYXAsYW9NYXA6ISFkLmFvTWFwLGVtaXNzaXZlTWFwOiEhZC5lbWlzc2l2ZU1hcCxlbWlzc2l2ZU1hcEVuY29kaW5nOmMoZC5lbWlzc2l2ZU1hcCxhLmdhbW1hSW5wdXQpLGJ1bXBNYXA6ISFkLmJ1bXBNYXAsbm9ybWFsTWFwOiEhZC5ub3JtYWxNYXAsZGlzcGxhY2VtZW50TWFwOiEhZC5kaXNwbGFjZW1lbnRNYXAscm91Z2huZXNzTWFwOiEhZC5yb3VnaG5lc3NNYXAsbWV0YWxuZXNzTWFwOiEhZC5tZXRhbG5lc3NNYXAsc3BlY3VsYXJNYXA6ISFkLnNwZWN1bGFyTWFwLGFscGhhTWFwOiEhZC5hbHBoYU1hcCxjb21iaW5lOmQuY29tYmluZSx2ZXJ0ZXhDb2xvcnM6ZC52ZXJ0ZXhDb2xvcnMsZm9nOiEhayx1c2VGb2c6ZC5mb2csZm9nRXhwOmsgaW5zdGFuY2VvZiBUSFJFRS5Gb2dFeHAyLGZsYXRTaGFkaW5nOmQuc2hhZGluZz09PVRIUkVFLkZsYXRTaGFkaW5nLHNpemVBdHRlbnVhdGlvbjpkLnNpemVBdHRlbnVhdGlvbixcbmxvZ2FyaXRobWljRGVwdGhCdWZmZXI6Yi5sb2dhcml0aG1pY0RlcHRoQnVmZmVyLHNraW5uaW5nOmQuc2tpbm5pbmcsbWF4Qm9uZXM6bix1c2VWZXJ0ZXhUZXh0dXJlOmIuZmxvYXRWZXJ0ZXhUZXh0dXJlcyYmbSYmbS5za2VsZXRvbiYmbS5za2VsZXRvbi51c2VWZXJ0ZXhUZXh0dXJlLG1vcnBoVGFyZ2V0czpkLm1vcnBoVGFyZ2V0cyxtb3JwaE5vcm1hbHM6ZC5tb3JwaE5vcm1hbHMsbWF4TW9ycGhUYXJnZXRzOmEubWF4TW9ycGhUYXJnZXRzLG1heE1vcnBoTm9ybWFsczphLm1heE1vcnBoTm9ybWFscyxudW1EaXJMaWdodHM6Zi5kaXJlY3Rpb25hbC5sZW5ndGgsbnVtUG9pbnRMaWdodHM6Zi5wb2ludC5sZW5ndGgsbnVtU3BvdExpZ2h0czpmLnNwb3QubGVuZ3RoLG51bUhlbWlMaWdodHM6Zi5oZW1pLmxlbmd0aCxudW1DbGlwcGluZ1BsYW5lczpsLHNoYWRvd01hcEVuYWJsZWQ6YS5zaGFkb3dNYXAuZW5hYmxlZCYmbS5yZWNlaXZlU2hhZG93JiYwPGYuc2hhZG93cy5sZW5ndGgsc2hhZG93TWFwVHlwZTphLnNoYWRvd01hcC50eXBlLFxudG9uZU1hcHBpbmc6YS50b25lTWFwcGluZyxwaHlzaWNhbGx5Q29ycmVjdExpZ2h0czphLnBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzLHByZW11bHRpcGxpZWRBbHBoYTpkLnByZW11bHRpcGxpZWRBbHBoYSxhbHBoYVRlc3Q6ZC5hbHBoYVRlc3QsZG91YmxlU2lkZWQ6ZC5zaWRlPT09VEhSRUUuRG91YmxlU2lkZSxmbGlwU2lkZWQ6ZC5zaWRlPT09VEhSRUUuQmFja1NpZGUsZGVwdGhQYWNraW5nOnZvaWQgMCE9PWQuZGVwdGhQYWNraW5nP2QuZGVwdGhQYWNraW5nOiExfX07dGhpcy5nZXRQcm9ncmFtQ29kZT1mdW5jdGlvbihhLGIpe3ZhciBjPVtdO2Iuc2hhZGVySUQ/Yy5wdXNoKGIuc2hhZGVySUQpOihjLnB1c2goYS5mcmFnbWVudFNoYWRlciksYy5wdXNoKGEudmVydGV4U2hhZGVyKSk7aWYodm9pZCAwIT09YS5kZWZpbmVzKWZvcih2YXIgZCBpbiBhLmRlZmluZXMpYy5wdXNoKGQpLGMucHVzaChhLmRlZmluZXNbZF0pO2ZvcihkPTA7ZDxmLmxlbmd0aDtkKyspYy5wdXNoKGJbZltkXV0pO1xucmV0dXJuIGMuam9pbigpfTt0aGlzLmFjcXVpcmVQcm9ncmFtPWZ1bmN0aW9uKGIsYyxlKXtmb3IodmFyIGYsbT0wLHA9ZC5sZW5ndGg7bTxwO20rKyl7dmFyIG49ZFttXTtpZihuLmNvZGU9PT1lKXtmPW47KytmLnVzZWRUaW1lczticmVha319dm9pZCAwPT09ZiYmKGY9bmV3IFRIUkVFLldlYkdMUHJvZ3JhbShhLGUsYixjKSxkLnB1c2goZikpO3JldHVybiBmfTt0aGlzLnJlbGVhc2VQcm9ncmFtPWZ1bmN0aW9uKGEpe2lmKDA9PT0tLWEudXNlZFRpbWVzKXt2YXIgYj1kLmluZGV4T2YoYSk7ZFtiXT1kW2QubGVuZ3RoLTFdO2QucG9wKCk7YS5kZXN0cm95KCl9fTt0aGlzLnByb2dyYW1zPWR9O1xuVEhSRUUuV2ViR0xQcm9wZXJ0aWVzPWZ1bmN0aW9uKCl7dmFyIGE9e307dGhpcy5nZXQ9ZnVuY3Rpb24oYil7Yj1iLnV1aWQ7dmFyIGM9YVtiXTt2b2lkIDA9PT1jJiYoYz17fSxhW2JdPWMpO3JldHVybiBjfTt0aGlzLmRlbGV0ZT1mdW5jdGlvbihiKXtkZWxldGUgYVtiLnV1aWRdfTt0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7YT17fX19O1xuVEhSRUUuV2ViR0xTaGFkZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2E9YS5zcGxpdChcIlxcblwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKylhW2NdPWMrMStcIjogXCIrYVtjXTtyZXR1cm4gYS5qb2luKFwiXFxuXCIpfXJldHVybiBmdW5jdGlvbihiLGMsZCl7dmFyIGU9Yi5jcmVhdGVTaGFkZXIoYyk7Yi5zaGFkZXJTb3VyY2UoZSxkKTtiLmNvbXBpbGVTaGFkZXIoZSk7ITE9PT1iLmdldFNoYWRlclBhcmFtZXRlcihlLGIuQ09NUElMRV9TVEFUVVMpJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xTaGFkZXI6IFNoYWRlciBjb3VsZG4ndCBjb21waWxlLlwiKTtcIlwiIT09Yi5nZXRTaGFkZXJJbmZvTG9nKGUpJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFNoYWRlcjogZ2wuZ2V0U2hhZGVySW5mb0xvZygpXCIsYz09PWIuVkVSVEVYX1NIQURFUj9cInZlcnRleFwiOlwiZnJhZ21lbnRcIixiLmdldFNoYWRlckluZm9Mb2coZSksYShkKSk7cmV0dXJuIGV9fSgpO1xuVEhSRUUuV2ViR0xTaGFkb3dNYXA9ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShiLGMsZCxlKXt2YXIgZj1iLmdlb21ldHJ5LGc9bnVsbCxnPXYsaD1iLmN1c3RvbURlcHRoTWF0ZXJpYWw7ZCYmKGc9dCxoPWIuY3VzdG9tRGlzdGFuY2VNYXRlcmlhbCk7aD9nPWg6KGg9ITEsYy5tb3JwaFRhcmdldHMmJihmIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnk/aD1mLm1vcnBoQXR0cmlidXRlcyYmZi5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24mJjA8Zi5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoOmYgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSYmKGg9Zi5tb3JwaFRhcmdldHMmJjA8Zi5tb3JwaFRhcmdldHMubGVuZ3RoKSksYj1iIGluc3RhbmNlb2YgVEhSRUUuU2tpbm5lZE1lc2gmJmMuc2tpbm5pbmcsZj0wLGgmJihmfD0xKSxiJiYoZnw9MiksZz1nW2ZdKTthLmxvY2FsQ2xpcHBpbmdFbmFibGVkJiYhMD09PWMuY2xpcFNoYWRvd3MmJjAhPT1jLmNsaXBwaW5nUGxhbmVzLmxlbmd0aCYmXG4oaD1nLnV1aWQsYj1jLnV1aWQsZj11W2hdLHZvaWQgMD09PWYmJihmPXt9LHVbaF09ZiksaD1mW2JdLHZvaWQgMD09PWgmJihoPWcuY2xvbmUoKSxmW2JdPWgpLGc9aCk7Zy52aXNpYmxlPWMudmlzaWJsZTtnLndpcmVmcmFtZT1jLndpcmVmcmFtZTtiPWMuc2lkZTtGLnJlbmRlclNpbmdsZVNpZGVkJiZiPT1USFJFRS5Eb3VibGVTaWRlJiYoYj1USFJFRS5Gcm9udFNpZGUpO0YucmVuZGVyUmV2ZXJzZVNpZGVkJiYoYj09PVRIUkVFLkZyb250U2lkZT9iPVRIUkVFLkJhY2tTaWRlOmI9PT1USFJFRS5CYWNrU2lkZSYmKGI9VEhSRUUuRnJvbnRTaWRlKSk7Zy5zaWRlPWI7Zy5jbGlwU2hhZG93cz1jLmNsaXBTaGFkb3dzO2cuY2xpcHBpbmdQbGFuZXM9Yy5jbGlwcGluZ1BsYW5lcztnLndpcmVmcmFtZUxpbmV3aWR0aD1jLndpcmVmcmFtZUxpbmV3aWR0aDtnLmxpbmV3aWR0aD1jLmxpbmV3aWR0aDtkJiZ2b2lkIDAhPT1nLnVuaWZvcm1zLmxpZ2h0UG9zJiZnLnVuaWZvcm1zLmxpZ2h0UG9zLnZhbHVlLmNvcHkoZSk7XG5yZXR1cm4gZ31mdW5jdGlvbiBmKGEsYixjKXtpZighMSE9PWEudmlzaWJsZSl7YS5sYXllcnMudGVzdChiLmxheWVycykmJihhIGluc3RhbmNlb2YgVEhSRUUuTWVzaHx8YSBpbnN0YW5jZW9mIFRIUkVFLkxpbmV8fGEgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludHMpJiZhLmNhc3RTaGFkb3cmJighMT09PWEuZnJ1c3R1bUN1bGxlZHx8ITA9PT1rLmludGVyc2VjdHNPYmplY3QoYSkpJiYhMD09PWEubWF0ZXJpYWwudmlzaWJsZSYmKGEubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoYy5tYXRyaXhXb3JsZEludmVyc2UsYS5tYXRyaXhXb3JsZCkscy5wdXNoKGEpKTthPWEuY2hpbGRyZW47Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWYoYVtkXSxiLGMpfX12YXIgZz1hLmNvbnRleHQsaD1hLnN0YXRlLGs9bmV3IFRIUkVFLkZydXN0dW0sbD1uZXcgVEhSRUUuTWF0cml4NCxtPWIuc2hhZG93cyxwPW5ldyBUSFJFRS5WZWN0b3IyLG49bmV3IFRIUkVFLlZlY3RvcjIoZC5tYXhUZXh0dXJlU2l6ZSxcbmQubWF4VGV4dHVyZVNpemUpLHE9bmV3IFRIUkVFLlZlY3RvcjMscj1uZXcgVEhSRUUuVmVjdG9yMyxzPVtdLHY9QXJyYXkoNCksdD1BcnJheSg0KSx1PXt9LEQ9W25ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKSxuZXcgVEhSRUUuVmVjdG9yMygtMSwwLDApLG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKSxuZXcgVEhSRUUuVmVjdG9yMygwLDAsLTEpLG5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKSxuZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApXSx3PVtuZXcgVEhSRUUuVmVjdG9yMygwLDEsMCksbmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApLG5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKSxuZXcgVEhSRUUuVmVjdG9yMygwLDEsMCksbmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpLG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwtMSldLEk9W25ldyBUSFJFRS5WZWN0b3I0LG5ldyBUSFJFRS5WZWN0b3I0LG5ldyBUSFJFRS5WZWN0b3I0LG5ldyBUSFJFRS5WZWN0b3I0LG5ldyBUSFJFRS5WZWN0b3I0LG5ldyBUSFJFRS5WZWN0b3I0XTtcbmI9bmV3IFRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsO2IuZGVwdGhQYWNraW5nPVRIUkVFLlJHQkFEZXB0aFBhY2tpbmc7Yi5jbGlwcGluZz0hMDtkPVRIUkVFLlNoYWRlckxpYi5kaXN0YW5jZVJHQkE7Zm9yKHZhciB6PVRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUoZC51bmlmb3JtcykseT0wOzQhPT15OysreSl7dmFyIEE9MCE9PSh5JjEpLEc9MCE9PSh5JjIpLEI9Yi5jbG9uZSgpO0IubW9ycGhUYXJnZXRzPUE7Qi5za2lubmluZz1HO3ZbeV09QjtBPW5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7ZGVmaW5lczp7VVNFX1NIQURPV01BUDpcIlwifSx1bmlmb3Jtczp6LHZlcnRleFNoYWRlcjpkLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjpkLmZyYWdtZW50U2hhZGVyLG1vcnBoVGFyZ2V0czpBLHNraW5uaW5nOkcsY2xpcHBpbmc6ITB9KTt0W3ldPUF9dmFyIEY9dGhpczt0aGlzLmVuYWJsZWQ9ITE7dGhpcy5hdXRvVXBkYXRlPSEwO3RoaXMubmVlZHNVcGRhdGU9ITE7dGhpcy50eXBlPVxuVEhSRUUuUENGU2hhZG93TWFwO3RoaXMucmVuZGVyU2luZ2xlU2lkZWQ9dGhpcy5yZW5kZXJSZXZlcnNlU2lkZWQ9ITA7dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYixkKXtpZighMSE9PUYuZW5hYmxlZCYmKCExIT09Ri5hdXRvVXBkYXRlfHwhMSE9PUYubmVlZHNVcGRhdGUpJiYwIT09bS5sZW5ndGgpe2guY2xlYXJDb2xvcigxLDEsMSwxKTtoLmRpc2FibGUoZy5CTEVORCk7aC5zZXREZXB0aFRlc3QoITApO2guc2V0U2Npc3NvclRlc3QoITEpO2Zvcih2YXIgdSx0LHY9MCx5PW0ubGVuZ3RoO3Y8eTt2Kyspe3ZhciB6PW1bdl0sQT16LnNoYWRvdztpZih2b2lkIDA9PT1BKWNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMU2hhZG93TWFwOlwiLHosXCJoYXMgbm8gc2hhZG93LlwiKTtlbHNle3ZhciBDPUEuY2FtZXJhO3AuY29weShBLm1hcFNpemUpO3AubWluKG4pO2lmKHogaW5zdGFuY2VvZiBUSFJFRS5Qb2ludExpZ2h0KXt1PTY7dD0hMDt2YXIgTD1wLngsRT1wLnk7SVswXS5zZXQoMipMLEUsTCxcbkUpO0lbMV0uc2V0KDAsRSxMLEUpO0lbMl0uc2V0KDMqTCxFLEwsRSk7SVszXS5zZXQoTCxFLEwsRSk7SVs0XS5zZXQoMypMLDAsTCxFKTtJWzVdLnNldChMLDAsTCxFKTtwLngqPTQ7cC55Kj0yfWVsc2UgdT0xLHQ9ITE7bnVsbD09PUEubWFwJiYoQS5tYXA9bmV3IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0KHAueCxwLnkse21pbkZpbHRlcjpUSFJFRS5OZWFyZXN0RmlsdGVyLG1hZ0ZpbHRlcjpUSFJFRS5OZWFyZXN0RmlsdGVyLGZvcm1hdDpUSFJFRS5SR0JBRm9ybWF0fSksQy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCkpO0EgaW5zdGFuY2VvZiBUSFJFRS5TcG90TGlnaHRTaGFkb3cmJkEudXBkYXRlKHopO0w9QS5tYXA7QT1BLm1hdHJpeDtyLnNldEZyb21NYXRyaXhQb3NpdGlvbih6Lm1hdHJpeFdvcmxkKTtDLnBvc2l0aW9uLmNvcHkocik7YS5zZXRSZW5kZXJUYXJnZXQoTCk7YS5jbGVhcigpO2ZvcihMPTA7TDx1O0wrKyl7dD8ocS5jb3B5KEMucG9zaXRpb24pLHEuYWRkKERbTF0pLFxuQy51cC5jb3B5KHdbTF0pLEMubG9va0F0KHEpLGgudmlld3BvcnQoSVtMXSkpOihxLnNldEZyb21NYXRyaXhQb3NpdGlvbih6LnRhcmdldC5tYXRyaXhXb3JsZCksQy5sb29rQXQocSkpO0MudXBkYXRlTWF0cml4V29ybGQoKTtDLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKEMubWF0cml4V29ybGQpO0Euc2V0KC41LDAsMCwuNSwwLC41LDAsLjUsMCwwLC41LC41LDAsMCwwLDEpO0EubXVsdGlwbHkoQy5wcm9qZWN0aW9uTWF0cml4KTtBLm11bHRpcGx5KEMubWF0cml4V29ybGRJbnZlcnNlKTtsLm11bHRpcGx5TWF0cmljZXMoQy5wcm9qZWN0aW9uTWF0cml4LEMubWF0cml4V29ybGRJbnZlcnNlKTtrLnNldEZyb21NYXRyaXgobCk7cy5sZW5ndGg9MDtmKGIsZCxDKTtmb3IodmFyIEU9MCxCPXMubGVuZ3RoO0U8QjtFKyspe3ZhciBHPXNbRV0sWD1jLnVwZGF0ZShHKSxlYT1HLm1hdGVyaWFsO2lmKGVhIGluc3RhbmNlb2YgVEhSRUUuTXVsdGlNYXRlcmlhbClmb3IodmFyIGZhPVxuWC5ncm91cHMsZWE9ZWEubWF0ZXJpYWxzLGdhPTAsVj1mYS5sZW5ndGg7Z2E8VjtnYSsrKXt2YXIgYmE9ZmFbZ2FdLGFhPWVhW2JhLm1hdGVyaWFsSW5kZXhdOyEwPT09YWEudmlzaWJsZSYmKGFhPWUoRyxhYSx0LHIpLGEucmVuZGVyQnVmZmVyRGlyZWN0KEMsbnVsbCxYLGFhLEcsYmEpKX1lbHNlIGFhPWUoRyxlYSx0LHIpLGEucmVuZGVyQnVmZmVyRGlyZWN0KEMsbnVsbCxYLGFhLEcsbnVsbCl9fX19dT1hLmdldENsZWFyQ29sb3IoKTt0PWEuZ2V0Q2xlYXJBbHBoYSgpO2Euc2V0Q2xlYXJDb2xvcih1LHQpO0YubmVlZHNVcGRhdGU9ITF9fX07XG5USFJFRS5XZWJHTFN0YXRlPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGIsYyxkKXt2YXIgZT1uZXcgVWludDhBcnJheSg0KSxmPWEuY3JlYXRlVGV4dHVyZSgpO2EuYmluZFRleHR1cmUoYixmKTthLnRleFBhcmFtZXRlcmkoYixhLlRFWFRVUkVfTUlOX0ZJTFRFUixhLk5FQVJFU1QpO2EudGV4UGFyYW1ldGVyaShiLGEuVEVYVFVSRV9NQUdfRklMVEVSLGEuTkVBUkVTVCk7Zm9yKGI9MDtiPGQ7YisrKWEudGV4SW1hZ2UyRChjK2IsMCxhLlJHQkEsMSwxLDAsYS5SR0JBLGEuVU5TSUdORURfQllURSxlKTtyZXR1cm4gZn12YXIgZT10aGlzO3RoaXMuYnVmZmVycz17Y29sb3I6bmV3IFRIUkVFLldlYkdMQ29sb3JCdWZmZXIoYSx0aGlzKSxkZXB0aDpuZXcgVEhSRUUuV2ViR0xEZXB0aEJ1ZmZlcihhLHRoaXMpLHN0ZW5jaWw6bmV3IFRIUkVFLldlYkdMU3RlbmNpbEJ1ZmZlcihhLHRoaXMpfTt2YXIgZj1hLmdldFBhcmFtZXRlcihhLk1BWF9WRVJURVhfQVRUUklCUyksZz1uZXcgVWludDhBcnJheShmKSxcbmg9bmV3IFVpbnQ4QXJyYXkoZiksaz1uZXcgVWludDhBcnJheShmKSxsPXt9LG09bnVsbCxwPW51bGwsbj1udWxsLHE9bnVsbCxyPW51bGwscz1udWxsLHY9bnVsbCx0PW51bGwsdT0hMSxEPW51bGwsdz1udWxsLEk9bnVsbCx6PW51bGwseT1udWxsLEE9bnVsbCxHPWEuZ2V0UGFyYW1ldGVyKGEuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpLEI9bnVsbCxGPXt9LEo9bmV3IFRIUkVFLlZlY3RvcjQsUD1uZXcgVEhSRUUuVmVjdG9yNCxLPXt9O0tbYS5URVhUVVJFXzJEXT1kKGEuVEVYVFVSRV8yRCxhLlRFWFRVUkVfMkQsMSk7S1thLlRFWFRVUkVfQ1VCRV9NQVBdPWQoYS5URVhUVVJFX0NVQkVfTUFQLGEuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YLDYpO3RoaXMuaW5pdD1mdW5jdGlvbigpe3RoaXMuY2xlYXJDb2xvcigwLDAsMCwxKTt0aGlzLmNsZWFyRGVwdGgoMSk7dGhpcy5jbGVhclN0ZW5jaWwoMCk7dGhpcy5lbmFibGUoYS5ERVBUSF9URVNUKTt0aGlzLnNldERlcHRoRnVuYyhUSFJFRS5MZXNzRXF1YWxEZXB0aCk7XG50aGlzLnNldEZsaXBTaWRlZCghMSk7dGhpcy5zZXRDdWxsRmFjZShUSFJFRS5DdWxsRmFjZUJhY2spO3RoaXMuZW5hYmxlKGEuQ1VMTF9GQUNFKTt0aGlzLmVuYWJsZShhLkJMRU5EKTt0aGlzLnNldEJsZW5kaW5nKFRIUkVFLk5vcm1hbEJsZW5kaW5nKX07dGhpcy5pbml0QXR0cmlidXRlcz1mdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9Zy5sZW5ndGg7YTxiO2ErKylnW2FdPTB9O3RoaXMuZW5hYmxlQXR0cmlidXRlPWZ1bmN0aW9uKGMpe2dbY109MTswPT09aFtjXSYmKGEuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYyksaFtjXT0xKTswIT09a1tjXSYmKGIuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKS52ZXJ0ZXhBdHRyaWJEaXZpc29yQU5HTEUoYywwKSxrW2NdPTApfTt0aGlzLmVuYWJsZUF0dHJpYnV0ZUFuZERpdmlzb3I9ZnVuY3Rpb24oYixjLGQpe2dbYl09MTswPT09aFtiXSYmKGEuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYiksaFtiXT0xKTtrW2JdIT09YyYmKGQudmVydGV4QXR0cmliRGl2aXNvckFOR0xFKGIsXG5jKSxrW2JdPWMpfTt0aGlzLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYz1oLmxlbmd0aDtiIT09YzsrK2IpaFtiXSE9PWdbYl0mJihhLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShiKSxoW2JdPTApfTt0aGlzLmVuYWJsZT1mdW5jdGlvbihiKXshMCE9PWxbYl0mJihhLmVuYWJsZShiKSxsW2JdPSEwKX07dGhpcy5kaXNhYmxlPWZ1bmN0aW9uKGIpeyExIT09bFtiXSYmKGEuZGlzYWJsZShiKSxsW2JdPSExKX07dGhpcy5nZXRDb21wcmVzc2VkVGV4dHVyZUZvcm1hdHM9ZnVuY3Rpb24oKXtpZihudWxsPT09bSYmKG09W10sYi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIil8fGIuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil8fGIuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIikpKWZvcih2YXIgYz1hLmdldFBhcmFtZXRlcihhLkNPTVBSRVNTRURfVEVYVFVSRV9GT1JNQVRTKSxkPTA7ZDxcbmMubGVuZ3RoO2QrKyltLnB1c2goY1tkXSk7cmV0dXJuIG19O3RoaXMuc2V0QmxlbmRpbmc9ZnVuY3Rpb24oYixkLGUsZixnLGgsayxsKXtpZihiIT09VEhSRUUuTm9CbGVuZGluZyl7dGhpcy5lbmFibGUoYS5CTEVORCk7aWYoYiE9PXB8fGwhPT11KWI9PT1USFJFRS5BZGRpdGl2ZUJsZW5kaW5nP2w/KGEuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGEuRlVOQ19BREQsYS5GVU5DX0FERCksYS5ibGVuZEZ1bmNTZXBhcmF0ZShhLk9ORSxhLk9ORSxhLk9ORSxhLk9ORSkpOihhLmJsZW5kRXF1YXRpb24oYS5GVU5DX0FERCksYS5ibGVuZEZ1bmMoYS5TUkNfQUxQSEEsYS5PTkUpKTpiPT09VEhSRUUuU3VidHJhY3RpdmVCbGVuZGluZz9sPyhhLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShhLkZVTkNfQURELGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jU2VwYXJhdGUoYS5aRVJPLGEuWkVSTyxhLk9ORV9NSU5VU19TUkNfQ09MT1IsYS5PTkVfTUlOVVNfU1JDX0FMUEhBKSk6KGEuYmxlbmRFcXVhdGlvbihhLkZVTkNfQUREKSxcbmEuYmxlbmRGdW5jKGEuWkVSTyxhLk9ORV9NSU5VU19TUkNfQ09MT1IpKTpiPT09VEhSRUUuTXVsdGlwbHlCbGVuZGluZz9sPyhhLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShhLkZVTkNfQURELGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jU2VwYXJhdGUoYS5aRVJPLGEuU1JDX0NPTE9SLGEuWkVSTyxhLlNSQ19BTFBIQSkpOihhLmJsZW5kRXF1YXRpb24oYS5GVU5DX0FERCksYS5ibGVuZEZ1bmMoYS5aRVJPLGEuU1JDX0NPTE9SKSk6bD8oYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYS5GVU5DX0FERCxhLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuT05FLGEuT05FX01JTlVTX1NSQ19BTFBIQSxhLk9ORSxhLk9ORV9NSU5VU19TUkNfQUxQSEEpKTooYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYS5GVU5DX0FERCxhLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuU1JDX0FMUEhBLGEuT05FX01JTlVTX1NSQ19BTFBIQSxhLk9ORSxhLk9ORV9NSU5VU19TUkNfQUxQSEEpKSxcbnA9Yix1PWw7aWYoYj09PVRIUkVFLkN1c3RvbUJsZW5kaW5nKXtnPWd8fGQ7aD1ofHxlO2s9a3x8ZjtpZihkIT09bnx8ZyE9PXMpYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYyhkKSxjKGcpKSxuPWQscz1nO2lmKGUhPT1xfHxmIT09cnx8aCE9PXZ8fGshPT10KWEuYmxlbmRGdW5jU2VwYXJhdGUoYyhlKSxjKGYpLGMoaCksYyhrKSkscT1lLHI9Zix2PWgsdD1rfWVsc2UgdD12PXM9cj1xPW49bnVsbH1lbHNlIHRoaXMuZGlzYWJsZShhLkJMRU5EKSxwPWJ9O3RoaXMuc2V0Q29sb3JXcml0ZT1mdW5jdGlvbihhKXt0aGlzLmJ1ZmZlcnMuY29sb3Iuc2V0TWFzayhhKX07dGhpcy5zZXREZXB0aFRlc3Q9ZnVuY3Rpb24oYSl7dGhpcy5idWZmZXJzLmRlcHRoLnNldFRlc3QoYSl9O3RoaXMuc2V0RGVwdGhXcml0ZT1mdW5jdGlvbihhKXt0aGlzLmJ1ZmZlcnMuZGVwdGguc2V0TWFzayhhKX07dGhpcy5zZXREZXB0aEZ1bmM9ZnVuY3Rpb24oYSl7dGhpcy5idWZmZXJzLmRlcHRoLnNldEZ1bmMoYSl9O1xudGhpcy5zZXRTdGVuY2lsVGVzdD1mdW5jdGlvbihhKXt0aGlzLmJ1ZmZlcnMuc3RlbmNpbC5zZXRUZXN0KGEpfTt0aGlzLnNldFN0ZW5jaWxXcml0ZT1mdW5jdGlvbihhKXt0aGlzLmJ1ZmZlcnMuc3RlbmNpbC5zZXRNYXNrKGEpfTt0aGlzLnNldFN0ZW5jaWxGdW5jPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmJ1ZmZlcnMuc3RlbmNpbC5zZXRGdW5jKGEsYixjKX07dGhpcy5zZXRTdGVuY2lsT3A9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYnVmZmVycy5zdGVuY2lsLnNldE9wKGEsYixjKX07dGhpcy5zZXRGbGlwU2lkZWQ9ZnVuY3Rpb24oYil7RCE9PWImJihiP2EuZnJvbnRGYWNlKGEuQ1cpOmEuZnJvbnRGYWNlKGEuQ0NXKSxEPWIpfTt0aGlzLnNldEN1bGxGYWNlPWZ1bmN0aW9uKGIpe2IhPT1USFJFRS5DdWxsRmFjZU5vbmU/KHRoaXMuZW5hYmxlKGEuQ1VMTF9GQUNFKSxiIT09dyYmKGI9PT1USFJFRS5DdWxsRmFjZUJhY2s/YS5jdWxsRmFjZShhLkJBQ0spOmI9PT1USFJFRS5DdWxsRmFjZUZyb250P1xuYS5jdWxsRmFjZShhLkZST05UKTphLmN1bGxGYWNlKGEuRlJPTlRfQU5EX0JBQ0spKSk6dGhpcy5kaXNhYmxlKGEuQ1VMTF9GQUNFKTt3PWJ9O3RoaXMuc2V0TGluZVdpZHRoPWZ1bmN0aW9uKGIpe2IhPT1JJiYoYS5saW5lV2lkdGgoYiksST1iKX07dGhpcy5zZXRQb2x5Z29uT2Zmc2V0PWZ1bmN0aW9uKGIsYyxkKXtpZihiKXtpZih0aGlzLmVuYWJsZShhLlBPTFlHT05fT0ZGU0VUX0ZJTEwpLHohPT1jfHx5IT09ZClhLnBvbHlnb25PZmZzZXQoYyxkKSx6PWMseT1kfWVsc2UgdGhpcy5kaXNhYmxlKGEuUE9MWUdPTl9PRkZTRVRfRklMTCl9O3RoaXMuZ2V0U2Npc3NvclRlc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gQX07dGhpcy5zZXRTY2lzc29yVGVzdD1mdW5jdGlvbihiKXsoQT1iKT90aGlzLmVuYWJsZShhLlNDSVNTT1JfVEVTVCk6dGhpcy5kaXNhYmxlKGEuU0NJU1NPUl9URVNUKX07dGhpcy5hY3RpdmVUZXh0dXJlPWZ1bmN0aW9uKGIpe3ZvaWQgMD09PWImJihiPWEuVEVYVFVSRTArXG5HLTEpO0IhPT1iJiYoYS5hY3RpdmVUZXh0dXJlKGIpLEI9Yil9O3RoaXMuYmluZFRleHR1cmU9ZnVuY3Rpb24oYixjKXtudWxsPT09QiYmZS5hY3RpdmVUZXh0dXJlKCk7dmFyIGQ9RltCXTt2b2lkIDA9PT1kJiYoZD17dHlwZTp2b2lkIDAsdGV4dHVyZTp2b2lkIDB9LEZbQl09ZCk7aWYoZC50eXBlIT09Ynx8ZC50ZXh0dXJlIT09YylhLmJpbmRUZXh0dXJlKGIsY3x8S1tiXSksZC50eXBlPWIsZC50ZXh0dXJlPWN9O3RoaXMuY29tcHJlc3NlZFRleEltYWdlMkQ9ZnVuY3Rpb24oKXt0cnl7YS5jb21wcmVzc2VkVGV4SW1hZ2UyRC5hcHBseShhLGFyZ3VtZW50cyl9Y2F0Y2goYil7Y29uc29sZS5lcnJvcihiKX19O3RoaXMudGV4SW1hZ2UyRD1mdW5jdGlvbigpe3RyeXthLnRleEltYWdlMkQuYXBwbHkoYSxhcmd1bWVudHMpfWNhdGNoKGIpe2NvbnNvbGUuZXJyb3IoYil9fTt0aGlzLmNsZWFyQ29sb3I9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5idWZmZXJzLmNvbG9yLnNldENsZWFyKGEsXG5iLGMsZCl9O3RoaXMuY2xlYXJEZXB0aD1mdW5jdGlvbihhKXt0aGlzLmJ1ZmZlcnMuZGVwdGguc2V0Q2xlYXIoYSl9O3RoaXMuY2xlYXJTdGVuY2lsPWZ1bmN0aW9uKGEpe3RoaXMuYnVmZmVycy5zdGVuY2lsLnNldENsZWFyKGEpfTt0aGlzLnNjaXNzb3I9ZnVuY3Rpb24oYil7ITE9PT1KLmVxdWFscyhiKSYmKGEuc2Npc3NvcihiLngsYi55LGIueixiLncpLEouY29weShiKSl9O3RoaXMudmlld3BvcnQ9ZnVuY3Rpb24oYil7ITE9PT1QLmVxdWFscyhiKSYmKGEudmlld3BvcnQoYi54LGIueSxiLnosYi53KSxQLmNvcHkoYikpfTt0aGlzLnJlc2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciBiPTA7YjxoLmxlbmd0aDtiKyspMT09PWhbYl0mJihhLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShiKSxoW2JdPTApO2w9e307Qj1tPW51bGw7Rj17fTt3PUQ9cD1udWxsO3RoaXMuYnVmZmVycy5jb2xvci5yZXNldCgpO3RoaXMuYnVmZmVycy5kZXB0aC5yZXNldCgpO3RoaXMuYnVmZmVycy5zdGVuY2lsLnJlc2V0KCl9fTtcblRIUkVFLldlYkdMQ29sb3JCdWZmZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz0hMSxkPW5ldyBUSFJFRS5WZWN0b3I0LGU9bnVsbCxmPW5ldyBUSFJFRS5WZWN0b3I0O3RoaXMuc2V0TWFzaz1mdW5jdGlvbihiKXtlPT09Ynx8Y3x8KGEuY29sb3JNYXNrKGIsYixiLGIpLGU9Yil9O3RoaXMuc2V0TG9ja2VkPWZ1bmN0aW9uKGEpe2M9YX07dGhpcy5zZXRDbGVhcj1mdW5jdGlvbihiLGMsZSxsKXtkLnNldChiLGMsZSxsKTshMT09PWYuZXF1YWxzKGQpJiYoYS5jbGVhckNvbG9yKGIsYyxlLGwpLGYuY29weShkKSl9O3RoaXMucmVzZXQ9ZnVuY3Rpb24oKXtjPSExO2U9bnVsbDtmPW5ldyBUSFJFRS5WZWN0b3I0fX07XG5USFJFRS5XZWJHTERlcHRoQnVmZmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9ITEsZD1udWxsLGU9bnVsbCxmPW51bGw7dGhpcy5zZXRUZXN0PWZ1bmN0aW9uKGMpe2M/Yi5lbmFibGUoYS5ERVBUSF9URVNUKTpiLmRpc2FibGUoYS5ERVBUSF9URVNUKX07dGhpcy5zZXRNYXNrPWZ1bmN0aW9uKGIpe2Q9PT1ifHxjfHwoYS5kZXB0aE1hc2soYiksZD1iKX07dGhpcy5zZXRGdW5jPWZ1bmN0aW9uKGIpe2lmKGUhPT1iKXtpZihiKXN3aXRjaChiKXtjYXNlIFRIUkVFLk5ldmVyRGVwdGg6YS5kZXB0aEZ1bmMoYS5ORVZFUik7YnJlYWs7Y2FzZSBUSFJFRS5BbHdheXNEZXB0aDphLmRlcHRoRnVuYyhhLkFMV0FZUyk7YnJlYWs7Y2FzZSBUSFJFRS5MZXNzRGVwdGg6YS5kZXB0aEZ1bmMoYS5MRVNTKTticmVhaztjYXNlIFRIUkVFLkxlc3NFcXVhbERlcHRoOmEuZGVwdGhGdW5jKGEuTEVRVUFMKTticmVhaztjYXNlIFRIUkVFLkVxdWFsRGVwdGg6YS5kZXB0aEZ1bmMoYS5FUVVBTCk7YnJlYWs7Y2FzZSBUSFJFRS5HcmVhdGVyRXF1YWxEZXB0aDphLmRlcHRoRnVuYyhhLkdFUVVBTCk7XG5icmVhaztjYXNlIFRIUkVFLkdyZWF0ZXJEZXB0aDphLmRlcHRoRnVuYyhhLkdSRUFURVIpO2JyZWFrO2Nhc2UgVEhSRUUuTm90RXF1YWxEZXB0aDphLmRlcHRoRnVuYyhhLk5PVEVRVUFMKTticmVhaztkZWZhdWx0OmEuZGVwdGhGdW5jKGEuTEVRVUFMKX1lbHNlIGEuZGVwdGhGdW5jKGEuTEVRVUFMKTtlPWJ9fTt0aGlzLnNldExvY2tlZD1mdW5jdGlvbihhKXtjPWF9O3RoaXMuc2V0Q2xlYXI9ZnVuY3Rpb24oYil7ZiE9PWImJihhLmNsZWFyRGVwdGgoYiksZj1iKX07dGhpcy5yZXNldD1mdW5jdGlvbigpe2M9ITE7Zj1lPWQ9bnVsbH19O1xuVEhSRUUuV2ViR0xTdGVuY2lsQnVmZmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9ITEsZD1udWxsLGU9bnVsbCxmPW51bGwsZz1udWxsLGg9bnVsbCxrPW51bGwsbD1udWxsLG09bnVsbDt0aGlzLnNldFRlc3Q9ZnVuY3Rpb24oYyl7Yz9iLmVuYWJsZShhLlNURU5DSUxfVEVTVCk6Yi5kaXNhYmxlKGEuU1RFTkNJTF9URVNUKX07dGhpcy5zZXRNYXNrPWZ1bmN0aW9uKGIpe2Q9PT1ifHxjfHwoYS5zdGVuY2lsTWFzayhiKSxkPWIpfTt0aGlzLnNldEZ1bmM9ZnVuY3Rpb24oYixjLGQpe2lmKGUhPT1ifHxmIT09Y3x8ZyE9PWQpYS5zdGVuY2lsRnVuYyhiLGMsZCksZT1iLGY9YyxnPWR9O3RoaXMuc2V0T3A9ZnVuY3Rpb24oYixjLGQpe2lmKGghPT1ifHxrIT09Y3x8bCE9PWQpYS5zdGVuY2lsT3AoYixjLGQpLGg9YixrPWMsbD1kfTt0aGlzLnNldExvY2tlZD1mdW5jdGlvbihhKXtjPWF9O3RoaXMuc2V0Q2xlYXI9ZnVuY3Rpb24oYil7bSE9PWImJihhLmNsZWFyU3RlbmNpbChiKSxtPWIpfTt0aGlzLnJlc2V0PVxuZnVuY3Rpb24oKXtjPSExO209bD1rPWg9Zz1mPWU9ZD1udWxsfX07XG5USFJFRS5XZWJHTFRleHR1cmVzPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe2Z1bmN0aW9uIGgoYSxiKXtpZihhLndpZHRoPmJ8fGEuaGVpZ2h0PmIpe3ZhciBjPWIvTWF0aC5tYXgoYS53aWR0aCxhLmhlaWdodCksZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIik7ZC53aWR0aD1NYXRoLmZsb29yKGEud2lkdGgqYyk7ZC5oZWlnaHQ9TWF0aC5mbG9vcihhLmhlaWdodCpjKTtkLmdldENvbnRleHQoXCIyZFwiKS5kcmF3SW1hZ2UoYSwwLDAsYS53aWR0aCxhLmhlaWdodCwwLDAsZC53aWR0aCxkLmhlaWdodCk7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogaW1hZ2UgaXMgdG9vIGJpZyAoXCIrYS53aWR0aCtcInhcIithLmhlaWdodCtcIikuIFJlc2l6ZWQgdG8gXCIrZC53aWR0aCtcInhcIitkLmhlaWdodCxhKTtyZXR1cm4gZH1yZXR1cm4gYX1mdW5jdGlvbiBrKGEpe3JldHVybiBUSFJFRS5NYXRoLmlzUG93ZXJPZlR3byhhLndpZHRoKSYmVEhSRUUuTWF0aC5pc1Bvd2VyT2ZUd28oYS5oZWlnaHQpfVxuZnVuY3Rpb24gbChiKXtyZXR1cm4gYj09PVRIUkVFLk5lYXJlc3RGaWx0ZXJ8fGI9PT1USFJFRS5OZWFyZXN0TWlwTWFwTmVhcmVzdEZpbHRlcnx8Yj09PVRIUkVFLk5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXI/YS5ORUFSRVNUOmEuTElORUFSfWZ1bmN0aW9uIG0oYil7Yj1iLnRhcmdldDtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsbSk7YTp7dmFyIGM9ZC5nZXQoYik7aWYoYi5pbWFnZSYmYy5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKWEuZGVsZXRlVGV4dHVyZShjLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpO2Vsc2V7aWYodm9pZCAwPT09Yy5fX3dlYmdsSW5pdClicmVhayBhO2EuZGVsZXRlVGV4dHVyZShjLl9fd2ViZ2xUZXh0dXJlKX1kLmRlbGV0ZShiKX12LnRleHR1cmVzLS19ZnVuY3Rpb24gcChiKXtiPWIudGFyZ2V0O2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixwKTt2YXIgYz1kLmdldChiKSxlPWQuZ2V0KGIudGV4dHVyZSk7aWYoYil7dm9pZCAwIT09XG5lLl9fd2ViZ2xUZXh0dXJlJiZhLmRlbGV0ZVRleHR1cmUoZS5fX3dlYmdsVGV4dHVyZSk7Yi5kZXB0aFRleHR1cmUmJmIuZGVwdGhUZXh0dXJlLmRpc3Bvc2UoKTtpZihiIGluc3RhbmNlb2YgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlKWZvcihlPTA7Nj5lO2UrKylhLmRlbGV0ZUZyYW1lYnVmZmVyKGMuX193ZWJnbEZyYW1lYnVmZmVyW2VdKSxjLl9fd2ViZ2xEZXB0aGJ1ZmZlciYmYS5kZWxldGVSZW5kZXJidWZmZXIoYy5fX3dlYmdsRGVwdGhidWZmZXJbZV0pO2Vsc2UgYS5kZWxldGVGcmFtZWJ1ZmZlcihjLl9fd2ViZ2xGcmFtZWJ1ZmZlciksYy5fX3dlYmdsRGVwdGhidWZmZXImJmEuZGVsZXRlUmVuZGVyYnVmZmVyKGMuX193ZWJnbERlcHRoYnVmZmVyKTtkLmRlbGV0ZShiLnRleHR1cmUpO2QuZGVsZXRlKGIpfXYudGV4dHVyZXMtLX1mdW5jdGlvbiBuKGIsZyl7dmFyIGw9ZC5nZXQoYik7aWYoMDxiLnZlcnNpb24mJmwuX192ZXJzaW9uIT09Yi52ZXJzaW9uKXt2YXIgbj1cbmIuaW1hZ2U7aWYodm9pZCAwPT09biljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyB1bmRlZmluZWRcIixiKTtlbHNlIGlmKCExPT09bi5jb21wbGV0ZSljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyBpbmNvbXBsZXRlXCIsYik7ZWxzZXt2b2lkIDA9PT1sLl9fd2ViZ2xJbml0JiYobC5fX3dlYmdsSW5pdD0hMCxiLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsbSksbC5fX3dlYmdsVGV4dHVyZT1hLmNyZWF0ZVRleHR1cmUoKSx2LnRleHR1cmVzKyspO2MuYWN0aXZlVGV4dHVyZShhLlRFWFRVUkUwK2cpO2MuYmluZFRleHR1cmUoYS5URVhUVVJFXzJELGwuX193ZWJnbFRleHR1cmUpO2EucGl4ZWxTdG9yZWkoYS5VTlBBQ0tfRkxJUF9ZX1dFQkdMLGIuZmxpcFkpO2EucGl4ZWxTdG9yZWkoYS5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsXG5iLnByZW11bHRpcGx5QWxwaGEpO2EucGl4ZWxTdG9yZWkoYS5VTlBBQ0tfQUxJR05NRU5ULGIudW5wYWNrQWxpZ25tZW50KTt2YXIgcD1oKGIuaW1hZ2UsZS5tYXhUZXh0dXJlU2l6ZSk7aWYoKGIud3JhcFMhPT1USFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nfHxiLndyYXBUIT09VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZ3x8Yi5taW5GaWx0ZXIhPT1USFJFRS5OZWFyZXN0RmlsdGVyJiZiLm1pbkZpbHRlciE9PVRIUkVFLkxpbmVhckZpbHRlcikmJiExPT09ayhwKSlpZihuPXAsbiBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnR8fG4gaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO3Iud2lkdGg9VEhSRUUuTWF0aC5uZWFyZXN0UG93ZXJPZlR3byhuLndpZHRoKTtyLmhlaWdodD1USFJFRS5NYXRoLm5lYXJlc3RQb3dlck9mVHdvKG4uaGVpZ2h0KTtyLmdldENvbnRleHQoXCIyZFwiKS5kcmF3SW1hZ2UobixcbjAsMCxyLndpZHRoLHIuaGVpZ2h0KTtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBpbWFnZSBpcyBub3QgcG93ZXIgb2YgdHdvIChcIituLndpZHRoK1wieFwiK24uaGVpZ2h0K1wiKS4gUmVzaXplZCB0byBcIityLndpZHRoK1wieFwiK3IuaGVpZ2h0LG4pO3A9cn1lbHNlIHA9bjt2YXIgbj1rKHApLHI9ZihiLmZvcm1hdCkscz1mKGIudHlwZSk7cShhLlRFWFRVUkVfMkQsYixuKTt2YXIgRz1iLm1pcG1hcHM7aWYoYiBpbnN0YW5jZW9mIFRIUkVFLkRlcHRoVGV4dHVyZSl7Rz1hLkRFUFRIX0NPTVBPTkVOVDtpZihiLnR5cGU9PT1USFJFRS5GbG9hdFR5cGUpe2lmKCF0KXRocm93IEVycm9yKFwiRmxvYXQgRGVwdGggVGV4dHVyZSBvbmx5IHN1cHBvcnRlZCBpbiBXZWJHTDIuMFwiKTtHPWEuREVQVEhfQ09NUE9ORU5UMzJGfWVsc2UgdCYmKEc9YS5ERVBUSF9DT01QT05FTlQxNik7Yy50ZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCwwLEcscC53aWR0aCxwLmhlaWdodCwwLHIscyxudWxsKX1lbHNlIGlmKGIgaW5zdGFuY2VvZlxuVEhSRUUuRGF0YVRleHR1cmUpaWYoMDxHLmxlbmd0aCYmbil7Zm9yKHZhciBCPTAsRj1HLmxlbmd0aDtCPEY7QisrKXA9R1tCXSxjLnRleEltYWdlMkQoYS5URVhUVVJFXzJELEIscixwLndpZHRoLHAuaGVpZ2h0LDAscixzLHAuZGF0YSk7Yi5nZW5lcmF0ZU1pcG1hcHM9ITF9ZWxzZSBjLnRleEltYWdlMkQoYS5URVhUVVJFXzJELDAscixwLndpZHRoLHAuaGVpZ2h0LDAscixzLHAuZGF0YSk7ZWxzZSBpZihiIGluc3RhbmNlb2YgVEhSRUUuQ29tcHJlc3NlZFRleHR1cmUpZm9yKEI9MCxGPUcubGVuZ3RoO0I8RjtCKyspcD1HW0JdLGIuZm9ybWF0IT09VEhSRUUuUkdCQUZvcm1hdCYmYi5mb3JtYXQhPT1USFJFRS5SR0JGb3JtYXQ/LTE8Yy5nZXRDb21wcmVzc2VkVGV4dHVyZUZvcm1hdHMoKS5pbmRleE9mKHIpP2MuY29tcHJlc3NlZFRleEltYWdlMkQoYS5URVhUVVJFXzJELEIscixwLndpZHRoLHAuaGVpZ2h0LDAscC5kYXRhKTpjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIGxvYWQgdW5zdXBwb3J0ZWQgY29tcHJlc3NlZCB0ZXh0dXJlIGZvcm1hdCBpbiAudXBsb2FkVGV4dHVyZSgpXCIpOlxuYy50ZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCxCLHIscC53aWR0aCxwLmhlaWdodCwwLHIscyxwLmRhdGEpO2Vsc2UgaWYoMDxHLmxlbmd0aCYmbil7Qj0wO2ZvcihGPUcubGVuZ3RoO0I8RjtCKyspcD1HW0JdLGMudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsQixyLHIscyxwKTtiLmdlbmVyYXRlTWlwbWFwcz0hMX1lbHNlIGMudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsMCxyLHIscyxwKTtiLmdlbmVyYXRlTWlwbWFwcyYmbiYmYS5nZW5lcmF0ZU1pcG1hcChhLlRFWFRVUkVfMkQpO2wuX192ZXJzaW9uPWIudmVyc2lvbjtpZihiLm9uVXBkYXRlKWIub25VcGRhdGUoYik7cmV0dXJufX1jLmFjdGl2ZVRleHR1cmUoYS5URVhUVVJFMCtnKTtjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV8yRCxsLl9fd2ViZ2xUZXh0dXJlKX1mdW5jdGlvbiBxKGMsZyxoKXtoPyhhLnRleFBhcmFtZXRlcmkoYyxhLlRFWFRVUkVfV1JBUF9TLGYoZy53cmFwUykpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9XUkFQX1QsXG5mKGcud3JhcFQpKSxhLnRleFBhcmFtZXRlcmkoYyxhLlRFWFRVUkVfTUFHX0ZJTFRFUixmKGcubWFnRmlsdGVyKSksYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX01JTl9GSUxURVIsZihnLm1pbkZpbHRlcikpKTooYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX1dSQVBfUyxhLkNMQU1QX1RPX0VER0UpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9XUkFQX1QsYS5DTEFNUF9UT19FREdFKSxnLndyYXBTPT09VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZyYmZy53cmFwVD09PVRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmd8fGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaXMgbm90IHBvd2VyIG9mIHR3by4gVGV4dHVyZS53cmFwUyBhbmQgVGV4dHVyZS53cmFwVCBzaG91bGQgYmUgc2V0IHRvIFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcuXCIsZyksYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX01BR19GSUxURVIsbChnLm1hZ0ZpbHRlcikpLFxuYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX01JTl9GSUxURVIsbChnLm1pbkZpbHRlcikpLGcubWluRmlsdGVyIT09VEhSRUUuTmVhcmVzdEZpbHRlciYmZy5taW5GaWx0ZXIhPT1USFJFRS5MaW5lYXJGaWx0ZXImJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaXMgbm90IHBvd2VyIG9mIHR3by4gVGV4dHVyZS5taW5GaWx0ZXIgc2hvdWxkIGJlIHNldCB0byBUSFJFRS5OZWFyZXN0RmlsdGVyIG9yIFRIUkVFLkxpbmVhckZpbHRlci5cIixnKSk7IShoPWIuZ2V0KFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpKXx8Zy50eXBlPT09VEhSRUUuRmxvYXRUeXBlJiZudWxsPT09Yi5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcIil8fGcudHlwZT09PVRIUkVFLkhhbGZGbG9hdFR5cGUmJm51bGw9PT1iLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCIpfHwhKDE8Zy5hbmlzb3Ryb3B5fHxkLmdldChnKS5fX2N1cnJlbnRBbmlzb3Ryb3B5KXx8XG4oYS50ZXhQYXJhbWV0ZXJmKGMsaC5URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCxNYXRoLm1pbihnLmFuaXNvdHJvcHksZS5nZXRNYXhBbmlzb3Ryb3B5KCkpKSxkLmdldChnKS5fX2N1cnJlbnRBbmlzb3Ryb3B5PWcuYW5pc290cm9weSl9ZnVuY3Rpb24gcihiLGUsZyxoKXt2YXIgaz1mKGUudGV4dHVyZS5mb3JtYXQpLGw9ZihlLnRleHR1cmUudHlwZSk7Yy50ZXhJbWFnZTJEKGgsMCxrLGUud2lkdGgsZS5oZWlnaHQsMCxrLGwsbnVsbCk7YS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixiKTthLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGEuRlJBTUVCVUZGRVIsZyxoLGQuZ2V0KGUudGV4dHVyZSkuX193ZWJnbFRleHR1cmUsMCk7YS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixudWxsKX1mdW5jdGlvbiBzKGIsYyl7YS5iaW5kUmVuZGVyYnVmZmVyKGEuUkVOREVSQlVGRkVSLGIpO2MuZGVwdGhCdWZmZXImJiFjLnN0ZW5jaWxCdWZmZXI/KGEucmVuZGVyYnVmZmVyU3RvcmFnZShhLlJFTkRFUkJVRkZFUixcbmEuREVQVEhfQ09NUE9ORU5UMTYsYy53aWR0aCxjLmhlaWdodCksYS5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihhLkZSQU1FQlVGRkVSLGEuREVQVEhfQVRUQUNITUVOVCxhLlJFTkRFUkJVRkZFUixiKSk6Yy5kZXB0aEJ1ZmZlciYmYy5zdGVuY2lsQnVmZmVyPyhhLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoYS5SRU5ERVJCVUZGRVIsYS5ERVBUSF9TVEVOQ0lMLGMud2lkdGgsYy5oZWlnaHQpLGEuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoYS5GUkFNRUJVRkZFUixhLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCxhLlJFTkRFUkJVRkZFUixiKSk6YS5yZW5kZXJidWZmZXJTdG9yYWdlKGEuUkVOREVSQlVGRkVSLGEuUkdCQTQsYy53aWR0aCxjLmhlaWdodCk7YS5iaW5kUmVuZGVyYnVmZmVyKGEuUkVOREVSQlVGRkVSLG51bGwpfXZhciB2PWcubWVtb3J5LHQ9XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0JiZhIGluc3RhbmNlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dDtcbnRoaXMuc2V0VGV4dHVyZTJEPW47dGhpcy5zZXRUZXh0dXJlQ3ViZT1mdW5jdGlvbihiLGcpe3ZhciBsPWQuZ2V0KGIpO2lmKDY9PT1iLmltYWdlLmxlbmd0aClpZigwPGIudmVyc2lvbiYmbC5fX3ZlcnNpb24hPT1iLnZlcnNpb24pe2wuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZXx8KGIuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixtKSxsLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmU9YS5jcmVhdGVUZXh0dXJlKCksdi50ZXh0dXJlcysrKTtjLmFjdGl2ZVRleHR1cmUoYS5URVhUVVJFMCtnKTtjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV9DVUJFX01BUCxsLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpO2EucGl4ZWxTdG9yZWkoYS5VTlBBQ0tfRkxJUF9ZX1dFQkdMLGIuZmxpcFkpO2Zvcih2YXIgbj1iIGluc3RhbmNlb2YgVEhSRUUuQ29tcHJlc3NlZFRleHR1cmUscD1iLmltYWdlWzBdaW5zdGFuY2VvZiBUSFJFRS5EYXRhVGV4dHVyZSxyPVtdLHM9MDs2PnM7cysrKXJbc109XG5ufHxwP3A/Yi5pbWFnZVtzXS5pbWFnZTpiLmltYWdlW3NdOmgoYi5pbWFnZVtzXSxlLm1heEN1YmVtYXBTaXplKTt2YXIgdD1rKHJbMF0pLEI9ZihiLmZvcm1hdCksRj1mKGIudHlwZSk7cShhLlRFWFRVUkVfQ1VCRV9NQVAsYix0KTtmb3Iocz0wOzY+cztzKyspaWYobilmb3IodmFyIEosUD1yW3NdLm1pcG1hcHMsSz0wLEg9UC5sZW5ndGg7SzxIO0srKylKPVBbS10sYi5mb3JtYXQhPT1USFJFRS5SR0JBRm9ybWF0JiZiLmZvcm1hdCE9PVRIUkVFLlJHQkZvcm1hdD8tMTxjLmdldENvbXByZXNzZWRUZXh0dXJlRm9ybWF0cygpLmluZGV4T2YoQik/Yy5jb21wcmVzc2VkVGV4SW1hZ2UyRChhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtzLEssQixKLndpZHRoLEouaGVpZ2h0LDAsSi5kYXRhKTpjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIGxvYWQgdW5zdXBwb3J0ZWQgY29tcHJlc3NlZCB0ZXh0dXJlIGZvcm1hdCBpbiAuc2V0VGV4dHVyZUN1YmUoKVwiKTpcbmMudGV4SW1hZ2UyRChhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtzLEssQixKLndpZHRoLEouaGVpZ2h0LDAsQixGLEouZGF0YSk7ZWxzZSBwP2MudGV4SW1hZ2UyRChhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtzLDAsQixyW3NdLndpZHRoLHJbc10uaGVpZ2h0LDAsQixGLHJbc10uZGF0YSk6Yy50ZXhJbWFnZTJEKGEuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK3MsMCxCLEIsRixyW3NdKTtiLmdlbmVyYXRlTWlwbWFwcyYmdCYmYS5nZW5lcmF0ZU1pcG1hcChhLlRFWFRVUkVfQ1VCRV9NQVApO2wuX192ZXJzaW9uPWIudmVyc2lvbjtpZihiLm9uVXBkYXRlKWIub25VcGRhdGUoYil9ZWxzZSBjLmFjdGl2ZVRleHR1cmUoYS5URVhUVVJFMCtnKSxjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV9DVUJFX01BUCxsLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpfTt0aGlzLnNldFRleHR1cmVDdWJlRHluYW1pYz1mdW5jdGlvbihiLGUpe2MuYWN0aXZlVGV4dHVyZShhLlRFWFRVUkUwK1xuZSk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfQ1VCRV9NQVAsZC5nZXQoYikuX193ZWJnbFRleHR1cmUpfTt0aGlzLnNldHVwUmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKGIpe3ZhciBlPWQuZ2V0KGIpLGY9ZC5nZXQoYi50ZXh0dXJlKTtiLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIscCk7Zi5fX3dlYmdsVGV4dHVyZT1hLmNyZWF0ZVRleHR1cmUoKTt2LnRleHR1cmVzKys7dmFyIGc9YiBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZSxoPWsoYik7aWYoZyl7ZS5fX3dlYmdsRnJhbWVidWZmZXI9W107Zm9yKHZhciBsPTA7Nj5sO2wrKyllLl9fd2ViZ2xGcmFtZWJ1ZmZlcltsXT1hLmNyZWF0ZUZyYW1lYnVmZmVyKCl9ZWxzZSBlLl9fd2ViZ2xGcmFtZWJ1ZmZlcj1hLmNyZWF0ZUZyYW1lYnVmZmVyKCk7aWYoZyl7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfQ1VCRV9NQVAsZi5fX3dlYmdsVGV4dHVyZSk7cShhLlRFWFRVUkVfQ1VCRV9NQVAsYi50ZXh0dXJlLGgpO2ZvcihsPVxuMDs2Pmw7bCsrKXIoZS5fX3dlYmdsRnJhbWVidWZmZXJbbF0sYixhLkNPTE9SX0FUVEFDSE1FTlQwLGEuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2wpO2IudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMmJmgmJmEuZ2VuZXJhdGVNaXBtYXAoYS5URVhUVVJFX0NVQkVfTUFQKTtjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV9DVUJFX01BUCxudWxsKX1lbHNlIGMuYmluZFRleHR1cmUoYS5URVhUVVJFXzJELGYuX193ZWJnbFRleHR1cmUpLHEoYS5URVhUVVJFXzJELGIudGV4dHVyZSxoKSxyKGUuX193ZWJnbEZyYW1lYnVmZmVyLGIsYS5DT0xPUl9BVFRBQ0hNRU5UMCxhLlRFWFRVUkVfMkQpLGIudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMmJmgmJmEuZ2VuZXJhdGVNaXBtYXAoYS5URVhUVVJFXzJEKSxjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV8yRCxudWxsKTtpZihiLmRlcHRoQnVmZmVyKXtlPWQuZ2V0KGIpO2Y9YiBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZTtpZihiLmRlcHRoVGV4dHVyZSl7aWYoZil0aHJvdyBFcnJvcihcInRhcmdldC5kZXB0aFRleHR1cmUgbm90IHN1cHBvcnRlZCBpbiBDdWJlIHJlbmRlciB0YXJnZXRzXCIpO1xuaWYoYiBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZSl0aHJvdyBFcnJvcihcIkRlcHRoIFRleHR1cmUgd2l0aCBjdWJlIHJlbmRlciB0YXJnZXRzIGlzIG5vdCBzdXBwb3J0ZWQhXCIpO2EuYmluZEZyYW1lYnVmZmVyKGEuRlJBTUVCVUZGRVIsZS5fX3dlYmdsRnJhbWVidWZmZXIpO2lmKCEoYi5kZXB0aFRleHR1cmUgaW5zdGFuY2VvZiBUSFJFRS5EZXB0aFRleHR1cmUpKXRocm93IEVycm9yKFwicmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIFRIUkVFLkRlcHRoVGV4dHVyZVwiKTtkLmdldChiLmRlcHRoVGV4dHVyZSkuX193ZWJnbFRleHR1cmUmJmIuZGVwdGhUZXh0dXJlLmltYWdlLndpZHRoPT09Yi53aWR0aCYmYi5kZXB0aFRleHR1cmUuaW1hZ2UuaGVpZ2h0PT09Yi5oZWlnaHR8fChiLmRlcHRoVGV4dHVyZS5pbWFnZS53aWR0aD1iLndpZHRoLGIuZGVwdGhUZXh0dXJlLmltYWdlLmhlaWdodD1iLmhlaWdodCxiLmRlcHRoVGV4dHVyZS5uZWVkc1VwZGF0ZT1cbiEwKTtuKGIuZGVwdGhUZXh0dXJlLDApO2I9ZC5nZXQoYi5kZXB0aFRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlO2EuZnJhbWVidWZmZXJUZXh0dXJlMkQoYS5GUkFNRUJVRkZFUixhLkRFUFRIX0FUVEFDSE1FTlQsYS5URVhUVVJFXzJELGIsMCl9ZWxzZSBpZihmKWZvcihlLl9fd2ViZ2xEZXB0aGJ1ZmZlcj1bXSxmPTA7Nj5mO2YrKylhLmJpbmRGcmFtZWJ1ZmZlcihhLkZSQU1FQlVGRkVSLGUuX193ZWJnbEZyYW1lYnVmZmVyW2ZdKSxlLl9fd2ViZ2xEZXB0aGJ1ZmZlcltmXT1hLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLHMoZS5fX3dlYmdsRGVwdGhidWZmZXJbZl0sYik7ZWxzZSBhLmJpbmRGcmFtZWJ1ZmZlcihhLkZSQU1FQlVGRkVSLGUuX193ZWJnbEZyYW1lYnVmZmVyKSxlLl9fd2ViZ2xEZXB0aGJ1ZmZlcj1hLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLHMoZS5fX3dlYmdsRGVwdGhidWZmZXIsYik7YS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixudWxsKX19O3RoaXMudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwPVxuZnVuY3Rpb24oYil7dmFyIGU9Yi50ZXh0dXJlO2UuZ2VuZXJhdGVNaXBtYXBzJiZrKGIpJiZlLm1pbkZpbHRlciE9PVRIUkVFLk5lYXJlc3RGaWx0ZXImJmUubWluRmlsdGVyIT09VEhSRUUuTGluZWFyRmlsdGVyJiYoYj1iIGluc3RhbmNlb2YgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlP2EuVEVYVFVSRV9DVUJFX01BUDphLlRFWFRVUkVfMkQsZT1kLmdldChlKS5fX3dlYmdsVGV4dHVyZSxjLmJpbmRUZXh0dXJlKGIsZSksYS5nZW5lcmF0ZU1pcG1hcChiKSxjLmJpbmRUZXh0dXJlKGIsbnVsbCkpfX07XG5USFJFRS5XZWJHTFVuaWZvcm1zPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlRleHR1cmUsYj1uZXcgVEhSRUUuQ3ViZVRleHR1cmUsYz1bXSxkPVtdLGU9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWFbMF07aWYoMD49ZXx8MDxlKXJldHVybiBhO3ZhciBmPWIqZCxnPWNbZl07dm9pZCAwPT09ZyYmKGc9bmV3IEZsb2F0MzJBcnJheShmKSxjW2ZdPWcpO2lmKDAhPT1iKWZvcihlLnRvQXJyYXkoZywwKSxlPTEsZj0wO2UhPT1iOysrZSlmKz1kLGFbZV0udG9BcnJheShnLGYpO3JldHVybiBnfSxmPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZFtiXTt2b2lkIDA9PT1jJiYoYz1uZXcgSW50MzJBcnJheShiKSxkW2JdPWMpO2Zvcih2YXIgZT0wO2UhPT1iOysrZSljW2VdPWEuYWxsb2NUZXh0dXJlVW5pdCgpO3JldHVybiBjfSxnPWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtMWYodGhpcy5hZGRyLGIpfSxoPWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtMWkodGhpcy5hZGRyLGIpfSxrPWZ1bmN0aW9uKGEsXG5iKXt2b2lkIDA9PT1iLng/YS51bmlmb3JtMmZ2KHRoaXMuYWRkcixiKTphLnVuaWZvcm0yZih0aGlzLmFkZHIsYi54LGIueSl9LGw9ZnVuY3Rpb24oYSxiKXt2b2lkIDAhPT1iLng/YS51bmlmb3JtM2YodGhpcy5hZGRyLGIueCxiLnksYi56KTp2b2lkIDAhPT1iLnI/YS51bmlmb3JtM2YodGhpcy5hZGRyLGIucixiLmcsYi5iKTphLnVuaWZvcm0zZnYodGhpcy5hZGRyLGIpfSxtPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09Yi54P2EudW5pZm9ybTRmdih0aGlzLmFkZHIsYik6YS51bmlmb3JtNGYodGhpcy5hZGRyLGIueCxiLnksYi56LGIudyl9LHA9ZnVuY3Rpb24oYSxiKXthLnVuaWZvcm1NYXRyaXgyZnYodGhpcy5hZGRyLCExLGIuZWxlbWVudHN8fGIpfSxuPWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkciwhMSxiLmVsZW1lbnRzfHxiKX0scT1mdW5jdGlvbihhLGIpe2EudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsITEsYi5lbGVtZW50c3x8Yil9LHI9XG5mdW5jdGlvbihiLGMsZCl7dmFyIGU9ZC5hbGxvY1RleHR1cmVVbml0KCk7Yi51bmlmb3JtMWkodGhpcy5hZGRyLGUpO2Quc2V0VGV4dHVyZTJEKGN8fGEsZSl9LHM9ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQuYWxsb2NUZXh0dXJlVW5pdCgpO2EudW5pZm9ybTFpKHRoaXMuYWRkcixlKTtkLnNldFRleHR1cmVDdWJlKGN8fGIsZSl9LHY9ZnVuY3Rpb24oYSxiKXthLnVuaWZvcm0yaXYodGhpcy5hZGRyLGIpfSx0PWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtM2l2KHRoaXMuYWRkcixiKX0sdT1mdW5jdGlvbihhLGIpe2EudW5pZm9ybTRpdih0aGlzLmFkZHIsYil9LEQ9ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgNTEyNjpyZXR1cm4gZztjYXNlIDM1NjY0OnJldHVybiBrO2Nhc2UgMzU2NjU6cmV0dXJuIGw7Y2FzZSAzNTY2NjpyZXR1cm4gbTtjYXNlIDM1Njc0OnJldHVybiBwO2Nhc2UgMzU2NzU6cmV0dXJuIG47Y2FzZSAzNTY3NjpyZXR1cm4gcTtjYXNlIDM1Njc4OnJldHVybiByO2Nhc2UgMzU2ODA6cmV0dXJuIHM7XG5jYXNlIDUxMjQ6Y2FzZSAzNTY3MDpyZXR1cm4gaDtjYXNlIDM1NjY3OmNhc2UgMzU2NzE6cmV0dXJuIHY7Y2FzZSAzNTY2ODpjYXNlIDM1NjcyOnJldHVybiB0O2Nhc2UgMzU2Njk6Y2FzZSAzNTY3MzpyZXR1cm4gdX19LHc9ZnVuY3Rpb24oYSxiKXthLnVuaWZvcm0xZnYodGhpcy5hZGRyLGIpfSxJPWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtMWl2KHRoaXMuYWRkcixiKX0sej1mdW5jdGlvbihhLGIpe2EudW5pZm9ybTJmdih0aGlzLmFkZHIsZShiLHRoaXMuc2l6ZSwyKSl9LHk9ZnVuY3Rpb24oYSxiKXthLnVuaWZvcm0zZnYodGhpcy5hZGRyLGUoYix0aGlzLnNpemUsMykpfSxBPWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtNGZ2KHRoaXMuYWRkcixlKGIsdGhpcy5zaXplLDQpKX0sRz1mdW5jdGlvbihhLGIpe2EudW5pZm9ybU1hdHJpeDJmdih0aGlzLmFkZHIsITEsZShiLHRoaXMuc2l6ZSw0KSl9LEI9ZnVuY3Rpb24oYSxiKXthLnVuaWZvcm1NYXRyaXgzZnYodGhpcy5hZGRyLCExLGUoYixcbnRoaXMuc2l6ZSw5KSl9LEY9ZnVuY3Rpb24oYSxiKXthLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLCExLGUoYix0aGlzLnNpemUsMTYpKX0sSj1mdW5jdGlvbihiLGMsZCl7dmFyIGU9Yy5sZW5ndGgsZz1mKGQsZSk7Yi51bmlmb3JtMWl2KHRoaXMuYWRkcixnKTtmb3IoYj0wO2IhPT1lOysrYilkLnNldFRleHR1cmUyRChjW2JdfHxhLGdbYl0pfSxQPWZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1jLmxlbmd0aCxnPWYoZCxlKTthLnVuaWZvcm0xaXYodGhpcy5hZGRyLGcpO2ZvcihhPTA7YSE9PWU7KythKWQuc2V0VGV4dHVyZUN1YmUoY1thXXx8YixnW2FdKX0sSz1mdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSA1MTI2OnJldHVybiB3O2Nhc2UgMzU2NjQ6cmV0dXJuIHo7Y2FzZSAzNTY2NTpyZXR1cm4geTtjYXNlIDM1NjY2OnJldHVybiBBO2Nhc2UgMzU2NzQ6cmV0dXJuIEc7Y2FzZSAzNTY3NTpyZXR1cm4gQjtjYXNlIDM1Njc2OnJldHVybiBGO2Nhc2UgMzU2Nzg6cmV0dXJuIEo7Y2FzZSAzNTY4MDpyZXR1cm4gUDtcbmNhc2UgNTEyNDpjYXNlIDM1NjcwOnJldHVybiBJO2Nhc2UgMzU2Njc6Y2FzZSAzNTY3MTpyZXR1cm4gdjtjYXNlIDM1NjY4OmNhc2UgMzU2NzI6cmV0dXJuIHQ7Y2FzZSAzNTY2OTpjYXNlIDM1NjczOnJldHVybiB1fX0sSD1mdW5jdGlvbihhLGIsYyl7dGhpcy5pZD1hO3RoaXMuYWRkcj1jO3RoaXMuc2V0VmFsdWU9RChiLnR5cGUpfSxNPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmlkPWE7dGhpcy5hZGRyPWM7dGhpcy5zaXplPWIuc2l6ZTt0aGlzLnNldFZhbHVlPUsoYi50eXBlKX0sTz1mdW5jdGlvbihhKXt0aGlzLmlkPWE7dGhpcy5zZXE9W107dGhpcy5tYXA9e319O08ucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuc2VxLGQ9MCxlPWMubGVuZ3RoO2QhPT1lOysrZCl7dmFyIGY9Y1tkXTtmLnNldFZhbHVlKGEsYltmLmlkXSl9fTt2YXIgTj0vKFtcXHdcXGRfXSspKFxcXSk/KFxcW3xcXC4pPy9nLFE9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2VxPVtdO3RoaXMubWFwPVxue307dGhpcy5yZW5kZXJlcj1jO2M9YS5nZXRQcm9ncmFtUGFyYW1ldGVyKGIsYS5BQ1RJVkVfVU5JRk9STVMpO2Zvcih2YXIgZD0wO2QhPT1jOysrZCl7dmFyIGU9YS5nZXRBY3RpdmVVbmlmb3JtKGIsZCksZj1hLmdldFVuaWZvcm1Mb2NhdGlvbihiLGUubmFtZSksZz10aGlzLGg9ZS5uYW1lLGs9aC5sZW5ndGg7Zm9yKE4ubGFzdEluZGV4PTA7Oyl7dmFyIGw9Ti5leGVjKGgpLG09Ti5sYXN0SW5kZXgsbj1sWzFdLHA9bFszXTtcIl1cIj09PWxbMl0mJihufD0wKTtpZih2b2lkIDA9PT1wfHxcIltcIj09PXAmJm0rMj09PWspe2g9ZztlPXZvaWQgMD09PXA/bmV3IEgobixlLGYpOm5ldyBNKG4sZSxmKTtoLnNlcS5wdXNoKGUpO2gubWFwW2UuaWRdPWU7YnJlYWt9ZWxzZSBwPWcubWFwW25dLHZvaWQgMD09PXAmJihwPW5ldyBPKG4pLG49ZyxnPXAsbi5zZXEucHVzaChnKSxuLm1hcFtnLmlkXT1nKSxnPXB9fX07US5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24oYSxiLGMpe2I9dGhpcy5tYXBbYl07XG52b2lkIDAhPT1iJiZiLnNldFZhbHVlKGEsYyx0aGlzLnJlbmRlcmVyKX07US5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLm1hcFtjXTt2b2lkIDAhPT1kJiZkLnNldFZhbHVlKGEsYltjXSx0aGlzLnJlbmRlcmVyKX07US5wcm90b3R5cGUuc2V0T3B0aW9uYWw9ZnVuY3Rpb24oYSxiLGMpe2I9YltjXTt2b2lkIDAhPT1iJiZ0aGlzLnNldFZhbHVlKGEsYyxiKX07US51cGxvYWQ9ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlPTAsZj1iLmxlbmd0aDtlIT09ZjsrK2Upe3ZhciBnPWJbZV0saD1jW2cuaWRdOyExIT09aC5uZWVkc1VwZGF0ZSYmZy5zZXRWYWx1ZShhLGgudmFsdWUsZCl9fTtRLnNlcVdpdGhWYWx1ZT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXSxkPTAsZT1hLmxlbmd0aDtkIT09ZTsrK2Qpe3ZhciBmPWFbZF07Zi5pZCBpbiBiJiZjLnB1c2goZil9cmV0dXJuIGN9O1Euc3BsaXREeW5hbWljPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPW51bGwsXG5kPWEubGVuZ3RoLGU9MCxmPTA7ZiE9PWQ7KytmKXt2YXIgZz1hW2ZdLGg9YltnLmlkXTtoJiYhMD09PWguZHluYW1pYz8obnVsbD09PWMmJihjPVtdKSxjLnB1c2goZykpOihlPGYmJihhW2VdPWcpLCsrZSl9ZTxkJiYoYS5sZW5ndGg9ZSk7cmV0dXJuIGN9O1EuZXZhbER5bmFtaWM9ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlPTAsZj1hLmxlbmd0aDtlIT09ZjsrK2Upe3ZhciBnPWJbYVtlXS5pZF0saD1nLm9uVXBkYXRlQ2FsbGJhY2s7dm9pZCAwIT09aCYmaC5jYWxsKGcsYyxkKX19O3JldHVybiBRfSgpO1xuVEhSRUUuTGVuc0ZsYXJlUGx1Z2luPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZyxoLGssbCxtLHAsbj1hLmNvbnRleHQscT1hLnN0YXRlLHIscyx2LHQsdSxEO3RoaXMucmVuZGVyPWZ1bmN0aW9uKHcsSSx6KXtpZigwIT09Yi5sZW5ndGgpe3c9bmV3IFRIUkVFLlZlY3RvcjM7dmFyIHk9ei53L3oueixBPS41KnoueixHPS41KnoudyxCPTE2L3oudyxGPW5ldyBUSFJFRS5WZWN0b3IyKEIqeSxCKSxKPW5ldyBUSFJFRS5WZWN0b3IzKDEsMSwwKSxQPW5ldyBUSFJFRS5WZWN0b3IyKDEsMSksSz1uZXcgVEhSRUUuQm94MjtLLm1pbi5zZXQoMCwwKTtLLm1heC5zZXQoei56LTE2LHoudy0xNik7aWYodm9pZCAwPT09dCl7dmFyIEI9bmV3IEZsb2F0MzJBcnJheShbLTEsLTEsMCwwLDEsLTEsMSwwLDEsMSwxLDEsLTEsMSwwLDFdKSxIPW5ldyBVaW50MTZBcnJheShbMCwxLDIsMCwyLDNdKTtyPW4uY3JlYXRlQnVmZmVyKCk7cz1uLmNyZWF0ZUJ1ZmZlcigpO24uYmluZEJ1ZmZlcihuLkFSUkFZX0JVRkZFUixcbnIpO24uYnVmZmVyRGF0YShuLkFSUkFZX0JVRkZFUixCLG4uU1RBVElDX0RSQVcpO24uYmluZEJ1ZmZlcihuLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHMpO24uYnVmZmVyRGF0YShuLkVMRU1FTlRfQVJSQVlfQlVGRkVSLEgsbi5TVEFUSUNfRFJBVyk7dT1uLmNyZWF0ZVRleHR1cmUoKTtEPW4uY3JlYXRlVGV4dHVyZSgpO3EuYmluZFRleHR1cmUobi5URVhUVVJFXzJELHUpO24udGV4SW1hZ2UyRChuLlRFWFRVUkVfMkQsMCxuLlJHQiwxNiwxNiwwLG4uUkdCLG4uVU5TSUdORURfQllURSxudWxsKTtuLnRleFBhcmFtZXRlcmkobi5URVhUVVJFXzJELG4uVEVYVFVSRV9XUkFQX1Msbi5DTEFNUF9UT19FREdFKTtuLnRleFBhcmFtZXRlcmkobi5URVhUVVJFXzJELG4uVEVYVFVSRV9XUkFQX1Qsbi5DTEFNUF9UT19FREdFKTtuLnRleFBhcmFtZXRlcmkobi5URVhUVVJFXzJELG4uVEVYVFVSRV9NQUdfRklMVEVSLG4uTkVBUkVTVCk7bi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfTUlOX0ZJTFRFUixcbm4uTkVBUkVTVCk7cS5iaW5kVGV4dHVyZShuLlRFWFRVUkVfMkQsRCk7bi50ZXhJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLG4uUkdCQSwxNiwxNiwwLG4uUkdCQSxuLlVOU0lHTkVEX0JZVEUsbnVsbCk7bi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfV1JBUF9TLG4uQ0xBTVBfVE9fRURHRSk7bi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfV1JBUF9ULG4uQ0xBTVBfVE9fRURHRSk7bi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfTUFHX0ZJTFRFUixuLk5FQVJFU1QpO24udGV4UGFyYW1ldGVyaShuLlRFWFRVUkVfMkQsbi5URVhUVVJFX01JTl9GSUxURVIsbi5ORUFSRVNUKTt2YXIgQj12PXt2ZXJ0ZXhTaGFkZXI6XCJ1bmlmb3JtIGxvd3AgaW50IHJlbmRlclR5cGU7XFxudW5pZm9ybSB2ZWMzIHNjcmVlblBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjMiBzY2FsZTtcXG51bmlmb3JtIGZsb2F0IHJvdGF0aW9uO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG9jY2x1c2lvbk1hcDtcXG5hdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiB1djtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZhcnlpbmcgZmxvYXQgdlZpc2liaWxpdHk7XFxudm9pZCBtYWluKCkge1xcbnZVViA9IHV2O1xcbnZlYzIgcG9zID0gcG9zaXRpb247XFxuaWYgKCByZW5kZXJUeXBlID09IDIgKSB7XFxudmVjNCB2aXNpYmlsaXR5ID0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC4xICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuMSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC45LCAwLjEgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC41ICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuOSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjkgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC45ICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuNSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjUgKSApO1xcbnZWaXNpYmlsaXR5ID0gICAgICAgIHZpc2liaWxpdHkuciAvIDkuMDtcXG52VmlzaWJpbGl0eSAqPSAxLjAgLSB2aXNpYmlsaXR5LmcgLyA5LjA7XFxudlZpc2liaWxpdHkgKj0gICAgICAgdmlzaWJpbGl0eS5iIC8gOS4wO1xcbnZWaXNpYmlsaXR5ICo9IDEuMCAtIHZpc2liaWxpdHkuYSAvIDkuMDtcXG5wb3MueCA9IGNvcyggcm90YXRpb24gKSAqIHBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBwb3NpdGlvbi55O1xcbnBvcy55ID0gc2luKCByb3RhdGlvbiApICogcG9zaXRpb24ueCArIGNvcyggcm90YXRpb24gKSAqIHBvc2l0aW9uLnk7XFxufVxcbmdsX1Bvc2l0aW9uID0gdmVjNCggKCBwb3MgKiBzY2FsZSArIHNjcmVlblBvc2l0aW9uLnh5ICkueHksIHNjcmVlblBvc2l0aW9uLnosIDEuMCApO1xcbn1cIixcbmZyYWdtZW50U2hhZGVyOlwidW5pZm9ybSBsb3dwIGludCByZW5kZXJUeXBlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSB2ZWMzIGNvbG9yO1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudmFyeWluZyBmbG9hdCB2VmlzaWJpbGl0eTtcXG52b2lkIG1haW4oKSB7XFxuaWYgKCByZW5kZXJUeXBlID09IDAgKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggMS4wLCAwLjAsIDEuMCwgMC4wICk7XFxufSBlbHNlIGlmICggcmVuZGVyVHlwZSA9PSAxICkge1xcbmdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG59IGVsc2Uge1xcbnZlYzQgdGV4dHVyZSA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG50ZXh0dXJlLmEgKj0gb3BhY2l0eSAqIHZWaXNpYmlsaXR5O1xcbmdsX0ZyYWdDb2xvciA9IHRleHR1cmU7XFxuZ2xfRnJhZ0NvbG9yLnJnYiAqPSBjb2xvcjtcXG59XFxufVwifSxIPW4uY3JlYXRlUHJvZ3JhbSgpLE09bi5jcmVhdGVTaGFkZXIobi5GUkFHTUVOVF9TSEFERVIpLFxuTz1uLmNyZWF0ZVNoYWRlcihuLlZFUlRFWF9TSEFERVIpLE49XCJwcmVjaXNpb24gXCIrYS5nZXRQcmVjaXNpb24oKStcIiBmbG9hdDtcXG5cIjtuLnNoYWRlclNvdXJjZShNLE4rQi5mcmFnbWVudFNoYWRlcik7bi5zaGFkZXJTb3VyY2UoTyxOK0IudmVydGV4U2hhZGVyKTtuLmNvbXBpbGVTaGFkZXIoTSk7bi5jb21waWxlU2hhZGVyKE8pO24uYXR0YWNoU2hhZGVyKEgsTSk7bi5hdHRhY2hTaGFkZXIoSCxPKTtuLmxpbmtQcm9ncmFtKEgpO3Q9SDttPW4uZ2V0QXR0cmliTG9jYXRpb24odCxcInBvc2l0aW9uXCIpO3A9bi5nZXRBdHRyaWJMb2NhdGlvbih0LFwidXZcIik7Yz1uLmdldFVuaWZvcm1Mb2NhdGlvbih0LFwicmVuZGVyVHlwZVwiKTtkPW4uZ2V0VW5pZm9ybUxvY2F0aW9uKHQsXCJtYXBcIik7ZT1uLmdldFVuaWZvcm1Mb2NhdGlvbih0LFwib2NjbHVzaW9uTWFwXCIpO2Y9bi5nZXRVbmlmb3JtTG9jYXRpb24odCxcIm9wYWNpdHlcIik7Zz1uLmdldFVuaWZvcm1Mb2NhdGlvbih0LFwiY29sb3JcIik7aD1uLmdldFVuaWZvcm1Mb2NhdGlvbih0LFxuXCJzY2FsZVwiKTtrPW4uZ2V0VW5pZm9ybUxvY2F0aW9uKHQsXCJyb3RhdGlvblwiKTtsPW4uZ2V0VW5pZm9ybUxvY2F0aW9uKHQsXCJzY3JlZW5Qb3NpdGlvblwiKX1uLnVzZVByb2dyYW0odCk7cS5pbml0QXR0cmlidXRlcygpO3EuZW5hYmxlQXR0cmlidXRlKG0pO3EuZW5hYmxlQXR0cmlidXRlKHApO3EuZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMoKTtuLnVuaWZvcm0xaShlLDApO24udW5pZm9ybTFpKGQsMSk7bi5iaW5kQnVmZmVyKG4uQVJSQVlfQlVGRkVSLHIpO24udmVydGV4QXR0cmliUG9pbnRlcihtLDIsbi5GTE9BVCwhMSwxNiwwKTtuLnZlcnRleEF0dHJpYlBvaW50ZXIocCwyLG4uRkxPQVQsITEsMTYsOCk7bi5iaW5kQnVmZmVyKG4uRUxFTUVOVF9BUlJBWV9CVUZGRVIscyk7cS5kaXNhYmxlKG4uQ1VMTF9GQUNFKTtxLnNldERlcHRoV3JpdGUoITEpO0g9MDtmb3IoTT1iLmxlbmd0aDtIPE07SCsrKWlmKEI9MTYvei53LEYuc2V0KEIqeSxCKSxPPWJbSF0sdy5zZXQoTy5tYXRyaXhXb3JsZC5lbGVtZW50c1sxMl0sXG5PLm1hdHJpeFdvcmxkLmVsZW1lbnRzWzEzXSxPLm1hdHJpeFdvcmxkLmVsZW1lbnRzWzE0XSksdy5hcHBseU1hdHJpeDQoSS5tYXRyaXhXb3JsZEludmVyc2UpLHcuYXBwbHlQcm9qZWN0aW9uKEkucHJvamVjdGlvbk1hdHJpeCksSi5jb3B5KHcpLFAueD16LngrSi54KkErQS04LFAueT16LnkrSi55KkcrRy04LCEwPT09Sy5jb250YWluc1BvaW50KFApKXtxLmFjdGl2ZVRleHR1cmUobi5URVhUVVJFMCk7cS5iaW5kVGV4dHVyZShuLlRFWFRVUkVfMkQsbnVsbCk7cS5hY3RpdmVUZXh0dXJlKG4uVEVYVFVSRTEpO3EuYmluZFRleHR1cmUobi5URVhUVVJFXzJELHUpO24uY29weVRleEltYWdlMkQobi5URVhUVVJFXzJELDAsbi5SR0IsUC54LFAueSwxNiwxNiwwKTtuLnVuaWZvcm0xaShjLDApO24udW5pZm9ybTJmKGgsRi54LEYueSk7bi51bmlmb3JtM2YobCxKLngsSi55LEoueik7cS5kaXNhYmxlKG4uQkxFTkQpO3EuZW5hYmxlKG4uREVQVEhfVEVTVCk7bi5kcmF3RWxlbWVudHMobi5UUklBTkdMRVMsXG42LG4uVU5TSUdORURfU0hPUlQsMCk7cS5hY3RpdmVUZXh0dXJlKG4uVEVYVFVSRTApO3EuYmluZFRleHR1cmUobi5URVhUVVJFXzJELEQpO24uY29weVRleEltYWdlMkQobi5URVhUVVJFXzJELDAsbi5SR0JBLFAueCxQLnksMTYsMTYsMCk7bi51bmlmb3JtMWkoYywxKTtxLmRpc2FibGUobi5ERVBUSF9URVNUKTtxLmFjdGl2ZVRleHR1cmUobi5URVhUVVJFMSk7cS5iaW5kVGV4dHVyZShuLlRFWFRVUkVfMkQsdSk7bi5kcmF3RWxlbWVudHMobi5UUklBTkdMRVMsNixuLlVOU0lHTkVEX1NIT1JULDApO08ucG9zaXRpb25TY3JlZW4uY29weShKKTtPLmN1c3RvbVVwZGF0ZUNhbGxiYWNrP08uY3VzdG9tVXBkYXRlQ2FsbGJhY2soTyk6Ty51cGRhdGVMZW5zRmxhcmVzKCk7bi51bmlmb3JtMWkoYywyKTtxLmVuYWJsZShuLkJMRU5EKTtmb3IodmFyIE49MCxRPU8ubGVuc0ZsYXJlcy5sZW5ndGg7TjxRO04rKyl7dmFyIEM9Ty5sZW5zRmxhcmVzW05dOy4wMDE8Qy5vcGFjaXR5JiYuMDAxPEMuc2NhbGUmJlxuKEoueD1DLngsSi55PUMueSxKLno9Qy56LEI9Qy5zaXplKkMuc2NhbGUvei53LEYueD1CKnksRi55PUIsbi51bmlmb3JtM2YobCxKLngsSi55LEoueiksbi51bmlmb3JtMmYoaCxGLngsRi55KSxuLnVuaWZvcm0xZihrLEMucm90YXRpb24pLG4udW5pZm9ybTFmKGYsQy5vcGFjaXR5KSxuLnVuaWZvcm0zZihnLEMuY29sb3IucixDLmNvbG9yLmcsQy5jb2xvci5iKSxxLnNldEJsZW5kaW5nKEMuYmxlbmRpbmcsQy5ibGVuZEVxdWF0aW9uLEMuYmxlbmRTcmMsQy5ibGVuZERzdCksYS5zZXRUZXh0dXJlMkQoQy50ZXh0dXJlLDEpLG4uZHJhd0VsZW1lbnRzKG4uVFJJQU5HTEVTLDYsbi5VTlNJR05FRF9TSE9SVCwwKSl9fXEuZW5hYmxlKG4uQ1VMTF9GQUNFKTtxLmVuYWJsZShuLkRFUFRIX1RFU1QpO3Euc2V0RGVwdGhXcml0ZSghMCk7YS5yZXNldEdMU3RhdGUoKX19fTtcblRIUkVFLlNwcml0ZVBsdWdpbj1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGcsaCxrLGwsbSxwLG4scSxyLHMsdix0LHU7ZnVuY3Rpb24gRChhLGIpe3JldHVybiBhLnJlbmRlck9yZGVyIT09Yi5yZW5kZXJPcmRlcj9hLnJlbmRlck9yZGVyLWIucmVuZGVyT3JkZXI6YS56IT09Yi56P2Iuei1hLno6Yi5pZC1hLmlkfXZhciB3PWEuY29udGV4dCxJPWEuc3RhdGUseix5LEEsRyxCPW5ldyBUSFJFRS5WZWN0b3IzLEY9bmV3IFRIUkVFLlF1YXRlcm5pb24sSj1uZXcgVEhSRUUuVmVjdG9yMzt0aGlzLnJlbmRlcj1mdW5jdGlvbihQLEspe2lmKDAhPT1iLmxlbmd0aCl7aWYodm9pZCAwPT09QSl7dmFyIEg9bmV3IEZsb2F0MzJBcnJheShbLS41LC0uNSwwLDAsLjUsLS41LDEsMCwuNSwuNSwxLDEsLS41LC41LDAsMV0pLE09bmV3IFVpbnQxNkFycmF5KFswLDEsMiwwLDIsM10pO3o9dy5jcmVhdGVCdWZmZXIoKTt5PXcuY3JlYXRlQnVmZmVyKCk7dy5iaW5kQnVmZmVyKHcuQVJSQVlfQlVGRkVSLFxueik7dy5idWZmZXJEYXRhKHcuQVJSQVlfQlVGRkVSLEgsdy5TVEFUSUNfRFJBVyk7dy5iaW5kQnVmZmVyKHcuRUxFTUVOVF9BUlJBWV9CVUZGRVIseSk7dy5idWZmZXJEYXRhKHcuRUxFTUVOVF9BUlJBWV9CVUZGRVIsTSx3LlNUQVRJQ19EUkFXKTt2YXIgSD13LmNyZWF0ZVByb2dyYW0oKSxNPXcuY3JlYXRlU2hhZGVyKHcuVkVSVEVYX1NIQURFUiksTz13LmNyZWF0ZVNoYWRlcih3LkZSQUdNRU5UX1NIQURFUik7dy5zaGFkZXJTb3VyY2UoTSxbXCJwcmVjaXNpb24gXCIrYS5nZXRQcmVjaXNpb24oKStcIiBmbG9hdDtcIixcInVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7XFxudW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcXG51bmlmb3JtIHZlYzIgc2NhbGU7XFxudW5pZm9ybSB2ZWMyIHV2T2Zmc2V0O1xcbnVuaWZvcm0gdmVjMiB1dlNjYWxlO1xcbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIHV2O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudm9pZCBtYWluKCkge1xcbnZVViA9IHV2T2Zmc2V0ICsgdXYgKiB1dlNjYWxlO1xcbnZlYzIgYWxpZ25lZFBvc2l0aW9uID0gcG9zaXRpb24gKiBzY2FsZTtcXG52ZWMyIHJvdGF0ZWRQb3NpdGlvbjtcXG5yb3RhdGVkUG9zaXRpb24ueCA9IGNvcyggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi54IC0gc2luKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnk7XFxucm90YXRlZFBvc2l0aW9uLnkgPSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueCArIGNvcyggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi55O1xcbnZlYzQgZmluYWxQb3NpdGlvbjtcXG5maW5hbFBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggMC4wLCAwLjAsIDAuMCwgMS4wICk7XFxuZmluYWxQb3NpdGlvbi54eSArPSByb3RhdGVkUG9zaXRpb247XFxuZmluYWxQb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBmaW5hbFBvc2l0aW9uO1xcbmdsX1Bvc2l0aW9uID0gZmluYWxQb3NpdGlvbjtcXG59XCJdLmpvaW4oXCJcXG5cIikpO1xudy5zaGFkZXJTb3VyY2UoTyxbXCJwcmVjaXNpb24gXCIrYS5nZXRQcmVjaXNpb24oKStcIiBmbG9hdDtcIixcInVuaWZvcm0gdmVjMyBjb2xvcjtcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gaW50IGZvZ1R5cGU7XFxudW5pZm9ybSB2ZWMzIGZvZ0NvbG9yO1xcbnVuaWZvcm0gZmxvYXQgZm9nRGVuc2l0eTtcXG51bmlmb3JtIGZsb2F0IGZvZ05lYXI7XFxudW5pZm9ybSBmbG9hdCBmb2dGYXI7XFxudW5pZm9ybSBmbG9hdCBhbHBoYVRlc3Q7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52b2lkIG1haW4oKSB7XFxudmVjNCB0ZXh0dXJlID0gdGV4dHVyZTJEKCBtYXAsIHZVViApO1xcbmlmICggdGV4dHVyZS5hIDwgYWxwaGFUZXN0ICkgZGlzY2FyZDtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KCBjb2xvciAqIHRleHR1cmUueHl6LCB0ZXh0dXJlLmEgKiBvcGFjaXR5ICk7XFxuaWYgKCBmb2dUeXBlID4gMCApIHtcXG5mbG9hdCBkZXB0aCA9IGdsX0ZyYWdDb29yZC56IC8gZ2xfRnJhZ0Nvb3JkLnc7XFxuZmxvYXQgZm9nRmFjdG9yID0gMC4wO1xcbmlmICggZm9nVHlwZSA9PSAxICkge1xcbmZvZ0ZhY3RvciA9IHNtb290aHN0ZXAoIGZvZ05lYXIsIGZvZ0ZhciwgZGVwdGggKTtcXG59IGVsc2Uge1xcbmNvbnN0IGZsb2F0IExPRzIgPSAxLjQ0MjY5NTtcXG5mb2dGYWN0b3IgPSBleHAyKCAtIGZvZ0RlbnNpdHkgKiBmb2dEZW5zaXR5ICogZGVwdGggKiBkZXB0aCAqIExPRzIgKTtcXG5mb2dGYWN0b3IgPSAxLjAgLSBjbGFtcCggZm9nRmFjdG9yLCAwLjAsIDEuMCApO1xcbn1cXG5nbF9GcmFnQ29sb3IgPSBtaXgoIGdsX0ZyYWdDb2xvciwgdmVjNCggZm9nQ29sb3IsIGdsX0ZyYWdDb2xvci53ICksIGZvZ0ZhY3RvciApO1xcbn1cXG59XCJdLmpvaW4oXCJcXG5cIikpO1xudy5jb21waWxlU2hhZGVyKE0pO3cuY29tcGlsZVNoYWRlcihPKTt3LmF0dGFjaFNoYWRlcihILE0pO3cuYXR0YWNoU2hhZGVyKEgsTyk7dy5saW5rUHJvZ3JhbShIKTtBPUg7dD13LmdldEF0dHJpYkxvY2F0aW9uKEEsXCJwb3NpdGlvblwiKTt1PXcuZ2V0QXR0cmliTG9jYXRpb24oQSxcInV2XCIpO2M9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcInV2T2Zmc2V0XCIpO2Q9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcInV2U2NhbGVcIik7ZT13LmdldFVuaWZvcm1Mb2NhdGlvbihBLFwicm90YXRpb25cIik7Zj13LmdldFVuaWZvcm1Mb2NhdGlvbihBLFwic2NhbGVcIik7Zz13LmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiY29sb3JcIik7aD13LmdldFVuaWZvcm1Mb2NhdGlvbihBLFwibWFwXCIpO2s9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcIm9wYWNpdHlcIik7bD13LmdldFVuaWZvcm1Mb2NhdGlvbihBLFwibW9kZWxWaWV3TWF0cml4XCIpO209dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcInByb2plY3Rpb25NYXRyaXhcIik7cD1cbncuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJmb2dUeXBlXCIpO249dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImZvZ0RlbnNpdHlcIik7cT13LmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiZm9nTmVhclwiKTtyPXcuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJmb2dGYXJcIik7cz13LmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiZm9nQ29sb3JcIik7dj13LmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiYWxwaGFUZXN0XCIpO0g9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO0gud2lkdGg9ODtILmhlaWdodD04O009SC5nZXRDb250ZXh0KFwiMmRcIik7TS5maWxsU3R5bGU9XCJ3aGl0ZVwiO00uZmlsbFJlY3QoMCwwLDgsOCk7Rz1uZXcgVEhSRUUuVGV4dHVyZShIKTtHLm5lZWRzVXBkYXRlPSEwfXcudXNlUHJvZ3JhbShBKTtJLmluaXRBdHRyaWJ1dGVzKCk7SS5lbmFibGVBdHRyaWJ1dGUodCk7SS5lbmFibGVBdHRyaWJ1dGUodSk7SS5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpO1xuSS5kaXNhYmxlKHcuQ1VMTF9GQUNFKTtJLmVuYWJsZSh3LkJMRU5EKTt3LmJpbmRCdWZmZXIody5BUlJBWV9CVUZGRVIseik7dy52ZXJ0ZXhBdHRyaWJQb2ludGVyKHQsMix3LkZMT0FULCExLDE2LDApO3cudmVydGV4QXR0cmliUG9pbnRlcih1LDIsdy5GTE9BVCwhMSwxNiw4KTt3LmJpbmRCdWZmZXIody5FTEVNRU5UX0FSUkFZX0JVRkZFUix5KTt3LnVuaWZvcm1NYXRyaXg0ZnYobSwhMSxLLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHMpO0kuYWN0aXZlVGV4dHVyZSh3LlRFWFRVUkUwKTt3LnVuaWZvcm0xaShoLDApO009SD0wOyhPPVAuZm9nKT8ody51bmlmb3JtM2YocyxPLmNvbG9yLnIsTy5jb2xvci5nLE8uY29sb3IuYiksTyBpbnN0YW5jZW9mIFRIUkVFLkZvZz8ody51bmlmb3JtMWYocSxPLm5lYXIpLHcudW5pZm9ybTFmKHIsTy5mYXIpLHcudW5pZm9ybTFpKHAsMSksTT1IPTEpOk8gaW5zdGFuY2VvZiBUSFJFRS5Gb2dFeHAyJiYody51bmlmb3JtMWYobixPLmRlbnNpdHkpLFxudy51bmlmb3JtMWkocCwyKSxNPUg9MikpOih3LnVuaWZvcm0xaShwLDApLE09SD0wKTtmb3IodmFyIE89MCxOPWIubGVuZ3RoO088TjtPKyspe3ZhciBRPWJbT107US5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhLLm1hdHJpeFdvcmxkSW52ZXJzZSxRLm1hdHJpeFdvcmxkKTtRLno9LVEubW9kZWxWaWV3TWF0cml4LmVsZW1lbnRzWzE0XX1iLnNvcnQoRCk7Zm9yKHZhciBDPVtdLE89MCxOPWIubGVuZ3RoO088TjtPKyspe3ZhciBRPWJbT10sTD1RLm1hdGVyaWFsOyExIT09TC52aXNpYmxlJiYody51bmlmb3JtMWYodixMLmFscGhhVGVzdCksdy51bmlmb3JtTWF0cml4NGZ2KGwsITEsUS5tb2RlbFZpZXdNYXRyaXguZWxlbWVudHMpLFEubWF0cml4V29ybGQuZGVjb21wb3NlKEIsRixKKSxDWzBdPUoueCxDWzFdPUoueSxRPTAsUC5mb2cmJkwuZm9nJiYoUT1NKSxIIT09USYmKHcudW5pZm9ybTFpKHAsUSksSD1RKSxudWxsIT09TC5tYXA/KHcudW5pZm9ybTJmKGMsTC5tYXAub2Zmc2V0LngsXG5MLm1hcC5vZmZzZXQueSksdy51bmlmb3JtMmYoZCxMLm1hcC5yZXBlYXQueCxMLm1hcC5yZXBlYXQueSkpOih3LnVuaWZvcm0yZihjLDAsMCksdy51bmlmb3JtMmYoZCwxLDEpKSx3LnVuaWZvcm0xZihrLEwub3BhY2l0eSksdy51bmlmb3JtM2YoZyxMLmNvbG9yLnIsTC5jb2xvci5nLEwuY29sb3IuYiksdy51bmlmb3JtMWYoZSxMLnJvdGF0aW9uKSx3LnVuaWZvcm0yZnYoZixDKSxJLnNldEJsZW5kaW5nKEwuYmxlbmRpbmcsTC5ibGVuZEVxdWF0aW9uLEwuYmxlbmRTcmMsTC5ibGVuZERzdCksSS5zZXREZXB0aFRlc3QoTC5kZXB0aFRlc3QpLEkuc2V0RGVwdGhXcml0ZShMLmRlcHRoV3JpdGUpLEwubWFwP2Euc2V0VGV4dHVyZTJEKEwubWFwLDApOmEuc2V0VGV4dHVyZTJEKEcsMCksdy5kcmF3RWxlbWVudHMody5UUklBTkdMRVMsNix3LlVOU0lHTkVEX1NIT1JULDApKX1JLmVuYWJsZSh3LkNVTExfRkFDRSk7YS5yZXNldEdMU3RhdGUoKX19fTtcbk9iamVjdC5hc3NpZ24oVEhSRUUse0ZhY2U0OmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe2NvbnNvbGUud2FybihcIlRIUkVFLkZhY2U0IGhhcyBiZWVuIHJlbW92ZWQuIEEgVEhSRUUuRmFjZTMgd2lsbCBiZSBjcmVhdGVkIGluc3RlYWQuXCIpO3JldHVybiBuZXcgVEhSRUUuRmFjZTMoYSxiLGMsZSxmLGcpfSxMaW5lU3RyaXA6MCxMaW5lUGllY2VzOjEsTWVzaEZhY2VNYXRlcmlhbDpUSFJFRS5NdWx0aU1hdGVyaWFsLFBvaW50Q2xvdWQ6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Qb2ludENsb3VkIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzLlwiKTtyZXR1cm4gbmV3IFRIUkVFLlBvaW50cyhhLGIpfSxQYXJ0aWNsZTpUSFJFRS5TcHJpdGUsUGFydGljbGVTeXN0ZW06ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZVN5c3RlbSBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50cy5cIik7cmV0dXJuIG5ldyBUSFJFRS5Qb2ludHMoYSxcbmIpfSxQb2ludENsb3VkTWF0ZXJpYWw6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUG9pbnRDbG91ZE1hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuXCIpO3JldHVybiBuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwoYSl9LFBhcnRpY2xlQmFzaWNNYXRlcmlhbDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZUJhc2ljTWF0ZXJpYWwgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHNNYXRlcmlhbC5cIik7cmV0dXJuIG5ldyBUSFJFRS5Qb2ludHNNYXRlcmlhbChhKX0sUGFydGljbGVTeXN0ZW1NYXRlcmlhbDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QYXJ0aWNsZVN5c3RlbU1hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuXCIpO3JldHVybiBuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwoYSl9LFZlcnRleDpmdW5jdGlvbihhLGIsYyl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVydGV4IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5WZWN0b3IzIGluc3RlYWQuXCIpO1xucmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKGEsYixjKX19KTtPYmplY3QuYXNzaWduKFRIUkVFLkJveDIucHJvdG90eXBlLHtlbXB0eTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5lbXB0eSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmlzRW1wdHkoKS5cIik7cmV0dXJuIHRoaXMuaXNFbXB0eSgpfSxpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNCb3goYSl9fSk7XG5PYmplY3QuYXNzaWduKFRIUkVFLkJveDMucHJvdG90eXBlLHtlbXB0eTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5lbXB0eSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmlzRW1wdHkoKS5cIik7cmV0dXJuIHRoaXMuaXNFbXB0eSgpfSxpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNCb3goYSl9LGlzSW50ZXJzZWN0aW9uU3BoZXJlOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDM6IC5pc0ludGVyc2VjdGlvblNwaGVyZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNTcGhlcmUoKS5cIik7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NwaGVyZShhKX19KTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuTWF0cml4My5wcm90b3R5cGUse211bHRpcGx5VmVjdG9yMzpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXgzOiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDMoIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5TWF0cml4Myh0aGlzKX0sbXVsdGlwbHlWZWN0b3IzQXJyYXk6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLm11bHRpcGx5VmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVuYW1lZC4gVXNlIG1hdHJpeC5hcHBseVRvVmVjdG9yM0FycmF5KCBhcnJheSApIGluc3RlYWQuXCIpO3JldHVybiB0aGlzLmFwcGx5VG9WZWN0b3IzQXJyYXkoYSl9fSk7XG5PYmplY3QuYXNzaWduKFRIUkVFLk1hdHJpeDQucHJvdG90eXBlLHtleHRyYWN0UG9zaXRpb246ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmV4dHJhY3RQb3NpdGlvbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmNvcHlQb3NpdGlvbigpLlwiKTtyZXR1cm4gdGhpcy5jb3B5UG9zaXRpb24oYSl9LHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbigpLlwiKTtyZXR1cm4gdGhpcy5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihhKX0sbXVsdGlwbHlWZWN0b3IzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVZlY3RvcjMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgb3IgdmVjdG9yLmFwcGx5UHJvamVjdGlvbiggbWF0cml4ICkgaW5zdGVhZC5cIik7XG5yZXR1cm4gYS5hcHBseVByb2plY3Rpb24odGhpcyl9LG11bHRpcGx5VmVjdG9yNDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHlWZWN0b3I0KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzKX0sbXVsdGlwbHlWZWN0b3IzQXJyYXk6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVuYW1lZC4gVXNlIG1hdHJpeC5hcHBseVRvVmVjdG9yM0FycmF5KCBhcnJheSApIGluc3RlYWQuXCIpO3JldHVybiB0aGlzLmFwcGx5VG9WZWN0b3IzQXJyYXkoYSl9LHJvdGF0ZUF4aXM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZUF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVmVjdG9yMy50cmFuc2Zvcm1EaXJlY3Rpb24oIG1hdHJpeCApIGluc3RlYWQuXCIpO1xuYS50cmFuc2Zvcm1EaXJlY3Rpb24odGhpcyl9LGNyb3NzVmVjdG9yOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5jcm9zc1ZlY3RvcigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcyl9LHRyYW5zbGF0ZTpmdW5jdGlvbihhKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnRyYW5zbGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVYOmZ1bmN0aW9uKGEpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlWCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVZOmZ1bmN0aW9uKGEpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlWSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVaOmZ1bmN0aW9uKGEpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlWigpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxcbnJvdGF0ZUJ5QXhpczpmdW5jdGlvbihhLGIpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlQnlBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSk7T2JqZWN0LmFzc2lnbihUSFJFRS5QbGFuZS5wcm90b3R5cGUse2lzSW50ZXJzZWN0aW9uTGluZTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QbGFuZTogLmlzSW50ZXJzZWN0aW9uTGluZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNMaW5lKCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNMaW5lKGEpfX0pO09iamVjdC5hc3NpZ24oVEhSRUUuUXVhdGVybmlvbi5wcm90b3R5cGUse211bHRpcGx5VmVjdG9yMzpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5RdWF0ZXJuaW9uOiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGlzIG5vdyB2ZWN0b3IuYXBwbHlRdWF0ZXJuaW9uKCBxdWF0ZXJuaW9uICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlRdWF0ZXJuaW9uKHRoaXMpfX0pO1xuT2JqZWN0LmFzc2lnbihUSFJFRS5SYXkucHJvdG90eXBlLHtpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvbkJveCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNCb3goKS5cIik7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c0JveChhKX0saXNJbnRlcnNlY3Rpb25QbGFuZTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5SYXk6IC5pc0ludGVyc2VjdGlvblBsYW5lKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1BsYW5lKCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNQbGFuZShhKX0saXNJbnRlcnNlY3Rpb25TcGhlcmU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25TcGhlcmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzU3BoZXJlKCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoYSl9fSk7XG5PYmplY3QuYXNzaWduKFRIUkVFLlZlY3RvcjMucHJvdG90eXBlLHtzZXRFdWxlckZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5WZWN0b3IzOiAuc2V0RXVsZXJGcm9tUm90YXRpb25NYXRyaXgoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgRXVsZXIuc2V0RnJvbVJvdGF0aW9uTWF0cml4KCkgaW5zdGVhZC5cIil9LHNldEV1bGVyRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuVmVjdG9yMzogLnNldEV1bGVyRnJvbVF1YXRlcm5pb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgRXVsZXIuc2V0RnJvbVF1YXRlcm5pb24oKSBpbnN0ZWFkLlwiKX0sZ2V0UG9zaXRpb25Gcm9tTWF0cml4OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5nZXRQb3NpdGlvbkZyb21NYXRyaXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tTWF0cml4UG9zaXRpb24oKS5cIik7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEpfSxcbmdldFNjYWxlRnJvbU1hdHJpeDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZ2V0U2NhbGVGcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeFNjYWxlKCkuXCIpO3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhTY2FsZShhKX0sZ2V0Q29sdW1uRnJvbU1hdHJpeDpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5nZXRDb2x1bW5Gcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeENvbHVtbigpLlwiKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKGIsYSl9fSk7XG5PYmplY3QuYXNzaWduKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSx7Z2V0Q2hpbGRCeU5hbWU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC5nZXRDaGlsZEJ5TmFtZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldE9iamVjdEJ5TmFtZSgpLlwiKTtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeU5hbWUoYSl9LHJlbmRlckRlcHRoOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAucmVuZGVyRGVwdGggaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5yZW5kZXJPcmRlciwgaW5zdGVhZC5cIil9LHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAudHJhbnNsYXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC50cmFuc2xhdGVPbkF4aXMoIGF4aXMsIGRpc3RhbmNlICkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGIsYSl9fSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUse2V1bGVyT3JkZXI6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZXVsZXJPcmRlciBpcyBub3cgLnJvdGF0aW9uLm9yZGVyLlwiKTtyZXR1cm4gdGhpcy5yb3RhdGlvbi5vcmRlcn0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZXVsZXJPcmRlciBpcyBub3cgLnJvdGF0aW9uLm9yZGVyLlwiKTt0aGlzLnJvdGF0aW9uLm9yZGVyPWF9fSx1c2VRdWF0ZXJuaW9uOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC5cIil9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC5cIil9fX0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuTE9ELnByb3RvdHlwZSx7b2JqZWN0czp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTE9EOiAub2JqZWN0cyBoYXMgYmVlbiByZW5hbWVkIHRvIC5sZXZlbHMuXCIpO3JldHVybiB0aGlzLmxldmVsc319fSk7VEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEucHJvdG90eXBlLnNldExlbnM9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYS5zZXRMZW5zIGlzIGRlcHJlY2F0ZWQuIFVzZSAuc2V0Rm9jYWxMZW5ndGggYW5kIC5maWxtR2F1Z2UgZm9yIGEgcGhvdG9ncmFwaGljIHNldHVwLlwiKTt2b2lkIDAhPT1iJiYodGhpcy5maWxtR2F1Z2U9Yik7dGhpcy5zZXRGb2NhbExlbmd0aChhKX07XG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5MaWdodC5wcm90b3R5cGUse29ubHlTaGFkb3c6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLm9ubHlTaGFkb3cgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSxzaGFkb3dDYW1lcmFGb3Y6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUZvdiBpcyBub3cgLnNoYWRvdy5jYW1lcmEuZm92LlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEuZm92PWF9fSxzaGFkb3dDYW1lcmFMZWZ0OntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFMZWZ0IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5sZWZ0LlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEubGVmdD1hfX0sc2hhZG93Q2FtZXJhUmlnaHQ6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVJpZ2h0IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5yaWdodC5cIik7XG50aGlzLnNoYWRvdy5jYW1lcmEucmlnaHQ9YX19LHNoYWRvd0NhbWVyYVRvcDp7c2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhVG9wIGlzIG5vdyAuc2hhZG93LmNhbWVyYS50b3AuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS50b3A9YX19LHNoYWRvd0NhbWVyYUJvdHRvbTp7c2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhQm90dG9tIGlzIG5vdyAuc2hhZG93LmNhbWVyYS5ib3R0b20uXCIpO3RoaXMuc2hhZG93LmNhbWVyYS5ib3R0b209YX19LHNoYWRvd0NhbWVyYU5lYXI6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYU5lYXIgaXMgbm93IC5zaGFkb3cuY2FtZXJhLm5lYXIuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS5uZWFyPWF9fSxzaGFkb3dDYW1lcmFGYXI6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUZhciBpcyBub3cgLnNoYWRvdy5jYW1lcmEuZmFyLlwiKTtcbnRoaXMuc2hhZG93LmNhbWVyYS5mYXI9YX19LHNoYWRvd0NhbWVyYVZpc2libGU6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVZpc2libGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5DYW1lcmFIZWxwZXIoIGxpZ2h0LnNoYWRvdy5jYW1lcmEgKSBpbnN0ZWFkLlwiKX19LHNoYWRvd0JpYXM6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0JpYXMgaXMgbm93IC5zaGFkb3cuYmlhcy5cIik7dGhpcy5zaGFkb3cuYmlhcz1hfX0sc2hhZG93RGFya25lc3M6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0RhcmtuZXNzIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sc2hhZG93TWFwV2lkdGg6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd01hcFdpZHRoIGlzIG5vdyAuc2hhZG93Lm1hcFNpemUud2lkdGguXCIpO1xudGhpcy5zaGFkb3cubWFwU2l6ZS53aWR0aD1hfX0sc2hhZG93TWFwSGVpZ2h0OntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dNYXBIZWlnaHQgaXMgbm93IC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQuXCIpO3RoaXMuc2hhZG93Lm1hcFNpemUuaGVpZ2h0PWF9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUse2xlbmd0aDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiAubGVuZ3RoIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgLmNvdW50LlwiKTtyZXR1cm4gdGhpcy5hcnJheS5sZW5ndGh9fX0pO1xuT2JqZWN0LmFzc2lnbihUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUse2FkZEluZGV4OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkSW5kZXgoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRJbmRleCgpLlwiKTt0aGlzLnNldEluZGV4KGEpfSxhZGREcmF3Q2FsbDpmdW5jdGlvbihhLGIsYyl7dm9pZCAwIT09YyYmY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGREcmF3Q2FsbCgpIG5vIGxvbmdlciBzdXBwb3J0cyBpbmRleE9mZnNldC5cIik7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGREcmF3Q2FsbCgpIGlzIG5vdyAuYWRkR3JvdXAoKS5cIik7dGhpcy5hZGRHcm91cChhLGIpfSxjbGVhckRyYXdDYWxsczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY2xlYXJEcmF3Q2FsbHMoKSBpcyBub3cgLmNsZWFyR3JvdXBzKCkuXCIpO3RoaXMuY2xlYXJHcm91cHMoKX0sXG5jb21wdXRlVGFuZ2VudHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmNvbXB1dGVUYW5nZW50cygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxjb21wdXRlT2Zmc2V0czpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY29tcHV0ZU9mZnNldHMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUse2RyYXdjYWxsczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuZHJhd2NhbGxzIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdyb3Vwcy5cIik7cmV0dXJuIHRoaXMuZ3JvdXBzfX0sb2Zmc2V0czp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5vZmZzZXRzIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdyb3Vwcy5cIik7cmV0dXJuIHRoaXMuZ3JvdXBzfX19KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSx7d3JhcEFyb3VuZDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAud3JhcEFyb3VuZCBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogLndyYXBBcm91bmQgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSx3cmFwUkdCOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC53cmFwUkdCIGhhcyBiZWVuIHJlbW92ZWQuXCIpO3JldHVybiBuZXcgVEhSRUUuQ29sb3J9fX0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwucHJvdG90eXBlLHttZXRhbDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw6IC5tZXRhbCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwgaW5zdGVhZC5cIik7cmV0dXJuITF9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbDogLm1ldGFsIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCBpbnN0ZWFkXCIpfX19KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZSx7ZGVyaXZhdGl2ZXM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlNoYWRlck1hdGVyaWFsOiAuZGVyaXZhdGl2ZXMgaGFzIGJlZW4gbW92ZWQgdG8gLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXMuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXN9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS4gU2hhZGVyTWF0ZXJpYWw6IC5kZXJpdmF0aXZlcyBoYXMgYmVlbiBtb3ZlZCB0byAuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcy5cIik7dGhpcy5leHRlbnNpb25zLmRlcml2YXRpdmVzPWF9fX0pO1xuVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoe2NvbnN0cnVjdG9yOlRIUkVFLkV2ZW50RGlzcGF0Y2hlcixhcHBseTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5FdmVudERpc3BhdGNoZXI6IC5hcHBseSBpcyBkZXByZWNhdGVkLCBqdXN0IGluaGVyaXQgb3IgT2JqZWN0LmFzc2lnbiB0aGUgcHJvdG90eXBlIHRvIG1peC1pbi5cIik7T2JqZWN0LmFzc2lnbihhLHRoaXMpfX0pLFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpO1xuT2JqZWN0LmFzc2lnbihUSFJFRS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZSx7c3VwcG9ydHNGbG9hdFRleHR1cmVzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzRmxvYXRUZXh0dXJlcygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdPRVNfdGV4dHVyZV9mbG9hdCcgKS5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdFwiKX0sc3VwcG9ydHNIYWxmRmxvYXRUZXh0dXJlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0hhbGZGbG9hdFRleHR1cmVzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdFwiKX0sc3VwcG9ydHNTdGFuZGFyZERlcml2YXRpdmVzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzU3RhbmRhcmREZXJpdmF0aXZlcygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMnICkuXCIpO1xucmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXNcIil9LHN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVTM1RDOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVTM1RDKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpfSxzdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUFZSVEM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVBWUlRDKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycgKS5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIil9LFxuc3VwcG9ydHNCbGVuZE1pbk1heDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0JsZW5kTWluTWF4KCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ0VYVF9ibGVuZF9taW5tYXgnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiRVhUX2JsZW5kX21pbm1heFwiKX0sc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhcGFiaWxpdGllcy52ZXJ0ZXhUZXh0dXJlc30sc3VwcG9ydHNJbnN0YW5jZWRBcnJheXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNJbnN0YW5jZWRBcnJheXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnQU5HTEVfaW5zdGFuY2VkX2FycmF5cycgKS5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpfSxlbmFibGVTY2lzc29yVGVzdDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZW5hYmxlU2Npc3NvclRlc3QoKSBpcyBub3cgLnNldFNjaXNzb3JUZXN0KCkuXCIpO1xudGhpcy5zZXRTY2lzc29yVGVzdChhKX0saW5pdE1hdGVyaWFsOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmluaXRNYXRlcmlhbCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhZGRQcmVQbHVnaW46ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuYWRkUHJlUGx1Z2luKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGFkZFBvc3RQbHVnaW46ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuYWRkUG9zdFBsdWdpbigpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSx1cGRhdGVTaGFkb3dNYXA6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAudXBkYXRlU2hhZG93TWFwKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZSx7c2hhZG93TWFwRW5hYmxlZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93TWFwLmVuYWJsZWR9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwRW5hYmxlZCBpcyBub3cgLnNoYWRvd01hcC5lbmFibGVkLlwiKTt0aGlzLnNoYWRvd01hcC5lbmFibGVkPWF9fSxzaGFkb3dNYXBUeXBlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dNYXAudHlwZX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXBUeXBlIGlzIG5vdyAuc2hhZG93TWFwLnR5cGUuXCIpO3RoaXMuc2hhZG93TWFwLnR5cGU9YX19LHNoYWRvd01hcEN1bGxGYWNlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dNYXAuY3VsbEZhY2V9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwQ3VsbEZhY2UgaXMgbm93IC5zaGFkb3dNYXAuY3VsbEZhY2UuXCIpO1xudGhpcy5zaGFkb3dNYXAuY3VsbEZhY2U9YX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuV2ViR0xTaGFkb3dNYXAucHJvdG90eXBlLHtjdWxsRmFjZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyUmV2ZXJzZVNpZGVkP1RIUkVFLkN1bGxGYWNlRnJvbnQ6VEhSRUUuQ3VsbEZhY2VCYWNrfSxzZXQ6ZnVuY3Rpb24oYSl7YT1hIT09VEhSRUUuQ3VsbEZhY2VCYWNrO2NvbnNvbGUud2FybihcIldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAuY3VsbEZhY2UgaXMgZGVwcmVjYXRlZC4gU2V0IC5zaGFkb3dNYXAucmVuZGVyUmV2ZXJzZVNpZGVkIHRvIFwiK2ErXCIuXCIpO3RoaXMucmVuZGVyUmV2ZXJzZVNpZGVkPWF9fX0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQucHJvdG90eXBlLHt3cmFwUzp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwUyBpcyBub3cgLnRleHR1cmUud3JhcFMuXCIpO3JldHVybiB0aGlzLnRleHR1cmUud3JhcFN9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBTIGlzIG5vdyAudGV4dHVyZS53cmFwUy5cIik7dGhpcy50ZXh0dXJlLndyYXBTPWF9fSx3cmFwVDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwVCBpcyBub3cgLnRleHR1cmUud3JhcFQuXCIpO3JldHVybiB0aGlzLnRleHR1cmUud3JhcFR9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLndyYXBUIGlzIG5vdyAudGV4dHVyZS53cmFwVC5cIik7dGhpcy50ZXh0dXJlLndyYXBUPVxuYX19LG1hZ0ZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5tYWdGaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1hZ0ZpbHRlci5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5tYWdGaWx0ZXJ9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1hZ0ZpbHRlciBpcyBub3cgLnRleHR1cmUubWFnRmlsdGVyLlwiKTt0aGlzLnRleHR1cmUubWFnRmlsdGVyPWF9fSxtaW5GaWx0ZXI6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWluRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5taW5GaWx0ZXIuXCIpO3JldHVybiB0aGlzLnRleHR1cmUubWluRmlsdGVyfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5taW5GaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1pbkZpbHRlci5cIik7dGhpcy50ZXh0dXJlLm1pbkZpbHRlcj1cbmF9fSxhbmlzb3Ryb3B5OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmFuaXNvdHJvcHkgaXMgbm93IC50ZXh0dXJlLmFuaXNvdHJvcHkuXCIpO3JldHVybiB0aGlzLnRleHR1cmUuYW5pc290cm9weX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuYW5pc290cm9weSBpcyBub3cgLnRleHR1cmUuYW5pc290cm9weS5cIik7dGhpcy50ZXh0dXJlLmFuaXNvdHJvcHk9YX19LG9mZnNldDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5vZmZzZXQgaXMgbm93IC50ZXh0dXJlLm9mZnNldC5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5vZmZzZXR9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm9mZnNldCBpcyBub3cgLnRleHR1cmUub2Zmc2V0LlwiKTt0aGlzLnRleHR1cmUub2Zmc2V0PVxuYX19LHJlcGVhdDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5yZXBlYXQgaXMgbm93IC50ZXh0dXJlLnJlcGVhdC5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5yZXBlYXR9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnJlcGVhdCBpcyBub3cgLnRleHR1cmUucmVwZWF0LlwiKTt0aGlzLnRleHR1cmUucmVwZWF0PWF9fSxmb3JtYXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZm9ybWF0IGlzIG5vdyAudGV4dHVyZS5mb3JtYXQuXCIpO3JldHVybiB0aGlzLnRleHR1cmUuZm9ybWF0fSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5mb3JtYXQgaXMgbm93IC50ZXh0dXJlLmZvcm1hdC5cIik7dGhpcy50ZXh0dXJlLmZvcm1hdD1hfX0sdHlwZTp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC50eXBlIGlzIG5vdyAudGV4dHVyZS50eXBlLlwiKTtcbnJldHVybiB0aGlzLnRleHR1cmUudHlwZX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAudHlwZSBpcyBub3cgLnRleHR1cmUudHlwZS5cIik7dGhpcy50ZXh0dXJlLnR5cGU9YX19LGdlbmVyYXRlTWlwbWFwczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5nZW5lcmF0ZU1pcG1hcHMgaXMgbm93IC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcy5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHN9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmdlbmVyYXRlTWlwbWFwcyBpcyBub3cgLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzLlwiKTt0aGlzLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPWF9fX0pO1xuT2JqZWN0LmFzc2lnbihUSFJFRS5BdWRpby5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IC5sb2FkIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgVEhSRUUuQXVkaW9Mb2FkZXIuXCIpO3ZhciBiPXRoaXM7KG5ldyBUSFJFRS5BdWRpb0xvYWRlcikubG9hZChhLGZ1bmN0aW9uKGEpe2Iuc2V0QnVmZmVyKGEpfSk7cmV0dXJuIHRoaXN9fSk7T2JqZWN0LmFzc2lnbihUSFJFRS5BdWRpb0FuYWx5c2VyLnByb3RvdHlwZSx7Z2V0RGF0YTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpb0FuYWx5c2VyOiAuZ2V0RGF0YSgpIGlzIG5vdyAuZ2V0RnJlcXVlbmN5RGF0YSgpLlwiKTtyZXR1cm4gdGhpcy5nZXRGcmVxdWVuY3lEYXRhKCl9fSk7XG5USFJFRS5HZW9tZXRyeVV0aWxzPXttZXJnZTpmdW5jdGlvbihhLGIsYyl7Y29uc29sZS53YXJuKFwiVEhSRUUuR2VvbWV0cnlVdGlsczogLm1lcmdlKCkgaGFzIGJlZW4gbW92ZWQgdG8gR2VvbWV0cnkuIFVzZSBnZW9tZXRyeS5tZXJnZSggZ2VvbWV0cnkyLCBtYXRyaXgsIG1hdGVyaWFsSW5kZXhPZmZzZXQgKSBpbnN0ZWFkLlwiKTt2YXIgZDtiIGluc3RhbmNlb2YgVEhSRUUuTWVzaCYmKGIubWF0cml4QXV0b1VwZGF0ZSYmYi51cGRhdGVNYXRyaXgoKSxkPWIubWF0cml4LGI9Yi5nZW9tZXRyeSk7YS5tZXJnZShiLGQsYyl9LGNlbnRlcjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5HZW9tZXRyeVV0aWxzOiAuY2VudGVyKCkgaGFzIGJlZW4gbW92ZWQgdG8gR2VvbWV0cnkuIFVzZSBnZW9tZXRyeS5jZW50ZXIoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5jZW50ZXIoKX19O1xuVEhSRUUuSW1hZ2VVdGlscz17Y3Jvc3NPcmlnaW46dm9pZCAwLGxvYWRUZXh0dXJlOmZ1bmN0aW9uKGEsYixjLGQpe2NvbnNvbGUud2FybihcIlRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLlRleHR1cmVMb2FkZXIoKSBpbnN0ZWFkLlwiKTt2YXIgZT1uZXcgVEhSRUUuVGV4dHVyZUxvYWRlcjtlLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2E9ZS5sb2FkKGEsYyx2b2lkIDAsZCk7YiYmKGEubWFwcGluZz1iKTtyZXR1cm4gYX0sbG9hZFRleHR1cmVDdWJlOmZ1bmN0aW9uKGEsYixjLGQpe2NvbnNvbGUud2FybihcIlRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmVDdWJlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5DdWJlVGV4dHVyZUxvYWRlcigpIGluc3RlYWQuXCIpO3ZhciBlPW5ldyBUSFJFRS5DdWJlVGV4dHVyZUxvYWRlcjtlLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2E9ZS5sb2FkKGEsXG5jLHZvaWQgMCxkKTtiJiYoYS5tYXBwaW5nPWIpO3JldHVybiBhfSxsb2FkQ29tcHJlc3NlZFRleHR1cmU6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkREU0xvYWRlciBpbnN0ZWFkLlwiKX0sbG9hZENvbXByZXNzZWRUZXh0dXJlQ3ViZTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRDb21wcmVzc2VkVGV4dHVyZUN1YmUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkREU0xvYWRlciBpbnN0ZWFkLlwiKX19O1xuVEhSRUUuUHJvamVjdG9yPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb2plY3RvciBoYXMgYmVlbiBtb3ZlZCB0byAvZXhhbXBsZXMvanMvcmVuZGVyZXJzL1Byb2plY3Rvci5qcy5cIik7dGhpcy5wcm9qZWN0VmVjdG9yPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuUHJvamVjdG9yOiAucHJvamVjdFZlY3RvcigpIGlzIG5vdyB2ZWN0b3IucHJvamVjdCgpLlwiKTthLnByb2plY3QoYil9O3RoaXMudW5wcm9qZWN0VmVjdG9yPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuUHJvamVjdG9yOiAudW5wcm9qZWN0VmVjdG9yKCkgaXMgbm93IHZlY3Rvci51bnByb2plY3QoKS5cIik7YS51bnByb2plY3QoYil9O3RoaXMucGlja2luZ1JheT1mdW5jdGlvbihhLGIpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9qZWN0b3I6IC5waWNraW5nUmF5KCkgaXMgbm93IHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKCkuXCIpfX07XG5USFJFRS5DYW52YXNSZW5kZXJlcj1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5DYW52YXNSZW5kZXJlciBoYXMgYmVlbiBtb3ZlZCB0byAvZXhhbXBsZXMvanMvcmVuZGVyZXJzL0NhbnZhc1JlbmRlcmVyLmpzXCIpO3RoaXMuZG9tRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIik7dGhpcy5jbGVhcj1mdW5jdGlvbigpe307dGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXt9O3RoaXMuc2V0Q2xlYXJDb2xvcj1mdW5jdGlvbigpe307dGhpcy5zZXRTaXplPWZ1bmN0aW9uKCl7fX07XG5USFJFRS5DdXJ2ZVV0aWxzPXt0YW5nZW50UXVhZHJhdGljQmV6aWVyOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiAyKigxLWEpKihjLWIpKzIqYSooZC1jKX0sdGFuZ2VudEN1YmljQmV6aWVyOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuLTMqYiooMS1hKSooMS1hKSszKmMqKDEtYSkqKDEtYSktNiphKmMqKDEtYSkrNiphKmQqKDEtYSktMyphKmEqZCszKmEqYSplfSx0YW5nZW50U3BsaW5lOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIDYqYSphLTYqYSsoMyphKmEtNCphKzEpKygtNiphKmErNiphKSsoMyphKmEtMiphKX0saW50ZXJwb2xhdGU6ZnVuY3Rpb24oYSxiLGMsZCxlKXthPS41KihjLWEpO2Q9LjUqKGQtYik7dmFyIGY9ZSplO3JldHVybigyKmItMipjK2ErZCkqZSpmKygtMypiKzMqYy0yKmEtZCkqZithKmUrYn19O1xuVEhSRUUuU2NlbmVVdGlscz17Y3JlYXRlTXVsdGlNYXRlcmlhbE9iamVjdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1uZXcgVEhSRUUuR3JvdXAsZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKyljLmFkZChuZXcgVEhSRUUuTWVzaChhLGJbZF0pKTtyZXR1cm4gY30sZGV0YWNoOmZ1bmN0aW9uKGEsYixjKXthLmFwcGx5TWF0cml4KGIubWF0cml4V29ybGQpO2IucmVtb3ZlKGEpO2MuYWRkKGEpfSxhdHRhY2g6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW5ldyBUSFJFRS5NYXRyaXg0O2QuZ2V0SW52ZXJzZShjLm1hdHJpeFdvcmxkKTthLmFwcGx5TWF0cml4KGQpO2IucmVtb3ZlKGEpO2MuYWRkKGEpfX07XG5USFJFRS5TaGFwZVV0aWxzPXthcmVhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPTAsZD1iLTEsZT0wO2U8YjtkPWUrKyljKz1hW2RdLngqYVtlXS55LWFbZV0ueCphW2RdLnk7cmV0dXJuLjUqY30sdHJpYW5ndWxhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aDtpZigzPmMpcmV0dXJuIG51bGw7dmFyIGQ9W10sZT1bXSxmPVtdLGcsaCxrO2lmKDA8VEhSRUUuU2hhcGVVdGlscy5hcmVhKGEpKWZvcihoPTA7aDxjO2grKyllW2hdPWg7ZWxzZSBmb3IoaD0wO2g8YztoKyspZVtoXT1jLTEtaDt2YXIgbD0yKmM7Zm9yKGg9Yy0xOzI8Yzspe2lmKDA+PWwtLSl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2hhcGVVdGlsczogVW5hYmxlIHRvIHRyaWFuZ3VsYXRlIHBvbHlnb24hIGluIHRyaWFuZ3VsYXRlKClcIik7YnJlYWt9Zz1oO2M8PWcmJihnPTApO2g9ZysxO2M8PWgmJihoPTApO2s9aCsxO2M8PWsmJihrPTApO3ZhciBtO2E6e3ZhciBwPVxubT12b2lkIDAsbj12b2lkIDAscT12b2lkIDAscj12b2lkIDAscz12b2lkIDAsdj12b2lkIDAsdD12b2lkIDAsdT12b2lkIDAscD1hW2VbZ11dLngsbj1hW2VbZ11dLnkscT1hW2VbaF1dLngscj1hW2VbaF1dLnkscz1hW2Vba11dLngsdj1hW2Vba11dLnk7aWYoTnVtYmVyLkVQU0lMT04+KHEtcCkqKHYtbiktKHItbikqKHMtcCkpbT0hMTtlbHNle3ZhciBEPXZvaWQgMCx3PXZvaWQgMCxJPXZvaWQgMCx6PXZvaWQgMCx5PXZvaWQgMCxBPXZvaWQgMCxHPXZvaWQgMCxCPXZvaWQgMCxGPXZvaWQgMCxKPXZvaWQgMCxGPUI9Rz11PXQ9dm9pZCAwLEQ9cy1xLHc9di1yLEk9cC1zLHo9bi12LHk9cS1wLEE9ci1uO2ZvcihtPTA7bTxjO20rKylpZih0PWFbZVttXV0ueCx1PWFbZVttXV0ueSwhKHQ9PT1wJiZ1PT09bnx8dD09PXEmJnU9PT1yfHx0PT09cyYmdT09PXYpJiYoRz10LXAsQj11LW4sRj10LXEsSj11LXIsdC09cyx1LT12LEY9RCpKLXcqRixHPXkqQi1BKkcsQj1JKnUteip0LEY+PS1OdW1iZXIuRVBTSUxPTiYmXG5CPj0tTnVtYmVyLkVQU0lMT04mJkc+PS1OdW1iZXIuRVBTSUxPTikpe209ITE7YnJlYWsgYX1tPSEwfX1pZihtKXtkLnB1c2goW2FbZVtnXV0sYVtlW2hdXSxhW2Vba11dXSk7Zi5wdXNoKFtlW2ddLGVbaF0sZVtrXV0pO2c9aDtmb3Ioaz1oKzE7azxjO2crKyxrKyspZVtnXT1lW2tdO2MtLTtsPTIqY319cmV0dXJuIGI/ZjpkfX0oKSx0cmlhbmd1bGF0ZVNoYXBlOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXt2YXIgYj1hLmxlbmd0aDsyPGImJmFbYi0xXS5lcXVhbHMoYVswXSkmJmEucG9wKCl9ZnVuY3Rpb24gZChhLGIsYyl7cmV0dXJuIGEueCE9PWIueD9hLng8Yi54P2EueDw9Yy54JiZjLng8PWIueDpiLng8PWMueCYmYy54PD1hLng6YS55PGIueT9hLnk8PWMueSYmYy55PD1iLnk6Yi55PD1jLnkmJmMueTw9YS55fWZ1bmN0aW9uIGUoYSxiLGMsZSxmKXt2YXIgZz1iLngtYS54LGg9Yi55LWEueSxrPWUueC1jLngsbD1lLnktYy55LG09YS54LWMueCxuPWEueS1jLnkscD1oKmstXG5nKmwsRz1oKm0tZypuO2lmKE1hdGguYWJzKHApPk51bWJlci5FUFNJTE9OKXtpZigwPHApe2lmKDA+R3x8Rz5wKXJldHVybltdO2s9bCptLWsqbjtpZigwPmt8fGs+cClyZXR1cm5bXX1lbHNle2lmKDA8R3x8RzxwKXJldHVybltdO2s9bCptLWsqbjtpZigwPGt8fGs8cClyZXR1cm5bXX1pZigwPT09aylyZXR1cm4hZnx8MCE9PUcmJkchPT1wP1thXTpbXTtpZihrPT09cClyZXR1cm4hZnx8MCE9PUcmJkchPT1wP1tiXTpbXTtpZigwPT09RylyZXR1cm5bY107aWYoRz09PXApcmV0dXJuW2VdO2Y9ay9wO3JldHVyblt7eDphLngrZipnLHk6YS55K2YqaH1dfWlmKDAhPT1HfHxsKm0hPT1rKm4pcmV0dXJuW107aD0wPT09ZyYmMD09PWg7az0wPT09ayYmMD09PWw7aWYoaCYmaylyZXR1cm4gYS54IT09Yy54fHxhLnkhPT1jLnk/W106W2FdO2lmKGgpcmV0dXJuIGQoYyxlLGEpP1thXTpbXTtpZihrKXJldHVybiBkKGEsYixjKT9bY106W107MCE9PWc/KGEueDxiLng/KGc9YSxrPWEueCxoPWIsXG5hPWIueCk6KGc9YixrPWIueCxoPWEsYT1hLngpLGMueDxlLng/KGI9YyxwPWMueCxsPWUsYz1lLngpOihiPWUscD1lLngsbD1jLGM9Yy54KSk6KGEueTxiLnk/KGc9YSxrPWEueSxoPWIsYT1iLnkpOihnPWIsaz1iLnksaD1hLGE9YS55KSxjLnk8ZS55PyhiPWMscD1jLnksbD1lLGM9ZS55KTooYj1lLHA9ZS55LGw9YyxjPWMueSkpO3JldHVybiBrPD1wP2E8cD9bXTphPT09cD9mP1tdOltiXTphPD1jP1tiLGhdOltiLGxdOms+Yz9bXTprPT09Yz9mP1tdOltnXTphPD1jP1tnLGhdOltnLGxdfWZ1bmN0aW9uIGYoYSxiLGMsZCl7dmFyIGU9Yi54LWEueCxmPWIueS1hLnk7Yj1jLngtYS54O2M9Yy55LWEueTt2YXIgZz1kLngtYS54O2Q9ZC55LWEueTthPWUqYy1mKmI7ZT1lKmQtZipnO3JldHVybiBNYXRoLmFicyhhKT5OdW1iZXIuRVBTSUxPTj8oYj1nKmMtZCpiLDA8YT8wPD1lJiYwPD1iOjA8PWV8fDA8PWIpOjA8ZX1jKGEpO2IuZm9yRWFjaChjKTt2YXIgZyxoLGssbCxtLHA9e307az1cbmEuY29uY2F0KCk7Zz0wO2ZvcihoPWIubGVuZ3RoO2c8aDtnKyspQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoayxiW2ddKTtnPTA7Zm9yKGg9ay5sZW5ndGg7ZzxoO2crKyltPWtbZ10ueCtcIjpcIitrW2ddLnksdm9pZCAwIT09cFttXSYmY29uc29sZS53YXJuKFwiVEhSRUUuU2hhcGVVdGlsczogRHVwbGljYXRlIHBvaW50XCIsbSxnKSxwW21dPWc7Zz1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiKXt2YXIgZD1oLmxlbmd0aC0xLGU9YS0xOzA+ZSYmKGU9ZCk7dmFyIGc9YSsxO2c+ZCYmKGc9MCk7ZD1mKGhbYV0saFtlXSxoW2ddLGtbYl0pO2lmKCFkKXJldHVybiExO2Q9ay5sZW5ndGgtMTtlPWItMTswPmUmJihlPWQpO2c9YisxO2c+ZCYmKGc9MCk7cmV0dXJuKGQ9ZihrW2JdLGtbZV0sa1tnXSxoW2FdKSk/ITA6ITF9ZnVuY3Rpb24gZChhLGIpe3ZhciBjLGY7Zm9yKGM9MDtjPGgubGVuZ3RoO2MrKylpZihmPWMrMSxmJT1oLmxlbmd0aCxmPWUoYSxiLGhbY10saFtmXSwhMCksMDxcbmYubGVuZ3RoKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIGcoYSxjKXt2YXIgZCxmLGgsaztmb3IoZD0wO2Q8bC5sZW5ndGg7ZCsrKWZvcihmPWJbbFtkXV0saD0wO2g8Zi5sZW5ndGg7aCsrKWlmKGs9aCsxLGslPWYubGVuZ3RoLGs9ZShhLGMsZltoXSxmW2tdLCEwKSwwPGsubGVuZ3RoKXJldHVybiEwO3JldHVybiExfXZhciBoPWEuY29uY2F0KCksayxsPVtdLG0sbixwLEEsRyxCPVtdLEYsSixQLEs9MDtmb3IobT1iLmxlbmd0aDtLPG07SysrKWwucHVzaChLKTtGPTA7Zm9yKHZhciBIPTIqbC5sZW5ndGg7MDxsLmxlbmd0aDspe0gtLTtpZigwPkgpe2NvbnNvbGUubG9nKFwiSW5maW5pdGUgTG9vcCEgSG9sZXMgbGVmdDpcIitsLmxlbmd0aCtcIiwgUHJvYmFibHkgSG9sZSBvdXRzaWRlIFNoYXBlIVwiKTticmVha31mb3Iobj1GO248aC5sZW5ndGg7bisrKXtwPWhbbl07bT0tMTtmb3IoSz0wO0s8bC5sZW5ndGg7SysrKWlmKEE9bFtLXSxHPXAueCtcIjpcIitwLnkrXCI6XCIrQSx2b2lkIDA9PT1cbkJbR10pe2s9YltBXTtmb3IoSj0wO0o8ay5sZW5ndGg7SisrKWlmKEE9a1tKXSxjKG4sSikmJiFkKHAsQSkmJiFnKHAsQSkpe209SjtsLnNwbGljZShLLDEpO0Y9aC5zbGljZSgwLG4rMSk7QT1oLnNsaWNlKG4pO0o9ay5zbGljZShtKTtQPWsuc2xpY2UoMCxtKzEpO2g9Ri5jb25jYXQoSikuY29uY2F0KFApLmNvbmNhdChBKTtGPW47YnJlYWt9aWYoMDw9bSlicmVhaztCW0ddPSEwfWlmKDA8PW0pYnJlYWt9fXJldHVybiBofShhLGIpO3ZhciBuPVRIUkVFLlNoYXBlVXRpbHMudHJpYW5ndWxhdGUoZywhMSk7Zz0wO2ZvcihoPW4ubGVuZ3RoO2c8aDtnKyspZm9yKGw9bltnXSxrPTA7Mz5rO2srKyltPWxba10ueCtcIjpcIitsW2tdLnksbT1wW21dLHZvaWQgMCE9PW0mJihsW2tdPW0pO3JldHVybiBuLmNvbmNhdCgpfSxpc0Nsb2NrV2lzZTpmdW5jdGlvbihhKXtyZXR1cm4gMD5USFJFRS5TaGFwZVV0aWxzLmFyZWEoYSl9LGIyOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPVxuMS1hO3JldHVybiBlKmUqYisyKigxLWEpKmEqYythKmEqZH19KCksYjM6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj0xLWEsZz0xLWE7cmV0dXJuIGYqZipmKmIrMypnKmcqYSpjKzMqKDEtYSkqYSphKmQrYSphKmEqZX19KCl9O1RIUkVFLkN1cnZlPWZ1bmN0aW9uKCl7fTtcblRIUkVFLkN1cnZlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQ3VydmUsZ2V0UG9pbnQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmU6IFdhcm5pbmcsIGdldFBvaW50KCkgbm90IGltcGxlbWVudGVkIVwiKTtyZXR1cm4gbnVsbH0sZ2V0UG9pbnRBdDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0VXRvVG1hcHBpbmcoYSk7cmV0dXJuIHRoaXMuZ2V0UG9pbnQoYSl9LGdldFBvaW50czpmdW5jdGlvbihhKXthfHwoYT01KTtmb3IodmFyIGI9W10sYz0wO2M8PWE7YysrKWIucHVzaCh0aGlzLmdldFBvaW50KGMvYSkpO3JldHVybiBifSxnZXRTcGFjZWRQb2ludHM6ZnVuY3Rpb24oYSl7YXx8KGE9NSk7Zm9yKHZhciBiPVtdLGM9MDtjPD1hO2MrKyliLnB1c2godGhpcy5nZXRQb2ludEF0KGMvYSkpO3JldHVybiBifSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldExlbmd0aHMoKTtyZXR1cm4gYVthLmxlbmd0aC0xXX0sZ2V0TGVuZ3RoczpmdW5jdGlvbihhKXthfHxcbihhPXRoaXMuX19hcmNMZW5ndGhEaXZpc2lvbnM/dGhpcy5fX2FyY0xlbmd0aERpdmlzaW9uczoyMDApO2lmKHRoaXMuY2FjaGVBcmNMZW5ndGhzJiZ0aGlzLmNhY2hlQXJjTGVuZ3Rocy5sZW5ndGg9PT1hKzEmJiF0aGlzLm5lZWRzVXBkYXRlKXJldHVybiB0aGlzLmNhY2hlQXJjTGVuZ3Roczt0aGlzLm5lZWRzVXBkYXRlPSExO3ZhciBiPVtdLGMsZD10aGlzLmdldFBvaW50KDApLGUsZj0wO2IucHVzaCgwKTtmb3IoZT0xO2U8PWE7ZSsrKWM9dGhpcy5nZXRQb2ludChlL2EpLGYrPWMuZGlzdGFuY2VUbyhkKSxiLnB1c2goZiksZD1jO3JldHVybiB0aGlzLmNhY2hlQXJjTGVuZ3Rocz1ifSx1cGRhdGVBcmNMZW5ndGhzOmZ1bmN0aW9uKCl7dGhpcy5uZWVkc1VwZGF0ZT0hMDt0aGlzLmdldExlbmd0aHMoKX0sZ2V0VXRvVG1hcHBpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExlbmd0aHMoKSxkPTAsZT1jLmxlbmd0aCxmO2Y9Yj9iOmEqY1tlLTFdO2Zvcih2YXIgZz0wLGg9ZS1cbjEsaztnPD1oOylpZihkPU1hdGguZmxvb3IoZysoaC1nKS8yKSxrPWNbZF0tZiwwPmspZz1kKzE7ZWxzZSBpZigwPGspaD1kLTE7ZWxzZXtoPWQ7YnJlYWt9ZD1oO2lmKGNbZF09PT1mKXJldHVybiBkLyhlLTEpO2c9Y1tkXTtyZXR1cm4gYz0oZCsoZi1nKS8oY1tkKzFdLWcpKS8oZS0xKX0sZ2V0VGFuZ2VudDpmdW5jdGlvbihhKXt2YXIgYj1hLTFFLTQ7YSs9MUUtNDswPmImJihiPTApOzE8YSYmKGE9MSk7Yj10aGlzLmdldFBvaW50KGIpO3JldHVybiB0aGlzLmdldFBvaW50KGEpLmNsb25lKCkuc3ViKGIpLm5vcm1hbGl6ZSgpfSxnZXRUYW5nZW50QXQ6ZnVuY3Rpb24oYSl7YT10aGlzLmdldFV0b1RtYXBwaW5nKGEpO3JldHVybiB0aGlzLmdldFRhbmdlbnQoYSl9fTtcblRIUkVFLkN1cnZlLmNyZWF0ZT1mdW5jdGlvbihhLGIpe2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EucHJvdG90eXBlLmdldFBvaW50PWI7cmV0dXJuIGF9O1RIUkVFLkN1cnZlUGF0aD1mdW5jdGlvbigpe3RoaXMuY3VydmVzPVtdO3RoaXMuYXV0b0Nsb3NlPSExfTtcblRIUkVFLkN1cnZlUGF0aC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkN1cnZlUGF0aCxhZGQ6ZnVuY3Rpb24oYSl7dGhpcy5jdXJ2ZXMucHVzaChhKX0sY2xvc2VQYXRoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jdXJ2ZXNbMF0uZ2V0UG9pbnQoMCksYj10aGlzLmN1cnZlc1t0aGlzLmN1cnZlcy5sZW5ndGgtMV0uZ2V0UG9pbnQoMSk7YS5lcXVhbHMoYil8fHRoaXMuY3VydmVzLnB1c2gobmV3IFRIUkVFLkxpbmVDdXJ2ZShiLGEpKX0sZ2V0UG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YSp0aGlzLmdldExlbmd0aCgpLGM9dGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKTtmb3IoYT0wO2E8Yy5sZW5ndGg7KXtpZihjW2FdPj1iKXJldHVybiBiPWNbYV0tYixhPXRoaXMuY3VydmVzW2FdLGM9YS5nZXRMZW5ndGgoKSxhLmdldFBvaW50QXQoMD09PWM/MDoxLWIvYyk7YSsrfXJldHVybiBudWxsfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT1cbnRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7cmV0dXJuIGFbYS5sZW5ndGgtMV19LHVwZGF0ZUFyY0xlbmd0aHM6ZnVuY3Rpb24oKXt0aGlzLm5lZWRzVXBkYXRlPSEwO3RoaXMuY2FjaGVMZW5ndGhzPW51bGw7dGhpcy5nZXRMZW5ndGhzKCl9LGdldEN1cnZlTGVuZ3RoczpmdW5jdGlvbigpe2lmKHRoaXMuY2FjaGVMZW5ndGhzJiZ0aGlzLmNhY2hlTGVuZ3Rocy5sZW5ndGg9PT10aGlzLmN1cnZlcy5sZW5ndGgpcmV0dXJuIHRoaXMuY2FjaGVMZW5ndGhzO2Zvcih2YXIgYT1bXSxiPTAsYz0wLGQ9dGhpcy5jdXJ2ZXMubGVuZ3RoO2M8ZDtjKyspYis9dGhpcy5jdXJ2ZXNbY10uZ2V0TGVuZ3RoKCksYS5wdXNoKGIpO3JldHVybiB0aGlzLmNhY2hlTGVuZ3Rocz1hfSxnZXRTcGFjZWRQb2ludHM6ZnVuY3Rpb24oYSl7YXx8KGE9NDApO2Zvcih2YXIgYj1bXSxjPTA7Yzw9YTtjKyspYi5wdXNoKHRoaXMuZ2V0UG9pbnQoYy9hKSk7dGhpcy5hdXRvQ2xvc2UmJmIucHVzaChiWzBdKTtyZXR1cm4gYn0sXG5nZXRQb2ludHM6ZnVuY3Rpb24oYSl7YT1hfHwxMjtmb3IodmFyIGI9W10sYyxkPTAsZT10aGlzLmN1cnZlcztkPGUubGVuZ3RoO2QrKylmb3IodmFyIGY9ZVtkXSxmPWYuZ2V0UG9pbnRzKGYgaW5zdGFuY2VvZiBUSFJFRS5FbGxpcHNlQ3VydmU/MiphOmYgaW5zdGFuY2VvZiBUSFJFRS5MaW5lQ3VydmU/MTpmIGluc3RhbmNlb2YgVEhSRUUuU3BsaW5lQ3VydmU/YSpmLnBvaW50cy5sZW5ndGg6YSksZz0wO2c8Zi5sZW5ndGg7ZysrKXt2YXIgaD1mW2ddO2MmJmMuZXF1YWxzKGgpfHwoYi5wdXNoKGgpLGM9aCl9dGhpcy5hdXRvQ2xvc2UmJjE8Yi5sZW5ndGgmJiFiW2IubGVuZ3RoLTFdLmVxdWFscyhiWzBdKSYmYi5wdXNoKGJbMF0pO3JldHVybiBifSxjcmVhdGVQb2ludHNHZW9tZXRyeTpmdW5jdGlvbihhKXthPXRoaXMuZ2V0UG9pbnRzKGEpO3JldHVybiB0aGlzLmNyZWF0ZUdlb21ldHJ5KGEpfSxjcmVhdGVTcGFjZWRQb2ludHNHZW9tZXRyeTpmdW5jdGlvbihhKXthPXRoaXMuZ2V0U3BhY2VkUG9pbnRzKGEpO1xucmV0dXJuIHRoaXMuY3JlYXRlR2VvbWV0cnkoYSl9LGNyZWF0ZUdlb21ldHJ5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uZXcgVEhSRUUuR2VvbWV0cnksYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YVtjXTtiLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoZS54LGUueSxlLnp8fDApKX1yZXR1cm4gYn19KTtUSFJFRS5Gb250PWZ1bmN0aW9uKGEpe3RoaXMuZGF0YT1hfTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuRm9udC5wcm90b3R5cGUse2dlbmVyYXRlU2hhcGVzOmZ1bmN0aW9uKGEsYixjKXt2b2lkIDA9PT1iJiYoYj0xMDApO3ZvaWQgMD09PWMmJihjPTQpO3ZhciBkPXRoaXMuZGF0YTthPVN0cmluZyhhKS5zcGxpdChcIlwiKTt2YXIgZT1iL2QucmVzb2x1dGlvbixmPTA7Yj1bXTtmb3IodmFyIGc9MDtnPGEubGVuZ3RoO2crKyl7dmFyIGg7aD1lO3ZhciBrPWYsbD1kLmdseXBoc1thW2ddXXx8ZC5nbHlwaHNbXCI/XCJdO2lmKGwpe3ZhciBtPW5ldyBUSFJFRS5TaGFwZVBhdGgscD1bXSxuPVRIUkVFLlNoYXBlVXRpbHMuYjIscT1USFJFRS5TaGFwZVV0aWxzLmIzLHI9dm9pZCAwLHM9dm9pZCAwLHY9cz1yPXZvaWQgMCx0PXZvaWQgMCx1PXZvaWQgMCxEPXZvaWQgMCx3PXZvaWQgMCxJPXZvaWQgMCx0PXZvaWQgMDtpZihsLm8pZm9yKHZhciB6PWwuX2NhY2hlZE91dGxpbmV8fChsLl9jYWNoZWRPdXRsaW5lPWwuby5zcGxpdChcIiBcIikpLHk9MCxBPXoubGVuZ3RoO3k8XG5BOylzd2l0Y2goelt5KytdKXtjYXNlIFwibVwiOnI9elt5KytdKmgraztzPXpbeSsrXSpoO20ubW92ZVRvKHIscyk7YnJlYWs7Y2FzZSBcImxcIjpyPXpbeSsrXSpoK2s7cz16W3krK10qaDttLmxpbmVUbyhyLHMpO2JyZWFrO2Nhc2UgXCJxXCI6cj16W3krK10qaCtrO3M9elt5KytdKmg7dT16W3krK10qaCtrO0Q9elt5KytdKmg7bS5xdWFkcmF0aWNDdXJ2ZVRvKHUsRCxyLHMpO2lmKHQ9cFtwLmxlbmd0aC0xXSlmb3IodmFyIHY9dC54LHQ9dC55LEc9MTtHPD1jO0crKyl7dmFyIEI9Ry9jO24oQix2LHUscik7bihCLHQsRCxzKX1icmVhaztjYXNlIFwiYlwiOmlmKHI9elt5KytdKmgrayxzPXpbeSsrXSpoLHU9elt5KytdKmgrayxEPXpbeSsrXSpoLHc9elt5KytdKmgrayxJPXpbeSsrXSpoLG0uYmV6aWVyQ3VydmVUbyh1LEQsdyxJLHIscyksdD1wW3AubGVuZ3RoLTFdKWZvcih2PXQueCx0PXQueSxHPTE7Rzw9YztHKyspQj1HL2MscShCLHYsdSx3LHIpLHEoQix0LEQsSSxzKX1oPXtvZmZzZXQ6bC5oYSpcbmgscGF0aDptfX1lbHNlIGg9dm9pZCAwO2YrPWgub2Zmc2V0O2IucHVzaChoLnBhdGgpfWM9W107ZD0wO2ZvcihhPWIubGVuZ3RoO2Q8YTtkKyspQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxiW2RdLnRvU2hhcGVzKCkpO3JldHVybiBjfX0pO1RIUkVFLlBhdGg9ZnVuY3Rpb24oYSl7VEhSRUUuQ3VydmVQYXRoLmNhbGwodGhpcyk7dGhpcy5jdXJyZW50UG9pbnQ9bmV3IFRIUkVFLlZlY3RvcjI7YSYmdGhpcy5mcm9tUG9pbnRzKGEpfTtcblRIUkVFLlBhdGgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuUGF0aCxmcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe3RoaXMubW92ZVRvKGFbMF0ueCxhWzBdLnkpO2Zvcih2YXIgYj0xLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmxpbmVUbyhhW2JdLngsYVtiXS55KX0sbW92ZVRvOmZ1bmN0aW9uKGEsYil7dGhpcy5jdXJyZW50UG9pbnQuc2V0KGEsYil9LGxpbmVUbzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBUSFJFRS5MaW5lQ3VydmUodGhpcy5jdXJyZW50UG9pbnQuY2xvbmUoKSxuZXcgVEhSRUUuVmVjdG9yMihhLGIpKTt0aGlzLmN1cnZlcy5wdXNoKGMpO3RoaXMuY3VycmVudFBvaW50LnNldChhLGIpfSxxdWFkcmF0aWNDdXJ2ZVRvOmZ1bmN0aW9uKGEsYixjLGQpe2E9bmV3IFRIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IFRIUkVFLlZlY3RvcjIoYSxcbmIpLG5ldyBUSFJFRS5WZWN0b3IyKGMsZCkpO3RoaXMuY3VydmVzLnB1c2goYSk7dGhpcy5jdXJyZW50UG9pbnQuc2V0KGMsZCl9LGJlemllckN1cnZlVG86ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2E9bmV3IFRIUkVFLkN1YmljQmV6aWVyQ3VydmUodGhpcy5jdXJyZW50UG9pbnQuY2xvbmUoKSxuZXcgVEhSRUUuVmVjdG9yMihhLGIpLG5ldyBUSFJFRS5WZWN0b3IyKGMsZCksbmV3IFRIUkVFLlZlY3RvcjIoZSxmKSk7dGhpcy5jdXJ2ZXMucHVzaChhKTt0aGlzLmN1cnJlbnRQb2ludC5zZXQoZSxmKX0sc3BsaW5lVGhydTpmdW5jdGlvbihhKXt2YXIgYj1bdGhpcy5jdXJyZW50UG9pbnQuY2xvbmUoKV0uY29uY2F0KGEpLGI9bmV3IFRIUkVFLlNwbGluZUN1cnZlKGIpO3RoaXMuY3VydmVzLnB1c2goYik7dGhpcy5jdXJyZW50UG9pbnQuY29weShhW2EubGVuZ3RoLTFdKX0sYXJjOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmFic2FyYyhhK3RoaXMuY3VycmVudFBvaW50LngsYit0aGlzLmN1cnJlbnRQb2ludC55LFxuYyxkLGUsZil9LGFic2FyYzpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5hYnNlbGxpcHNlKGEsYixjLGMsZCxlLGYpfSxlbGxpcHNlOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7dGhpcy5hYnNlbGxpcHNlKGErdGhpcy5jdXJyZW50UG9pbnQueCxiK3RoaXMuY3VycmVudFBvaW50LnksYyxkLGUsZixnLGgpfSxhYnNlbGxpcHNlOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7YT1uZXcgVEhSRUUuRWxsaXBzZUN1cnZlKGEsYixjLGQsZSxmLGcsaCk7MDx0aGlzLmN1cnZlcy5sZW5ndGgmJihiPWEuZ2V0UG9pbnQoMCksYi5lcXVhbHModGhpcy5jdXJyZW50UG9pbnQpfHx0aGlzLmxpbmVUbyhiLngsYi55KSk7dGhpcy5jdXJ2ZXMucHVzaChhKTthPWEuZ2V0UG9pbnQoMSk7dGhpcy5jdXJyZW50UG9pbnQuY29weShhKX19KTtUSFJFRS5TaGFwZVBhdGg9ZnVuY3Rpb24oKXt0aGlzLnN1YlBhdGhzPVtdO3RoaXMuY3VycmVudFBhdGg9bnVsbH07XG5USFJFRS5TaGFwZVBhdGgucHJvdG90eXBlPXttb3ZlVG86ZnVuY3Rpb24oYSxiKXt0aGlzLmN1cnJlbnRQYXRoPW5ldyBUSFJFRS5QYXRoO3RoaXMuc3ViUGF0aHMucHVzaCh0aGlzLmN1cnJlbnRQYXRoKTt0aGlzLmN1cnJlbnRQYXRoLm1vdmVUbyhhLGIpfSxsaW5lVG86ZnVuY3Rpb24oYSxiKXt0aGlzLmN1cnJlbnRQYXRoLmxpbmVUbyhhLGIpfSxxdWFkcmF0aWNDdXJ2ZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuY3VycmVudFBhdGgucXVhZHJhdGljQ3VydmVUbyhhLGIsYyxkKX0sYmV6aWVyQ3VydmVUbzpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5jdXJyZW50UGF0aC5iZXppZXJDdXJ2ZVRvKGEsYixjLGQsZSxmKX0sc3BsaW5lVGhydTpmdW5jdGlvbihhKXt0aGlzLmN1cnJlbnRQYXRoLnNwbGluZVRocnUoYSl9LHRvU2hhcGVzOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YVtjXSxmPW5ldyBUSFJFRS5TaGFwZTtcbmYuY3VydmVzPWUuY3VydmVzO2IucHVzaChmKX1yZXR1cm4gYn1mdW5jdGlvbiBkKGEsYil7Zm9yKHZhciBjPWIubGVuZ3RoLGQ9ITEsZT1jLTEsZj0wO2Y8YztlPWYrKyl7dmFyIGc9YltlXSxoPWJbZl0saz1oLngtZy54LGw9aC55LWcueTtpZihNYXRoLmFicyhsKT5OdW1iZXIuRVBTSUxPTil7aWYoMD5sJiYoZz1iW2ZdLGs9LWssaD1iW2VdLGw9LWwpLCEoYS55PGcueXx8YS55PmgueSkpaWYoYS55PT09Zy55KXtpZihhLng9PT1nLngpcmV0dXJuITB9ZWxzZXtlPWwqKGEueC1nLngpLWsqKGEueS1nLnkpO2lmKDA9PT1lKXJldHVybiEwOzA+ZXx8KGQ9IWQpfX1lbHNlIGlmKGEueT09PWcueSYmKGgueDw9YS54JiZhLng8PWcueHx8Zy54PD1hLngmJmEueDw9aC54KSlyZXR1cm4hMH1yZXR1cm4gZH12YXIgZT1USFJFRS5TaGFwZVV0aWxzLmlzQ2xvY2tXaXNlLGY9dGhpcy5zdWJQYXRocztpZigwPT09Zi5sZW5ndGgpcmV0dXJuW107aWYoITA9PT1iKXJldHVybiBjKGYpO3ZhciBnLFxuaCxrLGw9W107aWYoMT09PWYubGVuZ3RoKXJldHVybiBoPWZbMF0saz1uZXcgVEhSRUUuU2hhcGUsay5jdXJ2ZXM9aC5jdXJ2ZXMsbC5wdXNoKGspLGw7dmFyIG09IWUoZlswXS5nZXRQb2ludHMoKSksbT1hPyFtOm07az1bXTt2YXIgcD1bXSxuPVtdLHE9MCxyO3BbcV09dm9pZCAwO25bcV09W107Zm9yKHZhciBzPTAsdj1mLmxlbmd0aDtzPHY7cysrKWg9ZltzXSxyPWguZ2V0UG9pbnRzKCksZz1lKHIpLChnPWE/IWc6Zyk/KCFtJiZwW3FdJiZxKysscFtxXT17czpuZXcgVEhSRUUuU2hhcGUscDpyfSxwW3FdLnMuY3VydmVzPWguY3VydmVzLG0mJnErKyxuW3FdPVtdKTpuW3FdLnB1c2goe2g6aCxwOnJbMF19KTtpZighcFswXSlyZXR1cm4gYyhmKTtpZigxPHAubGVuZ3RoKXtzPSExO2g9W107ZT0wO2ZvcihmPXAubGVuZ3RoO2U8ZjtlKyspa1tlXT1bXTtlPTA7Zm9yKGY9cC5sZW5ndGg7ZTxmO2UrKylmb3IoZz1uW2VdLG09MDttPGcubGVuZ3RoO20rKyl7cT1nW21dO3I9ITA7Zm9yKHY9XG4wO3Y8cC5sZW5ndGg7disrKWQocS5wLHBbdl0ucCkmJihlIT09diYmaC5wdXNoKHtmcm9tczplLHRvczp2LGhvbGU6bX0pLHI/KHI9ITEsa1t2XS5wdXNoKHEpKTpzPSEwKTtyJiZrW2VdLnB1c2gocSl9MDxoLmxlbmd0aCYmKHN8fChuPWspKX1zPTA7Zm9yKGU9cC5sZW5ndGg7czxlO3MrKylmb3Ioaz1wW3NdLnMsbC5wdXNoKGspLGg9bltzXSxmPTAsZz1oLmxlbmd0aDtmPGc7ZisrKWsuaG9sZXMucHVzaChoW2ZdLmgpO3JldHVybiBsfX07VEhSRUUuU2hhcGU9ZnVuY3Rpb24oKXtUSFJFRS5QYXRoLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmhvbGVzPVtdfTtcblRIUkVFLlNoYXBlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuUGF0aC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5TaGFwZSxleHRydWRlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVEhSRUUuRXh0cnVkZUdlb21ldHJ5KHRoaXMsYSl9LG1ha2VHZW9tZXRyeTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFRIUkVFLlNoYXBlR2VvbWV0cnkodGhpcyxhKX0sZ2V0UG9pbnRzSG9sZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPXRoaXMuaG9sZXMubGVuZ3RoO2M8ZDtjKyspYltjXT10aGlzLmhvbGVzW2NdLmdldFBvaW50cyhhKTtyZXR1cm4gYn0sZXh0cmFjdEFsbFBvaW50czpmdW5jdGlvbihhKXtyZXR1cm57c2hhcGU6dGhpcy5nZXRQb2ludHMoYSksaG9sZXM6dGhpcy5nZXRQb2ludHNIb2xlcyhhKX19LGV4dHJhY3RQb2ludHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZXh0cmFjdEFsbFBvaW50cyhhKX19KTtcblRIUkVFLkxpbmVDdXJ2ZT1mdW5jdGlvbihhLGIpe3RoaXMudjE9YTt0aGlzLnYyPWJ9O1RIUkVFLkxpbmVDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLkxpbmVDdXJ2ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTGluZUN1cnZlO1RIUkVFLkxpbmVDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7aWYoMT09PWEpcmV0dXJuIHRoaXMudjIuY2xvbmUoKTt2YXIgYj10aGlzLnYyLmNsb25lKCkuc3ViKHRoaXMudjEpO2IubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMudjEpO3JldHVybiBifTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlLmdldFBvaW50QXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0UG9pbnQoYSl9O1RIUkVFLkxpbmVDdXJ2ZS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy52Mi5jbG9uZSgpLnN1Yih0aGlzLnYxKS5ub3JtYWxpemUoKX07XG5USFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZT1mdW5jdGlvbihhLGIsYyl7dGhpcy52MD1hO3RoaXMudjE9Yjt0aGlzLnYyPWN9O1RIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7VEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlO1RIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhKXt2YXIgYj1USFJFRS5TaGFwZVV0aWxzLmIyO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMihiKGEsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngpLGIoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSkpfTtcblRIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlLnByb3RvdHlwZS5nZXRUYW5nZW50PWZ1bmN0aW9uKGEpe3ZhciBiPVRIUkVFLkN1cnZlVXRpbHMudGFuZ2VudFF1YWRyYXRpY0JlemllcjtyZXR1cm4obmV3IFRIUkVFLlZlY3RvcjIoYihhLHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54KSxiKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnkpKSkubm9ybWFsaXplKCl9O1RIUkVFLkN1YmljQmV6aWVyQ3VydmU9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy52MD1hO3RoaXMudjE9Yjt0aGlzLnYyPWM7dGhpcy52Mz1kfTtUSFJFRS5DdWJpY0JlemllckN1cnZlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7VEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZTtcblRIUkVFLkN1YmljQmV6aWVyQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEpe3ZhciBiPVRIUkVFLlNoYXBlVXRpbHMuYjM7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKGIoYSx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCx0aGlzLnYzLngpLGIoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSx0aGlzLnYzLnkpKX07VEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbihhKXt2YXIgYj1USFJFRS5DdXJ2ZVV0aWxzLnRhbmdlbnRDdWJpY0JlemllcjtyZXR1cm4obmV3IFRIUkVFLlZlY3RvcjIoYihhLHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54LHRoaXMudjMueCksYihhLHRoaXMudjAueSx0aGlzLnYxLnksdGhpcy52Mi55LHRoaXMudjMueSkpKS5ub3JtYWxpemUoKX07VEhSRUUuU3BsaW5lQ3VydmU9ZnVuY3Rpb24oYSl7dGhpcy5wb2ludHM9dm9pZCAwPT1hP1tdOmF9O1xuVEhSRUUuU3BsaW5lQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtUSFJFRS5TcGxpbmVDdXJ2ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuU3BsaW5lQ3VydmU7VEhSRUUuU3BsaW5lQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucG9pbnRzO2EqPWIubGVuZ3RoLTE7dmFyIGM9TWF0aC5mbG9vcihhKTthLT1jO3ZhciBkPWJbMD09PWM/YzpjLTFdLGU9YltjXSxmPWJbYz5iLmxlbmd0aC0yP2IubGVuZ3RoLTE6YysxXSxiPWJbYz5iLmxlbmd0aC0zP2IubGVuZ3RoLTE6YysyXSxjPVRIUkVFLkN1cnZlVXRpbHMuaW50ZXJwb2xhdGU7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKGMoZC54LGUueCxmLngsYi54LGEpLGMoZC55LGUueSxmLnksYi55LGEpKX07XG5USFJFRS5FbGxpcHNlQ3VydmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt0aGlzLmFYPWE7dGhpcy5hWT1iO3RoaXMueFJhZGl1cz1jO3RoaXMueVJhZGl1cz1kO3RoaXMuYVN0YXJ0QW5nbGU9ZTt0aGlzLmFFbmRBbmdsZT1mO3RoaXMuYUNsb2Nrd2lzZT1nO3RoaXMuYVJvdGF0aW9uPWh8fDB9O1RIUkVFLkVsbGlwc2VDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLkVsbGlwc2VDdXJ2ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuRWxsaXBzZUN1cnZlO1xuVEhSRUUuRWxsaXBzZUN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhKXtmb3IodmFyIGI9MipNYXRoLlBJLGM9dGhpcy5hRW5kQW5nbGUtdGhpcy5hU3RhcnRBbmdsZSxkPU1hdGguYWJzKGMpPE51bWJlci5FUFNJTE9OOzA+YzspYys9Yjtmb3IoO2M+YjspYy09YjtjPE51bWJlci5FUFNJTE9OJiYoYz1kPzA6Yik7ITAhPT10aGlzLmFDbG9ja3dpc2V8fGR8fChjPWM9PT1iPy1iOmMtYik7Yj10aGlzLmFTdGFydEFuZ2xlK2EqYzthPXRoaXMuYVgrdGhpcy54UmFkaXVzKk1hdGguY29zKGIpO3ZhciBlPXRoaXMuYVkrdGhpcy55UmFkaXVzKk1hdGguc2luKGIpOzAhPT10aGlzLmFSb3RhdGlvbiYmKGI9TWF0aC5jb3ModGhpcy5hUm90YXRpb24pLGM9TWF0aC5zaW4odGhpcy5hUm90YXRpb24pLGQ9YS10aGlzLmFYLGUtPXRoaXMuYVksYT1kKmItZSpjK3RoaXMuYVgsZT1kKmMrZSpiK3RoaXMuYVkpO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMihhLGUpfTtcblRIUkVFLkFyY0N1cnZlPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtUSFJFRS5FbGxpcHNlQ3VydmUuY2FsbCh0aGlzLGEsYixjLGMsZCxlLGYpfTtUSFJFRS5BcmNDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5FbGxpcHNlQ3VydmUucHJvdG90eXBlKTtUSFJFRS5BcmNDdXJ2ZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQXJjQ3VydmU7VEhSRUUuTGluZUN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24oYSxiKXt0aGlzLnYxPWE7dGhpcy52Mj1ifSxmdW5jdGlvbihhKXtpZigxPT09YSlyZXR1cm4gdGhpcy52Mi5jbG9uZSgpO3ZhciBiPW5ldyBUSFJFRS5WZWN0b3IzO2Iuc3ViVmVjdG9ycyh0aGlzLnYyLHRoaXMudjEpO2IubXVsdGlwbHlTY2FsYXIoYSk7Yi5hZGQodGhpcy52MSk7cmV0dXJuIGJ9KTtcblRIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24oYSxiLGMpe3RoaXMudjA9YTt0aGlzLnYxPWI7dGhpcy52Mj1jfSxmdW5jdGlvbihhKXt2YXIgYj1USFJFRS5TaGFwZVV0aWxzLmIyO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMyhiKGEsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngpLGIoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSksYihhLHRoaXMudjAueix0aGlzLnYxLnosdGhpcy52Mi56KSl9KTtcblRIUkVFLkN1YmljQmV6aWVyQ3VydmUzPVRIUkVFLkN1cnZlLmNyZWF0ZShmdW5jdGlvbihhLGIsYyxkKXt0aGlzLnYwPWE7dGhpcy52MT1iO3RoaXMudjI9Yzt0aGlzLnYzPWR9LGZ1bmN0aW9uKGEpe3ZhciBiPVRIUkVFLlNoYXBlVXRpbHMuYjM7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKGIoYSx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCx0aGlzLnYzLngpLGIoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSx0aGlzLnYzLnkpLGIoYSx0aGlzLnYwLnosdGhpcy52MS56LHRoaXMudjIueix0aGlzLnYzLnopKX0pO1xuVEhSRUUuU3BsaW5lQ3VydmUzPVRIUkVFLkN1cnZlLmNyZWF0ZShmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5TcGxpbmVDdXJ2ZTMgd2lsbCBiZSBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFRIUkVFLkNhdG11bGxSb21DdXJ2ZTNcIik7dGhpcy5wb2ludHM9dm9pZCAwPT1hP1tdOmF9LGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucG9pbnRzO2EqPWIubGVuZ3RoLTE7dmFyIGM9TWF0aC5mbG9vcihhKTthLT1jO3ZhciBkPWJbMD09Yz9jOmMtMV0sZT1iW2NdLGY9YltjPmIubGVuZ3RoLTI/Yi5sZW5ndGgtMTpjKzFdLGI9YltjPmIubGVuZ3RoLTM/Yi5sZW5ndGgtMTpjKzJdLGM9VEhSRUUuQ3VydmVVdGlscy5pbnRlcnBvbGF0ZTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoYyhkLngsZS54LGYueCxiLngsYSksYyhkLnksZS55LGYueSxiLnksYSksYyhkLnosZS56LGYueixiLnosYSkpfSk7XG5USFJFRS5DYXRtdWxsUm9tQ3VydmUzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe312YXIgYj1uZXcgVEhSRUUuVmVjdG9yMyxjPW5ldyBhLGQ9bmV3IGEsZT1uZXcgYTthLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuYzA9YTt0aGlzLmMxPWM7dGhpcy5jMj0tMyphKzMqYi0yKmMtZDt0aGlzLmMzPTIqYS0yKmIrYytkfTthLnByb3RvdHlwZS5pbml0Tm9udW5pZm9ybUNhdG11bGxSb209ZnVuY3Rpb24oYSxiLGMsZCxlLG0scCl7YT0oKGItYSkvZS0oYy1hKS8oZSttKSsoYy1iKS9tKSptO2Q9KChjLWIpL20tKGQtYikvKG0rcCkrKGQtYykvcCkqbTt0aGlzLmluaXQoYixjLGEsZCl9O2EucHJvdG90eXBlLmluaXRDYXRtdWxsUm9tPWZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5pbml0KGIsYyxlKihjLWEpLGUqKGQtYikpfTthLnByb3RvdHlwZS5jYWxjPWZ1bmN0aW9uKGEpe3ZhciBiPWEqYTtyZXR1cm4gdGhpcy5jMCt0aGlzLmMxKmErdGhpcy5jMipiK3RoaXMuYzMqXG5iKmF9O3JldHVybiBUSFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24oYSl7dGhpcy5wb2ludHM9YXx8W107dGhpcy5jbG9zZWQ9ITF9LGZ1bmN0aW9uKGEpe3ZhciBnPXRoaXMucG9pbnRzLGgsaztrPWcubGVuZ3RoOzI+ayYmY29uc29sZS5sb2coXCJkdWgsIHlvdSBuZWVkIGF0IGxlYXN0IDIgcG9pbnRzXCIpO2EqPWstKHRoaXMuY2xvc2VkPzA6MSk7aD1NYXRoLmZsb29yKGEpO2EtPWg7dGhpcy5jbG9zZWQ/aCs9MDxoPzA6KE1hdGguZmxvb3IoTWF0aC5hYnMoaCkvZy5sZW5ndGgpKzEpKmcubGVuZ3RoOjA9PT1hJiZoPT09ay0xJiYoaD1rLTIsYT0xKTt2YXIgbCxtLHA7dGhpcy5jbG9zZWR8fDA8aD9sPWdbKGgtMSkla106KGIuc3ViVmVjdG9ycyhnWzBdLGdbMV0pLmFkZChnWzBdKSxsPWIpO209Z1toJWtdO3A9Z1soaCsxKSVrXTt0aGlzLmNsb3NlZHx8aCsyPGs/Zz1nWyhoKzIpJWtdOihiLnN1YlZlY3RvcnMoZ1trLTFdLGdbay0yXSkuYWRkKGdbay0xXSksZz1iKTtpZih2b2lkIDA9PT1cbnRoaXMudHlwZXx8XCJjZW50cmlwZXRhbFwiPT09dGhpcy50eXBlfHxcImNob3JkYWxcIj09PXRoaXMudHlwZSl7dmFyIG49XCJjaG9yZGFsXCI9PT10aGlzLnR5cGU/LjU6LjI1O2s9TWF0aC5wb3cobC5kaXN0YW5jZVRvU3F1YXJlZChtKSxuKTtoPU1hdGgucG93KG0uZGlzdGFuY2VUb1NxdWFyZWQocCksbik7bj1NYXRoLnBvdyhwLmRpc3RhbmNlVG9TcXVhcmVkKGcpLG4pOzFFLTQ+aCYmKGg9MSk7MUUtND5rJiYoaz1oKTsxRS00Pm4mJihuPWgpO2MuaW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tKGwueCxtLngscC54LGcueCxrLGgsbik7ZC5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20obC55LG0ueSxwLnksZy55LGssaCxuKTtlLmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShsLnosbS56LHAueixnLnosayxoLG4pfWVsc2VcImNhdG11bGxyb21cIj09PXRoaXMudHlwZSYmKGs9dm9pZCAwIT09dGhpcy50ZW5zaW9uP3RoaXMudGVuc2lvbjouNSxjLmluaXRDYXRtdWxsUm9tKGwueCxtLngscC54LGcueCxcbmspLGQuaW5pdENhdG11bGxSb20obC55LG0ueSxwLnksZy55LGspLGUuaW5pdENhdG11bGxSb20obC56LG0ueixwLnosZy56LGspKTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoYy5jYWxjKGEpLGQuY2FsYyhhKSxlLmNhbGMoYSkpfSl9KCk7VEhSRUUuQ2xvc2VkU3BsaW5lQ3VydmUzPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkNsb3NlZFNwbGluZUN1cnZlMyBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFRIUkVFLkNhdG11bGxSb21DdXJ2ZTMuXCIpO1RIUkVFLkNhdG11bGxSb21DdXJ2ZTMuY2FsbCh0aGlzLGEpO3RoaXMudHlwZT1cImNhdG11bGxyb21cIjt0aGlzLmNsb3NlZD0hMH07VEhSRUUuQ2xvc2VkU3BsaW5lQ3VydmUzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkNhdG11bGxSb21DdXJ2ZTMucHJvdG90eXBlKTtcblRIUkVFLkJveEdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkJveEdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDphLGhlaWdodDpiLGRlcHRoOmMsd2lkdGhTZWdtZW50czpkLGhlaWdodFNlZ21lbnRzOmUsZGVwdGhTZWdtZW50czpmfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVEhSRUUuQm94QnVmZmVyR2VvbWV0cnkoYSxiLGMsZCxlLGYpKTt0aGlzLm1lcmdlVmVydGljZXMoKX07VEhSRUUuQm94R2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5Cb3hHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQm94R2VvbWV0cnk7VEhSRUUuQ3ViZUdlb21ldHJ5PVRIUkVFLkJveEdlb21ldHJ5O1xuVEhSRUUuQm94QnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSxiLGMsZCxlLGYsZyxrLGwsSixQKXt2YXIgSz1mL2wsSD1nL0osTT1mLzIsTz1nLzIsTj1rLzI7Zz1sKzE7Zm9yKHZhciBRPUorMSxDPWY9MCxMPW5ldyBUSFJFRS5WZWN0b3IzLEU9MDtFPFE7RSsrKWZvcih2YXIgJD1FKkgtTyxUPTA7VDxnO1QrKylMW2FdPShUKkstTSkqZCxMW2JdPSQqZSxMW2NdPU4scFtyXT1MLngscFtyKzFdPUwueSxwW3IrMl09TC56LExbYV09MCxMW2JdPTAsTFtjXT0wPGs/MTotMSxuW3JdPUwueCxuW3IrMV09TC55LG5bcisyXT1MLnoscVtzXT1UL2wscVtzKzFdPTEtRS9KLHIrPTMscys9MixmKz0xO2ZvcihFPTA7RTxKO0UrKylmb3IoVD0wO1Q8bDtUKyspYT10K1QrZyooRSsxKSxiPXQrKFQrMSkrZyooRSsxKSxjPXQrKFQrMSkrZypFLG1bdl09dCtUK2cqRSxtW3YrMV09YSxtW3YrMl09YyxtW3YrM109YSxtW3YrNF09YixtW3YrNV09Yyx2Kz02LEMrPVxuNjtoLmFkZEdyb3VwKHUsQyxQKTt1Kz1DO3QrPWZ9VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJCb3hCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17d2lkdGg6YSxoZWlnaHQ6YixkZXB0aDpjLHdpZHRoU2VnbWVudHM6ZCxoZWlnaHRTZWdtZW50czplLGRlcHRoU2VnbWVudHM6Zn07dmFyIGg9dGhpcztkPU1hdGguZmxvb3IoZCl8fDE7ZT1NYXRoLmZsb29yKGUpfHwxO2Y9TWF0aC5mbG9vcihmKXx8MTt2YXIgaz1mdW5jdGlvbihhLGIsYyl7YT0wKyhhKzEpKihiKzEpKjIrKGErMSkqKGMrMSkqMjtyZXR1cm4gYSs9KGMrMSkqKGIrMSkqMn0oZCxlLGYpLGw9ZnVuY3Rpb24oYSxiLGMpe2E9MCthKmIqMithKmMqMjthKz1jKmIqMjtyZXR1cm4gNiphfShkLGUsZiksbT1uZXcgKDY1NTM1PGw/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKGwpLHA9bmV3IEZsb2F0MzJBcnJheSgzKmspLG49bmV3IEZsb2F0MzJBcnJheSgzKmspLHE9bmV3IEZsb2F0MzJBcnJheSgyKlxuaykscj0wLHM9MCx2PTAsdD0wLHU9MDtnKFwielwiLFwieVwiLFwieFwiLC0xLC0xLGMsYixhLGYsZSwwKTtnKFwielwiLFwieVwiLFwieFwiLDEsLTEsYyxiLC1hLGYsZSwxKTtnKFwieFwiLFwielwiLFwieVwiLDEsMSxhLGMsYixkLGYsMik7ZyhcInhcIixcInpcIixcInlcIiwxLC0xLGEsYywtYixkLGYsMyk7ZyhcInhcIixcInlcIixcInpcIiwxLC0xLGEsYixjLGQsZSw0KTtnKFwieFwiLFwieVwiLFwielwiLC0xLC0xLGEsYiwtYyxkLGUsNSk7dGhpcy5zZXRJbmRleChuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG0sMSkpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKHAsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShxLDIpKX07VEhSRUUuQm94QnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtcblRIUkVFLkJveEJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Cb3hCdWZmZXJHZW9tZXRyeTtUSFJFRS5DaXJjbGVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkNpcmNsZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxzZWdtZW50czpiLHRoZXRhU3RhcnQ6Yyx0aGV0YUxlbmd0aDpkfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVEhSRUUuQ2lyY2xlQnVmZmVyR2VvbWV0cnkoYSxiLGMsZCkpfTtUSFJFRS5DaXJjbGVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkNpcmNsZUdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5DaXJjbGVHZW9tZXRyeTtcblRIUkVFLkNpcmNsZUJ1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ2lyY2xlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHNlZ21lbnRzOmIsdGhldGFTdGFydDpjLHRoZXRhTGVuZ3RoOmR9O2E9YXx8NTA7Yj12b2lkIDAhPT1iP01hdGgubWF4KDMsYik6ODtjPXZvaWQgMCE9PWM/YzowO2Q9dm9pZCAwIT09ZD9kOjIqTWF0aC5QSTt2YXIgZT1iKzIsZj1uZXcgRmxvYXQzMkFycmF5KDMqZSksZz1uZXcgRmxvYXQzMkFycmF5KDMqZSksZT1uZXcgRmxvYXQzMkFycmF5KDIqZSk7Z1syXT0xO2VbMF09LjU7ZVsxXT0uNTtmb3IodmFyIGg9MCxrPTMsbD0yO2g8PWI7aCsrLGsrPTMsbCs9Mil7dmFyIG09YytoL2IqZDtmW2tdPWEqTWF0aC5jb3MobSk7ZltrKzFdPWEqTWF0aC5zaW4obSk7Z1trKzJdPTE7ZVtsXT0oZltrXS9hKzEpLzI7ZVtsKzFdPShmW2srMV0vYSsxKS8yfWM9XG5bXTtmb3Ioaz0xO2s8PWI7aysrKWMucHVzaChrLGsrMSwwKTt0aGlzLnNldEluZGV4KG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IFVpbnQxNkFycmF5KGMpLDEpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShmLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoZywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoZSwyKSk7dGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKG5ldyBUSFJFRS5WZWN0b3IzLGEpfTtUSFJFRS5DaXJjbGVCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkNpcmNsZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5DaXJjbGVCdWZmZXJHZW9tZXRyeTtcblRIUkVFLkN5bGluZGVyQnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtmdW5jdGlvbiBrKGMpe3ZhciBlLGYsayxtPW5ldyBUSFJFRS5WZWN0b3IyLG49bmV3IFRIUkVFLlZlY3RvcjMscD0wLEQ9ITA9PT1jP2E6YixLPSEwPT09Yz8xOi0xO2Y9dDtmb3IoZT0xO2U8PWQ7ZSsrKXIuc2V0WFlaKHQsMCx3KkssMCkscy5zZXRYWVoodCwwLEssMCksbS54PS41LG0ueT0uNSx2LnNldFhZKHQsbS54LG0ueSksdCsrO2s9dDtmb3IoZT0wO2U8PWQ7ZSsrKXt2YXIgSD1lL2QqaCtnLE09TWF0aC5jb3MoSCksSD1NYXRoLnNpbihIKTtuLng9RCpIO24ueT13Kks7bi56PUQqTTtyLnNldFhZWih0LG4ueCxuLnksbi56KTtzLnNldFhZWih0LDAsSywwKTttLng9LjUqTSsuNTttLnk9LjUqSCpLKy41O3Yuc2V0WFkodCxtLngsbS55KTt0Kyt9Zm9yKGU9MDtlPGQ7ZSsrKW09ZitlLG49aytlLCEwPT09Yz8ocS5zZXRYKHUsbiksdSsrLHEuc2V0WCh1LG4rMSkpOihxLnNldFgodSxcbm4rMSksdSsrLHEuc2V0WCh1LG4pKSx1KysscS5zZXRYKHUsbSksdSsrLHArPTM7bC5hZGRHcm91cChJLHAsITA9PT1jPzE6Mik7SSs9cH1USFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkN5bGluZGVyQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1c1RvcDphLHJhZGl1c0JvdHRvbTpiLGhlaWdodDpjLHJhZGlhbFNlZ21lbnRzOmQsaGVpZ2h0U2VnbWVudHM6ZSxvcGVuRW5kZWQ6Zix0aGV0YVN0YXJ0OmcsdGhldGFMZW5ndGg6aH07dmFyIGw9dGhpczthPXZvaWQgMCE9PWE/YToyMDtiPXZvaWQgMCE9PWI/YjoyMDtjPXZvaWQgMCE9PWM/YzoxMDA7ZD1NYXRoLmZsb29yKGQpfHw4O2U9TWF0aC5mbG9vcihlKXx8MTtmPXZvaWQgMCE9PWY/ZjohMTtnPXZvaWQgMCE9PWc/ZzowO2g9dm9pZCAwIT09aD9oOjIqTWF0aC5QSTt2YXIgbT0wOyExPT09ZiYmKDA8YSYmbSsrLDA8YiYmbSsrKTt2YXIgcD1mdW5jdGlvbigpe3ZhciBhPShkKzEpKlxuKGUrMSk7ITE9PT1mJiYoYSs9KGQrMSkqbStkKm0pO3JldHVybiBhfSgpLG49ZnVuY3Rpb24oKXt2YXIgYT1kKmUqNjshMT09PWYmJihhKz1kKm0qMyk7cmV0dXJuIGF9KCkscT1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyAoNjU1MzU8bj9VaW50MzJBcnJheTpVaW50MTZBcnJheSkobiksMSkscj1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoMypwKSwzKSxzPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSgzKnApLDMpLHY9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KDIqcCksMiksdD0wLHU9MCxEPVtdLHc9Yy8yLEk9MDsoZnVuY3Rpb24oKXt2YXIgZixrLG09bmV3IFRIUkVFLlZlY3RvcjMsbj1uZXcgVEhSRUUuVmVjdG9yMyxwPTAsRj0oYi1hKS9jO2ZvcihrPTA7azw9ZTtrKyspe3ZhciBKPVtdLFA9ay9lLEs9UCooYi1hKSthO2ZvcihmPTA7Zjw9ZDtmKyspe3ZhciBIPWYvZDtuLng9XG5LKk1hdGguc2luKEgqaCtnKTtuLnk9LVAqYyt3O24uej1LKk1hdGguY29zKEgqaCtnKTtyLnNldFhZWih0LG4ueCxuLnksbi56KTttLmNvcHkobik7aWYoMD09PWEmJjA9PT1rfHwwPT09YiYmaz09PWUpbS54PU1hdGguc2luKEgqaCtnKSxtLno9TWF0aC5jb3MoSCpoK2cpO20uc2V0WShNYXRoLnNxcnQobS54Km0ueCttLnoqbS56KSpGKS5ub3JtYWxpemUoKTtzLnNldFhZWih0LG0ueCxtLnksbS56KTt2LnNldFhZKHQsSCwxLVApO0oucHVzaCh0KTt0Kyt9RC5wdXNoKEopfWZvcihmPTA7ZjxkO2YrKylmb3Ioaz0wO2s8ZTtrKyspbT1EW2srMV1bZl0sbj1EW2srMV1bZisxXSxGPURba11bZisxXSxxLnNldFgodSxEW2tdW2ZdKSx1KysscS5zZXRYKHUsbSksdSsrLHEuc2V0WCh1LEYpLHUrKyxxLnNldFgodSxtKSx1KysscS5zZXRYKHUsbiksdSsrLHEuc2V0WCh1LEYpLHUrKyxwKz02O2wuYWRkR3JvdXAoSSxwLDApO0krPXB9KSgpOyExPT09ZiYmKDA8YSYmayghMCksMDxiJiZrKCExKSk7XG50aGlzLnNldEluZGV4KHEpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixyKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLHMpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIix2KX07VEhSRUUuQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkN5bGluZGVyQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkN5bGluZGVyQnVmZmVyR2VvbWV0cnk7XG5USFJFRS5DeWxpbmRlckdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDeWxpbmRlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXNUb3A6YSxyYWRpdXNCb3R0b206YixoZWlnaHQ6YyxyYWRpYWxTZWdtZW50czpkLGhlaWdodFNlZ21lbnRzOmUsb3BlbkVuZGVkOmYsdGhldGFTdGFydDpnLHRoZXRhTGVuZ3RoOmh9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBUSFJFRS5DeWxpbmRlckJ1ZmZlckdlb21ldHJ5KGEsYixjLGQsZSxmLGcsaCkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfTtUSFJFRS5DeWxpbmRlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQ3lsaW5kZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ3lsaW5kZXJHZW9tZXRyeTtcblRIUkVFLkNvbmVCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXtUSFJFRS5DeWxpbmRlckJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcywwLGEsYixjLGQsZSxmLGcpO3RoaXMudHlwZT1cIkNvbmVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsaGVpZ2h0OmIscmFkaWFsU2VnbWVudHM6YyxoZWlnaHRTZWdtZW50czpkLHRoZXRhU3RhcnQ6Zix0aGV0YUxlbmd0aDpnfX07VEhSRUUuQ29uZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQ29uZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Db25lQnVmZmVyR2VvbWV0cnk7XG5USFJFRS5Db25lR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7VEhSRUUuQ3lsaW5kZXJHZW9tZXRyeS5jYWxsKHRoaXMsMCxhLGIsYyxkLGUsZixnKTt0aGlzLnR5cGU9XCJDb25lR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGhlaWdodDpiLHJhZGlhbFNlZ21lbnRzOmMsaGVpZ2h0U2VnbWVudHM6ZCxvcGVuRW5kZWQ6ZSx0aGV0YVN0YXJ0OmYsdGhldGFMZW5ndGg6Z319O1RIUkVFLkNvbmVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DeWxpbmRlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQ29uZUdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Db25lR2VvbWV0cnk7XG5USFJFRS5FZGdlc0dlb21ldHJ5PWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBhLWJ9VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt2YXIgZD1NYXRoLmNvcyhUSFJFRS5NYXRoLkRFRzJSQUQqKHZvaWQgMCE9PWI/YjoxKSksZT1bMCwwXSxmPXt9LGc9W1wiYVwiLFwiYlwiLFwiY1wiXSxoO2EgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeT8oaD1uZXcgVEhSRUUuR2VvbWV0cnksaC5mcm9tQnVmZmVyR2VvbWV0cnkoYSkpOmg9YS5jbG9uZSgpO2gubWVyZ2VWZXJ0aWNlcygpO2guY29tcHV0ZUZhY2VOb3JtYWxzKCk7dmFyIGs9aC52ZXJ0aWNlcztoPWguZmFjZXM7Zm9yKHZhciBsPTAsbT1oLmxlbmd0aDtsPG07bCsrKWZvcih2YXIgcD1oW2xdLG49MDszPm47bisrKXtlWzBdPXBbZ1tuXV07ZVsxXT1wW2dbKG4rMSklM11dO2Uuc29ydChjKTt2YXIgcT1lLnRvU3RyaW5nKCk7dm9pZCAwPT09ZltxXT9mW3FdPXt2ZXJ0MTplWzBdLHZlcnQyOmVbMV0sZmFjZTE6bCxcbmZhY2UyOnZvaWQgMH06ZltxXS5mYWNlMj1sfWU9W107Zm9yKHEgaW4gZilpZihnPWZbcV0sdm9pZCAwPT09Zy5mYWNlMnx8aFtnLmZhY2UxXS5ub3JtYWwuZG90KGhbZy5mYWNlMl0ubm9ybWFsKTw9ZClsPWtbZy52ZXJ0MV0sZS5wdXNoKGwueCksZS5wdXNoKGwueSksZS5wdXNoKGwueiksbD1rW2cudmVydDJdLGUucHVzaChsLngpLGUucHVzaChsLnkpLGUucHVzaChsLnopO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoZSksMykpfTtUSFJFRS5FZGdlc0dlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuRWRnZXNHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuRWRnZXNHZW9tZXRyeTtcblRIUkVFLkV4dHJ1ZGVHZW9tZXRyeT1mdW5jdGlvbihhLGIpe1widW5kZWZpbmVkXCIhPT10eXBlb2YgYSYmKFRIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyksdGhpcy50eXBlPVwiRXh0cnVkZUdlb21ldHJ5XCIsYT1BcnJheS5pc0FycmF5KGEpP2E6W2FdLHRoaXMuYWRkU2hhcGVMaXN0KGEsYiksdGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKSl9O1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuRXh0cnVkZUdlb21ldHJ5O1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGUuYWRkU2hhcGVMaXN0PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoLGQ9MDtkPGM7ZCsrKXRoaXMuYWRkU2hhcGUoYVtkXSxiKX07XG5USFJFRS5FeHRydWRlR2VvbWV0cnkucHJvdG90eXBlLmFkZFNoYXBlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIsYyl7Ynx8Y29uc29sZS5lcnJvcihcIlRIUkVFLkV4dHJ1ZGVHZW9tZXRyeTogdmVjIGRvZXMgbm90IGV4aXN0XCIpO3JldHVybiBiLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoYykuYWRkKGEpfWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPTEsZD1hLngtYi54LGU9YS55LWIueSxmPWMueC1hLngsZz1jLnktYS55LGg9ZCpkK2UqZTtpZihNYXRoLmFicyhkKmctZSpmKT5OdW1iZXIuRVBTSUxPTil7dmFyIGs9TWF0aC5zcXJ0KGgpLGw9TWF0aC5zcXJ0KGYqZitnKmcpLGg9Yi54LWUvaztiPWIueStkL2s7Zj0oKGMueC1nL2wtaCkqZy0oYy55K2YvbC1iKSpmKS8oZCpnLWUqZik7Yz1oK2QqZi1hLng7YT1iK2UqZi1hLnk7ZD1jKmMrYSphO2lmKDI+PWQpcmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKGMsYSk7ZD1NYXRoLnNxcnQoZC8yKX1lbHNlIGE9ITEsZD5OdW1iZXIuRVBTSUxPTj9cbmY+TnVtYmVyLkVQU0lMT04mJihhPSEwKTpkPC1OdW1iZXIuRVBTSUxPTj9mPC1OdW1iZXIuRVBTSUxPTiYmKGE9ITApOk1hdGguc2lnbihlKT09PU1hdGguc2lnbihnKSYmKGE9ITApLGE/KGM9LWUsYT1kLGQ9TWF0aC5zcXJ0KGgpKTooYz1kLGE9ZSxkPU1hdGguc3FydChoLzIpKTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIoYy9kLGEvZCl9ZnVuY3Rpb24gZShhLGIpe3ZhciBjLGQ7Zm9yKEU9YS5sZW5ndGg7MDw9LS1FOyl7Yz1FO2Q9RS0xOzA+ZCYmKGQ9YS5sZW5ndGgtMSk7Zm9yKHZhciBlPTAsZj1xKzIqbSxlPTA7ZTxmO2UrKyl7dmFyIGc9USplLGg9USooZSsxKSxrPWIrYytnLGc9YitkK2csbD1iK2QraCxoPWIrYytoLGs9aytCLGc9ZytCLGw9bCtCLGg9aCtCO0cuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoayxnLGgsbnVsbCxudWxsLDEpKTtHLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGcsbCxoLG51bGwsbnVsbCwxKSk7az10LmdlbmVyYXRlU2lkZVdhbGxVVihHLFxuayxnLGwsaCk7Ry5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2tbMF0sa1sxXSxrWzNdXSk7Ry5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2tbMV0sa1syXSxrWzNdXSl9fX1mdW5jdGlvbiBmKGEsYixjKXtHLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoYSxiLGMpKX1mdW5jdGlvbiBnKGEsYixjKXthKz1CO2IrPUI7Yys9QjtHLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGEsYixjLG51bGwsbnVsbCwwKSk7YT10LmdlbmVyYXRlVG9wVVYoRyxhLGIsYyk7Ry5mYWNlVmVydGV4VXZzWzBdLnB1c2goYSl9dmFyIGg9dm9pZCAwIT09Yi5hbW91bnQ/Yi5hbW91bnQ6MTAwLGs9dm9pZCAwIT09Yi5iZXZlbFRoaWNrbmVzcz9iLmJldmVsVGhpY2tuZXNzOjYsbD12b2lkIDAhPT1iLmJldmVsU2l6ZT9iLmJldmVsU2l6ZTprLTIsbT12b2lkIDAhPT1iLmJldmVsU2VnbWVudHM/Yi5iZXZlbFNlZ21lbnRzOjMscD12b2lkIDAhPT1iLmJldmVsRW5hYmxlZD9iLmJldmVsRW5hYmxlZDohMCxcbm49dm9pZCAwIT09Yi5jdXJ2ZVNlZ21lbnRzP2IuY3VydmVTZWdtZW50czoxMixxPXZvaWQgMCE9PWIuc3RlcHM/Yi5zdGVwczoxLHI9Yi5leHRydWRlUGF0aCxzLHY9ITEsdD12b2lkIDAhPT1iLlVWR2VuZXJhdG9yP2IuVVZHZW5lcmF0b3I6VEhSRUUuRXh0cnVkZUdlb21ldHJ5LldvcmxkVVZHZW5lcmF0b3IsdSxELHcsSTtyJiYocz1yLmdldFNwYWNlZFBvaW50cyhxKSx2PSEwLHA9ITEsdT12b2lkIDAhPT1iLmZyYW1lcz9iLmZyYW1lczpuZXcgVEhSRUUuVHViZUdlb21ldHJ5LkZyZW5ldEZyYW1lcyhyLHEsITEpLEQ9bmV3IFRIUkVFLlZlY3RvcjMsdz1uZXcgVEhSRUUuVmVjdG9yMyxJPW5ldyBUSFJFRS5WZWN0b3IzKTtwfHwobD1rPW09MCk7dmFyIHoseSxBLEc9dGhpcyxCPXRoaXMudmVydGljZXMubGVuZ3RoLHI9YS5leHRyYWN0UG9pbnRzKG4pLG49ci5zaGFwZSxGPXIuaG9sZXM7aWYocj0hVEhSRUUuU2hhcGVVdGlscy5pc0Nsb2NrV2lzZShuKSl7bj1uLnJldmVyc2UoKTtcbnk9MDtmb3IoQT1GLmxlbmd0aDt5PEE7eSsrKXo9Rlt5XSxUSFJFRS5TaGFwZVV0aWxzLmlzQ2xvY2tXaXNlKHopJiYoRlt5XT16LnJldmVyc2UoKSk7cj0hMX12YXIgSj1USFJFRS5TaGFwZVV0aWxzLnRyaWFuZ3VsYXRlU2hhcGUobixGKSxQPW47eT0wO2ZvcihBPUYubGVuZ3RoO3k8QTt5Kyspej1GW3ldLG49bi5jb25jYXQoeik7dmFyIEssSCxNLE8sTixRPW4ubGVuZ3RoLEMsTD1KLmxlbmd0aCxyPVtdLEU9MDtNPVAubGVuZ3RoO0s9TS0xO2ZvcihIPUUrMTtFPE07RSsrLEsrKyxIKyspSz09PU0mJihLPTApLEg9PT1NJiYoSD0wKSxyW0VdPWQoUFtFXSxQW0tdLFBbSF0pO3ZhciAkPVtdLFQsWD1yLmNvbmNhdCgpO3k9MDtmb3IoQT1GLmxlbmd0aDt5PEE7eSsrKXt6PUZbeV07VD1bXTtFPTA7TT16Lmxlbmd0aDtLPU0tMTtmb3IoSD1FKzE7RTxNO0UrKyxLKyssSCsrKUs9PT1NJiYoSz0wKSxIPT09TSYmKEg9MCksVFtFXT1kKHpbRV0seltLXSx6W0hdKTskLnB1c2goVCk7WD1YLmNvbmNhdChUKX1mb3IoSz1cbjA7SzxtO0srKyl7TT1LL207Tz1rKigxLU0pO0g9bCpNYXRoLnNpbihNKk1hdGguUEkvMik7RT0wO2ZvcihNPVAubGVuZ3RoO0U8TTtFKyspTj1jKFBbRV0scltFXSxIKSxmKE4ueCxOLnksLU8pO3k9MDtmb3IoQT1GLmxlbmd0aDt5PEE7eSsrKWZvcih6PUZbeV0sVD0kW3ldLEU9MCxNPXoubGVuZ3RoO0U8TTtFKyspTj1jKHpbRV0sVFtFXSxIKSxmKE4ueCxOLnksLU8pfUg9bDtmb3IoRT0wO0U8UTtFKyspTj1wP2MobltFXSxYW0VdLEgpOm5bRV0sdj8ody5jb3B5KHUubm9ybWFsc1swXSkubXVsdGlwbHlTY2FsYXIoTi54KSxELmNvcHkodS5iaW5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKE4ueSksSS5jb3B5KHNbMF0pLmFkZCh3KS5hZGQoRCksZihJLngsSS55LEkueikpOmYoTi54LE4ueSwwKTtmb3IoTT0xO008PXE7TSsrKWZvcihFPTA7RTxRO0UrKylOPXA/YyhuW0VdLFhbRV0sSCk6bltFXSx2Pyh3LmNvcHkodS5ub3JtYWxzW01dKS5tdWx0aXBseVNjYWxhcihOLngpLEQuY29weSh1LmJpbm9ybWFsc1tNXSkubXVsdGlwbHlTY2FsYXIoTi55KSxcbkkuY29weShzW01dKS5hZGQodykuYWRkKEQpLGYoSS54LEkueSxJLnopKTpmKE4ueCxOLnksaC9xKk0pO2ZvcihLPW0tMTswPD1LO0stLSl7TT1LL207Tz1rKigxLU0pO0g9bCpNYXRoLnNpbihNKk1hdGguUEkvMik7RT0wO2ZvcihNPVAubGVuZ3RoO0U8TTtFKyspTj1jKFBbRV0scltFXSxIKSxmKE4ueCxOLnksaCtPKTt5PTA7Zm9yKEE9Ri5sZW5ndGg7eTxBO3krKylmb3Ioej1GW3ldLFQ9JFt5XSxFPTAsTT16Lmxlbmd0aDtFPE07RSsrKU49Yyh6W0VdLFRbRV0sSCksdj9mKE4ueCxOLnkrc1txLTFdLnksc1txLTFdLngrTyk6ZihOLngsTi55LGgrTyl9KGZ1bmN0aW9uKCl7aWYocCl7dmFyIGE7YT0wKlE7Zm9yKEU9MDtFPEw7RSsrKUM9SltFXSxnKENbMl0rYSxDWzFdK2EsQ1swXSthKTthPXErMiptO2EqPVE7Zm9yKEU9MDtFPEw7RSsrKUM9SltFXSxnKENbMF0rYSxDWzFdK2EsQ1syXSthKX1lbHNle2ZvcihFPTA7RTxMO0UrKylDPUpbRV0sZyhDWzJdLENbMV0sQ1swXSk7Zm9yKEU9XG4wO0U8TDtFKyspQz1KW0VdLGcoQ1swXStRKnEsQ1sxXStRKnEsQ1syXStRKnEpfX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGE9MDtlKFAsYSk7YSs9UC5sZW5ndGg7eT0wO2ZvcihBPUYubGVuZ3RoO3k8QTt5Kyspej1GW3ldLGUoeixhKSxhKz16Lmxlbmd0aH0pKCl9O1xuVEhSRUUuRXh0cnVkZUdlb21ldHJ5LldvcmxkVVZHZW5lcmF0b3I9e2dlbmVyYXRlVG9wVVY6ZnVuY3Rpb24oYSxiLGMsZCl7YT1hLnZlcnRpY2VzO2I9YVtiXTtjPWFbY107ZD1hW2RdO3JldHVybltuZXcgVEhSRUUuVmVjdG9yMihiLngsYi55KSxuZXcgVEhSRUUuVmVjdG9yMihjLngsYy55KSxuZXcgVEhSRUUuVmVjdG9yMihkLngsZC55KV19LGdlbmVyYXRlU2lkZVdhbGxVVjpmdW5jdGlvbihhLGIsYyxkLGUpe2E9YS52ZXJ0aWNlcztiPWFbYl07Yz1hW2NdO2Q9YVtkXTtlPWFbZV07cmV0dXJuLjAxPk1hdGguYWJzKGIueS1jLnkpP1tuZXcgVEhSRUUuVmVjdG9yMihiLngsMS1iLnopLG5ldyBUSFJFRS5WZWN0b3IyKGMueCwxLWMueiksbmV3IFRIUkVFLlZlY3RvcjIoZC54LDEtZC56KSxuZXcgVEhSRUUuVmVjdG9yMihlLngsMS1lLnopXTpbbmV3IFRIUkVFLlZlY3RvcjIoYi55LDEtYi56KSxuZXcgVEhSRUUuVmVjdG9yMihjLnksMS1jLnopLG5ldyBUSFJFRS5WZWN0b3IyKGQueSxcbjEtZC56KSxuZXcgVEhSRUUuVmVjdG9yMihlLnksMS1lLnopXX19O1RIUkVFLlNoYXBlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYXBlR2VvbWV0cnlcIjshMT09PUFycmF5LmlzQXJyYXkoYSkmJihhPVthXSk7dGhpcy5hZGRTaGFwZUxpc3QoYSxiKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpfTtUSFJFRS5TaGFwZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuU2hhcGVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuU2hhcGVHZW9tZXRyeTtUSFJFRS5TaGFwZUdlb21ldHJ5LnByb3RvdHlwZS5hZGRTaGFwZUxpc3Q9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspdGhpcy5hZGRTaGFwZShhW2NdLGIpO3JldHVybiB0aGlzfTtcblRIUkVFLlNoYXBlR2VvbWV0cnkucHJvdG90eXBlLmFkZFNoYXBlPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9e30pO3ZhciBjPWIubWF0ZXJpYWwsZD12b2lkIDA9PT1iLlVWR2VuZXJhdG9yP1RIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5Xb3JsZFVWR2VuZXJhdG9yOmIuVVZHZW5lcmF0b3IsZSxmLGcsaD10aGlzLnZlcnRpY2VzLmxlbmd0aDtlPWEuZXh0cmFjdFBvaW50cyh2b2lkIDAhPT1iLmN1cnZlU2VnbWVudHM/Yi5jdXJ2ZVNlZ21lbnRzOjEyKTt2YXIgaz1lLnNoYXBlLGw9ZS5ob2xlcztpZighVEhSRUUuU2hhcGVVdGlscy5pc0Nsb2NrV2lzZShrKSlmb3Ioaz1rLnJldmVyc2UoKSxlPTAsZj1sLmxlbmd0aDtlPGY7ZSsrKWc9bFtlXSxUSFJFRS5TaGFwZVV0aWxzLmlzQ2xvY2tXaXNlKGcpJiYobFtlXT1nLnJldmVyc2UoKSk7dmFyIG09VEhSRUUuU2hhcGVVdGlscy50cmlhbmd1bGF0ZVNoYXBlKGssbCk7ZT0wO2ZvcihmPWwubGVuZ3RoO2U8ZjtlKyspZz1sW2VdLGs9ay5jb25jYXQoZyk7XG5sPWsubGVuZ3RoO2Y9bS5sZW5ndGg7Zm9yKGU9MDtlPGw7ZSsrKWc9a1tlXSx0aGlzLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoZy54LGcueSwwKSk7Zm9yKGU9MDtlPGY7ZSsrKWw9bVtlXSxrPWxbMF0raCxnPWxbMV0raCxsPWxbMl0raCx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGssZyxsLG51bGwsbnVsbCxjKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goZC5nZW5lcmF0ZVRvcFVWKHRoaXMsayxnLGwpKX07XG5USFJFRS5MYXRoZUJ1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGF0aGVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cG9pbnRzOmEsc2VnbWVudHM6YixwaGlTdGFydDpjLHBoaUxlbmd0aDpkfTtiPU1hdGguZmxvb3IoYil8fDEyO2M9Y3x8MDtkPWR8fDIqTWF0aC5QSTtkPVRIUkVFLk1hdGguY2xhbXAoZCwwLDIqTWF0aC5QSSk7Zm9yKHZhciBlPShiKzEpKmEubGVuZ3RoLGY9YiphLmxlbmd0aCo2LGc9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgKDY1NTM1PGY/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKGYpLDEpLGg9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KDMqZSksMyksaz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoMiplKSwyKSxsPTAsbT0wLHA9MS9iLG49bmV3IFRIUkVFLlZlY3RvcjMscT1uZXcgVEhSRUUuVmVjdG9yMixcbmU9MDtlPD1iO2UrKylmb3IodmFyIGY9YytlKnAqZCxyPU1hdGguc2luKGYpLHM9TWF0aC5jb3MoZiksZj0wO2Y8PWEubGVuZ3RoLTE7ZisrKW4ueD1hW2ZdLngqcixuLnk9YVtmXS55LG4uej1hW2ZdLngqcyxoLnNldFhZWihsLG4ueCxuLnksbi56KSxxLng9ZS9iLHEueT1mLyhhLmxlbmd0aC0xKSxrLnNldFhZKGwscS54LHEueSksbCsrO2ZvcihlPTA7ZTxiO2UrKylmb3IoZj0wO2Y8YS5sZW5ndGgtMTtmKyspYz1mK2UqYS5sZW5ndGgsbD1jK2EubGVuZ3RoLHA9YythLmxlbmd0aCsxLG49YysxLGcuc2V0WChtLGMpLG0rKyxnLnNldFgobSxsKSxtKyssZy5zZXRYKG0sbiksbSsrLGcuc2V0WChtLGwpLG0rKyxnLnNldFgobSxwKSxtKyssZy5zZXRYKG0sbiksbSsrO3RoaXMuc2V0SW5kZXgoZyk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLGgpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixrKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7aWYoZD09PTIqTWF0aC5QSSlmb3IoZD1cbnRoaXMuYXR0cmlidXRlcy5ub3JtYWwuYXJyYXksZz1uZXcgVEhSRUUuVmVjdG9yMyxoPW5ldyBUSFJFRS5WZWN0b3IzLGs9bmV3IFRIUkVFLlZlY3RvcjMsYz1iKmEubGVuZ3RoKjMsZj1lPTA7ZTxhLmxlbmd0aDtlKyssZis9MylnLng9ZFtmKzBdLGcueT1kW2YrMV0sZy56PWRbZisyXSxoLng9ZFtjK2YrMF0saC55PWRbYytmKzFdLGguej1kW2MrZisyXSxrLmFkZFZlY3RvcnMoZyxoKS5ub3JtYWxpemUoKSxkW2YrMF09ZFtjK2YrMF09ay54LGRbZisxXT1kW2MrZisxXT1rLnksZFtmKzJdPWRbYytmKzJdPWsuen07VEhSRUUuTGF0aGVCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkxhdGhlQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkxhdGhlQnVmZmVyR2VvbWV0cnk7XG5USFJFRS5MYXRoZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGF0aGVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cG9pbnRzOmEsc2VnbWVudHM6YixwaGlTdGFydDpjLHBoaUxlbmd0aDpkfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVEhSRUUuTGF0aGVCdWZmZXJHZW9tZXRyeShhLGIsYyxkKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9O1RIUkVFLkxhdGhlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5MYXRoZUdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5MYXRoZUdlb21ldHJ5O1xuVEhSRUUuUGxhbmVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBsYW5lR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOmEsaGVpZ2h0OmIsd2lkdGhTZWdtZW50czpjLGhlaWdodFNlZ21lbnRzOmR9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBUSFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5KGEsYixjLGQpKX07VEhSRUUuUGxhbmVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlBsYW5lR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlBsYW5lR2VvbWV0cnk7XG5USFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUGxhbmVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17d2lkdGg6YSxoZWlnaHQ6Yix3aWR0aFNlZ21lbnRzOmMsaGVpZ2h0U2VnbWVudHM6ZH07dmFyIGU9YS8yLGY9Yi8yO2M9TWF0aC5mbG9vcihjKXx8MTtkPU1hdGguZmxvb3IoZCl8fDE7dmFyIGc9YysxLGg9ZCsxLGs9YS9jLGw9Yi9kO2I9bmV3IEZsb2F0MzJBcnJheShnKmgqMyk7YT1uZXcgRmxvYXQzMkFycmF5KGcqaCozKTtmb3IodmFyIG09bmV3IEZsb2F0MzJBcnJheShnKmgqMikscD0wLG49MCxxPTA7cTxoO3ErKylmb3IodmFyIHI9cSpsLWYscz0wO3M8ZztzKyspYltwXT1zKmstZSxiW3ArMV09LXIsYVtwKzJdPTEsbVtuXT1zL2MsbVtuKzFdPTEtcS9kLHArPTMsbis9MjtwPTA7ZT1uZXcgKDY1NTM1PGIubGVuZ3RoLzM/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKGMqXG5kKjYpO2ZvcihxPTA7cTxkO3ErKylmb3Iocz0wO3M8YztzKyspZj1zK2cqKHErMSksaD1zKzErZyoocSsxKSxrPXMrMStnKnEsZVtwXT1zK2cqcSxlW3ArMV09ZixlW3ArMl09ayxlW3ArM109ZixlW3ArNF09aCxlW3ArNV09ayxwKz02O3RoaXMuc2V0SW5kZXgobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShlLDEpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShiLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYSwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobSwyKSl9O1RIUkVFLlBsYW5lQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5O1xuVEhSRUUuUmluZ0J1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlJpbmdCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17aW5uZXJSYWRpdXM6YSxvdXRlclJhZGl1czpiLHRoZXRhU2VnbWVudHM6YyxwaGlTZWdtZW50czpkLHRoZXRhU3RhcnQ6ZSx0aGV0YUxlbmd0aDpmfTthPWF8fDIwO2I9Ynx8NTA7ZT12b2lkIDAhPT1lP2U6MDtmPXZvaWQgMCE9PWY/ZjoyKk1hdGguUEk7Yz12b2lkIDAhPT1jP01hdGgubWF4KDMsYyk6ODtkPXZvaWQgMCE9PWQ/TWF0aC5tYXgoMSxkKToxO3ZhciBnPShjKzEpKihkKzEpLGg9YypkKjYsaD1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyAoNjU1MzU8aD9VaW50MzJBcnJheTpVaW50MTZBcnJheSkoaCksMSksaz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoMypnKSwzKSxsPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSgzKlxuZyksMyksZz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoMipnKSwyKSxtPTAscD0wLG4scT1hLHI9KGItYSkvZCxzPW5ldyBUSFJFRS5WZWN0b3IzLHY9bmV3IFRIUkVFLlZlY3RvcjIsdDtmb3IoYT0wO2E8PWQ7YSsrKXtmb3IodD0wO3Q8PWM7dCsrKW49ZSt0L2MqZixzLng9cSpNYXRoLmNvcyhuKSxzLnk9cSpNYXRoLnNpbihuKSxrLnNldFhZWihtLHMueCxzLnkscy56KSxsLnNldFhZWihtLDAsMCwxKSx2Lng9KHMueC9iKzEpLzIsdi55PShzLnkvYisxKS8yLGcuc2V0WFkobSx2Lngsdi55KSxtKys7cSs9cn1mb3IoYT0wO2E8ZDthKyspZm9yKGI9YSooYysxKSx0PTA7dDxjO3QrKyllPW49dCtiLGY9bitjKzEsbT1uK2MrMixuKz0xLGguc2V0WChwLGUpLHArKyxoLnNldFgocCxmKSxwKyssaC5zZXRYKHAsbSkscCsrLGguc2V0WChwLGUpLHArKyxoLnNldFgocCxtKSxwKyssaC5zZXRYKHAsbikscCsrO3RoaXMuc2V0SW5kZXgoaCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLFxuayk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixsKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsZyl9O1RIUkVFLlJpbmdCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlJpbmdCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUmluZ0J1ZmZlckdlb21ldHJ5O1RIUkVFLlJpbmdHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJSaW5nR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e2lubmVyUmFkaXVzOmEsb3V0ZXJSYWRpdXM6Yix0aGV0YVNlZ21lbnRzOmMscGhpU2VnbWVudHM6ZCx0aGV0YVN0YXJ0OmUsdGhldGFMZW5ndGg6Zn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLlJpbmdCdWZmZXJHZW9tZXRyeShhLGIsYyxkLGUsZikpfTtcblRIUkVFLlJpbmdHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlJpbmdHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUmluZ0dlb21ldHJ5O1RIUkVFLlNwaGVyZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU3BoZXJlR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHdpZHRoU2VnbWVudHM6YixoZWlnaHRTZWdtZW50czpjLHBoaVN0YXJ0OmQscGhpTGVuZ3RoOmUsdGhldGFTdGFydDpmLHRoZXRhTGVuZ3RoOmd9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBUSFJFRS5TcGhlcmVCdWZmZXJHZW9tZXRyeShhLGIsYyxkLGUsZixnKSl9O1RIUkVFLlNwaGVyZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7XG5USFJFRS5TcGhlcmVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuU3BoZXJlR2VvbWV0cnk7XG5USFJFRS5TcGhlcmVCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNwaGVyZUJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSx3aWR0aFNlZ21lbnRzOmIsaGVpZ2h0U2VnbWVudHM6YyxwaGlTdGFydDpkLHBoaUxlbmd0aDplLHRoZXRhU3RhcnQ6Zix0aGV0YUxlbmd0aDpnfTthPWF8fDUwO2I9TWF0aC5tYXgoMyxNYXRoLmZsb29yKGIpfHw4KTtjPU1hdGgubWF4KDIsTWF0aC5mbG9vcihjKXx8Nik7ZD12b2lkIDAhPT1kP2Q6MDtlPXZvaWQgMCE9PWU/ZToyKk1hdGguUEk7Zj12b2lkIDAhPT1mP2Y6MDtnPXZvaWQgMCE9PWc/ZzpNYXRoLlBJO2Zvcih2YXIgaD1mK2csaz0oYisxKSooYysxKSxsPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSgzKmspLDMpLG09bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KDMqXG5rKSwzKSxrPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSgyKmspLDIpLHA9MCxuPVtdLHE9bmV3IFRIUkVFLlZlY3RvcjMscj0wO3I8PWM7cisrKXtmb3IodmFyIHM9W10sdj1yL2MsdD0wO3Q8PWI7dCsrKXt2YXIgdT10L2IsRD0tYSpNYXRoLmNvcyhkK3UqZSkqTWF0aC5zaW4oZit2KmcpLHc9YSpNYXRoLmNvcyhmK3YqZyksST1hKk1hdGguc2luKGQrdSplKSpNYXRoLnNpbihmK3YqZyk7cS5zZXQoRCx3LEkpLm5vcm1hbGl6ZSgpO2wuc2V0WFlaKHAsRCx3LEkpO20uc2V0WFlaKHAscS54LHEueSxxLnopO2suc2V0WFkocCx1LDEtdik7cy5wdXNoKHApO3ArK31uLnB1c2gocyl9ZD1bXTtmb3Iocj0wO3I8YztyKyspZm9yKHQ9MDt0PGI7dCsrKWU9bltyXVt0KzFdLGc9bltyXVt0XSxwPW5bcisxXVt0XSxxPW5bcisxXVt0KzFdLCgwIT09cnx8MDxmKSYmZC5wdXNoKGUsZyxxKSwociE9PWMtMXx8aDxNYXRoLlBJKSYmZC5wdXNoKGcscCxxKTt0aGlzLnNldEluZGV4KG5ldyAoNjU1MzU8XG5sLmNvdW50P1RIUkVFLlVpbnQzMkF0dHJpYnV0ZTpUSFJFRS5VaW50MTZBdHRyaWJ1dGUpKGQsMSkpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixsKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG0pO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixrKTt0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUobmV3IFRIUkVFLlZlY3RvcjMsYSl9O1RIUkVFLlNwaGVyZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuU3BoZXJlQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNwaGVyZUJ1ZmZlckdlb21ldHJ5O1xuVEhSRUUuVGV4dEdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLmZvbnQ7aWYoITE9PT1jIGluc3RhbmNlb2YgVEhSRUUuRm9udClyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLlRleHRHZW9tZXRyeTogZm9udCBwYXJhbWV0ZXIgaXMgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkZvbnQuXCIpLG5ldyBUSFJFRS5HZW9tZXRyeTtjPWMuZ2VuZXJhdGVTaGFwZXMoYSxiLnNpemUsYi5jdXJ2ZVNlZ21lbnRzKTtiLmFtb3VudD12b2lkIDAhPT1iLmhlaWdodD9iLmhlaWdodDo1MDt2b2lkIDA9PT1iLmJldmVsVGhpY2tuZXNzJiYoYi5iZXZlbFRoaWNrbmVzcz0xMCk7dm9pZCAwPT09Yi5iZXZlbFNpemUmJihiLmJldmVsU2l6ZT04KTt2b2lkIDA9PT1iLmJldmVsRW5hYmxlZCYmKGIuYmV2ZWxFbmFibGVkPSExKTtUSFJFRS5FeHRydWRlR2VvbWV0cnkuY2FsbCh0aGlzLGMsYik7dGhpcy50eXBlPVwiVGV4dEdlb21ldHJ5XCJ9O1xuVEhSRUUuVGV4dEdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRleHRHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuVGV4dEdlb21ldHJ5O1xuVEhSRUUuVG9ydXNCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUpe1RIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVG9ydXNCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsdHViZTpiLHJhZGlhbFNlZ21lbnRzOmMsdHVidWxhclNlZ21lbnRzOmQsYXJjOmV9O2E9YXx8MTAwO2I9Ynx8NDA7Yz1NYXRoLmZsb29yKGMpfHw4O2Q9TWF0aC5mbG9vcihkKXx8NjtlPWV8fDIqTWF0aC5QSTt2YXIgZj0oYysxKSooZCsxKSxnPWMqZCo2LGc9bmV3ICg2NTUzNTxnP1VpbnQzMkFycmF5OlVpbnQxNkFycmF5KShnKSxoPW5ldyBGbG9hdDMyQXJyYXkoMypmKSxrPW5ldyBGbG9hdDMyQXJyYXkoMypmKSxmPW5ldyBGbG9hdDMyQXJyYXkoMipmKSxsPTAsbT0wLHA9MCxuPW5ldyBUSFJFRS5WZWN0b3IzLHE9bmV3IFRIUkVFLlZlY3RvcjMscj1uZXcgVEhSRUUuVmVjdG9yMyxzLHY7Zm9yKHM9MDtzPD1jO3MrKylmb3Iodj0wO3Y8PWQ7disrKXt2YXIgdD1cbnYvZCplLHU9cy9jKk1hdGguUEkqMjtxLng9KGErYipNYXRoLmNvcyh1KSkqTWF0aC5jb3ModCk7cS55PShhK2IqTWF0aC5jb3ModSkpKk1hdGguc2luKHQpO3Euej1iKk1hdGguc2luKHUpO2hbbF09cS54O2hbbCsxXT1xLnk7aFtsKzJdPXEuejtuLng9YSpNYXRoLmNvcyh0KTtuLnk9YSpNYXRoLnNpbih0KTtyLnN1YlZlY3RvcnMocSxuKS5ub3JtYWxpemUoKTtrW2xdPXIueDtrW2wrMV09ci55O2tbbCsyXT1yLno7ZlttXT12L2Q7ZlttKzFdPXMvYztsKz0zO20rPTJ9Zm9yKHM9MTtzPD1jO3MrKylmb3Iodj0xO3Y8PWQ7disrKWE9KGQrMSkqKHMtMSkrdi0xLGI9KGQrMSkqKHMtMSkrdixlPShkKzEpKnMrdixnW3BdPShkKzEpKnMrdi0xLGdbcCsxXT1hLGdbcCsyXT1lLGdbcCszXT1hLGdbcCs0XT1iLGdbcCs1XT1lLHArPTY7dGhpcy5zZXRJbmRleChuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGcsMSkpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGgsXG4zKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGssMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGYsMikpfTtUSFJFRS5Ub3J1c0J1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuVG9ydXNCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuVG9ydXNCdWZmZXJHZW9tZXRyeTtcblRIUkVFLlRvcnVzR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlRvcnVzR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHR1YmU6YixyYWRpYWxTZWdtZW50czpjLHR1YnVsYXJTZWdtZW50czpkLGFyYzplfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVEhSRUUuVG9ydXNCdWZmZXJHZW9tZXRyeShhLGIsYyxkLGUpKX07VEhSRUUuVG9ydXNHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRvcnVzR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlRvcnVzR2VvbWV0cnk7XG5USFJFRS5Ub3J1c0tub3RCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGIsYyxkLGUpe3ZhciBmPU1hdGguY29zKGEpLGc9TWF0aC5zaW4oYSk7YSo9Yy9iO2I9TWF0aC5jb3MoYSk7ZS54PWQqKDIrYikqLjUqZjtlLnk9ZCooMitiKSpnKi41O2Uuej1kKk1hdGguc2luKGEpKi41fVRIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVG9ydXNLbm90QnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHR1YmU6Yix0dWJ1bGFyU2VnbWVudHM6YyxyYWRpYWxTZWdtZW50czpkLHA6ZSxxOmZ9O2E9YXx8MTAwO2I9Ynx8NDA7Yz1NYXRoLmZsb29yKGMpfHw2NDtkPU1hdGguZmxvb3IoZCl8fDg7ZT1lfHwyO2Y9Znx8Mzt2YXIgaD0oZCsxKSooYysxKSxrPWQqYyo2LGs9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgKDY1NTM1PGs/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKGspLDEpLGw9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KDMqXG5oKSwzKSxtPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSgzKmgpLDMpLGg9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KDIqaCksMikscCxuLHE9MCxyPTAscz1uZXcgVEhSRUUuVmVjdG9yMyx2PW5ldyBUSFJFRS5WZWN0b3IzLHQ9bmV3IFRIUkVFLlZlY3RvcjIsdT1uZXcgVEhSRUUuVmVjdG9yMyxEPW5ldyBUSFJFRS5WZWN0b3IzLHc9bmV3IFRIUkVFLlZlY3RvcjMsST1uZXcgVEhSRUUuVmVjdG9yMyx6PW5ldyBUSFJFRS5WZWN0b3IzO2ZvcihwPTA7cDw9YzsrK3ApZm9yKG49cC9jKmUqTWF0aC5QSSoyLGcobixlLGYsYSx1KSxnKG4rLjAxLGUsZixhLEQpLEkuc3ViVmVjdG9ycyhELHUpLHouYWRkVmVjdG9ycyhELHUpLHcuY3Jvc3NWZWN0b3JzKEkseiksei5jcm9zc1ZlY3RvcnModyxJKSx3Lm5vcm1hbGl6ZSgpLHoubm9ybWFsaXplKCksbj0wO248PWQ7KytuKXt2YXIgeT1uL2QqTWF0aC5QSSoyLEE9LWIqTWF0aC5jb3MoeSksXG55PWIqTWF0aC5zaW4oeSk7cy54PXUueCsoQSp6LngreSp3LngpO3MueT11LnkrKEEqei55K3kqdy55KTtzLno9dS56KyhBKnoueit5Kncueik7bC5zZXRYWVoocSxzLngscy55LHMueik7di5zdWJWZWN0b3JzKHMsdSkubm9ybWFsaXplKCk7bS5zZXRYWVoocSx2Lngsdi55LHYueik7dC54PXAvYzt0Lnk9bi9kO2guc2V0WFkocSx0LngsdC55KTtxKyt9Zm9yKG49MTtuPD1jO24rKylmb3IocD0xO3A8PWQ7cCsrKWE9KGQrMSkqbisocC0xKSxiPShkKzEpKm4rcCxlPShkKzEpKihuLTEpK3Asay5zZXRYKHIsKGQrMSkqKG4tMSkrKHAtMSkpLHIrKyxrLnNldFgocixhKSxyKyssay5zZXRYKHIsZSkscisrLGsuc2V0WChyLGEpLHIrKyxrLnNldFgocixiKSxyKyssay5zZXRYKHIsZSkscisrO3RoaXMuc2V0SW5kZXgoayk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLGwpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLGgpfTtcblRIUkVFLlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuVG9ydXNLbm90QnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5O1xuVEhSRUUuVG9ydXNLbm90R2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUb3J1c0tub3RHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsdHViZTpiLHR1YnVsYXJTZWdtZW50czpjLHJhZGlhbFNlZ21lbnRzOmQscDplLHE6Zn07dm9pZCAwIT09ZyYmY29uc29sZS53YXJuKFwiVEhSRUUuVG9ydXNLbm90R2VvbWV0cnk6IGhlaWdodFNjYWxlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuc2NhbGUoIHgsIHksIHogKSBpbnN0ZWFkLlwiKTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVEhSRUUuVG9ydXNLbm90QnVmZmVyR2VvbWV0cnkoYSxiLGMsZCxlLGYpKTt0aGlzLm1lcmdlVmVydGljZXMoKX07VEhSRUUuVG9ydXNLbm90R2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtcblRIUkVFLlRvcnVzS25vdEdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Ub3J1c0tub3RHZW9tZXRyeTtcblRIUkVFLlR1YmVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUdWJlR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3BhdGg6YSxzZWdtZW50czpiLHJhZGl1czpjLHJhZGlhbFNlZ21lbnRzOmQsY2xvc2VkOmUsdGFwZXI6Zn07Yj1ifHw2NDtjPWN8fDE7ZD1kfHw4O2U9ZXx8ITE7Zj1mfHxUSFJFRS5UdWJlR2VvbWV0cnkuTm9UYXBlcjt2YXIgZz1bXSxoLGssbD1iKzEsbSxwLG4scSxyLHM9bmV3IFRIUkVFLlZlY3RvcjMsdix0LHU7dj1uZXcgVEhSRUUuVHViZUdlb21ldHJ5LkZyZW5ldEZyYW1lcyhhLGIsZSk7dD12Lm5vcm1hbHM7dT12LmJpbm9ybWFsczt0aGlzLnRhbmdlbnRzPXYudGFuZ2VudHM7dGhpcy5ub3JtYWxzPXQ7dGhpcy5iaW5vcm1hbHM9dTtmb3Iodj0wO3Y8bDt2KyspZm9yKGdbdl09W10sbT12LyhsLTEpLHI9YS5nZXRQb2ludEF0KG0pLGg9dFt2XSxrPXVbdl0sbj1jKmYobSksbT0wO208XG5kO20rKylwPW0vZCoyKk1hdGguUEkscT0tbipNYXRoLmNvcyhwKSxwPW4qTWF0aC5zaW4ocCkscy5jb3B5KHIpLHMueCs9cSpoLngrcCprLngscy55Kz1xKmgueStwKmsueSxzLnorPXEqaC56K3Aqay56LGdbdl1bbV09dGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKHMueCxzLnkscy56KSktMTtmb3Iodj0wO3Y8Yjt2KyspZm9yKG09MDttPGQ7bSsrKWY9ZT8odisxKSViOnYrMSxsPShtKzEpJWQsYT1nW3ZdW21dLGM9Z1tmXVttXSxmPWdbZl1bbF0sbD1nW3ZdW2xdLHM9bmV3IFRIUkVFLlZlY3RvcjIodi9iLG0vZCksdD1uZXcgVEhSRUUuVmVjdG9yMigodisxKS9iLG0vZCksdT1uZXcgVEhSRUUuVmVjdG9yMigodisxKS9iLChtKzEpL2QpLGg9bmV3IFRIUkVFLlZlY3RvcjIodi9iLChtKzEpL2QpLHRoaXMuZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYSxjLGwpKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbcyx0LGhdKSx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGMsXG5mLGwpKSx0aGlzLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbdC5jbG9uZSgpLHUsaC5jbG9uZSgpXSk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCl9O1RIUkVFLlR1YmVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlR1YmVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuVHViZUdlb21ldHJ5O1RIUkVFLlR1YmVHZW9tZXRyeS5Ob1RhcGVyPWZ1bmN0aW9uKGEpe3JldHVybiAxfTtUSFJFRS5UdWJlR2VvbWV0cnkuU2ludXNvaWRhbFRhcGVyPWZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNpbihNYXRoLlBJKmEpfTtcblRIUkVFLlR1YmVHZW9tZXRyeS5GcmVuZXRGcmFtZXM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW5ldyBUSFJFRS5WZWN0b3IzLGU9W10sZj1bXSxnPVtdLGg9bmV3IFRIUkVFLlZlY3RvcjMsaz1uZXcgVEhSRUUuTWF0cml4NDtiKz0xO3ZhciBsLG0scDt0aGlzLnRhbmdlbnRzPWU7dGhpcy5ub3JtYWxzPWY7dGhpcy5iaW5vcm1hbHM9Zztmb3IobD0wO2w8YjtsKyspbT1sLyhiLTEpLGVbbF09YS5nZXRUYW5nZW50QXQobSksZVtsXS5ub3JtYWxpemUoKTtmWzBdPW5ldyBUSFJFRS5WZWN0b3IzO2dbMF09bmV3IFRIUkVFLlZlY3RvcjM7YT1OdW1iZXIuTUFYX1ZBTFVFO2w9TWF0aC5hYnMoZVswXS54KTttPU1hdGguYWJzKGVbMF0ueSk7cD1NYXRoLmFicyhlWzBdLnopO2w8PWEmJihhPWwsZC5zZXQoMSwwLDApKTttPD1hJiYoYT1tLGQuc2V0KDAsMSwwKSk7cDw9YSYmZC5zZXQoMCwwLDEpO2guY3Jvc3NWZWN0b3JzKGVbMF0sZCkubm9ybWFsaXplKCk7ZlswXS5jcm9zc1ZlY3RvcnMoZVswXSxcbmgpO2dbMF0uY3Jvc3NWZWN0b3JzKGVbMF0sZlswXSk7Zm9yKGw9MTtsPGI7bCsrKWZbbF09ZltsLTFdLmNsb25lKCksZ1tsXT1nW2wtMV0uY2xvbmUoKSxoLmNyb3NzVmVjdG9ycyhlW2wtMV0sZVtsXSksaC5sZW5ndGgoKT5OdW1iZXIuRVBTSUxPTiYmKGgubm9ybWFsaXplKCksZD1NYXRoLmFjb3MoVEhSRUUuTWF0aC5jbGFtcChlW2wtMV0uZG90KGVbbF0pLC0xLDEpKSxmW2xdLmFwcGx5TWF0cml4NChrLm1ha2VSb3RhdGlvbkF4aXMoaCxkKSkpLGdbbF0uY3Jvc3NWZWN0b3JzKGVbbF0sZltsXSk7aWYoYylmb3IoZD1NYXRoLmFjb3MoVEhSRUUuTWF0aC5jbGFtcChmWzBdLmRvdChmW2ItMV0pLC0xLDEpKSxkLz1iLTEsMDxlWzBdLmRvdChoLmNyb3NzVmVjdG9ycyhmWzBdLGZbYi0xXSkpJiYoZD0tZCksbD0xO2w8YjtsKyspZltsXS5hcHBseU1hdHJpeDQoay5tYWtlUm90YXRpb25BeGlzKGVbbF0sZCpsKSksZ1tsXS5jcm9zc1ZlY3RvcnMoZVtsXSxmW2xdKX07XG5USFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1hLm5vcm1hbGl6ZSgpLmNsb25lKCk7Yi5pbmRleD1rLnZlcnRpY2VzLnB1c2goYiktMTt2YXIgYz1NYXRoLmF0YW4yKGEueiwtYS54KS8yL01hdGguUEkrLjU7YT1NYXRoLmF0YW4yKC1hLnksTWF0aC5zcXJ0KGEueCphLngrYS56KmEueikpL01hdGguUEkrLjU7Yi51dj1uZXcgVEhSRUUuVmVjdG9yMihjLDEtYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGQ9bmV3IFRIUkVFLkZhY2UzKGEuaW5kZXgsYi5pbmRleCxjLmluZGV4LFthLmNsb25lKCksYi5jbG9uZSgpLGMuY2xvbmUoKV0pO2suZmFjZXMucHVzaChkKTt2LmNvcHkoYSkuYWRkKGIpLmFkZChjKS5kaXZpZGVTY2FsYXIoMyk7ZD1NYXRoLmF0YW4yKHYueiwtdi54KTtrLmZhY2VWZXJ0ZXhVdnNbMF0ucHVzaChbaChhLnV2LGEsZCksaChiLnV2LGIsZCksaChjLnV2LGMsZCldKX1mdW5jdGlvbiBnKGEsXG5iKXtmb3IodmFyIGM9TWF0aC5wb3coMixiKSxkPWUoay52ZXJ0aWNlc1thLmFdKSxnPWUoay52ZXJ0aWNlc1thLmJdKSxoPWUoay52ZXJ0aWNlc1thLmNdKSxsPVtdLG09MDttPD1jO20rKyl7bFttXT1bXTtmb3IodmFyIG49ZShkLmNsb25lKCkubGVycChoLG0vYykpLHA9ZShnLmNsb25lKCkubGVycChoLG0vYykpLHE9Yy1tLHI9MDtyPD1xO3IrKylsW21dW3JdPTA9PT1yJiZtPT09Yz9uOmUobi5jbG9uZSgpLmxlcnAocCxyL3EpKX1mb3IobT0wO208YzttKyspZm9yKHI9MDtyPDIqKGMtbSktMTtyKyspZD1NYXRoLmZsb29yKHIvMiksMD09PXIlMj9mKGxbbV1bZCsxXSxsW20rMV1bZF0sbFttXVtkXSk6ZihsW21dW2QrMV0sbFttKzFdW2QrMV0sbFttKzFdW2RdKX1mdW5jdGlvbiBoKGEsYixjKXswPmMmJjE9PT1hLngmJihhPW5ldyBUSFJFRS5WZWN0b3IyKGEueC0xLGEueSkpOzA9PT1iLngmJjA9PT1iLnomJihhPW5ldyBUSFJFRS5WZWN0b3IyKGMvMi9NYXRoLlBJKy41LGEueSkpO1xucmV0dXJuIGEuY2xvbmUoKX1USFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBvbHloZWRyb25HZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17dmVydGljZXM6YSxpbmRpY2VzOmIscmFkaXVzOmMsZGV0YWlsOmR9O2M9Y3x8MTtkPWR8fDA7Zm9yKHZhciBrPXRoaXMsbD0wLG09YS5sZW5ndGg7bDxtO2wrPTMpZShuZXcgVEhSRUUuVmVjdG9yMyhhW2xdLGFbbCsxXSxhW2wrMl0pKTthPXRoaXMudmVydGljZXM7Zm9yKHZhciBwPVtdLG49bD0wLG09Yi5sZW5ndGg7bDxtO2wrPTMsbisrKXt2YXIgcT1hW2JbbF1dLHI9YVtiW2wrMV1dLHM9YVtiW2wrMl1dO3Bbbl09bmV3IFRIUkVFLkZhY2UzKHEuaW5kZXgsci5pbmRleCxzLmluZGV4LFtxLmNsb25lKCksci5jbG9uZSgpLHMuY2xvbmUoKV0pfWZvcih2YXIgdj1uZXcgVEhSRUUuVmVjdG9yMyxsPTAsbT1wLmxlbmd0aDtsPG07bCsrKWcocFtsXSxkKTtsPTA7Zm9yKG09dGhpcy5mYWNlVmVydGV4VXZzWzBdLmxlbmd0aDtsPFxubTtsKyspYj10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1bbF0sZD1iWzBdLngsYT1iWzFdLngscD1iWzJdLngsbj1NYXRoLm1heChkLGEscCkscT1NYXRoLm1pbihkLGEscCksLjk8biYmLjE+cSYmKC4yPmQmJihiWzBdLngrPTEpLC4yPmEmJihiWzFdLngrPTEpLC4yPnAmJihiWzJdLngrPTEpKTtsPTA7Zm9yKG09dGhpcy52ZXJ0aWNlcy5sZW5ndGg7bDxtO2wrKyl0aGlzLnZlcnRpY2VzW2xdLm11bHRpcGx5U2NhbGFyKGMpO3RoaXMubWVyZ2VWZXJ0aWNlcygpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKG5ldyBUSFJFRS5WZWN0b3IzLGMpfTtUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlBvbHloZWRyb25HZW9tZXRyeTtcblRIUkVFLkRvZGVjYWhlZHJvbkdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7dmFyIGM9KDErTWF0aC5zcXJ0KDUpKS8yLGQ9MS9jO1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5jYWxsKHRoaXMsWy0xLC0xLC0xLC0xLC0xLDEsLTEsMSwtMSwtMSwxLDEsMSwtMSwtMSwxLC0xLDEsMSwxLC0xLDEsMSwxLDAsLWQsLWMsMCwtZCxjLDAsZCwtYywwLGQsYywtZCwtYywwLC1kLGMsMCxkLC1jLDAsZCxjLDAsLWMsMCwtZCxjLDAsLWQsLWMsMCxkLGMsMCxkXSxbMywxMSw3LDMsNywxNSwzLDE1LDEzLDcsMTksMTcsNywxNyw2LDcsNiwxNSwxNyw0LDgsMTcsOCwxMCwxNywxMCw2LDgsMCwxNiw4LDE2LDIsOCwyLDEwLDAsMTIsMSwwLDEsMTgsMCwxOCwxNiw2LDEwLDIsNiwyLDEzLDYsMTMsMTUsMiwxNiwxOCwyLDE4LDMsMiwzLDEzLDE4LDEsOSwxOCw5LDExLDE4LDExLDMsNCwxNCwxMiw0LDEyLDAsNCwwLDgsMTEsOSw1LDExLDUsMTksMTEsMTksNywxOSw1LDE0LDE5LDE0LDQsMTksNCwxNywxLFxuMTIsMTQsMSwxNCw1LDEsNSw5XSxhLGIpO3RoaXMudHlwZT1cIkRvZGVjYWhlZHJvbkdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn19O1RIUkVFLkRvZGVjYWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkRvZGVjYWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Eb2RlY2FoZWRyb25HZW9tZXRyeTtcblRIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24oYSxiKXt2YXIgYz0oMStNYXRoLnNxcnQoNSkpLzI7VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LmNhbGwodGhpcyxbLTEsYywwLDEsYywwLC0xLC1jLDAsMSwtYywwLDAsLTEsYywwLDEsYywwLC0xLC1jLDAsMSwtYyxjLDAsLTEsYywwLDEsLWMsMCwtMSwtYywwLDFdLFswLDExLDUsMCw1LDEsMCwxLDcsMCw3LDEwLDAsMTAsMTEsMSw1LDksNSwxMSw0LDExLDEwLDIsMTAsNyw2LDcsMSw4LDMsOSw0LDMsNCwyLDMsMiw2LDMsNiw4LDMsOCw5LDQsOSw1LDIsNCwxMSw2LDIsMTAsOCw2LDcsOSw4LDFdLGEsYik7dGhpcy50eXBlPVwiSWNvc2FoZWRyb25HZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsZGV0YWlsOmJ9fTtUSFJFRS5JY29zYWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5wcm90b3R5cGUpO1xuVEhSRUUuSWNvc2FoZWRyb25HZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuSWNvc2FoZWRyb25HZW9tZXRyeTtUSFJFRS5PY3RhaGVkcm9uR2VvbWV0cnk9ZnVuY3Rpb24oYSxiKXtUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkuY2FsbCh0aGlzLFsxLDAsMCwtMSwwLDAsMCwxLDAsMCwtMSwwLDAsMCwxLDAsMCwtMV0sWzAsMiw0LDAsNCwzLDAsMyw1LDAsNSwyLDEsMiw1LDEsNSwzLDEsMyw0LDEsNCwyXSxhLGIpO3RoaXMudHlwZT1cIk9jdGFoZWRyb25HZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsZGV0YWlsOmJ9fTtUSFJFRS5PY3RhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuT2N0YWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5PY3RhaGVkcm9uR2VvbWV0cnk7XG5USFJFRS5UZXRyYWhlZHJvbkdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LmNhbGwodGhpcyxbMSwxLDEsLTEsLTEsMSwtMSwxLC0xLDEsLTEsLTFdLFsyLDEsMCwwLDMsMiwxLDMsMCwyLDMsMV0sYSxiKTt0aGlzLnR5cGU9XCJUZXRyYWhlZHJvbkdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn19O1RIUkVFLlRldHJhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuVGV0cmFoZWRyb25HZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuVGV0cmFoZWRyb25HZW9tZXRyeTtcblRIUkVFLlBhcmFtZXRyaWNHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQYXJhbWV0cmljR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e2Z1bmM6YSxzbGljZXM6YixzdGFja3M6Y307dmFyIGQ9dGhpcy52ZXJ0aWNlcyxlPXRoaXMuZmFjZXMsZj10aGlzLmZhY2VWZXJ0ZXhVdnNbMF0sZyxoLGssbCxtPWIrMTtmb3IoZz0wO2c8PWM7ZysrKWZvcihsPWcvYyxoPTA7aDw9YjtoKyspaz1oL2Isaz1hKGssbCksZC5wdXNoKGspO3ZhciBwLG4scSxyO2ZvcihnPTA7ZzxjO2crKylmb3IoaD0wO2g8YjtoKyspYT1nKm0raCxkPWcqbStoKzEsbD0oZysxKSptK2grMSxrPShnKzEpKm0raCxwPW5ldyBUSFJFRS5WZWN0b3IyKGgvYixnL2MpLG49bmV3IFRIUkVFLlZlY3RvcjIoKGgrMSkvYixnL2MpLHE9bmV3IFRIUkVFLlZlY3RvcjIoKGgrMSkvYiwoZysxKS9jKSxyPW5ldyBUSFJFRS5WZWN0b3IyKGgvYiwoZysxKS9jKSxlLnB1c2gobmV3IFRIUkVFLkZhY2UzKGEsXG5kLGspKSxmLnB1c2goW3AsbixyXSksZS5wdXNoKG5ldyBUSFJFRS5GYWNlMyhkLGwsaykpLGYucHVzaChbbi5jbG9uZSgpLHEsci5jbG9uZSgpXSk7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCl9O1RIUkVFLlBhcmFtZXRyaWNHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlBhcmFtZXRyaWNHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUGFyYW1ldHJpY0dlb21ldHJ5O1xuVEhSRUUuV2lyZWZyYW1lR2VvbWV0cnk9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhLWJ9VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt2YXIgYz1bMCwwXSxkPXt9LGU9W1wiYVwiLFwiYlwiLFwiY1wiXTtpZihhIGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkpe3ZhciBmPWEudmVydGljZXMsZz1hLmZhY2VzLGg9MCxrPW5ldyBVaW50MzJBcnJheSg2KmcubGVuZ3RoKTthPTA7Zm9yKHZhciBsPWcubGVuZ3RoO2E8bDthKyspZm9yKHZhciBtPWdbYV0scD0wOzM+cDtwKyspe2NbMF09bVtlW3BdXTtjWzFdPW1bZVsocCsxKSUzXV07Yy5zb3J0KGIpO3ZhciBuPWMudG9TdHJpbmcoKTt2b2lkIDA9PT1kW25dJiYoa1syKmhdPWNbMF0sa1syKmgrMV09Y1sxXSxkW25dPSEwLGgrKyl9Yz1uZXcgRmxvYXQzMkFycmF5KDYqaCk7YT0wO2ZvcihsPWg7YTxsO2ErKylmb3IocD0wOzI+cDtwKyspZD1mW2tbMiphK3BdXSxoPTYqYSszKnAsY1toKzBdPWQueCxjW2grMV09ZC55LFxuY1toKzJdPWQuejt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShjLDMpKX1lbHNlIGlmKGEgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSl7aWYobnVsbCE9PWEuaW5kZXgpe2w9YS5pbmRleC5hcnJheTtmPWEuYXR0cmlidXRlcy5wb3NpdGlvbjtlPWEuZ3JvdXBzO2g9MDswPT09ZS5sZW5ndGgmJmEuYWRkR3JvdXAoMCxsLmxlbmd0aCk7az1uZXcgVWludDMyQXJyYXkoMipsLmxlbmd0aCk7Zz0wO2ZvcihtPWUubGVuZ3RoO2c8bTsrK2cpe2E9ZVtnXTtwPWEuc3RhcnQ7bj1hLmNvdW50O2E9cDtmb3IodmFyIHE9cCtuO2E8cTthKz0zKWZvcihwPTA7Mz5wO3ArKyljWzBdPWxbYStwXSxjWzFdPWxbYSsocCsxKSUzXSxjLnNvcnQoYiksbj1jLnRvU3RyaW5nKCksdm9pZCAwPT09ZFtuXSYmKGtbMipoXT1jWzBdLGtbMipoKzFdPWNbMV0sZFtuXT0hMCxoKyspfWM9bmV3IEZsb2F0MzJBcnJheSg2KmgpO2E9MDtmb3IobD1oO2E8XG5sO2ErKylmb3IocD0wOzI+cDtwKyspaD02KmErMypwLGQ9a1syKmErcF0sY1toKzBdPWYuZ2V0WChkKSxjW2grMV09Zi5nZXRZKGQpLGNbaCsyXT1mLmdldFooZCl9ZWxzZSBmb3IoZj1hLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXksaD1mLmxlbmd0aC8zLGs9aC8zLGM9bmV3IEZsb2F0MzJBcnJheSg2KmgpLGE9MCxsPWs7YTxsO2ErKylmb3IocD0wOzM+cDtwKyspaD0xOCphKzYqcCxrPTkqYSszKnAsY1toKzBdPWZba10sY1toKzFdPWZbaysxXSxjW2grMl09ZltrKzJdLGQ9OSphKyhwKzEpJTMqMyxjW2grM109ZltkXSxjW2grNF09ZltkKzFdLGNbaCs1XT1mW2QrMl07dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYywzKSl9fTtUSFJFRS5XaXJlZnJhbWVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1xuVEhSRUUuV2lyZWZyYW1lR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLldpcmVmcmFtZUdlb21ldHJ5O1RIUkVFLkF4aXNIZWxwZXI9ZnVuY3Rpb24oYSl7YT1hfHwxO3ZhciBiPW5ldyBGbG9hdDMyQXJyYXkoWzAsMCwwLGEsMCwwLDAsMCwwLDAsYSwwLDAsMCwwLDAsMCxhXSksYz1uZXcgRmxvYXQzMkFycmF5KFsxLDAsMCwxLC42LDAsMCwxLDAsLjYsMSwwLDAsMCwxLDAsLjYsMV0pO2E9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O2EuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGIsMykpO2EuYWRkQXR0cmlidXRlKFwiY29sb3JcIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGMsMykpO2I9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6VEhSRUUuVmVydGV4Q29sb3JzfSk7VEhSRUUuTGluZVNlZ21lbnRzLmNhbGwodGhpcyxhLGIpfTtUSFJFRS5BeGlzSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmVTZWdtZW50cy5wcm90b3R5cGUpO1xuVEhSRUUuQXhpc0hlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQXhpc0hlbHBlcjtcblRIUkVFLkFycm93SGVscGVyPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O2EuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZShbMCwwLDAsMCwxLDBdLDMpKTt2YXIgYj1uZXcgVEhSRUUuQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeSgwLC41LDEsNSwxKTtiLnRyYW5zbGF0ZSgwLC0uNSwwKTtyZXR1cm4gZnVuY3Rpb24oYyxkLGUsZixnLGgpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dm9pZCAwPT09ZiYmKGY9MTY3NzY5NjApO3ZvaWQgMD09PWUmJihlPTEpO3ZvaWQgMD09PWcmJihnPS4yKmUpO3ZvaWQgMD09PWgmJihoPS4yKmcpO3RoaXMucG9zaXRpb24uY29weShkKTt0aGlzLmxpbmU9bmV3IFRIUkVFLkxpbmUoYSxuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOmZ9KSk7dGhpcy5saW5lLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5hZGQodGhpcy5saW5lKTt0aGlzLmNvbmU9bmV3IFRIUkVFLk1lc2goYixcbm5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6Zn0pKTt0aGlzLmNvbmUubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmFkZCh0aGlzLmNvbmUpO3RoaXMuc2V0RGlyZWN0aW9uKGMpO3RoaXMuc2V0TGVuZ3RoKGUsZyxoKX19KCk7VEhSRUUuQXJyb3dIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5BcnJvd0hlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQXJyb3dIZWxwZXI7XG5USFJFRS5BcnJvd0hlbHBlci5wcm90b3R5cGUuc2V0RGlyZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYjtyZXR1cm4gZnVuY3Rpb24oYyl7Ljk5OTk5PGMueT90aGlzLnF1YXRlcm5pb24uc2V0KDAsMCwwLDEpOi0uOTk5OTk+Yy55P3RoaXMucXVhdGVybmlvbi5zZXQoMSwwLDAsMCk6KGEuc2V0KGMueiwwLC1jLngpLm5vcm1hbGl6ZSgpLGI9TWF0aC5hY29zKGMueSksdGhpcy5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoYSxiKSl9fSgpO1RIUkVFLkFycm93SGVscGVyLnByb3RvdHlwZS5zZXRMZW5ndGg9ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMD09PWImJihiPS4yKmEpO3ZvaWQgMD09PWMmJihjPS4yKmIpO3RoaXMubGluZS5zY2FsZS5zZXQoMSxNYXRoLm1heCgwLGEtYiksMSk7dGhpcy5saW5lLnVwZGF0ZU1hdHJpeCgpO3RoaXMuY29uZS5zY2FsZS5zZXQoYyxiLGMpO3RoaXMuY29uZS5wb3NpdGlvbi55PWE7dGhpcy5jb25lLnVwZGF0ZU1hdHJpeCgpfTtcblRIUkVFLkFycm93SGVscGVyLnByb3RvdHlwZS5zZXRDb2xvcj1mdW5jdGlvbihhKXt0aGlzLmxpbmUubWF0ZXJpYWwuY29sb3IuY29weShhKTt0aGlzLmNvbmUubWF0ZXJpYWwuY29sb3IuY29weShhKX07VEhSRUUuQm94SGVscGVyPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MTY3NzY5NjApO3ZhciBjPW5ldyBVaW50MTZBcnJheShbMCwxLDEsMiwyLDMsMywwLDQsNSw1LDYsNiw3LDcsNCwwLDQsMSw1LDIsNiwzLDddKSxkPW5ldyBGbG9hdDMyQXJyYXkoMjQpLGU9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O2Uuc2V0SW5kZXgobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShjLDEpKTtlLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShkLDMpKTtUSFJFRS5MaW5lU2VnbWVudHMuY2FsbCh0aGlzLGUsbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjpifSkpO3ZvaWQgMCE9PWEmJnRoaXMudXBkYXRlKGEpfTtcblRIUkVFLkJveEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lU2VnbWVudHMucHJvdG90eXBlKTtUSFJFRS5Cb3hIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkJveEhlbHBlcjtcblRIUkVFLkJveEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLkJveDM7cmV0dXJuIGZ1bmN0aW9uKGIpe2IgaW5zdGFuY2VvZiBUSFJFRS5Cb3gzP2EuY29weShiKTphLnNldEZyb21PYmplY3QoYik7aWYoIWEuaXNFbXB0eSgpKXtiPWEubWluO3ZhciBjPWEubWF4LGQ9dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLGU9ZC5hcnJheTtlWzBdPWMueDtlWzFdPWMueTtlWzJdPWMuejtlWzNdPWIueDtlWzRdPWMueTtlWzVdPWMuejtlWzZdPWIueDtlWzddPWIueTtlWzhdPWMuejtlWzldPWMueDtlWzEwXT1iLnk7ZVsxMV09Yy56O2VbMTJdPWMueDtlWzEzXT1jLnk7ZVsxNF09Yi56O2VbMTVdPWIueDtlWzE2XT1jLnk7ZVsxN109Yi56O2VbMThdPWIueDtlWzE5XT1iLnk7ZVsyMF09Yi56O2VbMjFdPWMueDtlWzIyXT1iLnk7ZVsyM109Yi56O2QubmVlZHNVcGRhdGU9ITA7dGhpcy5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKX19fSgpO1xuVEhSRUUuQm91bmRpbmdCb3hIZWxwZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz12b2lkIDAhPT1iP2I6ODk0Nzg0ODt0aGlzLm9iamVjdD1hO3RoaXMuYm94PW5ldyBUSFJFRS5Cb3gzO1RIUkVFLk1lc2guY2FsbCh0aGlzLG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgxLDEsMSksbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjpjLHdpcmVmcmFtZTohMH0pKX07VEhSRUUuQm91bmRpbmdCb3hIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1RIUkVFLkJvdW5kaW5nQm94SGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Cb3VuZGluZ0JveEhlbHBlcjtUSFJFRS5Cb3VuZGluZ0JveEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5ib3guc2V0RnJvbU9iamVjdCh0aGlzLm9iamVjdCk7dGhpcy5ib3guc2l6ZSh0aGlzLnNjYWxlKTt0aGlzLmJveC5jZW50ZXIodGhpcy5wb3NpdGlvbil9O1xuVEhSRUUuQ2FtZXJhSGVscGVyPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGQpe2MoYSxkKTtjKGIsZCl9ZnVuY3Rpb24gYyhhLGIpe2QudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyk7ZC5jb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IoYikpO3ZvaWQgMD09PWZbYV0mJihmW2FdPVtdKTtmW2FdLnB1c2goZC52ZXJ0aWNlcy5sZW5ndGgtMSl9dmFyIGQ9bmV3IFRIUkVFLkdlb21ldHJ5LGU9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjoxNjc3NzIxNSx2ZXJ0ZXhDb2xvcnM6VEhSRUUuRmFjZUNvbG9yc30pLGY9e307YihcIm4xXCIsXCJuMlwiLDE2NzU1MjAwKTtiKFwibjJcIixcIm40XCIsMTY3NTUyMDApO2IoXCJuNFwiLFwibjNcIiwxNjc1NTIwMCk7YihcIm4zXCIsXCJuMVwiLDE2NzU1MjAwKTtiKFwiZjFcIixcImYyXCIsMTY3NTUyMDApO2IoXCJmMlwiLFwiZjRcIiwxNjc1NTIwMCk7YihcImY0XCIsXCJmM1wiLDE2NzU1MjAwKTtiKFwiZjNcIixcImYxXCIsMTY3NTUyMDApO2IoXCJuMVwiLFwiZjFcIiwxNjc1NTIwMCk7XG5iKFwibjJcIixcImYyXCIsMTY3NTUyMDApO2IoXCJuM1wiLFwiZjNcIiwxNjc1NTIwMCk7YihcIm40XCIsXCJmNFwiLDE2NzU1MjAwKTtiKFwicFwiLFwibjFcIiwxNjcxMTY4MCk7YihcInBcIixcIm4yXCIsMTY3MTE2ODApO2IoXCJwXCIsXCJuM1wiLDE2NzExNjgwKTtiKFwicFwiLFwibjRcIiwxNjcxMTY4MCk7YihcInUxXCIsXCJ1MlwiLDQzNzc1KTtiKFwidTJcIixcInUzXCIsNDM3NzUpO2IoXCJ1M1wiLFwidTFcIiw0Mzc3NSk7YihcImNcIixcInRcIiwxNjc3NzIxNSk7YihcInBcIixcImNcIiwzMzU1NDQzKTtiKFwiY24xXCIsXCJjbjJcIiwzMzU1NDQzKTtiKFwiY24zXCIsXCJjbjRcIiwzMzU1NDQzKTtiKFwiY2YxXCIsXCJjZjJcIiwzMzU1NDQzKTtiKFwiY2YzXCIsXCJjZjRcIiwzMzU1NDQzKTtUSFJFRS5MaW5lU2VnbWVudHMuY2FsbCh0aGlzLGQsZSk7dGhpcy5jYW1lcmE9YTt0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4JiZ0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7dGhpcy5tYXRyaXg9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9XG4hMTt0aGlzLnBvaW50TWFwPWY7dGhpcy51cGRhdGUoKX07VEhSRUUuQ2FtZXJhSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmVTZWdtZW50cy5wcm90b3R5cGUpO1RIUkVFLkNhbWVyYUhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ2FtZXJhSGVscGVyO1xuVEhSRUUuQ2FtZXJhSGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZyxoLGspe2Quc2V0KGcsaCxrKS51bnByb2plY3QoZSk7YT1jW2FdO2lmKHZvaWQgMCE9PWEpZm9yKGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspYi52ZXJ0aWNlc1thW2ddXS5jb3B5KGQpfXZhciBiLGMsZD1uZXcgVEhSRUUuVmVjdG9yMyxlPW5ldyBUSFJFRS5DYW1lcmE7cmV0dXJuIGZ1bmN0aW9uKCl7Yj10aGlzLmdlb21ldHJ5O2M9dGhpcy5wb2ludE1hcDtlLnByb2plY3Rpb25NYXRyaXguY29weSh0aGlzLmNhbWVyYS5wcm9qZWN0aW9uTWF0cml4KTthKFwiY1wiLDAsMCwtMSk7YShcInRcIiwwLDAsMSk7YShcIm4xXCIsLTEsLTEsLTEpO2EoXCJuMlwiLDEsLTEsLTEpO2EoXCJuM1wiLC0xLDEsLTEpO2EoXCJuNFwiLDEsMSwtMSk7YShcImYxXCIsLTEsLTEsMSk7YShcImYyXCIsMSwtMSwxKTthKFwiZjNcIiwtMSwxLDEpO2EoXCJmNFwiLDEsMSwxKTthKFwidTFcIiwuNywxLjEsLTEpO2EoXCJ1MlwiLC0uNywxLjEsXG4tMSk7YShcInUzXCIsMCwyLC0xKTthKFwiY2YxXCIsLTEsMCwxKTthKFwiY2YyXCIsMSwwLDEpO2EoXCJjZjNcIiwwLC0xLDEpO2EoXCJjZjRcIiwwLDEsMSk7YShcImNuMVwiLC0xLDAsLTEpO2EoXCJjbjJcIiwxLDAsLTEpO2EoXCJjbjNcIiwwLC0xLC0xKTthKFwiY240XCIsMCwxLC0xKTtiLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMH19KCk7XG5USFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyPWZ1bmN0aW9uKGEsYil7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3RoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3ZvaWQgMD09PWImJihiPTEpO3ZhciBjPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeTtjLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoWy1iLGIsMCxiLGIsMCxiLC1iLDAsLWIsLWIsMCwtYixiLDBdLDMpKTt2YXIgZD1uZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2ZvZzohMX0pO3RoaXMuYWRkKG5ldyBUSFJFRS5MaW5lKGMsZCkpO2M9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O2MuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZShbMCwwLDAsMCwwLDFdLDMpKTt0aGlzLmFkZChuZXcgVEhSRUUuTGluZShjLFxuZCkpO3RoaXMudXBkYXRlKCl9O1RIUkVFLkRpcmVjdGlvbmFsTGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyO1RIUkVFLkRpcmVjdGlvbmFsTGlnaHRIZWxwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNoaWxkcmVuWzBdLGI9dGhpcy5jaGlsZHJlblsxXTthLmdlb21ldHJ5LmRpc3Bvc2UoKTthLm1hdGVyaWFsLmRpc3Bvc2UoKTtiLmdlb21ldHJ5LmRpc3Bvc2UoKTtiLm1hdGVyaWFsLmRpc3Bvc2UoKX07XG5USFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCk7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC50YXJnZXQubWF0cml4V29ybGQpO2Muc3ViVmVjdG9ycyhiLGEpO3ZhciBkPXRoaXMuY2hpbGRyZW5bMF0sZT10aGlzLmNoaWxkcmVuWzFdO2QubG9va0F0KGMpO2QubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSk7ZS5sb29rQXQoYyk7ZS5zY2FsZS56PWMubGVuZ3RoKCl9fSgpO1xuVEhSRUUuRWRnZXNIZWxwZXI9ZnVuY3Rpb24oYSxiLGMpe2I9dm9pZCAwIT09Yj9iOjE2Nzc3MjE1O1RIUkVFLkxpbmVTZWdtZW50cy5jYWxsKHRoaXMsbmV3IFRIUkVFLkVkZ2VzR2VvbWV0cnkoYS5nZW9tZXRyeSxjKSxuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOmJ9KSk7dGhpcy5tYXRyaXg9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITF9O1RIUkVFLkVkZ2VzSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmVTZWdtZW50cy5wcm90b3R5cGUpO1RIUkVFLkVkZ2VzSGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5FZGdlc0hlbHBlcjtcblRIUkVFLkZhY2VOb3JtYWxzSGVscGVyPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMub2JqZWN0PWE7dGhpcy5zaXplPXZvaWQgMCE9PWI/YjoxO2E9dm9pZCAwIT09Yz9jOjE2Nzc2OTYwO2Q9dm9pZCAwIT09ZD9kOjE7Yj0wO2M9dGhpcy5vYmplY3QuZ2VvbWV0cnk7YyBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5P2I9Yy5mYWNlcy5sZW5ndGg6Y29uc29sZS53YXJuKFwiVEhSRUUuRmFjZU5vcm1hbHNIZWxwZXI6IG9ubHkgVEhSRUUuR2VvbWV0cnkgaXMgc3VwcG9ydGVkLiBVc2UgVEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlciwgaW5zdGVhZC5cIik7Yz1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnk7Yj1uZXcgVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZSg2KmIsMyk7Yy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLGIpO1RIUkVFLkxpbmVTZWdtZW50cy5jYWxsKHRoaXMsYyxuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOmEsbGluZXdpZHRoOmR9KSk7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPVxuITE7dGhpcy51cGRhdGUoKX07VEhSRUUuRmFjZU5vcm1hbHNIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZSk7VEhSRUUuRmFjZU5vcm1hbHNIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkZhY2VOb3JtYWxzSGVscGVyO1xuVEhSRUUuRmFjZU5vcm1hbHNIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuTWF0cml4MztyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLm9iamVjdC51cGRhdGVNYXRyaXhXb3JsZCghMCk7Yy5nZXROb3JtYWxNYXRyaXgodGhpcy5vYmplY3QubWF0cml4V29ybGQpO2Zvcih2YXIgZD10aGlzLm9iamVjdC5tYXRyaXhXb3JsZCxlPXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbixmPXRoaXMub2JqZWN0Lmdlb21ldHJ5LGc9Zi52ZXJ0aWNlcyxmPWYuZmFjZXMsaD0wLGs9MCxsPWYubGVuZ3RoO2s8bDtrKyspe3ZhciBtPWZba10scD1tLm5vcm1hbDthLmNvcHkoZ1ttLmFdKS5hZGQoZ1ttLmJdKS5hZGQoZ1ttLmNdKS5kaXZpZGVTY2FsYXIoMykuYXBwbHlNYXRyaXg0KGQpO2IuY29weShwKS5hcHBseU1hdHJpeDMoYykubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIodGhpcy5zaXplKS5hZGQoYSk7XG5lLnNldFhZWihoLGEueCxhLnksYS56KTtoKz0xO2Uuc2V0WFlaKGgsYi54LGIueSxiLnopO2grPTF9ZS5uZWVkc1VwZGF0ZT0hMDtyZXR1cm4gdGhpc319KCk7XG5USFJFRS5HcmlkSGVscGVyPWZ1bmN0aW9uKGEsYixjLGQpe2I9Ynx8MTtjPW5ldyBUSFJFRS5Db2xvcih2b2lkIDAhPT1jP2M6NDQ3MzkyNCk7ZD1uZXcgVEhSRUUuQ29sb3Iodm9pZCAwIT09ZD9kOjg5NDc4NDgpO2Zvcih2YXIgZT1iLzIsZj0yKmEvYixnPVtdLGg9W10saz0wLGw9MCxtPS1hO2s8PWI7aysrLG0rPWYpe2cucHVzaCgtYSwwLG0sYSwwLG0pO2cucHVzaChtLDAsLWEsbSwwLGEpO3ZhciBwPWs9PT1lP2M6ZDtwLnRvQXJyYXkoaCxsKTtsKz0zO3AudG9BcnJheShoLGwpO2wrPTM7cC50b0FycmF5KGgsbCk7bCs9MztwLnRvQXJyYXkoaCxsKTtsKz0zfWE9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O2EuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZShnLDMpKTthLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoaCwzKSk7Zz1uZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe3ZlcnRleENvbG9yczpUSFJFRS5WZXJ0ZXhDb2xvcnN9KTtcblRIUkVFLkxpbmVTZWdtZW50cy5jYWxsKHRoaXMsYSxnKX07VEhSRUUuR3JpZEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lU2VnbWVudHMucHJvdG90eXBlKTtUSFJFRS5HcmlkSGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5HcmlkSGVscGVyO1RIUkVFLkdyaWRIZWxwZXIucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5HcmlkSGVscGVyOiBzZXRDb2xvcnMoKSBoYXMgYmVlbiBkZXByZWNhdGVkLCBwYXNzIHRoZW0gaW4gdGhlIGNvbnN0cnVjdG9yIGluc3RlYWQuXCIpfTtcblRIUkVFLkhlbWlzcGhlcmVMaWdodEhlbHBlcj1mdW5jdGlvbihhLGIpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmNvbG9ycz1bbmV3IFRIUkVFLkNvbG9yLG5ldyBUSFJFRS5Db2xvcl07dmFyIGM9bmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KGIsNCwyKTtjLnJvdGF0ZVgoLU1hdGguUEkvMik7Zm9yKHZhciBkPTA7OD5kO2QrKyljLmZhY2VzW2RdLmNvbG9yPXRoaXMuY29sb3JzWzQ+ZD8wOjFdO2Q9bmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6VEhSRUUuRmFjZUNvbG9ycyx3aXJlZnJhbWU6ITB9KTt0aGlzLmxpZ2h0U3BoZXJlPW5ldyBUSFJFRS5NZXNoKGMsZCk7dGhpcy5hZGQodGhpcy5saWdodFNwaGVyZSk7dGhpcy51cGRhdGUoKX07XG5USFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkhlbWlzcGhlcmVMaWdodEhlbHBlcjtUSFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmxpZ2h0U3BoZXJlLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLmxpZ2h0U3BoZXJlLm1hdGVyaWFsLmRpc3Bvc2UoKX07XG5USFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe3RoaXMuY29sb3JzWzBdLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO3RoaXMuY29sb3JzWzFdLmNvcHkodGhpcy5saWdodC5ncm91bmRDb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO3RoaXMubGlnaHRTcGhlcmUubG9va0F0KGEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpLm5lZ2F0ZSgpKTt0aGlzLmxpZ2h0U3BoZXJlLmdlb21ldHJ5LmNvbG9yc05lZWRVcGRhdGU9ITB9fSgpO1xuVEhSRUUuUG9pbnRMaWdodEhlbHBlcj1mdW5jdGlvbihhLGIpe3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dmFyIGM9bmV3IFRIUkVFLlNwaGVyZUJ1ZmZlckdlb21ldHJ5KGIsNCwyKSxkPW5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7d2lyZWZyYW1lOiEwLGZvZzohMX0pO2QuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSk7VEhSRUUuTWVzaC5jYWxsKHRoaXMsYyxkKTt0aGlzLm1hdHJpeD10aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMX07VEhSRUUuUG9pbnRMaWdodEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NZXNoLnByb3RvdHlwZSk7VEhSRUUuUG9pbnRMaWdodEhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUG9pbnRMaWdodEhlbHBlcjtcblRIUkVFLlBvaW50TGlnaHRIZWxwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLm1hdGVyaWFsLmRpc3Bvc2UoKX07VEhSRUUuUG9pbnRMaWdodEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KX07XG5USFJFRS5Ta2VsZXRvbkhlbHBlcj1mdW5jdGlvbihhKXt0aGlzLmJvbmVzPXRoaXMuZ2V0Qm9uZUxpc3QoYSk7Zm9yKHZhciBiPW5ldyBUSFJFRS5HZW9tZXRyeSxjPTA7Yzx0aGlzLmJvbmVzLmxlbmd0aDtjKyspdGhpcy5ib25lc1tjXS5wYXJlbnQgaW5zdGFuY2VvZiBUSFJFRS5Cb25lJiYoYi52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKSxiLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpLGIuY29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKDAsMCwxKSksYi5jb2xvcnMucHVzaChuZXcgVEhSRUUuQ29sb3IoMCwxLDApKSk7Yi5keW5hbWljPSEwO2M9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6VEhSRUUuVmVydGV4Q29sb3JzLGRlcHRoVGVzdDohMSxkZXB0aFdyaXRlOiExLHRyYW5zcGFyZW50OiEwfSk7VEhSRUUuTGluZVNlZ21lbnRzLmNhbGwodGhpcyxiLGMpO3RoaXMucm9vdD1hO3RoaXMubWF0cml4PWEubWF0cml4V29ybGQ7XG50aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy51cGRhdGUoKX07VEhSRUUuU2tlbGV0b25IZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZSk7VEhSRUUuU2tlbGV0b25IZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNrZWxldG9uSGVscGVyO1RIUkVFLlNrZWxldG9uSGVscGVyLnByb3RvdHlwZS5nZXRCb25lTGlzdD1mdW5jdGlvbihhKXt2YXIgYj1bXTthIGluc3RhbmNlb2YgVEhSRUUuQm9uZSYmYi5wdXNoKGEpO2Zvcih2YXIgYz0wO2M8YS5jaGlsZHJlbi5sZW5ndGg7YysrKWIucHVzaC5hcHBseShiLHRoaXMuZ2V0Qm9uZUxpc3QoYS5jaGlsZHJlbltjXSkpO3JldHVybiBifTtcblRIUkVFLlNrZWxldG9uSGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5nZW9tZXRyeSxiPShuZXcgVEhSRUUuTWF0cml4NCkuZ2V0SW52ZXJzZSh0aGlzLnJvb3QubWF0cml4V29ybGQpLGM9bmV3IFRIUkVFLk1hdHJpeDQsZD0wLGU9MDtlPHRoaXMuYm9uZXMubGVuZ3RoO2UrKyl7dmFyIGY9dGhpcy5ib25lc1tlXTtmLnBhcmVudCBpbnN0YW5jZW9mIFRIUkVFLkJvbmUmJihjLm11bHRpcGx5TWF0cmljZXMoYixmLm1hdHJpeFdvcmxkKSxhLnZlcnRpY2VzW2RdLnNldEZyb21NYXRyaXhQb3NpdGlvbihjKSxjLm11bHRpcGx5TWF0cmljZXMoYixmLnBhcmVudC5tYXRyaXhXb3JsZCksYS52ZXJ0aWNlc1tkKzFdLnNldEZyb21NYXRyaXhQb3NpdGlvbihjKSxkKz0yKX1hLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMDthLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpfTtcblRIUkVFLlNwb3RMaWdodEhlbHBlcj1mdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXg9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7YT1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnk7Zm9yKHZhciBiPVswLDAsMCwwLDAsMSwwLDAsMCwxLDAsMSwwLDAsMCwtMSwwLDEsMCwwLDAsMCwxLDEsMCwwLDAsMCwtMSwxXSxjPTAsZD0xOzMyPmM7YysrLGQrKyl7dmFyIGU9Yy8zMipNYXRoLlBJKjIsZj1kLzMyKk1hdGguUEkqMjtiLnB1c2goTWF0aC5jb3MoZSksTWF0aC5zaW4oZSksMSxNYXRoLmNvcyhmKSxNYXRoLnNpbihmKSwxKX1hLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoYiwzKSk7Yj1uZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe2ZvZzohMX0pO3RoaXMuY29uZT1uZXcgVEhSRUUuTGluZVNlZ21lbnRzKGEsXG5iKTt0aGlzLmFkZCh0aGlzLmNvbmUpO3RoaXMudXBkYXRlKCl9O1RIUkVFLlNwb3RMaWdodEhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLlNwb3RMaWdodEhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuU3BvdExpZ2h0SGVscGVyO1RIUkVFLlNwb3RMaWdodEhlbHBlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuY29uZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5jb25lLm1hdGVyaWFsLmRpc3Bvc2UoKX07XG5USFJFRS5TcG90TGlnaHRIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5saWdodC5kaXN0YW5jZT90aGlzLmxpZ2h0LmRpc3RhbmNlOjFFMyxkPWMqTWF0aC50YW4odGhpcy5saWdodC5hbmdsZSk7dGhpcy5jb25lLnNjYWxlLnNldChkLGQsYyk7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCk7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC50YXJnZXQubWF0cml4V29ybGQpO3RoaXMuY29uZS5sb29rQXQoYi5zdWIoYSkpO3RoaXMuY29uZS5tYXRlcmlhbC5jb2xvci5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KX19KCk7XG5USFJFRS5WZXJ0ZXhOb3JtYWxzSGVscGVyPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMub2JqZWN0PWE7dGhpcy5zaXplPXZvaWQgMCE9PWI/YjoxO2E9dm9pZCAwIT09Yz9jOjE2NzExNjgwO2Q9dm9pZCAwIT09ZD9kOjE7Yj0wO2M9dGhpcy5vYmplY3QuZ2VvbWV0cnk7YyBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5P2I9MypjLmZhY2VzLmxlbmd0aDpjIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkmJihiPWMuYXR0cmlidXRlcy5ub3JtYWwuY291bnQpO2M9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O2I9bmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoNipiLDMpO2MuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixiKTtUSFJFRS5MaW5lU2VnbWVudHMuY2FsbCh0aGlzLGMsbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjphLGxpbmV3aWR0aDpkfSkpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLnVwZGF0ZSgpfTtcblRIUkVFLlZlcnRleE5vcm1hbHNIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZSk7VEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlcjtcblRIUkVFLlZlcnRleE5vcm1hbHNIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuTWF0cml4MztyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1bXCJhXCIsXCJiXCIsXCJjXCJdO3RoaXMub2JqZWN0LnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTtjLmdldE5vcm1hbE1hdHJpeCh0aGlzLm9iamVjdC5tYXRyaXhXb3JsZCk7dmFyIGU9dGhpcy5vYmplY3QubWF0cml4V29ybGQsZj10aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24sZz10aGlzLm9iamVjdC5nZW9tZXRyeTtpZihnIGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkpZm9yKHZhciBoPWcudmVydGljZXMsaz1nLmZhY2VzLGw9Zz0wLG09ay5sZW5ndGg7bDxtO2wrKylmb3IodmFyIHA9a1tsXSxuPTAscT1wLnZlcnRleE5vcm1hbHMubGVuZ3RoO248cTtuKyspe3ZhciByPXAudmVydGV4Tm9ybWFsc1tuXTthLmNvcHkoaFtwW2Rbbl1dXSkuYXBwbHlNYXRyaXg0KGUpO1xuYi5jb3B5KHIpLmFwcGx5TWF0cml4MyhjKS5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0aGlzLnNpemUpLmFkZChhKTtmLnNldFhZWihnLGEueCxhLnksYS56KTtnKz0xO2Yuc2V0WFlaKGcsYi54LGIueSxiLnopO2crPTF9ZWxzZSBpZihnIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkpZm9yKGQ9Zy5hdHRyaWJ1dGVzLnBvc2l0aW9uLGg9Zy5hdHRyaWJ1dGVzLm5vcm1hbCxuPWc9MCxxPWQuY291bnQ7bjxxO24rKylhLnNldChkLmdldFgobiksZC5nZXRZKG4pLGQuZ2V0WihuKSkuYXBwbHlNYXRyaXg0KGUpLGIuc2V0KGguZ2V0WChuKSxoLmdldFkobiksaC5nZXRaKG4pKSxiLmFwcGx5TWF0cml4MyhjKS5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0aGlzLnNpemUpLmFkZChhKSxmLnNldFhZWihnLGEueCxhLnksYS56KSxnKz0xLGYuc2V0WFlaKGcsYi54LGIueSxiLnopLGcrPTE7Zi5uZWVkc1VwZGF0ZT0hMDtyZXR1cm4gdGhpc319KCk7XG5USFJFRS5XaXJlZnJhbWVIZWxwZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz12b2lkIDAhPT1iP2I6MTY3NzcyMTU7VEhSRUUuTGluZVNlZ21lbnRzLmNhbGwodGhpcyxuZXcgVEhSRUUuV2lyZWZyYW1lR2VvbWV0cnkoYS5nZW9tZXRyeSksbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjpjfSkpO3RoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExfTtUSFJFRS5XaXJlZnJhbWVIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZSk7VEhSRUUuV2lyZWZyYW1lSGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5XaXJlZnJhbWVIZWxwZXI7VEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0PWZ1bmN0aW9uKGEpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5tYXRlcmlhbD1hO3RoaXMucmVuZGVyPWZ1bmN0aW9uKGEpe319O1xuVEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5JbW1lZGlhdGVSZW5kZXJPYmplY3Q7VEhSRUUuTW9ycGhCbGVuZE1lc2g9ZnVuY3Rpb24oYSxiKXtUSFJFRS5NZXNoLmNhbGwodGhpcyxhLGIpO3RoaXMuYW5pbWF0aW9uc01hcD17fTt0aGlzLmFuaW1hdGlvbnNMaXN0PVtdO3ZhciBjPXRoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aDt0aGlzLmNyZWF0ZUFuaW1hdGlvbihcIl9fZGVmYXVsdFwiLDAsYy0xLGMvMSk7dGhpcy5zZXRBbmltYXRpb25XZWlnaHQoXCJfX2RlZmF1bHRcIiwxKX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Nb3JwaEJsZW5kTWVzaDtcblRIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5jcmVhdGVBbmltYXRpb249ZnVuY3Rpb24oYSxiLGMsZCl7Yj17c3RhcnQ6YixlbmQ6YyxsZW5ndGg6Yy1iKzEsZnBzOmQsZHVyYXRpb246KGMtYikvZCxsYXN0RnJhbWU6MCxjdXJyZW50RnJhbWU6MCxhY3RpdmU6ITEsdGltZTowLGRpcmVjdGlvbjoxLHdlaWdodDoxLGRpcmVjdGlvbkJhY2t3YXJkczohMSxtaXJyb3JlZExvb3A6ITF9O3RoaXMuYW5pbWF0aW9uc01hcFthXT1iO3RoaXMuYW5pbWF0aW9uc0xpc3QucHVzaChiKX07XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuYXV0b0NyZWF0ZUFuaW1hdGlvbnM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPS8oW2Etel0rKV8/KFxcZCspL2ksYyxkPXt9LGU9dGhpcy5nZW9tZXRyeSxmPTAsZz1lLm1vcnBoVGFyZ2V0cy5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9ZS5tb3JwaFRhcmdldHNbZl0ubmFtZS5tYXRjaChiKTtpZihoJiYxPGgubGVuZ3RoKXt2YXIgaz1oWzFdO2Rba118fChkW2tdPXtzdGFydDpJbmZpbml0eSxlbmQ6LUluZmluaXR5fSk7aD1kW2tdO2Y8aC5zdGFydCYmKGguc3RhcnQ9Zik7Zj5oLmVuZCYmKGguZW5kPWYpO2N8fChjPWspfX1mb3IoayBpbiBkKWg9ZFtrXSx0aGlzLmNyZWF0ZUFuaW1hdGlvbihrLGguc3RhcnQsaC5lbmQsYSk7dGhpcy5maXJzdEFuaW1hdGlvbj1jfTtcblRIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25EaXJlY3Rpb25Gb3J3YXJkPWZ1bmN0aW9uKGEpe2lmKGE9dGhpcy5hbmltYXRpb25zTWFwW2FdKWEuZGlyZWN0aW9uPTEsYS5kaXJlY3Rpb25CYWNrd2FyZHM9ITF9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25EaXJlY3Rpb25CYWNrd2FyZD1mdW5jdGlvbihhKXtpZihhPXRoaXMuYW5pbWF0aW9uc01hcFthXSlhLmRpcmVjdGlvbj0tMSxhLmRpcmVjdGlvbkJhY2t3YXJkcz0hMH07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvbkZQUz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYW5pbWF0aW9uc01hcFthXTtjJiYoYy5mcHM9YixjLmR1cmF0aW9uPShjLmVuZC1jLnN0YXJ0KS9jLmZwcyl9O1xuVEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvbkR1cmF0aW9uPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hbmltYXRpb25zTWFwW2FdO2MmJihjLmR1cmF0aW9uPWIsYy5mcHM9KGMuZW5kLWMuc3RhcnQpL2MuZHVyYXRpb24pfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uV2VpZ2h0PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hbmltYXRpb25zTWFwW2FdO2MmJihjLndlaWdodD1iKX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvblRpbWU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFuaW1hdGlvbnNNYXBbYV07YyYmKGMudGltZT1iKX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLmdldEFuaW1hdGlvblRpbWU9ZnVuY3Rpb24oYSl7dmFyIGI9MDtpZihhPXRoaXMuYW5pbWF0aW9uc01hcFthXSliPWEudGltZTtyZXR1cm4gYn07XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuZ2V0QW5pbWF0aW9uRHVyYXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9LTE7aWYoYT10aGlzLmFuaW1hdGlvbnNNYXBbYV0pYj1hLmR1cmF0aW9uO3JldHVybiBifTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUucGxheUFuaW1hdGlvbj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmFuaW1hdGlvbnNNYXBbYV07Yj8oYi50aW1lPTAsYi5hY3RpdmU9ITApOmNvbnNvbGUud2FybihcIlRIUkVFLk1vcnBoQmxlbmRNZXNoOiBhbmltYXRpb25bXCIrYStcIl0gdW5kZWZpbmVkIGluIC5wbGF5QW5pbWF0aW9uKClcIil9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zdG9wQW5pbWF0aW9uPWZ1bmN0aW9uKGEpe2lmKGE9dGhpcy5hbmltYXRpb25zTWFwW2FdKWEuYWN0aXZlPSExfTtcblRIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmFuaW1hdGlvbnNMaXN0Lmxlbmd0aDtiPGM7YisrKXt2YXIgZD10aGlzLmFuaW1hdGlvbnNMaXN0W2JdO2lmKGQuYWN0aXZlKXt2YXIgZT1kLmR1cmF0aW9uL2QubGVuZ3RoO2QudGltZSs9ZC5kaXJlY3Rpb24qYTtpZihkLm1pcnJvcmVkTG9vcCl7aWYoZC50aW1lPmQuZHVyYXRpb258fDA+ZC50aW1lKWQuZGlyZWN0aW9uKj0tMSxkLnRpbWU+ZC5kdXJhdGlvbiYmKGQudGltZT1kLmR1cmF0aW9uLGQuZGlyZWN0aW9uQmFja3dhcmRzPSEwKSwwPmQudGltZSYmKGQudGltZT0wLGQuZGlyZWN0aW9uQmFja3dhcmRzPSExKX1lbHNlIGQudGltZSU9ZC5kdXJhdGlvbiwwPmQudGltZSYmKGQudGltZSs9ZC5kdXJhdGlvbik7dmFyIGY9ZC5zdGFydCtUSFJFRS5NYXRoLmNsYW1wKE1hdGguZmxvb3IoZC50aW1lL2UpLDAsZC5sZW5ndGgtMSksZz1kLndlaWdodDtmIT09ZC5jdXJyZW50RnJhbWUmJlxuKHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2QubGFzdEZyYW1lXT0wLHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2QuY3VycmVudEZyYW1lXT0xKmcsdGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbZl09MCxkLmxhc3RGcmFtZT1kLmN1cnJlbnRGcmFtZSxkLmN1cnJlbnRGcmFtZT1mKTtlPWQudGltZSVlL2U7ZC5kaXJlY3Rpb25CYWNrd2FyZHMmJihlPTEtZSk7ZC5jdXJyZW50RnJhbWUhPT1kLmxhc3RGcmFtZT8odGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbZC5jdXJyZW50RnJhbWVdPWUqZyx0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tkLmxhc3RGcmFtZV09KDEtZSkqZyk6dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbZC5jdXJyZW50RnJhbWVdPWd9fX07XG4iLCIvKipcbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXG4gKiBAYXV0aG9yIHN1cGVyZWdnYmVydCAvIGh0dHA6Ly93d3cucGF1bGJydW50LmNvLnVrL1xuICogQGF1dGhvciBqdWxpYW53YSAvIGh0dHBzOi8vZ2l0aHViLmNvbS9qdWxpYW53YVxuICovXG5cblRIUkVFLlJlbmRlcmFibGVPYmplY3QgPSBmdW5jdGlvbiAoKSB7XG5cblx0dGhpcy5pZCA9IDA7XG5cblx0dGhpcy5vYmplY3QgPSBudWxsO1xuXHR0aGlzLnogPSAwO1xuXHR0aGlzLnJlbmRlck9yZGVyID0gMDtcblxufTtcblxuLy9cblxuVEhSRUUuUmVuZGVyYWJsZUZhY2UgPSBmdW5jdGlvbiAoKSB7XG5cblx0dGhpcy5pZCA9IDA7XG5cblx0dGhpcy52MSA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4KCk7XG5cdHRoaXMudjIgPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleCgpO1xuXHR0aGlzLnYzID0gbmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXgoKTtcblxuXHR0aGlzLm5vcm1hbE1vZGVsID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuXHR0aGlzLnZlcnRleE5vcm1hbHNNb2RlbCA9IFsgbmV3IFRIUkVFLlZlY3RvcjMoKSwgbmV3IFRIUkVFLlZlY3RvcjMoKSwgbmV3IFRIUkVFLlZlY3RvcjMoKSBdO1xuXHR0aGlzLnZlcnRleE5vcm1hbHNMZW5ndGggPSAwO1xuXG5cdHRoaXMuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKTtcblx0dGhpcy5tYXRlcmlhbCA9IG51bGw7XG5cdHRoaXMudXZzID0gWyBuZXcgVEhSRUUuVmVjdG9yMigpLCBuZXcgVEhSRUUuVmVjdG9yMigpLCBuZXcgVEhSRUUuVmVjdG9yMigpIF07XG5cblx0dGhpcy56ID0gMDtcblx0dGhpcy5yZW5kZXJPcmRlciA9IDA7XG5cbn07XG5cbi8vXG5cblRIUkVFLlJlbmRlcmFibGVWZXJ0ZXggPSBmdW5jdGlvbiAoKSB7XG5cblx0dGhpcy5wb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cdHRoaXMucG9zaXRpb25Xb3JsZCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cdHRoaXMucG9zaXRpb25TY3JlZW4gPSBuZXcgVEhSRUUuVmVjdG9yNCgpO1xuXG5cdHRoaXMudmlzaWJsZSA9IHRydWU7XG5cbn07XG5cblRIUkVFLlJlbmRlcmFibGVWZXJ0ZXgucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiAoIHZlcnRleCApIHtcblxuXHR0aGlzLnBvc2l0aW9uV29ybGQuY29weSggdmVydGV4LnBvc2l0aW9uV29ybGQgKTtcblx0dGhpcy5wb3NpdGlvblNjcmVlbi5jb3B5KCB2ZXJ0ZXgucG9zaXRpb25TY3JlZW4gKTtcblxufTtcblxuLy9cblxuVEhSRUUuUmVuZGVyYWJsZUxpbmUgPSBmdW5jdGlvbiAoKSB7XG5cblx0dGhpcy5pZCA9IDA7XG5cblx0dGhpcy52MSA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4KCk7XG5cdHRoaXMudjIgPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleCgpO1xuXG5cdHRoaXMudmVydGV4Q29sb3JzID0gWyBuZXcgVEhSRUUuQ29sb3IoKSwgbmV3IFRIUkVFLkNvbG9yKCkgXTtcblx0dGhpcy5tYXRlcmlhbCA9IG51bGw7XG5cblx0dGhpcy56ID0gMDtcblx0dGhpcy5yZW5kZXJPcmRlciA9IDA7XG5cbn07XG5cbi8vXG5cblRIUkVFLlJlbmRlcmFibGVTcHJpdGUgPSBmdW5jdGlvbiAoKSB7XG5cblx0dGhpcy5pZCA9IDA7XG5cblx0dGhpcy5vYmplY3QgPSBudWxsO1xuXG5cdHRoaXMueCA9IDA7XG5cdHRoaXMueSA9IDA7XG5cdHRoaXMueiA9IDA7XG5cblx0dGhpcy5yb3RhdGlvbiA9IDA7XG5cdHRoaXMuc2NhbGUgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuXG5cdHRoaXMubWF0ZXJpYWwgPSBudWxsO1xuXHR0aGlzLnJlbmRlck9yZGVyID0gMDtcblxufTtcblxuLy9cblxuVEhSRUUuUHJvamVjdG9yID0gZnVuY3Rpb24gKCkge1xuXG5cdHZhciBfb2JqZWN0LCBfb2JqZWN0Q291bnQsIF9vYmplY3RQb29sID0gW10sIF9vYmplY3RQb29sTGVuZ3RoID0gMCxcblx0X3ZlcnRleCwgX3ZlcnRleENvdW50LCBfdmVydGV4UG9vbCA9IFtdLCBfdmVydGV4UG9vbExlbmd0aCA9IDAsXG5cdF9mYWNlLCBfZmFjZUNvdW50LCBfZmFjZVBvb2wgPSBbXSwgX2ZhY2VQb29sTGVuZ3RoID0gMCxcblx0X2xpbmUsIF9saW5lQ291bnQsIF9saW5lUG9vbCA9IFtdLCBfbGluZVBvb2xMZW5ndGggPSAwLFxuXHRfc3ByaXRlLCBfc3ByaXRlQ291bnQsIF9zcHJpdGVQb29sID0gW10sIF9zcHJpdGVQb29sTGVuZ3RoID0gMCxcblxuXHRfcmVuZGVyRGF0YSA9IHsgb2JqZWN0czogW10sIGxpZ2h0czogW10sIGVsZW1lbnRzOiBbXSB9LFxuXG5cdF92ZWN0b3IzID0gbmV3IFRIUkVFLlZlY3RvcjMoKSxcblx0X3ZlY3RvcjQgPSBuZXcgVEhSRUUuVmVjdG9yNCgpLFxuXG5cdF9jbGlwQm94ID0gbmV3IFRIUkVFLkJveDMoIG5ldyBUSFJFRS5WZWN0b3IzKCAtIDEsIC0gMSwgLSAxICksIG5ldyBUSFJFRS5WZWN0b3IzKCAxLCAxLCAxICkgKSxcblx0X2JvdW5kaW5nQm94ID0gbmV3IFRIUkVFLkJveDMoKSxcblx0X3BvaW50czMgPSBuZXcgQXJyYXkoIDMgKSxcblx0X3BvaW50czQgPSBuZXcgQXJyYXkoIDQgKSxcblxuXHRfdmlld01hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCksXG5cdF92aWV3UHJvamVjdGlvbk1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCksXG5cblx0X21vZGVsTWF0cml4LFxuXHRfbW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCksXG5cblx0X25vcm1hbE1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXgzKCksXG5cblx0X2ZydXN0dW0gPSBuZXcgVEhSRUUuRnJ1c3R1bSgpLFxuXG5cdF9jbGlwcGVkVmVydGV4MVBvc2l0aW9uU2NyZWVuID0gbmV3IFRIUkVFLlZlY3RvcjQoKSxcblx0X2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4gPSBuZXcgVEhSRUUuVmVjdG9yNCgpO1xuXG5cdC8vXG5cblx0dGhpcy5wcm9qZWN0VmVjdG9yID0gZnVuY3Rpb24gKCB2ZWN0b3IsIGNhbWVyYSApIHtcblxuXHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlByb2plY3RvcjogLnByb2plY3RWZWN0b3IoKSBpcyBub3cgdmVjdG9yLnByb2plY3QoKS4nICk7XG5cdFx0dmVjdG9yLnByb2plY3QoIGNhbWVyYSApO1xuXG5cdH07XG5cblx0dGhpcy51bnByb2plY3RWZWN0b3IgPSBmdW5jdGlvbiAoIHZlY3RvciwgY2FtZXJhICkge1xuXG5cdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuUHJvamVjdG9yOiAudW5wcm9qZWN0VmVjdG9yKCkgaXMgbm93IHZlY3Rvci51bnByb2plY3QoKS4nICk7XG5cdFx0dmVjdG9yLnVucHJvamVjdCggY2FtZXJhICk7XG5cblx0fTtcblxuXHR0aGlzLnBpY2tpbmdSYXkgPSBmdW5jdGlvbiAoIHZlY3RvciwgY2FtZXJhICkge1xuXG5cdFx0Y29uc29sZS5lcnJvciggJ1RIUkVFLlByb2plY3RvcjogLnBpY2tpbmdSYXkoKSBpcyBub3cgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEoKS4nICk7XG5cblx0fTtcblxuXHQvL1xuXG5cdHZhciBSZW5kZXJMaXN0ID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIG5vcm1hbHMgPSBbXTtcblx0XHR2YXIgdXZzID0gW107XG5cblx0XHR2YXIgb2JqZWN0ID0gbnVsbDtcblx0XHR2YXIgbWF0ZXJpYWwgPSBudWxsO1xuXG5cdFx0dmFyIG5vcm1hbE1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXgzKCk7XG5cblx0XHRmdW5jdGlvbiBzZXRPYmplY3QoIHZhbHVlICkge1xuXG5cdFx0XHRvYmplY3QgPSB2YWx1ZTtcblx0XHRcdG1hdGVyaWFsID0gb2JqZWN0Lm1hdGVyaWFsO1xuXG5cdFx0XHRub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KCBvYmplY3QubWF0cml4V29ybGQgKTtcblxuXHRcdFx0bm9ybWFscy5sZW5ndGggPSAwO1xuXHRcdFx0dXZzLmxlbmd0aCA9IDA7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwcm9qZWN0VmVydGV4KCB2ZXJ0ZXggKSB7XG5cblx0XHRcdHZhciBwb3NpdGlvbiA9IHZlcnRleC5wb3NpdGlvbjtcblx0XHRcdHZhciBwb3NpdGlvbldvcmxkID0gdmVydGV4LnBvc2l0aW9uV29ybGQ7XG5cdFx0XHR2YXIgcG9zaXRpb25TY3JlZW4gPSB2ZXJ0ZXgucG9zaXRpb25TY3JlZW47XG5cblx0XHRcdHBvc2l0aW9uV29ybGQuY29weSggcG9zaXRpb24gKS5hcHBseU1hdHJpeDQoIF9tb2RlbE1hdHJpeCApO1xuXHRcdFx0cG9zaXRpb25TY3JlZW4uY29weSggcG9zaXRpb25Xb3JsZCApLmFwcGx5TWF0cml4NCggX3ZpZXdQcm9qZWN0aW9uTWF0cml4ICk7XG5cblx0XHRcdHZhciBpbnZXID0gMSAvIHBvc2l0aW9uU2NyZWVuLnc7XG5cblx0XHRcdHBvc2l0aW9uU2NyZWVuLnggKj0gaW52Vztcblx0XHRcdHBvc2l0aW9uU2NyZWVuLnkgKj0gaW52Vztcblx0XHRcdHBvc2l0aW9uU2NyZWVuLnogKj0gaW52VztcblxuXHRcdFx0dmVydGV4LnZpc2libGUgPSBwb3NpdGlvblNjcmVlbi54ID49IC0gMSAmJiBwb3NpdGlvblNjcmVlbi54IDw9IDEgJiZcblx0XHRcdFx0XHQgcG9zaXRpb25TY3JlZW4ueSA+PSAtIDEgJiYgcG9zaXRpb25TY3JlZW4ueSA8PSAxICYmXG5cdFx0XHRcdFx0IHBvc2l0aW9uU2NyZWVuLnogPj0gLSAxICYmIHBvc2l0aW9uU2NyZWVuLnogPD0gMTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHB1c2hWZXJ0ZXgoIHgsIHksIHogKSB7XG5cblx0XHRcdF92ZXJ0ZXggPSBnZXROZXh0VmVydGV4SW5Qb29sKCk7XG5cdFx0XHRfdmVydGV4LnBvc2l0aW9uLnNldCggeCwgeSwgeiApO1xuXG5cdFx0XHRwcm9qZWN0VmVydGV4KCBfdmVydGV4ICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwdXNoTm9ybWFsKCB4LCB5LCB6ICkge1xuXG5cdFx0XHRub3JtYWxzLnB1c2goIHgsIHksIHogKTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHB1c2hVdiggeCwgeSApIHtcblxuXHRcdFx0dXZzLnB1c2goIHgsIHkgKTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNoZWNrVHJpYW5nbGVWaXNpYmlsaXR5KCB2MSwgdjIsIHYzICkge1xuXG5cdFx0XHRpZiAoIHYxLnZpc2libGUgPT09IHRydWUgfHwgdjIudmlzaWJsZSA9PT0gdHJ1ZSB8fCB2My52aXNpYmxlID09PSB0cnVlICkgcmV0dXJuIHRydWU7XG5cblx0XHRcdF9wb2ludHMzWyAwIF0gPSB2MS5wb3NpdGlvblNjcmVlbjtcblx0XHRcdF9wb2ludHMzWyAxIF0gPSB2Mi5wb3NpdGlvblNjcmVlbjtcblx0XHRcdF9wb2ludHMzWyAyIF0gPSB2My5wb3NpdGlvblNjcmVlbjtcblxuXHRcdFx0cmV0dXJuIF9jbGlwQm94LmludGVyc2VjdHNCb3goIF9ib3VuZGluZ0JveC5zZXRGcm9tUG9pbnRzKCBfcG9pbnRzMyApICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjaGVja0JhY2tmYWNlQ3VsbGluZyggdjEsIHYyLCB2MyApIHtcblxuXHRcdFx0cmV0dXJuICggKCB2My5wb3NpdGlvblNjcmVlbi54IC0gdjEucG9zaXRpb25TY3JlZW4ueCApICpcblx0XHRcdFx0ICAgICggdjIucG9zaXRpb25TY3JlZW4ueSAtIHYxLnBvc2l0aW9uU2NyZWVuLnkgKSAtXG5cdFx0XHRcdCAgICAoIHYzLnBvc2l0aW9uU2NyZWVuLnkgLSB2MS5wb3NpdGlvblNjcmVlbi55ICkgKlxuXHRcdFx0XHQgICAgKCB2Mi5wb3NpdGlvblNjcmVlbi54IC0gdjEucG9zaXRpb25TY3JlZW4ueCApICkgPCAwO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcHVzaExpbmUoIGEsIGIgKSB7XG5cblx0XHRcdHZhciB2MSA9IF92ZXJ0ZXhQb29sWyBhIF07XG5cdFx0XHR2YXIgdjIgPSBfdmVydGV4UG9vbFsgYiBdO1xuXG5cdFx0XHRfbGluZSA9IGdldE5leHRMaW5lSW5Qb29sKCk7XG5cblx0XHRcdF9saW5lLmlkID0gb2JqZWN0LmlkO1xuXHRcdFx0X2xpbmUudjEuY29weSggdjEgKTtcblx0XHRcdF9saW5lLnYyLmNvcHkoIHYyICk7XG5cdFx0XHRfbGluZS56ID0gKCB2MS5wb3NpdGlvblNjcmVlbi56ICsgdjIucG9zaXRpb25TY3JlZW4ueiApIC8gMjtcblx0XHRcdF9saW5lLnJlbmRlck9yZGVyID0gb2JqZWN0LnJlbmRlck9yZGVyO1xuXG5cdFx0XHRfbGluZS5tYXRlcmlhbCA9IG9iamVjdC5tYXRlcmlhbDtcblxuXHRcdFx0X3JlbmRlckRhdGEuZWxlbWVudHMucHVzaCggX2xpbmUgKTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHB1c2hUcmlhbmdsZSggYSwgYiwgYyApIHtcblxuXHRcdFx0dmFyIHYxID0gX3ZlcnRleFBvb2xbIGEgXTtcblx0XHRcdHZhciB2MiA9IF92ZXJ0ZXhQb29sWyBiIF07XG5cdFx0XHR2YXIgdjMgPSBfdmVydGV4UG9vbFsgYyBdO1xuXG5cdFx0XHRpZiAoIGNoZWNrVHJpYW5nbGVWaXNpYmlsaXR5KCB2MSwgdjIsIHYzICkgPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0XHRpZiAoIG1hdGVyaWFsLnNpZGUgPT09IFRIUkVFLkRvdWJsZVNpZGUgfHwgY2hlY2tCYWNrZmFjZUN1bGxpbmcoIHYxLCB2MiwgdjMgKSA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRfZmFjZSA9IGdldE5leHRGYWNlSW5Qb29sKCk7XG5cblx0XHRcdFx0X2ZhY2UuaWQgPSBvYmplY3QuaWQ7XG5cdFx0XHRcdF9mYWNlLnYxLmNvcHkoIHYxICk7XG5cdFx0XHRcdF9mYWNlLnYyLmNvcHkoIHYyICk7XG5cdFx0XHRcdF9mYWNlLnYzLmNvcHkoIHYzICk7XG5cdFx0XHRcdF9mYWNlLnogPSAoIHYxLnBvc2l0aW9uU2NyZWVuLnogKyB2Mi5wb3NpdGlvblNjcmVlbi56ICsgdjMucG9zaXRpb25TY3JlZW4ueiApIC8gMztcblx0XHRcdFx0X2ZhY2UucmVuZGVyT3JkZXIgPSBvYmplY3QucmVuZGVyT3JkZXI7XG5cblx0XHRcdFx0Ly8gdXNlIGZpcnN0IHZlcnRleCBub3JtYWwgYXMgZmFjZSBub3JtYWxcblxuXHRcdFx0XHRfZmFjZS5ub3JtYWxNb2RlbC5mcm9tQXJyYXkoIG5vcm1hbHMsIGEgKiAzICk7XG5cdFx0XHRcdF9mYWNlLm5vcm1hbE1vZGVsLmFwcGx5TWF0cml4Myggbm9ybWFsTWF0cml4ICkubm9ybWFsaXplKCk7XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgMzsgaSArKyApIHtcblxuXHRcdFx0XHRcdHZhciBub3JtYWwgPSBfZmFjZS52ZXJ0ZXhOb3JtYWxzTW9kZWxbIGkgXTtcblx0XHRcdFx0XHRub3JtYWwuZnJvbUFycmF5KCBub3JtYWxzLCBhcmd1bWVudHNbIGkgXSAqIDMgKTtcblx0XHRcdFx0XHRub3JtYWwuYXBwbHlNYXRyaXgzKCBub3JtYWxNYXRyaXggKS5ub3JtYWxpemUoKTtcblxuXHRcdFx0XHRcdHZhciB1diA9IF9mYWNlLnV2c1sgaSBdO1xuXHRcdFx0XHRcdHV2LmZyb21BcnJheSggdXZzLCBhcmd1bWVudHNbIGkgXSAqIDIgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0X2ZhY2UudmVydGV4Tm9ybWFsc0xlbmd0aCA9IDM7XG5cblx0XHRcdFx0X2ZhY2UubWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XG5cblx0XHRcdFx0X3JlbmRlckRhdGEuZWxlbWVudHMucHVzaCggX2ZhY2UgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHNldE9iamVjdDogc2V0T2JqZWN0LFxuXHRcdFx0cHJvamVjdFZlcnRleDogcHJvamVjdFZlcnRleCxcblx0XHRcdGNoZWNrVHJpYW5nbGVWaXNpYmlsaXR5OiBjaGVja1RyaWFuZ2xlVmlzaWJpbGl0eSxcblx0XHRcdGNoZWNrQmFja2ZhY2VDdWxsaW5nOiBjaGVja0JhY2tmYWNlQ3VsbGluZyxcblx0XHRcdHB1c2hWZXJ0ZXg6IHB1c2hWZXJ0ZXgsXG5cdFx0XHRwdXNoTm9ybWFsOiBwdXNoTm9ybWFsLFxuXHRcdFx0cHVzaFV2OiBwdXNoVXYsXG5cdFx0XHRwdXNoTGluZTogcHVzaExpbmUsXG5cdFx0XHRwdXNoVHJpYW5nbGU6IHB1c2hUcmlhbmdsZVxuXHRcdH1cblxuXHR9O1xuXG5cdHZhciByZW5kZXJMaXN0ID0gbmV3IFJlbmRlckxpc3QoKTtcblxuXHR0aGlzLnByb2plY3RTY2VuZSA9IGZ1bmN0aW9uICggc2NlbmUsIGNhbWVyYSwgc29ydE9iamVjdHMsIHNvcnRFbGVtZW50cyApIHtcblxuXHRcdF9mYWNlQ291bnQgPSAwO1xuXHRcdF9saW5lQ291bnQgPSAwO1xuXHRcdF9zcHJpdGVDb3VudCA9IDA7XG5cblx0XHRfcmVuZGVyRGF0YS5lbGVtZW50cy5sZW5ndGggPSAwO1xuXG5cdFx0aWYgKCBzY2VuZS5hdXRvVXBkYXRlID09PSB0cnVlICkgc2NlbmUudXBkYXRlTWF0cml4V29ybGQoKTtcblx0XHRpZiAoIGNhbWVyYS5wYXJlbnQgPT09IG51bGwgKSBjYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKTtcblxuXHRcdF92aWV3TWF0cml4LmNvcHkoIGNhbWVyYS5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZSggY2FtZXJhLm1hdHJpeFdvcmxkICkgKTtcblx0XHRfdmlld1Byb2plY3Rpb25NYXRyaXgubXVsdGlwbHlNYXRyaWNlcyggY2FtZXJhLnByb2plY3Rpb25NYXRyaXgsIF92aWV3TWF0cml4ICk7XG5cblx0XHRfZnJ1c3R1bS5zZXRGcm9tTWF0cml4KCBfdmlld1Byb2plY3Rpb25NYXRyaXggKTtcblxuXHRcdC8vXG5cblx0XHRfb2JqZWN0Q291bnQgPSAwO1xuXG5cdFx0X3JlbmRlckRhdGEub2JqZWN0cy5sZW5ndGggPSAwO1xuXHRcdF9yZW5kZXJEYXRhLmxpZ2h0cy5sZW5ndGggPSAwO1xuXG5cdFx0ZnVuY3Rpb24gYWRkT2JqZWN0KCBvYmplY3QgKSB7XG5cblx0XHRcdF9vYmplY3QgPSBnZXROZXh0T2JqZWN0SW5Qb29sKCk7XG5cdFx0XHRfb2JqZWN0LmlkID0gb2JqZWN0LmlkO1xuXHRcdFx0X29iamVjdC5vYmplY3QgPSBvYmplY3Q7XG5cblx0XHRcdF92ZWN0b3IzLnNldEZyb21NYXRyaXhQb3NpdGlvbiggb2JqZWN0Lm1hdHJpeFdvcmxkICk7XG5cdFx0XHRfdmVjdG9yMy5hcHBseVByb2plY3Rpb24oIF92aWV3UHJvamVjdGlvbk1hdHJpeCApO1xuXHRcdFx0X29iamVjdC56ID0gX3ZlY3RvcjMuejtcblx0XHRcdF9vYmplY3QucmVuZGVyT3JkZXIgPSBvYmplY3QucmVuZGVyT3JkZXI7XG5cblx0XHRcdF9yZW5kZXJEYXRhLm9iamVjdHMucHVzaCggX29iamVjdCApO1xuXG5cdFx0fVxuXG5cdFx0c2NlbmUudHJhdmVyc2VWaXNpYmxlKCBmdW5jdGlvbiAoIG9iamVjdCApIHtcblxuXHRcdFx0aWYgKCBvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5MaWdodCApIHtcblxuXHRcdFx0XHRfcmVuZGVyRGF0YS5saWdodHMucHVzaCggb2JqZWN0ICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLk1lc2ggfHwgb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTGluZSApIHtcblxuXHRcdFx0XHRpZiAoIG9iamVjdC5tYXRlcmlhbC52aXNpYmxlID09PSBmYWxzZSApIHJldHVybjtcblx0XHRcdFx0aWYgKCBvYmplY3QuZnJ1c3R1bUN1bGxlZCA9PT0gdHJ1ZSAmJiBfZnJ1c3R1bS5pbnRlcnNlY3RzT2JqZWN0KCBvYmplY3QgKSA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRcdFx0YWRkT2JqZWN0KCBvYmplY3QgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuU3ByaXRlICkge1xuXG5cdFx0XHRcdGlmICggb2JqZWN0Lm1hdGVyaWFsLnZpc2libGUgPT09IGZhbHNlICkgcmV0dXJuO1xuXHRcdFx0XHRpZiAoIG9iamVjdC5mcnVzdHVtQ3VsbGVkID09PSB0cnVlICYmIF9mcnVzdHVtLmludGVyc2VjdHNTcHJpdGUoIG9iamVjdCApID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0XHRhZGRPYmplY3QoIG9iamVjdCApO1xuXG5cdFx0XHR9XG5cblx0XHR9ICk7XG5cblx0XHRpZiAoIHNvcnRPYmplY3RzID09PSB0cnVlICkge1xuXG5cdFx0XHRfcmVuZGVyRGF0YS5vYmplY3RzLnNvcnQoIHBhaW50ZXJTb3J0ICk7XG5cblx0XHR9XG5cblx0XHQvL1xuXG5cdFx0Zm9yICggdmFyIG8gPSAwLCBvbCA9IF9yZW5kZXJEYXRhLm9iamVjdHMubGVuZ3RoOyBvIDwgb2w7IG8gKysgKSB7XG5cblx0XHRcdHZhciBvYmplY3QgPSBfcmVuZGVyRGF0YS5vYmplY3RzWyBvIF0ub2JqZWN0O1xuXHRcdFx0dmFyIGdlb21ldHJ5ID0gb2JqZWN0Lmdlb21ldHJ5O1xuXG5cdFx0XHRyZW5kZXJMaXN0LnNldE9iamVjdCggb2JqZWN0ICk7XG5cblx0XHRcdF9tb2RlbE1hdHJpeCA9IG9iamVjdC5tYXRyaXhXb3JsZDtcblxuXHRcdFx0X3ZlcnRleENvdW50ID0gMDtcblxuXHRcdFx0aWYgKCBvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNoICkge1xuXG5cdFx0XHRcdGlmICggZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSApIHtcblxuXHRcdFx0XHRcdHZhciBhdHRyaWJ1dGVzID0gZ2VvbWV0cnkuYXR0cmlidXRlcztcblx0XHRcdFx0XHR2YXIgZ3JvdXBzID0gZ2VvbWV0cnkuZ3JvdXBzO1xuXG5cdFx0XHRcdFx0aWYgKCBhdHRyaWJ1dGVzLnBvc2l0aW9uID09PSB1bmRlZmluZWQgKSBjb250aW51ZTtcblxuXHRcdFx0XHRcdHZhciBwb3NpdGlvbnMgPSBhdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xuXG5cdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gcG9zaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMyApIHtcblxuXHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoVmVydGV4KCBwb3NpdGlvbnNbIGkgXSwgcG9zaXRpb25zWyBpICsgMSBdLCBwb3NpdGlvbnNbIGkgKyAyIF0gKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggYXR0cmlidXRlcy5ub3JtYWwgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0dmFyIG5vcm1hbHMgPSBhdHRyaWJ1dGVzLm5vcm1hbC5hcnJheTtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gbm9ybWFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDMgKSB7XG5cblx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoTm9ybWFsKCBub3JtYWxzWyBpIF0sIG5vcm1hbHNbIGkgKyAxIF0sIG5vcm1hbHNbIGkgKyAyIF0gKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBhdHRyaWJ1dGVzLnV2ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdHZhciB1dnMgPSBhdHRyaWJ1dGVzLnV2LmFycmF5O1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSB1dnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyICkge1xuXG5cdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFV2KCB1dnNbIGkgXSwgdXZzWyBpICsgMSBdICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggZ2VvbWV0cnkuaW5kZXggIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBpbmRpY2VzID0gZ2VvbWV0cnkuaW5kZXguYXJyYXk7XG5cblx0XHRcdFx0XHRcdGlmICggZ3JvdXBzLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIG8gPSAwOyBvIDwgZ3JvdXBzLmxlbmd0aDsgbyArKyApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciBncm91cCA9IGdyb3Vwc1sgbyBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSBncm91cC5zdGFydCwgbCA9IGdyb3VwLnN0YXJ0ICsgZ3JvdXAuY291bnQ7IGkgPCBsOyBpICs9IDMgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFRyaWFuZ2xlKCBpbmRpY2VzWyBpIF0sIGluZGljZXNbIGkgKyAxIF0sIGluZGljZXNbIGkgKyAyIF0gKTtcblxuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gaW5kaWNlcy5sZW5ndGg7IGkgPCBsOyBpICs9IDMgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRyZW5kZXJMaXN0LnB1c2hUcmlhbmdsZSggaW5kaWNlc1sgaSBdLCBpbmRpY2VzWyBpICsgMSBdLCBpbmRpY2VzWyBpICsgMiBdICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBwb3NpdGlvbnMubGVuZ3RoIC8gMzsgaSA8IGw7IGkgKz0gMyApIHtcblxuXHRcdFx0XHRcdFx0XHRyZW5kZXJMaXN0LnB1c2hUcmlhbmdsZSggaSwgaSArIDEsIGkgKyAyICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5ICkge1xuXG5cdFx0XHRcdFx0dmFyIHZlcnRpY2VzID0gZ2VvbWV0cnkudmVydGljZXM7XG5cdFx0XHRcdFx0dmFyIGZhY2VzID0gZ2VvbWV0cnkuZmFjZXM7XG5cdFx0XHRcdFx0dmFyIGZhY2VWZXJ0ZXhVdnMgPSBnZW9tZXRyeS5mYWNlVmVydGV4VXZzWyAwIF07XG5cblx0XHRcdFx0XHRfbm9ybWFsTWF0cml4LmdldE5vcm1hbE1hdHJpeCggX21vZGVsTWF0cml4ICk7XG5cblx0XHRcdFx0XHR2YXIgbWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XG5cblx0XHRcdFx0XHR2YXIgaXNGYWNlTWF0ZXJpYWwgPSBtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk11bHRpTWF0ZXJpYWw7XG5cdFx0XHRcdFx0dmFyIG9iamVjdE1hdGVyaWFscyA9IGlzRmFjZU1hdGVyaWFsID09PSB0cnVlID8gb2JqZWN0Lm1hdGVyaWFsIDogbnVsbDtcblxuXHRcdFx0XHRcdGZvciAoIHZhciB2ID0gMCwgdmwgPSB2ZXJ0aWNlcy5sZW5ndGg7IHYgPCB2bDsgdiArKyApIHtcblxuXHRcdFx0XHRcdFx0dmFyIHZlcnRleCA9IHZlcnRpY2VzWyB2IF07XG5cblx0XHRcdFx0XHRcdF92ZWN0b3IzLmNvcHkoIHZlcnRleCApO1xuXG5cdFx0XHRcdFx0XHRpZiAoIG1hdGVyaWFsLm1vcnBoVGFyZ2V0cyA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgbW9ycGhUYXJnZXRzID0gZ2VvbWV0cnkubW9ycGhUYXJnZXRzO1xuXHRcdFx0XHRcdFx0XHR2YXIgbW9ycGhJbmZsdWVuY2VzID0gb2JqZWN0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlcztcblxuXHRcdFx0XHRcdFx0XHRmb3IgKCB2YXIgdCA9IDAsIHRsID0gbW9ycGhUYXJnZXRzLmxlbmd0aDsgdCA8IHRsOyB0ICsrICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0dmFyIGluZmx1ZW5jZSA9IG1vcnBoSW5mbHVlbmNlc1sgdCBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBpbmZsdWVuY2UgPT09IDAgKSBjb250aW51ZTtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciB0YXJnZXQgPSBtb3JwaFRhcmdldHNbIHQgXTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgdGFyZ2V0VmVydGV4ID0gdGFyZ2V0LnZlcnRpY2VzWyB2IF07XG5cblx0XHRcdFx0XHRcdFx0XHRfdmVjdG9yMy54ICs9ICggdGFyZ2V0VmVydGV4LnggLSB2ZXJ0ZXgueCApICogaW5mbHVlbmNlO1xuXHRcdFx0XHRcdFx0XHRcdF92ZWN0b3IzLnkgKz0gKCB0YXJnZXRWZXJ0ZXgueSAtIHZlcnRleC55ICkgKiBpbmZsdWVuY2U7XG5cdFx0XHRcdFx0XHRcdFx0X3ZlY3RvcjMueiArPSAoIHRhcmdldFZlcnRleC56IC0gdmVydGV4LnogKSAqIGluZmx1ZW5jZTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoVmVydGV4KCBfdmVjdG9yMy54LCBfdmVjdG9yMy55LCBfdmVjdG9yMy56ICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRmb3IgKCB2YXIgZiA9IDAsIGZsID0gZmFjZXMubGVuZ3RoOyBmIDwgZmw7IGYgKysgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBmYWNlID0gZmFjZXNbIGYgXTtcblxuXHRcdFx0XHRcdFx0bWF0ZXJpYWwgPSBpc0ZhY2VNYXRlcmlhbCA9PT0gdHJ1ZVxuXHRcdFx0XHRcdFx0XHQgPyBvYmplY3RNYXRlcmlhbHMubWF0ZXJpYWxzWyBmYWNlLm1hdGVyaWFsSW5kZXggXVxuXHRcdFx0XHRcdFx0XHQgOiBvYmplY3QubWF0ZXJpYWw7XG5cblx0XHRcdFx0XHRcdGlmICggbWF0ZXJpYWwgPT09IHVuZGVmaW5lZCApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0XHR2YXIgc2lkZSA9IG1hdGVyaWFsLnNpZGU7XG5cblx0XHRcdFx0XHRcdHZhciB2MSA9IF92ZXJ0ZXhQb29sWyBmYWNlLmEgXTtcblx0XHRcdFx0XHRcdHZhciB2MiA9IF92ZXJ0ZXhQb29sWyBmYWNlLmIgXTtcblx0XHRcdFx0XHRcdHZhciB2MyA9IF92ZXJ0ZXhQb29sWyBmYWNlLmMgXTtcblxuXHRcdFx0XHRcdFx0aWYgKCByZW5kZXJMaXN0LmNoZWNrVHJpYW5nbGVWaXNpYmlsaXR5KCB2MSwgdjIsIHYzICkgPT09IGZhbHNlICkgY29udGludWU7XG5cblx0XHRcdFx0XHRcdHZhciB2aXNpYmxlID0gcmVuZGVyTGlzdC5jaGVja0JhY2tmYWNlQ3VsbGluZyggdjEsIHYyLCB2MyApO1xuXG5cdFx0XHRcdFx0XHRpZiAoIHNpZGUgIT09IFRIUkVFLkRvdWJsZVNpZGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBzaWRlID09PSBUSFJFRS5Gcm9udFNpZGUgJiYgdmlzaWJsZSA9PT0gZmFsc2UgKSBjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0aWYgKCBzaWRlID09PSBUSFJFRS5CYWNrU2lkZSAmJiB2aXNpYmxlID09PSB0cnVlICkgY29udGludWU7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0X2ZhY2UgPSBnZXROZXh0RmFjZUluUG9vbCgpO1xuXG5cdFx0XHRcdFx0XHRfZmFjZS5pZCA9IG9iamVjdC5pZDtcblx0XHRcdFx0XHRcdF9mYWNlLnYxLmNvcHkoIHYxICk7XG5cdFx0XHRcdFx0XHRfZmFjZS52Mi5jb3B5KCB2MiApO1xuXHRcdFx0XHRcdFx0X2ZhY2UudjMuY29weSggdjMgKTtcblxuXHRcdFx0XHRcdFx0X2ZhY2Uubm9ybWFsTW9kZWwuY29weSggZmFjZS5ub3JtYWwgKTtcblxuXHRcdFx0XHRcdFx0aWYgKCB2aXNpYmxlID09PSBmYWxzZSAmJiAoIHNpZGUgPT09IFRIUkVFLkJhY2tTaWRlIHx8IHNpZGUgPT09IFRIUkVFLkRvdWJsZVNpZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRfZmFjZS5ub3JtYWxNb2RlbC5uZWdhdGUoKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRfZmFjZS5ub3JtYWxNb2RlbC5hcHBseU1hdHJpeDMoIF9ub3JtYWxNYXRyaXggKS5ub3JtYWxpemUoKTtcblxuXHRcdFx0XHRcdFx0dmFyIGZhY2VWZXJ0ZXhOb3JtYWxzID0gZmFjZS52ZXJ0ZXhOb3JtYWxzO1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgbiA9IDAsIG5sID0gTWF0aC5taW4oIGZhY2VWZXJ0ZXhOb3JtYWxzLmxlbmd0aCwgMyApOyBuIDwgbmw7IG4gKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIG5vcm1hbE1vZGVsID0gX2ZhY2UudmVydGV4Tm9ybWFsc01vZGVsWyBuIF07XG5cdFx0XHRcdFx0XHRcdG5vcm1hbE1vZGVsLmNvcHkoIGZhY2VWZXJ0ZXhOb3JtYWxzWyBuIF0gKTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIHZpc2libGUgPT09IGZhbHNlICYmICggc2lkZSA9PT0gVEhSRUUuQmFja1NpZGUgfHwgc2lkZSA9PT0gVEhSRUUuRG91YmxlU2lkZSApICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0bm9ybWFsTW9kZWwubmVnYXRlKCk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdG5vcm1hbE1vZGVsLmFwcGx5TWF0cml4MyggX25vcm1hbE1hdHJpeCApLm5vcm1hbGl6ZSgpO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdF9mYWNlLnZlcnRleE5vcm1hbHNMZW5ndGggPSBmYWNlVmVydGV4Tm9ybWFscy5sZW5ndGg7XG5cblx0XHRcdFx0XHRcdHZhciB2ZXJ0ZXhVdnMgPSBmYWNlVmVydGV4VXZzWyBmIF07XG5cblx0XHRcdFx0XHRcdGlmICggdmVydGV4VXZzICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIHUgPSAwOyB1IDwgMzsgdSArKyApIHtcblxuXHRcdFx0XHRcdFx0XHRcdF9mYWNlLnV2c1sgdSBdLmNvcHkoIHZlcnRleFV2c1sgdSBdICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdF9mYWNlLmNvbG9yID0gZmFjZS5jb2xvcjtcblx0XHRcdFx0XHRcdF9mYWNlLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG5cblx0XHRcdFx0XHRcdF9mYWNlLnogPSAoIHYxLnBvc2l0aW9uU2NyZWVuLnogKyB2Mi5wb3NpdGlvblNjcmVlbi56ICsgdjMucG9zaXRpb25TY3JlZW4ueiApIC8gMztcblx0XHRcdFx0XHRcdF9mYWNlLnJlbmRlck9yZGVyID0gb2JqZWN0LnJlbmRlck9yZGVyO1xuXG5cdFx0XHRcdFx0XHRfcmVuZGVyRGF0YS5lbGVtZW50cy5wdXNoKCBfZmFjZSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIGlmICggb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTGluZSApIHtcblxuXHRcdFx0XHRpZiAoIGdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkgKSB7XG5cblx0XHRcdFx0XHR2YXIgYXR0cmlidXRlcyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXM7XG5cblx0XHRcdFx0XHRpZiAoIGF0dHJpYnV0ZXMucG9zaXRpb24gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0dmFyIHBvc2l0aW9ucyA9IGF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHBvc2l0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDMgKSB7XG5cblx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoVmVydGV4KCBwb3NpdGlvbnNbIGkgXSwgcG9zaXRpb25zWyBpICsgMSBdLCBwb3NpdGlvbnNbIGkgKyAyIF0gKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoIGdlb21ldHJ5LmluZGV4ICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciBpbmRpY2VzID0gZ2VvbWV0cnkuaW5kZXguYXJyYXk7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gaW5kaWNlcy5sZW5ndGg7IGkgPCBsOyBpICs9IDIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRyZW5kZXJMaXN0LnB1c2hMaW5lKCBpbmRpY2VzWyBpIF0sIGluZGljZXNbIGkgKyAxIF0gKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIHN0ZXAgPSBvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5MaW5lU2VnbWVudHMgPyAyIDogMTtcblxuXHRcdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSAoIHBvc2l0aW9ucy5sZW5ndGggLyAzICkgLSAxOyBpIDwgbDsgaSArPSBzdGVwICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoTGluZSggaSwgaSArIDEgKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5ICkge1xuXG5cdFx0XHRcdFx0X21vZGVsVmlld1Byb2plY3Rpb25NYXRyaXgubXVsdGlwbHlNYXRyaWNlcyggX3ZpZXdQcm9qZWN0aW9uTWF0cml4LCBfbW9kZWxNYXRyaXggKTtcblxuXHRcdFx0XHRcdHZhciB2ZXJ0aWNlcyA9IG9iamVjdC5nZW9tZXRyeS52ZXJ0aWNlcztcblxuXHRcdFx0XHRcdGlmICggdmVydGljZXMubGVuZ3RoID09PSAwICkgY29udGludWU7XG5cblx0XHRcdFx0XHR2MSA9IGdldE5leHRWZXJ0ZXhJblBvb2woKTtcblx0XHRcdFx0XHR2MS5wb3NpdGlvblNjcmVlbi5jb3B5KCB2ZXJ0aWNlc1sgMCBdICkuYXBwbHlNYXRyaXg0KCBfbW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCApO1xuXG5cdFx0XHRcdFx0dmFyIHN0ZXAgPSBvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5MaW5lU2VnbWVudHMgPyAyIDogMTtcblxuXHRcdFx0XHRcdGZvciAoIHZhciB2ID0gMSwgdmwgPSB2ZXJ0aWNlcy5sZW5ndGg7IHYgPCB2bDsgdiArKyApIHtcblxuXHRcdFx0XHRcdFx0djEgPSBnZXROZXh0VmVydGV4SW5Qb29sKCk7XG5cdFx0XHRcdFx0XHR2MS5wb3NpdGlvblNjcmVlbi5jb3B5KCB2ZXJ0aWNlc1sgdiBdICkuYXBwbHlNYXRyaXg0KCBfbW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCApO1xuXG5cdFx0XHRcdFx0XHRpZiAoICggdiArIDEgKSAlIHN0ZXAgPiAwICkgY29udGludWU7XG5cblx0XHRcdFx0XHRcdHYyID0gX3ZlcnRleFBvb2xbIF92ZXJ0ZXhDb3VudCAtIDIgXTtcblxuXHRcdFx0XHRcdFx0X2NsaXBwZWRWZXJ0ZXgxUG9zaXRpb25TY3JlZW4uY29weSggdjEucG9zaXRpb25TY3JlZW4gKTtcblx0XHRcdFx0XHRcdF9jbGlwcGVkVmVydGV4MlBvc2l0aW9uU2NyZWVuLmNvcHkoIHYyLnBvc2l0aW9uU2NyZWVuICk7XG5cblx0XHRcdFx0XHRcdGlmICggY2xpcExpbmUoIF9jbGlwcGVkVmVydGV4MVBvc2l0aW9uU2NyZWVuLCBfY2xpcHBlZFZlcnRleDJQb3NpdGlvblNjcmVlbiApID09PSB0cnVlICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFBlcmZvcm0gdGhlIHBlcnNwZWN0aXZlIGRpdmlkZVxuXHRcdFx0XHRcdFx0XHRfY2xpcHBlZFZlcnRleDFQb3NpdGlvblNjcmVlbi5tdWx0aXBseVNjYWxhciggMSAvIF9jbGlwcGVkVmVydGV4MVBvc2l0aW9uU2NyZWVuLncgKTtcblx0XHRcdFx0XHRcdFx0X2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4ubXVsdGlwbHlTY2FsYXIoIDEgLyBfY2xpcHBlZFZlcnRleDJQb3NpdGlvblNjcmVlbi53ICk7XG5cblx0XHRcdFx0XHRcdFx0X2xpbmUgPSBnZXROZXh0TGluZUluUG9vbCgpO1xuXG5cdFx0XHRcdFx0XHRcdF9saW5lLmlkID0gb2JqZWN0LmlkO1xuXHRcdFx0XHRcdFx0XHRfbGluZS52MS5wb3NpdGlvblNjcmVlbi5jb3B5KCBfY2xpcHBlZFZlcnRleDFQb3NpdGlvblNjcmVlbiApO1xuXHRcdFx0XHRcdFx0XHRfbGluZS52Mi5wb3NpdGlvblNjcmVlbi5jb3B5KCBfY2xpcHBlZFZlcnRleDJQb3NpdGlvblNjcmVlbiApO1xuXG5cdFx0XHRcdFx0XHRcdF9saW5lLnogPSBNYXRoLm1heCggX2NsaXBwZWRWZXJ0ZXgxUG9zaXRpb25TY3JlZW4ueiwgX2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4ueiApO1xuXHRcdFx0XHRcdFx0XHRfbGluZS5yZW5kZXJPcmRlciA9IG9iamVjdC5yZW5kZXJPcmRlcjtcblxuXHRcdFx0XHRcdFx0XHRfbGluZS5tYXRlcmlhbCA9IG9iamVjdC5tYXRlcmlhbDtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIG9iamVjdC5tYXRlcmlhbC52ZXJ0ZXhDb2xvcnMgPT09IFRIUkVFLlZlcnRleENvbG9ycyApIHtcblxuXHRcdFx0XHRcdFx0XHRcdF9saW5lLnZlcnRleENvbG9yc1sgMCBdLmNvcHkoIG9iamVjdC5nZW9tZXRyeS5jb2xvcnNbIHYgXSApO1xuXHRcdFx0XHRcdFx0XHRcdF9saW5lLnZlcnRleENvbG9yc1sgMSBdLmNvcHkoIG9iamVjdC5nZW9tZXRyeS5jb2xvcnNbIHYgLSAxIF0gKTtcblxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0X3JlbmRlckRhdGEuZWxlbWVudHMucHVzaCggX2xpbmUgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIGlmICggb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuU3ByaXRlICkge1xuXG5cdFx0XHRcdF92ZWN0b3I0LnNldCggX21vZGVsTWF0cml4LmVsZW1lbnRzWyAxMiBdLCBfbW9kZWxNYXRyaXguZWxlbWVudHNbIDEzIF0sIF9tb2RlbE1hdHJpeC5lbGVtZW50c1sgMTQgXSwgMSApO1xuXHRcdFx0XHRfdmVjdG9yNC5hcHBseU1hdHJpeDQoIF92aWV3UHJvamVjdGlvbk1hdHJpeCApO1xuXG5cdFx0XHRcdHZhciBpbnZXID0gMSAvIF92ZWN0b3I0Lnc7XG5cblx0XHRcdFx0X3ZlY3RvcjQueiAqPSBpbnZXO1xuXG5cdFx0XHRcdGlmICggX3ZlY3RvcjQueiA+PSAtIDEgJiYgX3ZlY3RvcjQueiA8PSAxICkge1xuXG5cdFx0XHRcdFx0X3Nwcml0ZSA9IGdldE5leHRTcHJpdGVJblBvb2woKTtcblx0XHRcdFx0XHRfc3ByaXRlLmlkID0gb2JqZWN0LmlkO1xuXHRcdFx0XHRcdF9zcHJpdGUueCA9IF92ZWN0b3I0LnggKiBpbnZXO1xuXHRcdFx0XHRcdF9zcHJpdGUueSA9IF92ZWN0b3I0LnkgKiBpbnZXO1xuXHRcdFx0XHRcdF9zcHJpdGUueiA9IF92ZWN0b3I0Lno7XG5cdFx0XHRcdFx0X3Nwcml0ZS5yZW5kZXJPcmRlciA9IG9iamVjdC5yZW5kZXJPcmRlcjtcblx0XHRcdFx0XHRfc3ByaXRlLm9iamVjdCA9IG9iamVjdDtcblxuXHRcdFx0XHRcdF9zcHJpdGUucm90YXRpb24gPSBvYmplY3Qucm90YXRpb247XG5cblx0XHRcdFx0XHRfc3ByaXRlLnNjYWxlLnggPSBvYmplY3Quc2NhbGUueCAqIE1hdGguYWJzKCBfc3ByaXRlLnggLSAoIF92ZWN0b3I0LnggKyBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgMCBdICkgLyAoIF92ZWN0b3I0LncgKyBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1sgMTIgXSApICk7XG5cdFx0XHRcdFx0X3Nwcml0ZS5zY2FsZS55ID0gb2JqZWN0LnNjYWxlLnkgKiBNYXRoLmFicyggX3Nwcml0ZS55IC0gKCBfdmVjdG9yNC55ICsgY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDUgXSApIC8gKCBfdmVjdG9yNC53ICsgY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDEzIF0gKSApO1xuXG5cdFx0XHRcdFx0X3Nwcml0ZS5tYXRlcmlhbCA9IG9iamVjdC5tYXRlcmlhbDtcblxuXHRcdFx0XHRcdF9yZW5kZXJEYXRhLmVsZW1lbnRzLnB1c2goIF9zcHJpdGUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGlmICggc29ydEVsZW1lbnRzID09PSB0cnVlICkge1xuXG5cdFx0XHRfcmVuZGVyRGF0YS5lbGVtZW50cy5zb3J0KCBwYWludGVyU29ydCApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIF9yZW5kZXJEYXRhO1xuXG5cdH07XG5cblx0Ly8gUG9vbHNcblxuXHRmdW5jdGlvbiBnZXROZXh0T2JqZWN0SW5Qb29sKCkge1xuXG5cdFx0aWYgKCBfb2JqZWN0Q291bnQgPT09IF9vYmplY3RQb29sTGVuZ3RoICkge1xuXG5cdFx0XHR2YXIgb2JqZWN0ID0gbmV3IFRIUkVFLlJlbmRlcmFibGVPYmplY3QoKTtcblx0XHRcdF9vYmplY3RQb29sLnB1c2goIG9iamVjdCApO1xuXHRcdFx0X29iamVjdFBvb2xMZW5ndGggKys7XG5cdFx0XHRfb2JqZWN0Q291bnQgKys7XG5cdFx0XHRyZXR1cm4gb2JqZWN0O1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIF9vYmplY3RQb29sWyBfb2JqZWN0Q291bnQgKysgXTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0TmV4dFZlcnRleEluUG9vbCgpIHtcblxuXHRcdGlmICggX3ZlcnRleENvdW50ID09PSBfdmVydGV4UG9vbExlbmd0aCApIHtcblxuXHRcdFx0dmFyIHZlcnRleCA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4KCk7XG5cdFx0XHRfdmVydGV4UG9vbC5wdXNoKCB2ZXJ0ZXggKTtcblx0XHRcdF92ZXJ0ZXhQb29sTGVuZ3RoICsrO1xuXHRcdFx0X3ZlcnRleENvdW50ICsrO1xuXHRcdFx0cmV0dXJuIHZlcnRleDtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfdmVydGV4UG9vbFsgX3ZlcnRleENvdW50ICsrIF07XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldE5leHRGYWNlSW5Qb29sKCkge1xuXG5cdFx0aWYgKCBfZmFjZUNvdW50ID09PSBfZmFjZVBvb2xMZW5ndGggKSB7XG5cblx0XHRcdHZhciBmYWNlID0gbmV3IFRIUkVFLlJlbmRlcmFibGVGYWNlKCk7XG5cdFx0XHRfZmFjZVBvb2wucHVzaCggZmFjZSApO1xuXHRcdFx0X2ZhY2VQb29sTGVuZ3RoICsrO1xuXHRcdFx0X2ZhY2VDb3VudCArKztcblx0XHRcdHJldHVybiBmYWNlO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIF9mYWNlUG9vbFsgX2ZhY2VDb3VudCArKyBdO1xuXG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldE5leHRMaW5lSW5Qb29sKCkge1xuXG5cdFx0aWYgKCBfbGluZUNvdW50ID09PSBfbGluZVBvb2xMZW5ndGggKSB7XG5cblx0XHRcdHZhciBsaW5lID0gbmV3IFRIUkVFLlJlbmRlcmFibGVMaW5lKCk7XG5cdFx0XHRfbGluZVBvb2wucHVzaCggbGluZSApO1xuXHRcdFx0X2xpbmVQb29sTGVuZ3RoICsrO1xuXHRcdFx0X2xpbmVDb3VudCArKztcblx0XHRcdHJldHVybiBsaW5lO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIF9saW5lUG9vbFsgX2xpbmVDb3VudCArKyBdO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXROZXh0U3ByaXRlSW5Qb29sKCkge1xuXG5cdFx0aWYgKCBfc3ByaXRlQ291bnQgPT09IF9zcHJpdGVQb29sTGVuZ3RoICkge1xuXG5cdFx0XHR2YXIgc3ByaXRlID0gbmV3IFRIUkVFLlJlbmRlcmFibGVTcHJpdGUoKTtcblx0XHRcdF9zcHJpdGVQb29sLnB1c2goIHNwcml0ZSApO1xuXHRcdFx0X3Nwcml0ZVBvb2xMZW5ndGggKys7XG5cdFx0XHRfc3ByaXRlQ291bnQgKys7XG5cdFx0XHRyZXR1cm4gc3ByaXRlO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIF9zcHJpdGVQb29sWyBfc3ByaXRlQ291bnQgKysgXTtcblxuXHR9XG5cblx0Ly9cblxuXHRmdW5jdGlvbiBwYWludGVyU29ydCggYSwgYiApIHtcblxuXHRcdGlmICggYS5yZW5kZXJPcmRlciAhPT0gYi5yZW5kZXJPcmRlciApIHtcblxuXHRcdFx0cmV0dXJuIGEucmVuZGVyT3JkZXIgLSBiLnJlbmRlck9yZGVyO1xuXG5cdFx0fSBlbHNlIGlmICggYS56ICE9PSBiLnogKSB7XG5cblx0XHRcdHJldHVybiBiLnogLSBhLno7XG5cblx0XHR9IGVsc2UgaWYgKCBhLmlkICE9PSBiLmlkICkge1xuXG5cdFx0XHRyZXR1cm4gYS5pZCAtIGIuaWQ7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRyZXR1cm4gMDtcblxuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gY2xpcExpbmUoIHMxLCBzMiApIHtcblxuXHRcdHZhciBhbHBoYTEgPSAwLCBhbHBoYTIgPSAxLFxuXG5cdFx0Ly8gQ2FsY3VsYXRlIHRoZSBib3VuZGFyeSBjb29yZGluYXRlIG9mIGVhY2ggdmVydGV4IGZvciB0aGUgbmVhciBhbmQgZmFyIGNsaXAgcGxhbmVzLFxuXHRcdC8vIFogPSAtMSBhbmQgWiA9ICsxLCByZXNwZWN0aXZlbHkuXG5cdFx0YmMxbmVhciA9ICBzMS56ICsgczEudyxcblx0XHRiYzJuZWFyID0gIHMyLnogKyBzMi53LFxuXHRcdGJjMWZhciA9ICAtIHMxLnogKyBzMS53LFxuXHRcdGJjMmZhciA9ICAtIHMyLnogKyBzMi53O1xuXG5cdFx0aWYgKCBiYzFuZWFyID49IDAgJiYgYmMybmVhciA+PSAwICYmIGJjMWZhciA+PSAwICYmIGJjMmZhciA+PSAwICkge1xuXG5cdFx0XHQvLyBCb3RoIHZlcnRpY2VzIGxpZSBlbnRpcmVseSB3aXRoaW4gYWxsIGNsaXAgcGxhbmVzLlxuXHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHR9IGVsc2UgaWYgKCAoIGJjMW5lYXIgPCAwICYmIGJjMm5lYXIgPCAwICkgfHwgKCBiYzFmYXIgPCAwICYmIGJjMmZhciA8IDAgKSApIHtcblxuXHRcdFx0Ly8gQm90aCB2ZXJ0aWNlcyBsaWUgZW50aXJlbHkgb3V0c2lkZSBvbmUgb2YgdGhlIGNsaXAgcGxhbmVzLlxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gVGhlIGxpbmUgc2VnbWVudCBzcGFucyBhdCBsZWFzdCBvbmUgY2xpcCBwbGFuZS5cblxuXHRcdFx0aWYgKCBiYzFuZWFyIDwgMCApIHtcblxuXHRcdFx0XHQvLyB2MSBsaWVzIG91dHNpZGUgdGhlIG5lYXIgcGxhbmUsIHYyIGluc2lkZVxuXHRcdFx0XHRhbHBoYTEgPSBNYXRoLm1heCggYWxwaGExLCBiYzFuZWFyIC8gKCBiYzFuZWFyIC0gYmMybmVhciApICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIGJjMm5lYXIgPCAwICkge1xuXG5cdFx0XHRcdC8vIHYyIGxpZXMgb3V0c2lkZSB0aGUgbmVhciBwbGFuZSwgdjEgaW5zaWRlXG5cdFx0XHRcdGFscGhhMiA9IE1hdGgubWluKCBhbHBoYTIsIGJjMW5lYXIgLyAoIGJjMW5lYXIgLSBiYzJuZWFyICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJjMWZhciA8IDAgKSB7XG5cblx0XHRcdFx0Ly8gdjEgbGllcyBvdXRzaWRlIHRoZSBmYXIgcGxhbmUsIHYyIGluc2lkZVxuXHRcdFx0XHRhbHBoYTEgPSBNYXRoLm1heCggYWxwaGExLCBiYzFmYXIgLyAoIGJjMWZhciAtIGJjMmZhciApICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIGJjMmZhciA8IDAgKSB7XG5cblx0XHRcdFx0Ly8gdjIgbGllcyBvdXRzaWRlIHRoZSBmYXIgcGxhbmUsIHYyIGluc2lkZVxuXHRcdFx0XHRhbHBoYTIgPSBNYXRoLm1pbiggYWxwaGEyLCBiYzFmYXIgLyAoIGJjMWZhciAtIGJjMmZhciApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBhbHBoYTIgPCBhbHBoYTEgKSB7XG5cblx0XHRcdFx0Ly8gVGhlIGxpbmUgc2VnbWVudCBzcGFucyB0d28gYm91bmRhcmllcywgYnV0IGlzIG91dHNpZGUgYm90aCBvZiB0aGVtLlxuXHRcdFx0XHQvLyAoVGhpcyBjYW4ndCBoYXBwZW4gd2hlbiB3ZSdyZSBvbmx5IGNsaXBwaW5nIGFnYWluc3QganVzdCBuZWFyL2ZhciBidXQgZ29vZFxuXHRcdFx0XHQvLyAgdG8gbGVhdmUgdGhlIGNoZWNrIGhlcmUgZm9yIGZ1dHVyZSB1c2FnZSBpZiBvdGhlciBjbGlwIHBsYW5lcyBhcmUgYWRkZWQuKVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBzMSBhbmQgczIgdmVydGljZXMgdG8gbWF0Y2ggdGhlIGNsaXBwZWQgbGluZSBzZWdtZW50LlxuXHRcdFx0XHRzMS5sZXJwKCBzMiwgYWxwaGExICk7XG5cdFx0XHRcdHMyLmxlcnAoIHMxLCAxIC0gYWxwaGEyICk7XG5cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHR9XG5cbn07XG4iLCIvKiFhcnQtdGVtcGxhdGUgLSBUZW1wbGF0ZSBFbmdpbmUgfCBodHRwOi8vYXVpLmdpdGh1Yi5jb20vYXJ0VGVtcGxhdGUvKi9cbiFmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuIGEucmVwbGFjZSh0LFwiXCIpLnJlcGxhY2UodSxcIixcIikucmVwbGFjZSh2LFwiXCIpLnJlcGxhY2UodyxcIlwiKS5yZXBsYWNlKHgsXCJcIikuc3BsaXQoeSl9ZnVuY3Rpb24gYihhKXtyZXR1cm5cIidcIithLnJlcGxhY2UoLygnfFxcXFwpL2csXCJcXFxcJDFcIikucmVwbGFjZSgvXFxyL2csXCJcXFxcclwiKS5yZXBsYWNlKC9cXG4vZyxcIlxcXFxuXCIpK1wiJ1wifWZ1bmN0aW9uIGMoYyxkKXtmdW5jdGlvbiBlKGEpe3JldHVybiBtKz1hLnNwbGl0KC9cXG4vKS5sZW5ndGgtMSxrJiYoYT1hLnJlcGxhY2UoL1xccysvZyxcIiBcIikucmVwbGFjZSgvPCEtLVtcXHdcXFddKj8tLT4vZyxcIlwiKSksYSYmKGE9c1sxXStiKGEpK3NbMl0rXCJcXG5cIiksYX1mdW5jdGlvbiBmKGIpe3ZhciBjPW07aWYoaj9iPWooYixkKTpnJiYoYj1iLnJlcGxhY2UoL1xcbi9nLGZ1bmN0aW9uKCl7cmV0dXJuIG0rKyxcIiRsaW5lPVwiK20rXCI7XCJ9KSksMD09PWIuaW5kZXhPZihcIj1cIikpe3ZhciBlPWwmJiEvXj1bPSNdLy50ZXN0KGIpO2lmKGI9Yi5yZXBsYWNlKC9ePVs9I10/fFtcXHM7XSokL2csXCJcIiksZSl7dmFyIGY9Yi5yZXBsYWNlKC9cXHMqXFwoW15cXCldK1xcKS8sXCJcIik7bltmXXx8L14oaW5jbHVkZXxwcmludCkkLy50ZXN0KGYpfHwoYj1cIiRlc2NhcGUoXCIrYitcIilcIil9ZWxzZSBiPVwiJHN0cmluZyhcIitiK1wiKVwiO2I9c1sxXStiK3NbMl19cmV0dXJuIGcmJihiPVwiJGxpbmU9XCIrYytcIjtcIitiKSxyKGEoYiksZnVuY3Rpb24oYSl7aWYoYSYmIXBbYV0pe3ZhciBiO2I9XCJwcmludFwiPT09YT91OlwiaW5jbHVkZVwiPT09YT92Om5bYV0/XCIkdXRpbHMuXCIrYTpvW2FdP1wiJGhlbHBlcnMuXCIrYTpcIiRkYXRhLlwiK2Esdys9YStcIj1cIitiK1wiLFwiLHBbYV09ITB9fSksYitcIlxcblwifXZhciBnPWQuZGVidWcsaD1kLm9wZW5UYWcsaT1kLmNsb3NlVGFnLGo9ZC5wYXJzZXIsaz1kLmNvbXByZXNzLGw9ZC5lc2NhcGUsbT0xLHA9eyRkYXRhOjEsJGZpbGVuYW1lOjEsJHV0aWxzOjEsJGhlbHBlcnM6MSwkb3V0OjEsJGxpbmU6MX0scT1cIlwiLnRyaW0scz1xP1tcIiRvdXQ9Jyc7XCIsXCIkb3V0Kz1cIixcIjtcIixcIiRvdXRcIl06W1wiJG91dD1bXTtcIixcIiRvdXQucHVzaChcIixcIik7XCIsXCIkb3V0LmpvaW4oJycpXCJdLHQ9cT9cIiRvdXQrPXRleHQ7cmV0dXJuICRvdXQ7XCI6XCIkb3V0LnB1c2godGV4dCk7XCIsdT1cImZ1bmN0aW9uKCl7dmFyIHRleHQ9JycuY29uY2F0LmFwcGx5KCcnLGFyZ3VtZW50cyk7XCIrdCtcIn1cIix2PVwiZnVuY3Rpb24oZmlsZW5hbWUsZGF0YSl7ZGF0YT1kYXRhfHwkZGF0YTt2YXIgdGV4dD0kdXRpbHMuJGluY2x1ZGUoZmlsZW5hbWUsZGF0YSwkZmlsZW5hbWUpO1wiK3QrXCJ9XCIsdz1cIid1c2Ugc3RyaWN0Jzt2YXIgJHV0aWxzPXRoaXMsJGhlbHBlcnM9JHV0aWxzLiRoZWxwZXJzLFwiKyhnP1wiJGxpbmU9MCxcIjpcIlwiKSx4PXNbMF0seT1cInJldHVybiBuZXcgU3RyaW5nKFwiK3NbM10rXCIpO1wiO3IoYy5zcGxpdChoKSxmdW5jdGlvbihhKXthPWEuc3BsaXQoaSk7dmFyIGI9YVswXSxjPWFbMV07MT09PWEubGVuZ3RoP3grPWUoYik6KHgrPWYoYiksYyYmKHgrPWUoYykpKX0pO3ZhciB6PXcreCt5O2cmJih6PVwidHJ5e1wiK3orXCJ9Y2F0Y2goZSl7dGhyb3cge2ZpbGVuYW1lOiRmaWxlbmFtZSxuYW1lOidSZW5kZXIgRXJyb3InLG1lc3NhZ2U6ZS5tZXNzYWdlLGxpbmU6JGxpbmUsc291cmNlOlwiK2IoYykrXCIuc3BsaXQoL1xcXFxuLylbJGxpbmUtMV0ucmVwbGFjZSgvXlxcXFxzKy8sJycpfTt9XCIpO3RyeXt2YXIgQT1uZXcgRnVuY3Rpb24oXCIkZGF0YVwiLFwiJGZpbGVuYW1lXCIseik7cmV0dXJuIEEucHJvdG90eXBlPW4sQX1jYXRjaChCKXt0aHJvdyBCLnRlbXA9XCJmdW5jdGlvbiBhbm9ueW1vdXMoJGRhdGEsJGZpbGVuYW1lKSB7XCIreitcIn1cIixCfX12YXIgZD1mdW5jdGlvbihhLGIpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiP3EoYix7ZmlsZW5hbWU6YX0pOmcoYSxiKX07ZC52ZXJzaW9uPVwiMy4wLjBcIixkLmNvbmZpZz1mdW5jdGlvbihhLGIpe2VbYV09Yn07dmFyIGU9ZC5kZWZhdWx0cz17b3BlblRhZzpcIjwlXCIsY2xvc2VUYWc6XCIlPlwiLGVzY2FwZTohMCxjYWNoZTohMCxjb21wcmVzczohMSxwYXJzZXI6bnVsbH0sZj1kLmNhY2hlPXt9O2QucmVuZGVyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiKX07dmFyIGc9ZC5yZW5kZXJGaWxlPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZC5nZXQoYSl8fHAoe2ZpbGVuYW1lOmEsbmFtZTpcIlJlbmRlciBFcnJvclwiLG1lc3NhZ2U6XCJUZW1wbGF0ZSBub3QgZm91bmRcIn0pO3JldHVybiBiP2MoYik6Y307ZC5nZXQ9ZnVuY3Rpb24oYSl7dmFyIGI7aWYoZlthXSliPWZbYV07ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgZG9jdW1lbnQpe3ZhciBjPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpO2lmKGMpe3ZhciBkPShjLnZhbHVlfHxjLmlubmVySFRNTCkucmVwbGFjZSgvXlxccyp8XFxzKiQvZyxcIlwiKTtiPXEoZCx7ZmlsZW5hbWU6YX0pfX1yZXR1cm4gYn07dmFyIGg9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9dHlwZW9mIGEsXCJudW1iZXJcIj09PWI/YSs9XCJcIjphPVwiZnVuY3Rpb25cIj09PWI/aChhLmNhbGwoYSkpOlwiXCIpLGF9LGk9e1wiPFwiOlwiJiM2MDtcIixcIj5cIjpcIiYjNjI7XCIsJ1wiJzpcIiYjMzQ7XCIsXCInXCI6XCImIzM5O1wiLFwiJlwiOlwiJiMzODtcIn0saj1mdW5jdGlvbihhKXtyZXR1cm4gaVthXX0saz1mdW5jdGlvbihhKXtyZXR1cm4gaChhKS5yZXBsYWNlKC8mKD8hW1xcdyNdKzspfFs8PlwiJ10vZyxqKX0sbD1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT17fS50b1N0cmluZy5jYWxsKGEpfSxtPWZ1bmN0aW9uKGEsYil7dmFyIGMsZDtpZihsKGEpKWZvcihjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWIuY2FsbChhLGFbY10sYyxhKTtlbHNlIGZvcihjIGluIGEpYi5jYWxsKGEsYVtjXSxjKX0sbj1kLnV0aWxzPXskaGVscGVyczp7fSwkaW5jbHVkZTpnLCRzdHJpbmc6aCwkZXNjYXBlOmssJGVhY2g6bX07ZC5oZWxwZXI9ZnVuY3Rpb24oYSxiKXtvW2FdPWJ9O3ZhciBvPWQuaGVscGVycz1uLiRoZWxwZXJzO2Qub25lcnJvcj1mdW5jdGlvbihhKXt2YXIgYj1cIlRlbXBsYXRlIEVycm9yXFxuXFxuXCI7Zm9yKHZhciBjIGluIGEpYis9XCI8XCIrYytcIj5cXG5cIithW2NdK1wiXFxuXFxuXCI7XCJvYmplY3RcIj09dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUuZXJyb3IoYil9O3ZhciBwPWZ1bmN0aW9uKGEpe3JldHVybiBkLm9uZXJyb3IoYSksZnVuY3Rpb24oKXtyZXR1cm5cIntUZW1wbGF0ZSBFcnJvcn1cIn19LHE9ZC5jb21waWxlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChjKXt0cnl7cmV0dXJuIG5ldyBpKGMsaCkrXCJcIn1jYXRjaChkKXtyZXR1cm4gYi5kZWJ1Zz9wKGQpKCk6KGIuZGVidWc9ITAscShhLGIpKGMpKX19Yj1ifHx7fTtmb3IodmFyIGcgaW4gZSl2b2lkIDA9PT1iW2ddJiYoYltnXT1lW2ddKTt2YXIgaD1iLmZpbGVuYW1lO3RyeXt2YXIgaT1jKGEsYil9Y2F0Y2goail7cmV0dXJuIGouZmlsZW5hbWU9aHx8XCJhbm9ueW1vdXNcIixqLm5hbWU9XCJTeW50YXggRXJyb3JcIixwKGopfXJldHVybiBkLnByb3RvdHlwZT1pLnByb3RvdHlwZSxkLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGkudG9TdHJpbmcoKX0saCYmYi5jYWNoZSYmKGZbaF09ZCksZH0scj1uLiRlYWNoLHM9XCJicmVhayxjYXNlLGNhdGNoLGNvbnRpbnVlLGRlYnVnZ2VyLGRlZmF1bHQsZGVsZXRlLGRvLGVsc2UsZmFsc2UsZmluYWxseSxmb3IsZnVuY3Rpb24saWYsaW4saW5zdGFuY2VvZixuZXcsbnVsbCxyZXR1cm4sc3dpdGNoLHRoaXMsdGhyb3csdHJ1ZSx0cnksdHlwZW9mLHZhcix2b2lkLHdoaWxlLHdpdGgsYWJzdHJhY3QsYm9vbGVhbixieXRlLGNoYXIsY2xhc3MsY29uc3QsZG91YmxlLGVudW0sZXhwb3J0LGV4dGVuZHMsZmluYWwsZmxvYXQsZ290byxpbXBsZW1lbnRzLGltcG9ydCxpbnQsaW50ZXJmYWNlLGxvbmcsbmF0aXZlLHBhY2thZ2UscHJpdmF0ZSxwcm90ZWN0ZWQscHVibGljLHNob3J0LHN0YXRpYyxzdXBlcixzeW5jaHJvbml6ZWQsdGhyb3dzLHRyYW5zaWVudCx2b2xhdGlsZSxhcmd1bWVudHMsbGV0LHlpZWxkLHVuZGVmaW5lZFwiLHQ9L1xcL1xcKltcXHdcXFddKj9cXCpcXC98XFwvXFwvW15cXG5dKlxcbnxcXC9cXC9bXlxcbl0qJHxcIig/OlteXCJcXFxcXXxcXFxcW1xcd1xcV10pKlwifCcoPzpbXidcXFxcXXxcXFxcW1xcd1xcV10pKid8XFxzKlxcLlxccypbJFxcd1xcLl0rL2csdT0vW15cXHckXSsvZyx2PW5ldyBSZWdFeHAoW1wiXFxcXGJcIitzLnJlcGxhY2UoLywvZyxcIlxcXFxifFxcXFxiXCIpK1wiXFxcXGJcIl0uam9pbihcInxcIiksXCJnXCIpLHc9L15cXGRbXixdKnwsXFxkW14sXSovZyx4PS9eLCt8LCskL2cseT0vXiR8LCsvO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZT9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gZH0pOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWQ6dGhpcy50ZW1wbGF0ZT1kfSgpOyIsIiFmdW5jdGlvbihnbG9iYWwpIHtcblxuICBpZiAoZ2xvYmFsLnRlbXBsYXRlKSB7XG4gICAgZ2xvYmFsLnRlbXBsYXRlLmNvbmZpZygnb3BlblRhZycsJzwjJyk7XG4gICAgZ2xvYmFsLnRlbXBsYXRlLmNvbmZpZygnY2xvc2VUYWcnLCcjPicpO1xuICB9XG5cbiAgZ2xvYmFsLnNub3QgPSB7fTtcblxuICBnbG9iYWwuc25vdC51dGlsID0ge1xuICAgIGxlZnRfcG9zOiBsZWZ0X3BvcyxcbiAgICB0b3BfcG9zOiB0b3BfcG9zLFxuICAgIGlzX21vYmlsZTogaXNfbW9iaWxlLFxuICAgIGlzX3dlY2hhdF9sb2dpbjogaXNfd2VjaGF0X2xvZ2luLFxuICAgIGdldF93aW5kb3dfd2lkdGg6IGdldF93aW5kb3dfd2lkdGgsXG4gICAgZ2V0X3dpbmRvd19oZWlnaHQ6IGdldF93aW5kb3dfaGVpZ2h0LFxuICAgIHBvc2l0aW9uX3RvX3JvdGF0aW9uOiBwb3NpdGlvbl90b19yb3RhdGlvbixcbiAgICBkaXN0YW5jZTJEOiBkaXN0YW5jZTJELFxuICAgIGRpc3RhbmNlM0Q6IGRpc3RhbmNlM0QsXG4gICAgZXBzaWxvbjogZXBzaWxvbixcbiAgICBjc3NfdGV4dF90b19tYXRyaXg6IGNzc190ZXh0X3RvX21hdHJpeCxcbiAgICBtYXRyaXhfdG9fY3NzX3RleHQ6IG1hdHJpeF90b19jc3NfdGV4dCxcbiAgICB3ZWJnbF9jaGVjazogd2ViZ2xfY2hlY2ssXG4gICAgbG9hZF9qczogbG9hZF9qcyxcbiAgICByb3RhdGlvbl90b19wb3NpdGlvbjogcm90YXRpb25fdG9fcG9zaXRpb25cbiAgfTtcblxuICBmdW5jdGlvbiB0b3BfcG9zKGVsZW0pIHtcbiAgICB2YXIgY3VydG9wID0gMDtcbiAgICBpZiAoZWxlbS5vZmZzZXRQYXJlbnQpIHtcbiAgICAgIGRvIHsgXG4gICAgICAgICAgY3VydG9wICs9IGVsZW0ub2Zmc2V0VG9wOyBcbiAgICAgIH0gd2hpbGUgKGVsZW0gPSBlbGVtLm9mZnNldFBhcmVudCk7XG4gICAgfVxuICAgIHJldHVybiBjdXJ0b3A7XG4gIH07XG5cbiAgZnVuY3Rpb24gbGVmdF9wb3MoZWxlbSkge1xuICAgIHZhciBjdXJsZWZ0ID0gMDtcbiAgICBpZiAoZWxlbS5vZmZzZXRQYXJlbnQpIHtcbiAgICAgICAgZG8geyBcbiAgICAgICAgICAgIGN1cmxlZnQgKz0gZWxlbS5vZmZzZXRMZWZ0OyBcbiAgICAgICAgfSB3aGlsZSAoZWxlbSA9IGVsZW0ub2Zmc2V0UGFyZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cmxlZnQ7XG4gIH07XG4gIFxuICBmdW5jdGlvbiBpc19tb2JpbGUoKSB7XG4gICAgcmV0dXJuIGdldF93aW5kb3dfd2lkdGgoKSA8IDUwMDtcbiAgfVxuICBcbiAgZnVuY3Rpb24gaXNfd2VjaGF0X2xvZ2luKCkge1xuICAgIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNaWNyb01lc3NlbmdlcicpID49IDAgPyB0cnVlIDogZmFsc2U7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGdldF93aW5kb3dfd2lkdGgoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZ2V0X3dpbmRvd19oZWlnaHQoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHBvc2l0aW9uX3RvX3JvdGF0aW9uKHgsIHksIHopIHtcbiAgICB2YXIgciA9IGRpc3RhbmNlM0QoeCwgeSwgeiwgMCwgMCwgMCk7XG4gICAgdmFyIHJ4ID0gTWF0aC5hc2luKHogLyByKTtcbiAgICB2YXIgcnkgPSBNYXRoLmFzaW4oeSAvIHIgLyBNYXRoLmNvcyhyeCkpO1xuICAgIGlmICh4IDwgMCkge1xuICAgICAgICByeSA9IHJ5ID4gMCA/IE1hdGguUEkgLSByeSA6IC0gTWF0aC5QSSAtIHJ5O1xuICAgIH1cbiAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHJ4OiAtIHJ4ICogMTgwIC8gTWF0aC5QSSxcbiAgICAgIHJ5OiAocnkgPCAwID8gcnkgKyBNYXRoLlBJICogMiA6IHJ5KSAqIDE4MCAvIE1hdGguUElcbiAgICB9O1xuICB9XG4gIFxuICBmdW5jdGlvbiBkaXN0YW5jZTJEKGEsIGIsIGMsIGQpIHtcbiAgICByZXR1cm4gTWF0aC5wb3coKGEgLSBjKSAqIChhIC0gYykgKyAoYiAtIGQpICogKGIgLSBkKSwgMC41KTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZGlzdGFuY2UzRChhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgcmV0dXJuIE1hdGgucG93KChhIC0gZCkgKiAoYSAtIGQpICsgKGIgLSBlKSAqIChiIC0gZSkgKyAoYyAtIGYpICogKGMgLSBmKSwgMC41KTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZXBzaWxvbih2YWx1ZSkge1xuICAgIHJldHVybiBNYXRoLmFicyh2YWx1ZSkgPCAwLjAwMDAwMSA/IDAgOiB2YWx1ZS50b0ZpeGVkKDUpO1xuICB9O1xuICBcbiAgZnVuY3Rpb24gY3NzX3RleHRfdG9fbWF0cml4KHQpIHtcbiAgICB2YXIgbSA9IG5ldyBXZWJLaXRDU1NNYXRyaXgodCk7XG4gICAgcmV0dXJuIFtcbiAgICAgIGVwc2lsb24obS5tMTEpLCBlcHNpbG9uKG0ubTEyKSwgZXBzaWxvbihtLm0xMyksIGVwc2lsb24obS5tMTQpLFxuICAgICAgZXBzaWxvbihtLm0yMSksIGVwc2lsb24obS5tMjIpLCBlcHNpbG9uKG0ubTIzKSwgZXBzaWxvbihtLm0yNCksXG4gICAgICBlcHNpbG9uKG0ubTMxKSwgZXBzaWxvbihtLm0zMiksIGVwc2lsb24obS5tMzMpLCBlcHNpbG9uKG0ubTM0KSxcbiAgICAgIGVwc2lsb24obS5tNDEpLCBlcHNpbG9uKG0ubTQyKSwgZXBzaWxvbihtLm00MyksIGVwc2lsb24obS5tNDQpXG4gICAgXTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gbWF0cml4X3RvX2Nzc190ZXh0KGEsIGIsIGMsIGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLCBmLCBnLCBoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSwgaiwgaywgbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0sIG4sIG8sIHApIHtcbiAgICAgIGlmICh0eXBlb2YoYSkgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICByZXR1cm4gJ21hdHJpeDNkKCcgKyAoYS5qb2luKCcsJykpICsgJyknO1xuICAgICAgfVxuICAgICAgcmV0dXJuICdtYXRyaXgzZCgnICsgYSArICcsJyArIGIgKyAnLCcgKyBjICsgJywnICsgZCsnLCcgKyBlICsgJywnICsgZiArICcsJyArIGcgKyAnLCcgKyBoICsgJywnICsgaSArICcsJyArIGogKyAnLCcgKyBrICsgJywnICsgbCArICcsJyArIG0gKyAnLCcgKyBuICsgJywnICsgbysgJywnICsgcCArICcpJztcbiAgfVxuICBcbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT0gKGZ1bmN0aW9uICgpIHsgXG4gICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgXG4gICAgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBcbiAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IFxuICAgIHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IFxuICAgIC8vIGlmIGFsbCBlbHNlIGZhaWxzLCB1c2Ugc2V0VGltZW91dCBcbiAgICBmdW5jdGlvbiAoY2FsbGJhY2spIHsgXG4gICAgICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7IC8vIHNob290IGZvciA2MCBmcHMgXG4gICAgfTsgXG4gIH0pKCk7IFxuICBcbiAgZnVuY3Rpb24gd2ViZ2xfY2hlY2socmV0dXJuX2NvbnRleHQpIHtcbiAgICBpZiAoISF3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XG4gICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgIHZhciBuYW1lcyA9IFsnd2ViZ2wnLCAnZXhwZXJpbWVudGFsLXdlYmdsJywgJ21vei13ZWJnbCcsICd3ZWJraXQtM2QnXTtcbiAgICAgIHZhciBjb250ZXh0ID0gZmFsc2U7XG4gIFxuICAgICAgZm9yICh2YXIgaSA9IDA7aSA8IDQ7IGkrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChuYW1lc1tpXSk7XG4gICAgICAgICAgaWYgKGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0UGFyYW1ldGVyID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIFdlYkdMIGlzIGVuYWJsZWRcbiAgICAgICAgICAgIGlmIChyZXR1cm5fY29udGV4dCkge1xuICAgICAgICAgICAgICAvLyByZXR1cm4gV2ViR0wgb2JqZWN0IGlmIHRoZSBmdW5jdGlvbidzIGFyZ3VtZW50IGlzIHByZXNlbnRcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lc1tpXSxcbiAgICAgICAgICAgICAgICBnbDogY29udGV4dFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZWxzZSwgcmV0dXJuIGp1c3QgdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoKGUpIHt9XG4gICAgICB9XG4gIFxuICAgICAgLy8gV2ViR0wgaXMgc3VwcG9ydGVkLCBidXQgZGlzYWJsZWRcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIFxuICAgIC8vIFdlYkdMIG5vdCBzdXBwb3J0ZWRcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGxvYWRfanMoZmlsZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgX2RvYyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgdmFyIGpzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAganMuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xuICAgIGpzLnNldEF0dHJpYnV0ZSgnc3JjJywgZmlsZSk7XG4gICAgX2RvYy5hcHBlbmRDaGlsZChqcyk7XG4gICAgaWYgKCEvKkBjY19vbiFAKi8wKSB7IC8vaWYgbm90IGllXG4gICAgICAvL2ZpcmVmb3gy44CBZmlyZWZveDPjgIFzYWZhcmkzLjEr44CBb3BlcmE5LjYrIHN1cHBvcnQganMub25sb2FkXG4gICAgICBqcy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vaWU244CBaWU3IHN1cHBvcnQganMub25yZWFkeXN0YXRlY2hhbmdlXG4gICAgICBqcy5vblJlYWR5U3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChqcy5yZWFkeVN0YXRlID09ICdsb2FkZWQnIHx8IGpzLnJlYWR5U3RhdGUgPT0gJ2NvbXBsZXRlJykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHJvdGF0aW9uX3RvX3Bvc2l0aW9uKHosIHJ4LCByeSwgcnopIHtcbiAgICB6ID0gLSB6O1xuICAgIHJ4ID0gLSByeDtcbiAgXG4gICAgdmFyIHggPSBzbm90LmJnX3NpemUgLyAyO1xuICAgIHZhciB5ID0gc25vdC5iZ19zaXplIC8gMjtcbiAgXG4gICAgdmFyIHRyYW5zZm9ybSA9IGNzc190ZXh0X3RvX21hdHJpeCgndHJhbnNsYXRlM2QoJyArIHggKyAncHgsJyArIHkgKyAncHgsMCkgcm90YXRlWSgnICsgKDApICsgJ2RlZykgcm90YXRlWCgnICsgKDApICsgJ2RlZykgcm90YXRlWSgnICsgKHJ5ID8gLSByeSA6IDApICsgJ2RlZykgcm90YXRlWCgnICsgKHJ4ID8gLSByeCA6IDApICsgJ2RlZykgcm90YXRlWignICsgKHJ6ID8gcnogOiAwKSArJ2RlZykgdHJhbnNsYXRlWignICsgeiArICdweCknICk7XG4gICAgcmV0dXJuIFsgLSB0cmFuc2Zvcm1bMTJdICsgc25vdC5iZ19zaXplIC8gMiwgdHJhbnNmb3JtWzEzXSAtIHNub3QuYmdfc2l6ZSAvIDIsIC0gdHJhbnNmb3JtWzE0XV07XG4gIH1cbn0od2luZG93KTtcbiIsIiFmdW5jdGlvbihnbG9iYWwpIHtcblxuICB2YXIgZG9tX29mZnNldF90b3A7XG4gIHZhciBkb21fb2Zmc2V0X2xlZnQ7XG4gIHZhciBzbm90ID0ge1xuXG4gICAgY2FtZXJhX2xvb2tfYXQ6IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgejogMSxcbiAgICB9LFxuICAgIG1vdXNlX3NlbnNpdGl2aXR5OiAwLjMsXG4gICAgYXV0b19yb3RhdGlvbjogMCxcbiAgICBmcmFtZXM6IDAsXG4gICAgYmdfcm90YXRpb246IFswLCAwLCAwLCAwLCAwLCAwXSxcblxuICAgIHBhdXNlX2FuaW1hdGlvbjogZmFsc2UsXG5cbiAgICBkb20gICAgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbm90LXdyYXAnKSxcbiAgICBjYW1lcmEgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbm90LWNhbWVyYScpLFxuICAgIGNvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nub3QtY29udGFpbmVyJyksXG5cbiAgICBiZ19zaXplOiAxMDI0LFxuXG4gICAgZ2VuZXJhdG9yOiB7fSxcbiAgICBneXJvOiBmYWxzZSxcbiAgICByeTogMCwgICAgICAgIC8vIFJvdGF0ZSAqIGRlZ3JlZSBhcm91bmQgeSBheGlzXG4gICAgcng6IDAsICAgICAgICAvLyBSb3RhdGUgKiBkZWdyZWUgYXJvdW5kIHggYXhpc1xuICAgIG1heF9mb3Y6IDEyMCwgLy8gTWF4IGZpZWxkIG9mIHZpZXcgKGRlZ3JlZSlcbiAgICBtaW5fZm92OiA2MCwgICAvLyBNaW4gZmllbGQgb2YgdmlldyAoZGVncmVlKVxuICAgIGZvdjogOTAsICAgICAgLy8gRGVmYXVsdCBmaWVsZCBvZiB2aWV3XG4gICAgc21vb3RoOiAwLjE3LFxuICAgIG1pbl9kZXRlY3RfZGlzdGFuY2U6IDIwLFxuICAgIG9uX2NsaWNrOiBmdW5jdGlvbigpIHt9LFxuICAgIG9uX3Nwcml0ZV9jbGljazogZnVuY3Rpb24oKSB7fSxcbiAgfVxuICB2YXIgcHJldl9neXJvO1xuXG4gIHZhciBQSSA9IE1hdGguUEk7XG4gIHZhciBzaW4gPSBNYXRoLnNpbjtcbiAgdmFyIGNvcyA9IE1hdGguY29zO1xuICB2YXIgdGFuID0gTWF0aC50YW47XG4gIHZhciBhY29zID0gTWF0aC5hY29zO1xuICB2YXIgYXRhbiA9IE1hdGguYXRhbjtcbiAgdmFyIHBvdyA9IE1hdGgucG93O1xuICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xuICB2YXIgc3FydCA9IE1hdGguc3FydDtcblxuICB2YXIgZGlzdF9yeDtcbiAgdmFyIGRpc3Rfcnk7XG4gIHZhciBwcmV2aW91c19xdWF0ID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcbiAgdmFyIHNjcmVlbl9vcmllbnRhdGlvbiA9IDA7XG4gIHZhciB2YXJzID0ge1xuICAgIGFscGhhOiAwLFxuICAgIGJldGE6IDkwICogUEkgLyAxODAsXG4gICAgZ2FtbWE6IDBcbiAgfTtcblxuICB2YXIgdmFyc0Rlc3QgPSB7XG4gICAgYWxwaGE6IDAsXG4gICAgYmV0YTogMCxcbiAgICBnYW1tYTogMFxuICB9O1xuXG5cbiAgZnVuY3Rpb24gX3BvaW50U3RhbmRhcmRsaXphdGlvbih4LCB5LCB6KSB7XG4gICAgdmFyIHJhdGlvID0gMjAwIC8gZGlzdGFuY2UzRCh4LCB5LCB6LCAwLCAwLCAwKTtcbiAgICByZXR1cm4gW3ggKiByYXRpbywgeSAqIHJhdGlvLCB6ICogcmF0aW9dO1xuICB9XG5cbiAgaWYgKGdsb2JhbC5zbm90KSB7XG4gICAgZm9yICh2YXIgaSBpbiBzbm90KSB7XG4gICAgICBnbG9iYWwuc25vdFtpXSA9IHNub3RbaV07XG4gICAgfVxuICAgIHNub3QgPSBnbG9iYWwuc25vdDtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmVycm9yKCdzbm90LXV0aWxzLmpzIGlzIG1pc3NpbmcnKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHV0aWwgPSBnbG9iYWwuc25vdC51dGlsO1xuICB2YXIgZXBzaWxvbiA9IHV0aWwuZXBzaWxvbjtcbiAgdmFyIGRpc3RhbmNlM0QgPSB1dGlsLmRpc3RhbmNlM0Q7XG4gIHZhciBkaXN0YW5jZTJEID0gdXRpbC5kaXN0YW5jZTJEO1xuXG4gIHZhciBzZXRfZm92ID0gZnVuY3Rpb24gKGRlZ3JlZSkge1xuICAgIGlmIChkZWdyZWUgPCBzbm90Lm1pbl9mb3YgfHwgZGVncmVlID4gc25vdC5tYXhfZm92KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNub3QuZm92ID0gZGVncmVlO1xuICAgIHNub3QuY29udGFpbmVyLnN0eWxlWyctd2Via2l0LXRyYW5zZm9ybSddID0gJ3NjYWxlKCcgKyB0YW4oc25vdC5tYXhfZm92IC8gMiAqIFBJIC8gMTgwKSAvIHRhbihzbm90LmZvdiAvIDIgKiBQSSAvIDE4MCkgKyAnKSc7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICB2YXIgc3ByaXRlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Nwcml0ZScpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3ByaXRlcy5sZW5ndGg7ICsrIGkpIHtcbiAgICAgIHNwcml0ZXNbaV0ucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgdmFyIF9pbml0ID0gZnVuY3Rpb24oY29uZmlnLCBhamF4KSB7XG4gICAgcmVzZXQoKTtcblxuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHNub3QuX2FuaW1hdGVJZCk7XG5cbiAgICBmb3IgKHZhciBpIGluIGNvbmZpZykge1xuICAgICAgaWYgKGkgPT0gJ2dlbmVyYXRvcicpIHtcbiAgICAgICAgbWVyZ2VfanNvbihzbm90LmdlbmVyYXRvciwgY29uZmlnLmdlbmVyYXRvcik7XG4gICAgICB9XG4gICAgICBzbm90W2ldID0gY29uZmlnW2ldO1xuICAgIH1cbiAgICBwcmV2X2d5cm8gPSBzbm90Lmd5cm87XG5cbiAgICBkb21fb2Zmc2V0X2xlZnQgPSB1dGlsLmxlZnRfcG9zKHNub3QuZG9tKTtcbiAgICBkb21fb2Zmc2V0X3RvcCA9IHV0aWwudG9wX3Bvcyhzbm90LmRvbSk7XG5cbiAgICBkaXN0X3J4ID0gc25vdC5yeCArIDAuMTsgLy91bmtub3duIGJ1ZyBmb3IgbW9iaWxlIHNhZmFyaVxuICAgIGRpc3RfcnkgPSBzbm90LnJ5O1xuXG4gICAgLy9GaXJzdCBpbml0XG4gICAgaWYgKCFhamF4KSB7XG5cbiAgICAgIHNub3Qud2lkdGggPSBzbm90LmRvbS5vZmZzZXRXaWR0aDtcbiAgICAgIHNub3QuaGVpZ2h0ID0gc25vdC5kb20ub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAvL2NvbXB1dGUgdGhlIG1heCBIb3Jpem9udGFsIEZpZWxkIG9mIHZpZXdcbiAgICAgIC8vcGVyc3BlY3RpdmU9IHByb2plY3RpdmVTY3JlZW5XaWR0aC8yXG4gICAgICAvLyAgICAgICAgICAgPSB3aWR0aC8yL3RhbihtYXhfZm92LzIpXG4gICAgICBzbm90LnBlcnNwZWN0aXZlID0gc25vdC53aWR0aCAvIDIgLyB0YW4oc25vdC5tYXhfZm92IC8gMiAqIFBJIC8gMTgwKTtcblxuICAgICAgc25vdC5jb250YWluZXIuc3R5bGVbJy13ZWJraXQtcGVyc3BlY3RpdmUnXSA9IHNub3QucGVyc3BlY3RpdmUgKyAncHgnO1xuXG4gICAgICAvL2NhbWVyYSBvZmZzZXRcbiAgICAgIC8vIFogaXMgZGVwdGgoZnJvbnQpIFkgaXMgaGVpZ2h0IFggaXMgcmlnaHRcbiAgICAgIC8vXG4gICAgICAvLyB0cmFuc2xhdGVaIHNldEZPVlxuICAgICAgLy8gcm90YXRlWCByb3RhdGUgYXJvdW5kIFggYXhpc1xuICAgICAgLy8gcm90YXRlWSByb3RhdGUgYXJvdW5kIFkgYXhpc1xuICAgICAgLy8gdHJhbnNsYXRlWCB0cmFuc2xhdGUgdGhlIENhbWVyYSB0byBjZW50ZXJcbiAgICAgIC8vIHRyYW5zbGF0ZVlcbiAgICAgIHNub3QuY2FtZXJhQmFzZVRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKCcgKyBlcHNpbG9uKC0gKHNub3QuYmdfc2l6ZSAtIHNub3Qud2lkdGgpIC8gMikgKyAncHgpIHRyYW5zbGF0ZVkoJyArIGVwc2lsb24oLSAoc25vdC5iZ19zaXplIC0gc25vdC5oZWlnaHQpIC8gMikgKyAncHgpJztcbiAgICAgIHNub3QuY2FtZXJhLnN0eWxlWyctd2Via2l0LXRyYW5zZm9ybSddID0gJ3RyYW5zbGF0ZVooLScgKyBzbm90LnBlcnNwZWN0aXZlICsgJ3B4KSByb3RhdGVYKCcgKyBzbm90LnJ4ICsgJ2RlZykgcm90YXRlWSgnICsgc25vdC5yeSArICdkZWcpJyArIHNub3QuY2FtZXJhQmFzZVRyYW5zZm9ybTtcbiAgICB9XG4gICAgc2V0X2Zvdihzbm90LmZvdik7XG5cbiAgICBpZiAoY29uZmlnLmJnX2ltZ3MpIHtcbiAgICAgIGxvYWRfYmdfaW1ncyhjb25maWcuYmdfaW1ncywgY29uZmlnLmJnX3JvdGF0aW9uIHx8IHNub3QuYmdfcm90YXRpb24pO1xuICAgIH1cblxuICAgIGlmIChjb25maWcpIHtcbiAgICAgIF9sb2FkX3Nwcml0ZXMoY29uZmlnLnNwcml0ZXMpO1xuICAgIH1cblxuICAgIGlmICh1dGlsLmlzX21vYmlsZSgpKSB7XG4gICAgICBzbm90LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgbW91c2VEb3duLCBmYWxzZSk7XG4gICAgICBzbm90LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnICwgbW91c2VNb3ZlLCBmYWxzZSk7XG4gICAgICBzbm90LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcgICwgbW91c2VVcCAgLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNub3QuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicgLCBtb3VzZURvd24gLCBmYWxzZSk7XG4gICAgICBzbm90LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnICwgbW91c2VNb3ZlICwgZmFsc2UpO1xuICAgICAgc25vdC5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcgICAsIG1vdXNlVXAgICAsIGZhbHNlKTtcbiAgICAgIHNub3QuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCBtb3VzZVdoZWVsLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5jYWxsYmFjaykge1xuICAgICAgY29uZmlnLmNhbGxiYWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZF9iZ19pbWdzKGJnX2ltZ3MsIGJnX3JvdGF0aW9uKSB7XG4gICAgdmFyIGJnX2NvbmZpZyA9IHtcbiAgICAgIGZyb250IDogJ3JvdGF0ZVkoOTBkZWcpJyArICcgICAgICAgICAgICAgICAgcm90YXRlWignICsgYmdfcm90YXRpb25bMF0gKyAnZGVnKSAgdHJhbnNsYXRlWigtJyArIChzbm90LmJnX3NpemUgLyAyKSArICdweCknLFxuICAgICAgYm90dG9tOiAncm90YXRlWSg5MGRlZyknICsgJ3JvdGF0ZVgoOTBkZWcpICByb3RhdGVaKCcgKyBiZ19yb3RhdGlvblsxXSArICdkZWcpICB0cmFuc2xhdGVaKC0nICsgKHNub3QuYmdfc2l6ZSAvIDIpICsgJ3B4KSByb3RhdGVaKDkwZGVnKScsXG4gICAgICBsZWZ0ICA6ICdyb3RhdGVZKDkwZGVnKScgKyAncm90YXRlWSg5MGRlZykgIHJvdGF0ZVooJyArIGJnX3JvdGF0aW9uWzJdICsgJ2RlZykgIHRyYW5zbGF0ZVooLScgKyAoc25vdC5iZ19zaXplIC8gMikgKyAncHgpJyxcbiAgICAgIGJhY2sgIDogJ3JvdGF0ZVkoOTBkZWcpJyArICdyb3RhdGVZKDE4MGRlZykgcm90YXRlWignICsgYmdfcm90YXRpb25bM10gKyAnZGVnKSAgdHJhbnNsYXRlWigtJyArIChzbm90LmJnX3NpemUgLyAyKSArICdweCknLFxuICAgICAgdG9wICAgOiAncm90YXRlWSg5MGRlZyknICsgJ3JvdGF0ZVgoLTkwZGVnKSByb3RhdGVaKCcgKyBiZ19yb3RhdGlvbls0XSArICdkZWcpICB0cmFuc2xhdGVaKC0nICsgKHNub3QuYmdfc2l6ZSAvIDIpICsgJ3B4KSByb3RhdGVaKC05MGRlZyknLFxuICAgICAgcmlnaHQgOiAncm90YXRlWSg5MGRlZyknICsgJ3JvdGF0ZVkoLTkwZGVnKSByb3RhdGVaKCcgKyBiZ19yb3RhdGlvbls1XSArICdkZWcpICB0cmFuc2xhdGVaKC0nICsgKHNub3QuYmdfc2l6ZSAvIDIpICsgJ3B4KSdcbiAgICB9O1xuXG4gICAgdmFyIGJnX2RvbTtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIGZvciAodmFyIGkgaW4gYmdfY29uZmlnKSB7XG4gICAgICBiZ19kb20gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzbm90LWJnICcgKyBpKVswXTtcbiAgICAgIGJnX2RvbS5zdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0nXSA9IGJnX2NvbmZpZ1tpXTtcbiAgICAgIGJnX2RvbS5zdHlsZVsnd2lkdGgnXSA9IHNub3QuYmdfc2l6ZSArIDIgKyAncHgnOyAgICAgICAgLy8gMiBtb3JlIHBpeGVscyBmb3Igb3ZlcmxhcHBpbmcgZ2FwcyAoIGNocm9tZSdzIGJ1ZyApXG4gICAgICBiZ19kb20uc3R5bGVbJ2hlaWdodCddID0gc25vdC5iZ19zaXplICsgMiArICdweCc7ICAgICAgICAvLyAyIG1vcmUgcGl4ZWxzIGZvciBvdmVybGFwcGluZyBnYXBzICggY2hyb21lJ3MgYnVnIClcblxuICAgICAgYmdfZG9tLnNldEF0dHJpYnV0ZSgnc3JjJywgYmdfaW1nc1tjb3VudF0pO1xuICAgICAgYmdfZG9tLnNldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcsIGNvdW50KTtcbiAgICAgICsrY291bnQ7XG4gICAgfVxuICB9XG5cbiAgdmFyIHRvdWNoZXMgPSB7XG4gICAgZng6MCwgICAvLyBGaXJzdCAgZmluZ2VyIHhcbiAgICBmeTowLCAgIC8vIEZpcnN0ICBmaW5nZXIgeVxuICAgIHN4OjAsICAgLy8gU2Vjb25kIGZpbmdlciB4XG4gICAgc3k6MCAgICAvLyBTZWNvbmQgZmluZ2VyIHlcbiAgfTtcblxuICB2YXIgX2xvYWRfc3ByaXRlcyA9IGZ1bmN0aW9uKHNwcml0ZXMpIHtcbiAgICBmb3IgKHZhciBpIGluIHNwcml0ZXMpIHtcbiAgICAgIHZhciB0ID0gc3ByaXRlc1tpXTtcbiAgICAgIGlmICh0LnN0YW5kYXJkbGl6YXRpb24pIHtcbiAgICAgICAgdmFyIHN0YW5kYXJkID0gX3BvaW50U3RhbmRhcmRsaXphdGlvbih0LngsdC55LHQueik7XG4gICAgICAgIHQueD1zdGFuZGFyZFswXTtcbiAgICAgICAgdC55PXN0YW5kYXJkWzFdO1xuICAgICAgICB0Lno9c3RhbmRhcmRbMl07XG4gICAgICB9XG5cbiAgICAgIHZhciB0ZW1wX3dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRlbXBfd3JhcHBlci5pbm5lckhUTUwgPSB0ZW1wbGF0ZShzbm90LmdlbmVyYXRvclt0LmdlbmVyYXRvcl0sIHQpO1xuICAgICAgdmFyIGVsZW1lbnQgPSB0ZW1wX3dyYXBwZXIuZmlyc3RDaGlsZDtcbiAgICAgIGVsZW1lbnQuZGF0YSA9IHNwcml0ZXNbaV07XG4gICAgICBhZGRfc3ByaXRlX2J5X3Bvc2l0aW9uKGVsZW1lbnQsIHQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1fbWFrZV9yb3RhdGlvbl9heGlzKHBvaW50LCByb3RhdGlvbikge1xuICAgIHJldHVybiBuZXcgVEhSRUUuTWF0cml4NCgpLm1ha2VSb3RhdGlvbkF4aXMocG9pbnQsIHJvdGF0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1fbXVsdGlwbHkoKSB7XG4gICAgdmFyIG1hdHMgPSBhcmd1bWVudHM7XG5cbiAgICB2YXIgbCA9IG1hdHMubGVuZ3RoO1xuICAgIHdoaWxlIChsID4gMSkge1xuICAgICAgdmFyIGxhc3QyID0gbWF0c1tsIC0gMl07XG4gICAgICB2YXIgbGFzdDEgPSBtYXRzW2wgLSAxXTtcbiAgICAgIG1hdHNbbCAtIDJdID0gbmV3IFRIUkVFLk1hdHJpeDQoKS5tdWx0aXBseU1hdHJpY2VzKFxuICAgICAgICBsYXN0MixcbiAgICAgICAgbGFzdDFcbiAgICAgICk7XG4gICAgICBsLS07XG4gICAgfVxuICAgIHJldHVybiBtYXRzWzBdO1xuICB9XG5cbiAgZnVuY3Rpb24gdl9zZXRfZnJvbV9tYXRyaXhfcG9zaXRpb24obWF0NCkge1xuICAgIHJldHVybiBuZXcgVEhSRUUuVmVjdG9yMygpLnNldEZyb21NYXRyaXhQb3NpdGlvbihtYXQ0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1fc2V0X3Bvc2l0aW9uKHApIHtcbiAgICByZXR1cm4gbmV3IFRIUkVFLk1hdHJpeDQoKS5zZXRQb3NpdGlvbihwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZF9zcHJpdGVfYnlfcG9zaXRpb24oZWxlbWVudCwgcCkge1xuXG4gICAgdmFyIHggPSBwLng7XG4gICAgdmFyIHogPSAtIHAuejtcbiAgICB2YXIgeSA9IC0gcC55O1xuXG4gICAgdmFyIHNwcml0ZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHNwcml0ZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgc3ByaXRlQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBzcHJpdGVDb250YWluZXIuY2xhc3NOYW1lID0gJ3Nwcml0ZS1jb250YWluZXInO1xuICAgIHNwcml0ZUNvbnRhaW5lci5pZCA9IGVsZW1lbnQuZGF0YS5pZDtcblxuICAgIHNwcml0ZUNvbnRhaW5lci5zdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luLXgnXSA9ICcwJztcbiAgICBzcHJpdGVDb250YWluZXIuc3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbi15J10gPSAnMCc7XG5cbiAgICB2YXIgYXJjID0geCA9PSAwICYmIHogPT0gMCA/IDAgOiBhY29zKCB6IC8gcG93KHggKiB4ICsgeiAqIHosIDAuNSkpO1xuXG4gICAgYXJjID0geCA8IDAgPyAyICogUEkgLSBhcmMgOiBhcmM7XG4gICAgYXJjID0gYXJjICogMTgwIC8gUEk7XG5cbiAgICB2YXIgciA9IGRpc3RhbmNlM0QoeCwgeSwgeiwgMCwgMCwgMCk7XG4gICAgeCArPSBzbm90LmJnX3NpemUgLyAyO1xuICAgIHkgKz0gc25vdC5iZ19zaXplIC8gMjtcblxuICAgIHNwcml0ZUNvbnRhaW5lci5zdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0nXSA9ICd0cmFuc2xhdGUzZCgnICsgZXBzaWxvbih4KSArICdweCwnICsgZXBzaWxvbih5KSArICdweCwnICsgZXBzaWxvbih6KSArICdweCkgcm90YXRlWSgnICsgZXBzaWxvbihhcmMpICsgJ2RlZykgcm90YXRlWCgnICsgZXBzaWxvbigtICh5IC0gc25vdC5iZ19zaXplIC8gMikgLyByICogOTApKydkZWcpIHJvdGF0ZVkoMTgwZGVnKSc7XG5cbiAgICB2YXIgc3ByaXRlV3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHNwcml0ZVdyYXAuY2xhc3NOYW1lPSdzcHJpdGUtd3JhcCc7XG4gICAgc3ByaXRlV3JhcC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICBzcHJpdGVXcmFwLnNldEF0dHJpYnV0ZSgnZGF0YS12aXNpYmxlJywgZWxlbWVudC5kYXRhLnZpc2libGUgPT0gZmFsc2UgPyBmYWxzZSA6IHRydWUpO1xuXG4gICAgc3ByaXRlQ29udGFpbmVyLmFwcGVuZENoaWxkKHNwcml0ZVdyYXApO1xuICAgIHNub3QuY2FtZXJhLmFwcGVuZENoaWxkKHNwcml0ZUNvbnRhaW5lcik7XG4gIH1cblxuICB2YXIgdXBkYXRlX3Nwcml0ZV92aXNpYmlsaXR5ID0gZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgdmlzaWJsZSA9IHNub3Quc3ByaXRlc1tpZF0udmlzaWJsZTtcbiAgICB2YXIgc3ByaXRlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIHNwcml0ZUNvbnRhaW5lci5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgnZGF0YS12aXNpYmxlJywgdmlzaWJsZSA/IHRydWUgOiBmYWxzZSk7XG4gIH1cblxuICB2YXIgdXBkYXRlX3Nwcml0ZV9wb3NpdGlvbiA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIHggPSBzbm90LnNwcml0ZXNbaWRdLng7XG4gICAgdmFyIHkgPSBzbm90LnNwcml0ZXNbaWRdLnk7XG4gICAgdmFyIHogPSBzbm90LnNwcml0ZXNbaWRdLno7XG4gICAgej0tejtcbiAgICB5PS15O1xuICAgIHZhciBhcmMgPSB4ID09IDAgJiYgeiA9PSAwID8gMCA6IGFjb3MoIHogLyBwb3coeCAqIHggKyB6ICogeiwgMC41KSk7XG5cbiAgICBhcmMgPSB4IDwgMCA/IDIgKiBQSSAtIGFyYyA6IGFyYztcbiAgICBhcmMgPSBhcmMgKiAxODAvIFBJO1xuXG4gICAgdmFyIHIgPSBkaXN0YW5jZTNEKHgsIHksIHosIDAsIDAsIDApO1xuICAgIHggKz0gc25vdC5iZ19zaXplIC8gMjtcbiAgICB5ICs9IHNub3QuYmdfc2l6ZSAvIDI7XG5cbiAgICB2YXIgc3ByaXRlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuXG4gICAgc3ByaXRlQ29udGFpbmVyLnN0eWxlWyctd2Via2l0LXRyYW5zZm9ybSddID0gJ3RyYW5zbGF0ZTNkKCcgKyBlcHNpbG9uKHgpICsgJ3B4LCcgKyBlcHNpbG9uKHkpICsgJ3B4LCcgKyBlcHNpbG9uKHopICsgJ3B4KSByb3RhdGVZKCcgKyBlcHNpbG9uKGFyYykgKyAnZGVnKSByb3RhdGVYKCcgKyBlcHNpbG9uKC0gKHkgLSBzbm90LmJnX3NpemUgLyAyKSAvIHIgKiA5MCkgKyAnZGVnKSByb3RhdGVZKDE4MGRlZyknO1xuICB9XG5cbiAgdmFyIG1vdXNlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgdmFyIHggPSBNYXRoLmZsb29yKGV2ZW50LmNsaWVudFggPj0gMCA/IGV2ZW50LmNsaWVudFggOiBldmVudC50b3VjaGVzWzBdLnBhZ2VYKTtcbiAgICB2YXIgeSA9IE1hdGguZmxvb3IoZXZlbnQuY2xpZW50WSA+PSAwID8gZXZlbnQuY2xpZW50WSA6IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpO1xuICAgIHggLT0gZG9tX29mZnNldF9sZWZ0O1xuICAgIHkgLT0gZG9tX29mZnNldF90b3A7XG5cbiAgICB0b3VjaGVzLmNsaWNrID0gZmFsc2U7XG5cbiAgICBpZiAoIXRvdWNoZXMub25Ub3VjaGluZykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoID4gMSkge1xuXG4gICAgICB2YXIgY2Z4ID0geDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgZnJpc3QgIGZpbmdlciB4XG4gICAgICB2YXIgY2Z5ID0geTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgZmlyc3QgIGZpbmdlciB5XG4gICAgICB2YXIgY3N4ID0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWDsgICAgIC8vIEN1cnJlbnQgc2Vjb25kIGZpbmdlciB4XG4gICAgICB2YXIgY3N5ID0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWTsgICAgIC8vIEN1cnJlbnQgc2Vjb25kIGZpbmdlciB5XG5cbiAgICAgIHZhciBkaXMgPSBkaXN0YW5jZTJEKHRvdWNoZXMuZngsIHRvdWNoZXMuZnksIHRvdWNoZXMuc3gsIHRvdWNoZXMuc3kpIC0gZGlzdGFuY2UyRChjZngsIGNmeSwgY3N4LCBjc3kpO1xuXG4gICAgICB2YXIgcmF0aW8gPSAwLjEyO1xuICAgICAgc25vdC5zZXRGb3Yoc25vdC5mb3YgKyBkaXMgKiByYXRpbyk7XG5cbiAgICAgIHRvdWNoZXMuZnggPSBjZng7XG4gICAgICB0b3VjaGVzLmZ5ID0gY2Z5O1xuICAgICAgdG91Y2hlcy5zeCA9IGNzeDtcbiAgICAgIHRvdWNoZXMuc3kgPSBjc3k7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgcmF0aW8gPSBzbm90Lm1vdXNlX3NlbnNpdGl2aXR5O1xuXG4gICAgZGlzdF9yeSA9IGRpc3RfcnkgKyAodG91Y2hlcy5meCAtIHgpICogcmF0aW87XG4gICAgZGlzdF9yeCA9IGRpc3RfcnggLSAodG91Y2hlcy5meSAtIHkpICogcmF0aW87XG5cbiAgICB0b3VjaGVzLmZ4ID0geDtcbiAgICB0b3VjaGVzLmZ5ID0geTtcblxuICAgIGRpc3RfcnggPSBkaXN0X3J4ID4gOTAgPyA5MCA6IGRpc3Rfcng7XG4gICAgZGlzdF9yeCA9IGRpc3RfcnggPCAtOTAgPyAtOTAgOiBkaXN0X3J4O1xuXG4gIH07XG5cbiAgdmFyIG1vdXNlRG93blg7XG4gIHZhciBtb3VzZURvd25ZO1xuICB2YXIgbW91c2VEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgdmFyIHggPSBmbG9vcihldmVudC5jbGllbnRYID49IDAgPyBldmVudC5jbGllbnRYIDogZXZlbnQudG91Y2hlc1swXS5jbGllbnRYKTtcbiAgICB2YXIgeSA9IGZsb29yKGV2ZW50LmNsaWVudFkgPj0gMCA/IGV2ZW50LmNsaWVudFkgOiBldmVudC50b3VjaGVzWzBdLmNsaWVudFkpO1xuICAgIHggLT0gZG9tX29mZnNldF9sZWZ0O1xuICAgIHkgLT0gZG9tX29mZnNldF90b3A7XG5cbiAgICBtb3VzZURvd25YID0geDtcbiAgICBtb3VzZURvd25ZID0geTtcblxuICAgIHRvdWNoZXMuZnggPSB4O1xuICAgIHRvdWNoZXMuZnkgPSB5O1xuICAgIHRvdWNoZXMuY2xpY2sgPSB0cnVlO1xuXG4gICAgaWYgKGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggPiAxKSB7XG5cbiAgICAgIHRvdWNoZXMuc3ggPSBldmVudC50b3VjaGVzWzFdLnBhZ2VYO1xuICAgICAgdG91Y2hlcy5zeSA9IGV2ZW50LnRvdWNoZXNbMV0ucGFnZVk7XG5cbiAgICB9XG5cbiAgICB0b3VjaGVzLm9uVG91Y2hpbmcgPSB0cnVlO1xuICB9XG5cbiAgdmFyIG1vdXNlV2hlZWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICB2YXIgb2Zmc2V0ID0gZXZlbnQuZGVsdGFZO1xuICAgIHNub3Quc2V0Rm92KHNub3QuZm92ICsgb2Zmc2V0ICogMC4wNik7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uX2NsaWNrKHgsIHkpIHtcbiAgICB2YXIgUiA9IDEwMDtcbiAgICB2YXIgZm92ID0gc25vdC5mb3Y7XG4gICAgdmFyIGJnX3NpemUgPSBzbm90LmJnX3NpemU7XG4gICAgdmFyIGFyY0ZhY3RvciA9IE1hdGguUEkgLyAxODA7XG4gICAgdmFyIHJ6ID0gc25vdC5yeiAqIGFyY0ZhY3RvcjtcbiAgICB2YXIgd2lkdGggPSBzbm90LndpZHRoO1xuICAgIHZhciBoZWlnaHQgPSBzbm90LmhlaWdodDtcblxuICAgIHZhciByeSA9ICh4IC8gd2lkdGggLSAwLjUpICogZm92O1xuICAgIHZhciByeCA9ICh5IC8gaGVpZ2h0LTAuNSkgKiBmb3YgKiBoZWlnaHQgLyB3aWR0aDtcbiAgICB2YXIgciA9IGNvcyhmb3YgLyAyICogYXJjRmFjdG9yKSAqIGJnX3NpemU7XG4gICAgdmFyIHJhdGlveCA9ICh4IC0gd2lkdGggLyAyKSAvIHdpZHRoICogMjtcbiAgICB2YXIgcmF0aW95ID0gKHkgLSBoZWlnaHQgLyAyKSAvIHdpZHRoICogMjtcbiAgICB2YXIgUCA9IHNpbihmb3YgLyAyICogYXJjRmFjdG9yKSAqIGJnX3NpemU7XG5cbiAgICByeSA9IGF0YW4ocmF0aW94ICogUCAvIHIpO1xuICAgIHJ4ID0gYXRhbihyYXRpb3kgKiBQIC8gcik7XG5cbiAgICByeSAqPSAxODAgLyBQSTtcbiAgICByeCAqPSAxODAgLyBQSTtcblxuICAgIHZhciB4eXoyID0gdXRpbC5yb3RhdGlvbl90b19wb3NpdGlvbihSLCByeCwgMCk7XG5cbiAgICB2YXIgcnIgPSBkaXN0YW5jZTNEKC0gdGFuKHJ5ICogYXJjRmFjdG9yKSAqIHh5ejJbMl0sIC0geHl6MlsxXSwgeHl6MlsyXSwgMCwgMCwgMCk7XG4gICAgdmFyIHJhdGlvID0gUiAvIHJyO1xuXG4gICAgdmFyIG5ld194ID0gLSB0YW4ocnkgKiBQSSAvIDE4MCkgKiB4eXoyWzJdICogcmF0aW87XG4gICAgdmFyIG5ld195ID0gLSB4eXoyWzFdICogcmF0aW87XG4gICAgdmFyIG5ld196ID0geHl6MlsyXSAqIHJhdGlvO1xuXG4gICAgdmFyIHBvcyA9IHZfc2V0X2Zyb21fbWF0cml4X3Bvc2l0aW9uKG1fbXVsdGlwbHkoXG4gICAgICBtX21ha2Vfcm90YXRpb25fYXhpcyh7eDogMCwgeTogMSwgejogMH0sIC0gc25vdC5yeSAqIFBJIC8gMTgwKSxcbiAgICAgIG1fbWFrZV9yb3RhdGlvbl9heGlzKHt4OiAwLCB5OiAwLCB6OiAxfSwgLSBzbm90LnJ6ICogUEkgLyAxODApLFxuICAgICAgbV9tYWtlX3JvdGF0aW9uX2F4aXMoe3g6IDEsIHk6IDAsIHo6IDB9LCAtIHNub3QucnggKiBQSSAvIDE4MCksXG4gICAgICBtX3NldF9wb3NpdGlvbih7eDogbmV3X3gsIHk6IG5ld195LCB6OiBuZXdfen0pXG4gICAgKSk7XG5cbiAgICBheCA9IC0gcG9zLng7XG4gICAgYXkgPSBwb3MueTtcbiAgICBheiA9IHBvcy56O1xuXG4gICAgdmFyIG1pbl9vZmZzZXQgPSAwLjQ7XG4gICAgdmFyIG1pbl9kaXN0YW5jZSA9IHNub3QubWluX2RldGVjdF9kaXN0YW5jZTtcbiAgICB2YXIgbmVhcmVzdDtcblxuICAgIHZhciBzcHJpdGVDb250YWluZXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc3ByaXRlLWNvbnRhaW5lcicpO1xuICAgIGZvciAodmFyIGkgPSAwIDtpIDwgc3ByaXRlQ29udGFpbmVycy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNlbGYgPSBzcHJpdGVDb250YWluZXJzW2ldO1xuICAgICAgdmFyIG1hdHJpeCA9IHV0aWwuY3NzX3RleHRfdG9fbWF0cml4KHNlbGYuc3R5bGUud2Via2l0VHJhbnNmb3JtKTtcbiAgICAgIHZhciByYXRlXyA9IDEwMCAvIGRpc3RhbmNlM0QoMCwgMCwgMCwgc25vdC5iZ19zaXplIC8gMiAtIG1hdHJpeFsxMl0sIG1hdHJpeFsxM10gLSBzbm90LmJnX3NpemUgLyAyLCAtIG1hdHJpeFsxNF0pO1xuXG4gICAgICB2YXIgZGlzdGFuY2UgPSBkaXN0YW5jZTNEKC0gYXgsIC0gYXksIGF6LCAoc25vdC5iZ19zaXplIC8gMiAtIG1hdHJpeFsxMl0pICogcmF0ZV8sIHJhdGVfICogKG1hdHJpeFsxM10gLSBzbm90LmJnX3NpemUgLyAyKSwgcmF0ZV8gKiAoIC0gbWF0cml4WzE0XSkpO1xuICAgICAgaWYgKGRpc3RhbmNlIDwgbWluX2Rpc3RhbmNlKSB7XG4gICAgICAgIG1pbl9kaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICBuZWFyZXN0ID0gc2VsZi5jaGlsZHJlblswXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcm90YXRpb24gPSB1dGlsLnBvc2l0aW9uX3RvX3JvdGF0aW9uKGF4LCBheiwgYXkpO1xuICAgIGlmIChuZWFyZXN0KSB7XG4gICAgICBzbm90Lm9uX3Nwcml0ZV9jbGljayhzbm90LnNwcml0ZXNbbmVhcmVzdC5wYXJlbnRFbGVtZW50LmlkXSwgbmVhcmVzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNub3Qub25fY2xpY2soYXgsIGF5LCBheiwgcm90YXRpb25bMF0sIHJvdGF0aW9uWzFdKTtcbiAgICB9XG4gIH1cblxuICB2YXIgbW91c2VVcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICB2YXIgeCA9IGZsb29yKGV2ZW50LmNsaWVudFggPj0gMCA/IGV2ZW50LmNsaWVudFggOiBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCk7XG4gICAgdmFyIHkgPSBmbG9vcihldmVudC5jbGllbnRZID49IDAgPyBldmVudC5jbGllbnRZIDogZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkpO1xuICAgIHggLT0gZG9tX29mZnNldF9sZWZ0O1xuICAgIHkgLT0gZG9tX29mZnNldF90b3A7XG5cbiAgICAvL1NjcmVlbiBjb29yZGluYXRlIHRvIFNwaGVyZSAzZCBjb29yZGluYXRlXG4gICAgaWYgKGRpc3RhbmNlMkQobW91c2VEb3duWCwgbW91c2VEb3duWSwgeCwgeSkgPCA1KSB7XG4gICAgICBvbl9jbGljayh4LCB5KTtcbiAgICB9XG4gICAgdG91Y2hlcy5vblRvdWNoaW5nID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBfcnVuKCkge1xuICAgIHNub3QuX2FuaW1hdGVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShfcnVuKTtcbiAgICBpZiAoIXNub3QucGF1c2VfYW5pbWF0aW9uKSB7XG4gICAgICBfdXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbV9tYWtlX3JvdGF0aW9uX2Zyb21fcXVhdGVybmlvbihxKSB7XG4gICAgcmV0dXJuIG5ldyBUSFJFRS5NYXRyaXg0KCkubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSk7XG4gIH1cblxuICB2YXIgY2FtZXJhX2V1bGVyID0gbmV3IFRIUkVFLkV1bGVyKCk7XG4gIHZhciB0YXJnZXRfcXVhdCA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XG4gIHZhciByb3RhdGVfOTBfcXVhdCA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKC0gc3FydCggMC41ICksIDAsIDAsIHNxcnQoIDAuNSApKVxuICB2YXIgYWRqdXN0X3NjcmVlbl9xdWF0cyA9IHtcbiAgICAwOiBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21BeGlzQW5nbGUobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMSksIDApLFxuICAgIDkwOiBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21BeGlzQW5nbGUobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMSksIC0gOTApLFxuICAgIDE4MDogbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tQXhpc0FuZ2xlKG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDEpLCAtIDE4MCksXG4gICAgJy05MCc6IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbUF4aXNBbmdsZShuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAxKSwgOTApLFxuICB9O1xuICB2YXIgbG9va19hdF9ldWxlciA9IG5ldyBUSFJFRS5FdWxlcigpO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZV9jYW1lcmEoeCwgeSwgeikge1xuXG4gICAgY2FtZXJhX2V1bGVyLnNldCh5LCB4LCB6LCAnWVhaJyk7IC8vICdaWFknIGZvciB0aGUgZGV2aWNlLCBidXQgJ1lYWicgZm9yIHVzXG5cbiAgICB0YXJnZXRfcXVhdC5zZXRGcm9tRXVsZXIoY2FtZXJhX2V1bGVyKTsgLy8gb3JpZW50IHRoZSBkZXZpY2VcblxuICAgIHRhcmdldF9xdWF0Lm11bHRpcGx5KHJvdGF0ZV85MF9xdWF0KTsgLy8gY2FtZXJhIGxvb2tzIG91dCB0aGUgYmFjayBvZiB0aGUgZGV2aWNlLCBub3QgdGhlIHRvcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBQSS8yIGFyb3VuZCB0aGUgeC1heGlzXG4gICAgdGFyZ2V0X3F1YXQubXVsdGlwbHkoYWRqdXN0X3NjcmVlbl9xdWF0c1tzY3JlZW5fb3JpZW50YXRpb25dKTsgLy8gYWRqdXN0IGZvciBzY3JlZW4gb3JpZW50YXRpb25cblxuICAgIHZhciBzbGVycF9xdWF0ID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcbiAgICBUSFJFRS5RdWF0ZXJuaW9uLnNsZXJwKHRhcmdldF9xdWF0LCBwcmV2aW91c19xdWF0LCBzbGVycF9xdWF0LCAxIC0gc25vdC5zbW9vdGgpO1xuICAgIHByZXZpb3VzX3F1YXQgPSBzbGVycF9xdWF0O1xuICAgIHZhciBsb29rX2F0X3F1YXQgPSBzbGVycF9xdWF0LmNsb25lKCk7XG4gICAgbG9va19hdF9xdWF0LnggKj0gLTE7XG4gICAgbG9va19hdF9xdWF0LnogKj0gLTE7XG4gICAgdmFyIGxvb2tfYXRfbWF0ID0gbV9tYWtlX3JvdGF0aW9uX2Zyb21fcXVhdGVybmlvbihsb29rX2F0X3F1YXQubm9ybWFsaXplKCkpLnRyYW5zcG9zZSgpO1xuICAgIHZhciBsb29rX2F0X3JvdCA9IGxvb2tfYXRfZXVsZXIuc2V0RnJvbVJvdGF0aW9uTWF0cml4KGxvb2tfYXRfbWF0LCAnWFpZJyk7XG5cbiAgICBzbm90LnJ4ID0gbG9va19hdF9yb3QuX3ggKiAxODAgLyBQSTtcbiAgICBzbm90LnJ5ID0gbG9va19hdF9yb3QuX3kgKiAxODAgLyBQSTtcbiAgICBzbm90LnJ6ID0gbG9va19hdF9yb3QuX3ogKiAxODAgLyBQSTtcblxuICAgIHNub3QuY2FtZXJhX2xvb2tfYXQgPSB2X3NldF9mcm9tX21hdHJpeF9wb3NpdGlvbihtX211bHRpcGx5KFxuICAgICAgbV9tYWtlX3JvdGF0aW9uX2F4aXMoe3g6IDAsIHk6IDEsIHo6IDB9LCBsb29rX2F0X3JvdC5feSksXG4gICAgICBtX21ha2Vfcm90YXRpb25fYXhpcyh7eDogMCwgeTogMCwgejogMX0sIGxvb2tfYXRfcm90Ll96KSxcbiAgICAgIG1fbWFrZV9yb3RhdGlvbl9heGlzKHt4OiAxLCB5OiAwLCB6OiAwfSwgLSBsb29rX2F0X3JvdC5feCksXG4gICAgICBtX3NldF9wb3NpdGlvbih7eDogMCwgeTogMCwgejogMX0pXG4gICAgKSk7IC8vIGJhZCBwZXJmb3JtYW5jZSBoZXJlXG5cbiAgICBzbm90LmNhbWVyYS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWignICsgZXBzaWxvbihzbm90LnBlcnNwZWN0aXZlKSArICdweCknICsgXCIgbWF0cml4M2QoXCIgKyBsb29rX2F0X21hdC5lbGVtZW50cyArIFwiKVwiKyBzbm90LmNhbWVyYUJhc2VUcmFuc2Zvcm07XG4gIH1cblxuICBmdW5jdGlvbiBfdXBkYXRlKCkge1xuICAgIHNub3QuZnJhbWVzKys7XG5cbiAgICBpZiAoc25vdC5neXJvKSB7XG4gICAgICBpZiAodmFycy5hbHBoYSA9PT0gLTEgJiYgdmFycy5iZXRhID09PSAtMSAmJiB2YXJzLmdhbW1hID09PSAtIDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGVfY2FtZXJhKHZhcnMuYWxwaGEsIHZhcnMuYmV0YSwgLSB2YXJzLmdhbW1hKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHByZXZfZ3lybykge1xuICAgICAgICBkaXN0X3J4ID0gMDtcbiAgICAgICAgZGlzdF9yeSA9IDA7XG4gICAgICB9XG4gICAgICBkaXN0X3J5ICs9IHNub3QuYXV0b19yb3RhdGlvbjtcbiAgICAgIHVwZGF0ZV9jYW1lcmEoIC0gZGlzdF9yeSAqIFBJIC8gMTgwLCBkaXN0X3J4ICogUEkgLyAxODAgKyBQSSAvIDIsIDApO1xuICAgIH1cbiAgICBwcmV2X2d5cm8gPSBzbm90Lmd5cm87XG5cbiAgICBmb3IgKHZhciBpIGluIHNub3Quc3ByaXRlcykge1xuICAgICAgdmFyIHNwcml0ZSA9IHNub3Quc3ByaXRlc1tpXTtcbiAgICAgIGlmIChzcHJpdGUubmVlZF91cGRhdGVfcG9zaXRpb24pIHtcbiAgICAgICAgc3ByaXRlLm5lZWRfdXBkYXRlX3Bvc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIHVwZGF0ZV9zcHJpdGVfcG9zaXRpb24oc3ByaXRlLmlkKTtcbiAgICAgIH1cbiAgICAgIGlmIChzcHJpdGUubmVlZF91cGRhdGVfdmlzaWJpbGl0eSkge1xuICAgICAgICBzcHJpdGUubmVlZF91cGRhdGVfdmlzaWJpbGl0eSA9IGZhbHNlO1xuICAgICAgICB1cGRhdGVfc3ByaXRlX3Zpc2liaWxpdHkoc3ByaXRlLmlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgIHNjcmVlbl9vcmllbnRhdGlvbiA9IHdpbmRvdy5vcmllbnRhdGlvbiB8fCAwO1xuICB9LCBmYWxzZSApO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgaWYgKGV2LmFscGhhICE9PSBudWxsKSB7XG4gICAgICB2YXJzLmJldGEgPSBldi5iZXRhICAqIE1hdGguUEkgLyAxODAgO1xuICAgICAgdmFycy5nYW1tYSA9IGV2LmdhbW1hICAqIE1hdGguUEkgLyAxODA7XG4gICAgICB2YXJzLmFscGhhID0gZXYuYWxwaGEgICogTWF0aC5QSSAvIDE4MDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFycy5iZXRhID0gdmFycy5nYW1tYSA9IHZhcnMuYWxwaGEgPSAtMTtcbiAgICB9XG4gIH0sIHRydWUpO1xuXG5cbiAgdmFyIF9zZXRSeCA9IGZ1bmN0aW9uKHJ4LCBzbW9vdGgpIHtcbiAgICAvL1RPRE9cbiAgfVxuXG4gIHZhciBfc2V0Unk9ZnVuY3Rpb24ocnksc21vb3RoKXtcbiAgICAvL1RPRE9cbiAgfVxuXG4gIGZ1bmN0aW9uIG1lcmdlX2pzb24ob2JqLCBqc29uKSB7XG4gICAgZm9yICh2YXIgaSBpbiBqc29uKSB7XG4gICAgICBpZiAob2JqW2ldID09IHVuZGVmaW5lZCkge1xuICAgICAgICBvYmpbaV0gPSBqc29uW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG1lcmdlX2pzb24oc25vdCwge1xuICAgIHNldEZvdjogc2V0X2ZvdixcbiAgICBzZXRSeDogX3NldFJ4LFxuICAgIHNldFJ5OiBfc2V0UnksXG4gICAgaW5pdDogX2luaXQsXG4gICAgcnVuOiBfcnVuLFxuICAgIHVwZGF0ZTogX3VwZGF0ZSxcbiAgICBsb2FkX3Nwcml0ZXM6IF9sb2FkX3Nwcml0ZXMsXG4gIH0pO1xufSh3aW5kb3cpO1xuIiwiIWZ1bmN0aW9uKGdsb2JhbCkge1xuXG4gIHZhciBzbm90ID0ge1xuXG4gICAgY2FtZXJhX2xvb2tfYXQ6IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgejogMSxcbiAgICB9LFxuICAgIG1vdXNlX3NlbnNpdGl2aXR5OiAwLjMsXG4gICAgYXV0b19yb3RhdGlvbjogMCxcbiAgICBmcmFtZXM6MCxcbiAgICBiZ19yb3RhdGlvbjogWzAsIDAsIDAsIDAsIDAsIDBdLFxuXG4gICAgcGF1c2VfYW5pbWF0aW9uOiBmYWxzZSxcbiAgICBnZW5lcmF0b3I6IHtcbiAgICAgIHRleHQ6IHRleHRfZ2VuZXJhdG9yLFxuICAgIH0sXG5cbiAgICBkb20gICAgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbm90LXdyYXAnKSxcbiAgICBjYW1lcmEgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbm90LWNhbWVyYScpLFxuICAgIGNvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nub3QtY29udGFpbmVyJyksXG5cbiAgICBiZ19zaXplOiAxMDI0LFxuXG4gICAgZ3lybzogZmFsc2UsXG5cbiAgICBzbW9vdGg6IDAuMTcsXG4gICAgcXVhdGVybmlvbjoge30sXG5cbiAgICByejogMCxcbiAgICByeTogMCwgICAgICAgLy8gUm90YXRlICogZGVncmVlIGFyb3VuZCB5IGF4aXNcbiAgICByeDogMCwgICAgICAgLy8gUm90YXRlICogZGVncmVlIGFyb3VuZCB4IGF4aXNcbiAgICBtYXhfZm92OiAxMjAsIC8vIE1heCBmaWVsZCBvZiB2aWV3IChkZWdyZWUpXG4gICAgbWluX2ZvdjogNjAsICAvLyBNaW4gZmllbGQgb2YgdmlldyAoZGVncmVlKVxuICAgIGZvdjogOTAsICAgICAvLyBEZWZhdWx0IGZpZWxkIG9mIHZpZXdcbiAgfTtcblxuICBpZiAoZ2xvYmFsLnNub3QpIHtcbiAgICBmb3IgKHZhciBpIGluIHNub3QpIHtcbiAgICAgIGdsb2JhbC5zbm90W2ldID0gc25vdFtpXTtcbiAgICB9XG4gICAgc25vdCA9IGdsb2JhbC5zbm90O1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoJ3Nub3QtdXRpbHMuanMgaXMgbWlzc2luZycpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgdXRpbCA9IGdsb2JhbC5zbm90LnV0aWw7XG4gIHZhciBlcHNpbG9uID0gdXRpbC5lcHNpbG9uO1xuICB2YXIgZGlzdGFuY2UzRCA9IHV0aWwuZGlzdGFuY2UzRDtcbiAgdmFyIGRpc3RhbmNlMkQgPSB1dGlsLmRpc3RhbmNlMkQ7XG5cbiAgdmFyIGNhbWVyYTtcbiAgdmFyIHNjZW5lO1xuICB2YXIgcmVuZGVyZXI7XG4gIHZhciBiZ19tYXRlcmlhbHMgPSBbXTtcbiAgdmFyIHN1c3BlY3RzID0gW107XG4gIHZhciBzcHJpdGVzID0ge307XG4gIHZhciBkaXN0X3J5O1xuICB2YXIgZGlzdF9yeDtcbiAgdmFyIF9vdmVyZHJhdyA9IDE7XG4gIFRIUkVFLkltYWdlVXRpbHMuY3Jvc3NPcmlnaW4gPSAnKic7XG5cbiAgdmFyIG1vdXNlX2Rvd25feDtcbiAgdmFyIG1vdXNlX2Rvd25fcng7XG4gIHZhciBtb3VzZV9kb3duX3J5O1xuICB2YXIgbW91c2VfZG93bl95O1xuICB2YXIgaXNfbW91c2VfZG93biA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIF9wb2ludFN0YW5kYXJkbGl6YXRpb24oeCwgeSwgeikge1xuICAgIHZhciByYXRpbz0yMDAvZGlzdGFuY2UzRCh4LCB5LCB6LCAwLCAwLCAwKTtcbiAgICByZXR1cm4gW3ggKiByYXRpbywgeSAqIHJhdGlvLCB6ICogcmF0aW9dO1xuICB9XG4gIC8vMCAgICAgMSAgICAyICAgIDMgICAgNCAgIDVcbiAgLy9mcm9udCBkb3duIGxlZnQgYmFjayB0b3AgcmlnaHRcbiAgLy9mcm9udCBkb3duIGxlZnQgYmFjayB0b3AgcmlnaHRcbiAgdmFyIGltZ19pbmRleF9jb252ZXJ0ID0gWzMsIDAsIDQsIDEsIDUsIDJdO1xuICBmdW5jdGlvbiBsb2FkX2JnX2ltZ3MoaW1ncykge1xuICAgIHZhciBzaXplID0gc25vdC5iZ19zaXplO1xuICAgIHZhciBwcmVjaXNpb24gPSAxO1xuICAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShzaXplLCBzaXplLCBzaXplLCBwcmVjaXNpb24sIHByZWNpc2lvbiwgcHJlY2lzaW9uKTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7aW5kZXggPCA2OyArK2luZGV4KSB7XG4gICAgICB2YXIgaW1nX3VybCA9IGltZ3NbaW1nX2luZGV4X2NvbnZlcnRbaW5kZXhdXTtcbiAgICAgIGJnX21hdGVyaWFscy5wdXNoKG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICAgIG1hcDogVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShpbWdfdXJsLCBUSFJFRS5VVk1hcHBpbmcpLFxuICAgICAgICBvdmVyZHJhdzogX292ZXJkcmF3XG4gICAgICB9KSk7XG4gICAgfVxuICAgIHZhciBtYXRlcmlhbD0gbmV3IFRIUkVFLk1lc2hGYWNlTWF0ZXJpYWwoYmdfbWF0ZXJpYWxzKTtcbiAgICB2YXIgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG4gICAgbWVzaC5zY2FsZS54ID0gLSAxO1xuXG4gICAgc2NlbmUuYWRkKG1lc2gpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGV4dF9nZW5lcmF0b3IoeCwgeSwgeiwgdGV4dCwgc2l6ZSwgcm90YXRpb25feCwgY29sb3IpIHtcbiAgICB2YXIgcmF0ZSA9IDIwO1xuXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdmFyIGNoID0gcGFyc2VJbnQoY2FudmFzLmhlaWdodCk7XG4gICAgdmFyIGN3ID0gcGFyc2VJbnQoY2FudmFzLndpZHRoKTtcbiAgICBmdW5jdGlvbiBkcmF3Q2FudmFzKHRleHQsIHNpemUpIHtcbiAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGNvbnRleHQuZm9udCA9IHNpemUgKyAncHggU1RIZWl0aSc7XG4gICAgICBpZiAoIWNvbG9yKSB7XG4gICAgICAgIGNvbnRleHQuc2hhZG93T2Zmc2V0WCA9IDU7XG4gICAgICAgIGNvbnRleHQuc2hhZG93T2Zmc2V0WSA9IDU7XG4gICAgICAgIGNvbnRleHQuc2hhZG93Qmx1ciA9IDIwO1xuICAgICAgICBjb250ZXh0LnNoYWRvd0NvbG9yID0gJ3JnYmEoMCwwLDAsMSknO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICcjZmZmJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICB9XG4gICAgICBjb250ZXh0LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICB9XG4gICAgZHJhd0NhbnZhcyh0ZXh0LCBzaXplKTtcbiAgICBjYW52YXMud2lkdGggPSBwYXJzZUludChjb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoICsgMTApO1xuICAgIGNoID0gcGFyc2VJbnQoY2FudmFzLmhlaWdodCk7XG4gICAgY3cgPSBwYXJzZUludChjYW52YXMud2lkdGgpO1xuICAgIGRyYXdDYW52YXModGV4dCwgc2l6ZSk7XG4gICAgY29udGV4dC5maWxsVGV4dCh0ZXh0LCBjdyAvIDIsIGNoIC8gMik7XG5cbiAgICB2YXIgZ2VvbSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGN3IC8gcmF0ZSwgY2ggLyByYXRlLCAxLCAxKTtcbiAgICB2YXIgY1RleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZShjYW52YXMpO1xuICAgIHZhciBtYXQgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe21hcDpjVGV4dHVyZSwgdHJhbnNwYXJlbnQ6dHJ1ZSwgb3ZlcmRyYXc6X292ZXJkcmF3fSk7XG4gICAgY1RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHZhciBtZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvbSwgbWF0KTtcblxuICAgIG1lc2gucG9zaXRpb24uc2V0KHgsIHksIHopO1xuXG4gICAgaWYgKHJvdGF0aW9uX3gpIHtcbiAgICAgIHJvdGF0aW9uX3ggPSByb3RhdGlvbl94ICogTWF0aC5QSSAvIDE4MDtcbiAgICAgIG1lc2gucm90YXRpb24ueCA9IHJvdGF0aW9uX3g7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciByb3RhdGlvbiA9IHV0aWwucG9zaXRpb25fdG9fcm90YXRpb24oeCwgeiwgeSk7XG4gICAgICByb3RhdGlvbi5yeSA9IDI3MCAtIHJvdGF0aW9uLnJ5O1xuICAgICAgcm90YXRpb24ucnkgPSByb3RhdGlvbi5yeSA8IDAgPyByb3RhdGlvbi5yeSArIDM2MCA6IHJvdGF0aW9uLnJ5O1xuICAgICAgbWVzaC5yb3RhdGlvbi55ID0gcm90YXRpb24ucnkgKiBNYXRoLlBJIC8gMTgwO1xuICAgIH1cblxuICAgIHJldHVybiBtZXNoO1xuICB9XG4gIGZ1bmN0aW9uIGluaXQoY29uZmlnKSB7XG4gICAgZm9yICh2YXIgaSBpbiBjb25maWcpIHtcbiAgICAgIGlmIChpID09ICdnZW5lcmF0b3InKSB7XG4gICAgICAgIGZvciAodmFyIGogaW4gY29uZmlnLmdlbmVyYXRvcikge1xuICAgICAgICAgIHNub3QuZ2VuZXJhdG9yW2pdID0gY29uZmlnLmdlbmVyYXRvcltqXTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHNub3RbaV0gPSBjb25maWdbaV07XG4gICAgfVxuICAgIHZhciBzbW9vdGggPSBzbm90LnNtb290aDtcbiAgICBzbm90LnNtb290aCA9IDA7XG4gICAgZm9yICh2YXIgaSBpbiBzcHJpdGVzKSB7XG4gICAgICBzY2VuZS5yZW1vdmUoc2NlbmUuZ2V0T2JqZWN0QnlOYW1lKGkpKTtcbiAgICB9XG4gICAgc3ByaXRlcyA9IHt9O1xuICAgIHZhciByeCA9IHNub3Qucng7XG4gICAgdmFyIHJ5ID0gc25vdC5yeTtcblxuICAgIHZhciBjb250YWluZXIgPSBzbm90LmNvbnRhaW5lcjtcbiAgICBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoc25vdC5mb3YsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAxLCAxMTAwKTtcbiAgICBjYW1lcmEudGFyZ2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMCk7XG4gICAgc25vdC5jYW1lcmEgPSBjYW1lcmE7XG5cbiAgICBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuXG4gICAgc25vdC5zY2VuZSA9IHNjZW5lO1xuXG4gICAgaWYgKGNvbmZpZy5jYWxsYmFjaykge1xuICAgICAgY29uZmlnLmNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGxvYWRfYmdfaW1ncyhjb25maWcuYmdfaW1ncyk7XG5cbiAgICB2YXIgU3BoZXJlR2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoc25vdC5iZ19zaXplICogMS44LCAzMiwgMzIpO1xuICAgIHZhciBTcGhlcmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4ZmYwMGZmLCBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlfSk7XG4gICAgdmFyIFNwaGVyZU1lc2ggPSBuZXcgVEhSRUUuTWVzaChTcGhlcmVHZW9tZXRyeSwgU3BoZXJlTWF0ZXJpYWwpO1xuICAgIHNjZW5lLmFkZChTcGhlcmVNZXNoKTtcbiAgICBzdXNwZWN0cy5wdXNoKFNwaGVyZU1lc2gpO1xuXG4gICAgbG9hZF9zcHJpdGVzKGNvbmZpZy5zcHJpdGVzKTtcblxuICAgIHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoKTtcblxuICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgIHJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvbkRvY3VtZW50TW91c2VEb3duLCBmYWxzZSk7XG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uRG9jdW1lbnRNb3VzZU1vdmUsIGZhbHNlKTtcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvbkRvY3VtZW50TW91c2VVcCwgZmFsc2UpO1xuXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uRG9jdW1lbnRNb3VzZURvd24sIGZhbHNlKTtcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Eb2N1bWVudE1vdXNlTW92ZSwgZmFsc2UpO1xuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Eb2N1bWVudE1vdXNlVXAsIGZhbHNlKTtcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIG9uRG9jdW1lbnRNb3VzZVdoZWVsLCBmYWxzZSk7XG4gICAgLy9jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBvbkRvY3VtZW50TW91c2VXaGVlbCwgZmFsc2UpO1xuXG4gICAgdXBkYXRlKCk7XG4gICAgc25vdC5zbW9vdGggPSBzbW9vdGg7XG4gIH1cblxuICBmdW5jdGlvbiBvbkRvY3VtZW50TW91c2VEb3duKGV2ZW50KSB7XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgaXNfbW91c2VfZG93biA9IHRydWU7XG4gICAgdmFyIHggPSBwYXJzZUludChldmVudC5jbGllbnRYID49IDAgPyBldmVudC5jbGllbnRYIDogZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCk7XG4gICAgdmFyIHkgPSBwYXJzZUludChldmVudC5jbGllbnRZID49IDAgPyBldmVudC5jbGllbnRZIDogZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSk7XG4gICAgbW91c2VfZG93bl94ID0geDtcbiAgICBtb3VzZV9kb3duX3kgPSB5O1xuICAgIG1vdXNlX2Rvd25fcnkgPSBzbm90LnJ5O1xuICAgIG1vdXNlX2Rvd25fcnggPSBzbm90LnJ4O1xuXG4gIH1cblxuXG4gIGZ1bmN0aW9uIG9uRG9jdW1lbnRNb3VzZU1vdmUoIGV2ZW50ICkge1xuXG4gICAgaWYgKCFpc19tb3VzZV9kb3duKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHggPSBwYXJzZUludChldmVudC5jbGllbnRYID49IDAgPyBldmVudC5jbGllbnRYIDogZXZlbnQudG91Y2hlc1swXS5wYWdlWCk7XG4gICAgdmFyIHkgPSBwYXJzZUludChldmVudC5jbGllbnRZID49IDAgPyBldmVudC5jbGllbnRZIDogZXZlbnQudG91Y2hlc1swXS5wYWdlWSk7XG5cbiAgICBpZiAoZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkaXN0X3J5ID0gKG1vdXNlX2Rvd25feCAtIHgpICogc25vdC5tb3VzZV9zZW5zaXRpdml0eSArIG1vdXNlX2Rvd25fcnk7XG4gICAgZGlzdF9yeCA9ICh5IC0gbW91c2VfZG93bl95KSAqIHNub3QubW91c2Vfc2Vuc2l0aXZpdHkgKyBtb3VzZV9kb3duX3J4O1xuICAgIGRpc3RfcnggPSBkaXN0X3J4ID49IDkwID8gODkgOiBkaXN0X3J4O1xuICAgIGRpc3RfcnggPSBkaXN0X3J4IDw9IC0gOTAgPyAtODkgOiBkaXN0X3J4O1xuXG4gICAgc25vdC5yeCA9IGRpc3Rfcng7XG4gICAgc25vdC5yeSA9IGRpc3Rfcnk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkRvY3VtZW50TW91c2VVcChldmVudCkge1xuICAgIGlzX21vdXNlX2Rvd24gPSBmYWxzZTtcbiAgICB2YXIgeCA9IHBhcnNlSW50KGV2ZW50LmNsaWVudFggPj0gMCA/IGV2ZW50LmNsaWVudFggOiBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCk7XG4gICAgdmFyIHkgPSBwYXJzZUludChldmVudC5jbGllbnRZID49IDAgPyBldmVudC5jbGllbnRZIDogZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkpO1xuXG4gICAgaWYgKHV0aWwuZGlzdGFuY2UyRCh4LCB5LCBtb3VzZV9kb3duX3gsIG1vdXNlX2Rvd25feSkgPCA1KSB7Ly/ljZXlh7tcbiAgICAgIHZhciByYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XG4gICAgICB2YXIgbW91c2UgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuICAgICAgbW91c2Uuc2V0KCh4IC8gd2luZG93LmlubmVyV2lkdGgpICogMiAtIDEsIC0gKHkgLyB3aW5kb3cuaW5uZXJIZWlnaHQpICogMiArIDEpO1xuICAgICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIGNhbWVyYSk7XG4gICAgICByYXljYXN0ZXIuZmFyID0gc25vdC5iZ19zaXplICogMjtcbiAgICAgIHZhciBpbnRlcnNlY3RzID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoc3VzcGVjdHMpO1xuICAgICAgaWYgKGludGVyc2VjdHMubGVuZ3RoICE9IDApIHtcbiAgICAgICAgdmFyIHBvaW50ID0gaW50ZXJzZWN0c1swXS5wb2ludDtcbiAgICAgICAgaWYgKGludGVyc2VjdHNbMF0ub2JqZWN0LmRhdGEpIHtcbiAgICAgICAgICBzbm90Lm9uU3ByaXRlQ2xpY2soaW50ZXJzZWN0c1swXS5vYmplY3QuZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHN0YW5kYXJkID0gX3BvaW50U3RhbmRhcmRsaXphdGlvbihwb2ludC54LCBwb2ludC55LCBwb2ludC56KTtcbiAgICAgICAgICB2YXIgcm90YXRpb24gPSB1dGlsLnBvc2l0aW9uX3RvX3JvdGF0aW9uKHBvaW50LngsIHBvaW50LnksIHBvaW50LnopO1xuICAgICAgICAgIHNub3Qub25fY2xpY2soc3RhbmRhcmRbMF0sIHN0YW5kYXJkWzFdLCBzdGFuZGFyZFsyXSwgcm90YXRpb24ucngsIHJvdGF0aW9uLnJ5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRG9jdW1lbnRNb3VzZVdoZWVsKGV2ZW50KSB7XG5cbiAgICAvLyBXZWJLaXRcblxuICAgIGlmIChldmVudC53aGVlbERlbHRhWSkge1xuXG4gICAgICBzbm90LmZvdiAtPSBldmVudC53aGVlbERlbHRhWSAqIDAuMDU7XG5cbiAgICAgIC8vIE9wZXJhIC8gRXhwbG9yZXIgOVxuXG4gICAgfSBlbHNlIGlmIChldmVudC53aGVlbERlbHRhKSB7XG5cbiAgICAgIHNub3QuZm92IC09IGV2ZW50LndoZWVsRGVsdGEgKiAwLjA1O1xuXG4gICAgICAvLyBGaXJlZm94XG5cbiAgICB9IGVsc2UgaWYgKGV2ZW50LmRldGFpbCkge1xuXG4gICAgICBzbm90LmZvdiArPSBldmVudC5kZXRhaWwgKiAxLjA7XG5cbiAgICB9XG4gICAgc25vdC5mb3YgPSBzbm90LmZvdiA+IHNub3QubWF4X2ZvdiA/IHNub3QubWF4X2ZvdiA6IHNub3QuZm92O1xuICAgIHNub3QuZm92ID0gc25vdC5mb3YgPCBzbm90Lm1pbl9mb3YgPyBzbm90Lm1pbl9mb3YgOiBzbm90LmZvdjtcblxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuXG4gICAgc25vdC5yeSArPSBzbm90LmF1dG9fcm90YXRpb247XG5cbiAgICB2YXIgcnggPSBzbm90LnJ4O1xuICAgIHZhciByeSA9IHNub3Qucnk7XG4gICAgdmFyIHJ6ID0gc25vdC5yeiAqIE1hdGguUEkgLyAxODA7XG5cbiAgICByeSA9IFRIUkVFLk1hdGguZGVnVG9SYWQocnkgKyAxODApO1xuICAgIHJ4ID0gVEhSRUUuTWF0aC5kZWdUb1JhZChyeCAtIDkwKTtcblxuICAgIGNhbWVyYS5hdXRvVXBkYXRlTWF0cml4ID0gZmFsc2U7XG5cbiAgICB2YXIgcSA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbUF4aXNBbmdsZShuZXcgVEhSRUUuVmVjdG9yMygwLCAtIDEsIDApLCByeSk7XG4gICAgcnggKz0gTWF0aC5QSSAvIDI7XG4gICAgcSA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkubXVsdGlwbHlRdWF0ZXJuaW9ucyhxLCBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21BeGlzQW5nbGUobmV3IFRIUkVFLlZlY3RvcjMoMSwgMCwgMCksIHJ4KSk7XG4gICAgcSA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkubXVsdGlwbHlRdWF0ZXJuaW9ucyhxLCBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21BeGlzQW5nbGUobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMSksIHJ6KSk7XG5cbiAgICB2YXIgbmV3UXVhdGVybmlvbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XG4gICAgVEhSRUUuUXVhdGVybmlvbi5zbGVycChjYW1lcmEucXVhdGVybmlvbiwgcSwgbmV3UXVhdGVybmlvbiwgMSAtIHNub3Quc21vb3RoKTtcbiAgICBjYW1lcmEucXVhdGVybmlvbi5jb3B5KG5ld1F1YXRlcm5pb24pO1xuICAgIGNhbWVyYS5xdWF0ZXJuaW9uLm5vcm1hbGl6ZSgpO1xuXG4gICAgY2FtZXJhLmZvdiA9IHNub3QuZm92O1xuICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0X2Zvdihmb3YpIHtcbiAgICBzbm90LmZvdiA9IGZvdjtcbiAgICBzbm90LmZvdiA9IHNub3QuZm92ID4gc25vdC5tYXhfZm92ID8gc25vdC5tYXhfZm92IDogc25vdC5mb3Y7XG4gICAgc25vdC5mb3YgPSBzbm90LmZvdiA8IHNub3QubWluX2ZvdiA/IHNub3QubWluX2ZvdiA6IHNub3QuZm92O1xuICB9XG4gIGZ1bmN0aW9uIHNldF9yeChyeCkge1xuICAgIGRpc3RfcnggPSByeDtcbiAgfVxuICBmdW5jdGlvbiBzZXRfcnkocnkpIHtcbiAgICBkaXN0X3J5ID0gcnk7XG4gIH1cbiAgZnVuY3Rpb24gbG9hZF9zcHJpdGVzKHNwcykge1xuICAgIGZvciAodmFyIGkgaW4gc3BzKSB7XG4gICAgICB2YXIgZnVuY3Rpb25OYW1lID0gc3BzW2ldLnNwcml0ZVR5cGU7XG4gICAgICB2YXIgbWVzaCA9IHNub3QuZ2VuZXJhdG9yW2Z1bmN0aW9uTmFtZV0oc3BzW2ldKTtcblxuICAgICAgbWVzaC5kYXRhID0gc3BzW2ldO1xuICAgICAgc3ByaXRlc1ttZXNoLm5hbWVdID0gdHJ1ZTtcbiAgICAgIHN1c3BlY3RzLnB1c2gobWVzaCk7XG4gICAgICBzY2VuZS5hZGQobWVzaCk7XG5cbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gcnVuKCkge1xuICAgIHNub3QuX2FuaW1hdGVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShydW4pO1xuICAgIGlmICghc25vdC5wYXVzZV9hbmltYXRpb24pIHtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGV4dGVuZChvYmosIGpzb24pIHtcbiAgICBmb3IgKHZhciBpIGluIGpzb24pIHtcbiAgICAgIG9ialtpXSA9IGpzb25baV07XG4gICAgfVxuICB9XG4gIGV4dGVuZChnbG9iYWwuc25vdCx7XG4gICAgc2V0X2Zvdjogc2V0X2ZvdixcbiAgICBzZXRfcng6IHNldF9yeCxcbiAgICBzZXRfcnk6IHNldF9yeSxcbiAgICBpbml0OiBpbml0LFxuICAgIHJ1bjogcnVuLFxuICAgIGxvYWRfc3ByaXRlczogbG9hZF9zcHJpdGVzXG4gIH0pO1xufSh3aW5kb3cpO1xuIl19
